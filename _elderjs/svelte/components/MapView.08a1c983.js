import{S as t,i as e,s as i,b as r,t as n,m as o,f as s,g as a,h as l,d as c,n as u,j as h,a as p,k as d,l as f,p as m,u as g,a1 as y,J as _}from"../index-38121291.js";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function x(t){var e={exports:{}};return t(e,e.exports),e.exports}var v=x((function(t,e){t.exports=function(){var t,e,i;function r(r,n){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",s={};t(s),i=n(s),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=n;else t=n}return r(["exports"],(function(t){var e=i;function i(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=r}function r(t,i,r,n){const o=new e(t,i,r,n);return function(t){return o.solve(t)}}i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,r=0;r<8;r++){var n=this.sampleCurveX(i)-t;if(Math.abs(n)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=n/o}var s=0,a=1;for(i=t,r=0;r<20&&(n=this.sampleCurveX(i),!(Math.abs(n-t)<e));r++)t>n?s=i:a=i,i=.5*(a-s)+s;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};const n=r(.25,.1,.25,1);function o(t,e,i){return Math.min(i,Math.max(e,t))}function s(t,e,i){const r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function a(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}let l=1;function c(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function u(t,e,i){const r={};for(const n in t)r[n]=e.call(i||this,t[n],n,t);return r}function h(t,e,i){const r={};for(const n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r}function p(t){return Array.isArray(t)?t.map(p):"object"==typeof t&&t?u(t,p):t}const d={};function f(t){d[t]||("undefined"!=typeof console&&console.warn(t),d[t]=!0)}function m(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function g(t){let e=0;for(let i,r,n=0,o=t.length,s=o-1;n<o;s=n++)i=t[n],r=t[s],e+=(r.x-i.x)*(i.y+r.y);return e}function y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function _(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,i,r,n)=>{const o=r||n;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let x,v,b=null;function w(t){if(null==b){const e=t.navigator?t.navigator.userAgent:null;b=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return b}function S(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const I={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){const i=window.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(x||(x=document.createElement("a")),x.href=t,x.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==v&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};var T=E;function E(t,e){this.x=t,this.y=e}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(t){return t instanceof E?t:Array.isArray(t)?new E(t[0],t[1]):t};const A={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},M="mapbox-tiles";let P,z,k=500,C=50;function L(){"undefined"==typeof caches||P||(P=caches.open(M))}let D=1/0;const B={supported:!1,testSupport:function(t){!O&&R&&(U?V(t):F=t)}};let F,R,O=!1,U=!1;function V(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,R),t.isContextLost())return;B.supported=!0}catch(t){}t.deleteTexture(e),O=!0}"undefined"!=typeof document&&(R=document.createElement("img"),R.onload=function(){F&&V(F),F=null,U=!0},R.onerror=function(){O=!0,F=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const N={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(N);class $ extends Error{constructor(t,e,i,r){super(`AJAXError: ${e} (${t}): ${i}`),this.status=t,this.statusText=e,this.url=i,this.body=r}}const q=y()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function G(t,e){const i=new AbortController,r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:q(),signal:i.signal});let n=!1,o=!1;return"json"===t.type&&r.headers.set("Accept","application/json"),((i,s,a)=>{if(o)return;const l=Date.now();fetch(r).then((i=>i.ok?((i,s,a)=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((t=>{o||(s&&a&&function(t,e,i){if(L(),!P)return;const r={status:e.status,statusText:e.statusText,headers:new Headers};e.headers.forEach(((t,e)=>r.headers.set(e,t)));const n=_(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===z)try{new Response(new ReadableStream),z=!0}catch(t){z=!1}z?e(t.body):t.blob().then(e)}(e,(e=>{const i=new Response(e,r);L(),P&&P.then((e=>e.put(function(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}(t.url),i))).catch((t=>f(t.message)))})))}(r,s,a),n=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))})(i,null,l):i.blob().then((r=>e(new $(i.status,i.statusText,t.url,r)))))).catch((t=>{20!==t.code&&e(new Error(t.message))}))})(),{cancel:()=>{o=!0,n||i.abort()}}}const Z=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!y()){const i=t.url.substring(0,t.url.indexOf("://"));return(A.REGISTERED_PROTOCOLS[i]||G)(t,e)}}if(!(/^file:/.test(i=t.url)||/^file:/.test(q())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return G(t,e);if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){const i=new XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const e in t.headers)i.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=()=>{e(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let r=i.response;if("json"===t.type)try{r=JSON.parse(i.response)}catch(t){return e(t)}e(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else{const r=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});e(new $(i.status,i.statusText,t.url,r))}},i.send(t.body),{cancel:()=>i.abort()}}(t,e)},j=function(t,e){return Z(a(t,{type:"arrayBuffer"}),e)};function X(t){const e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let H,Y;H=[],Y=0;const K=function(t,e){if(B.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Y>=A.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return H.push(i),i}Y++;let i=!1;const r=()=>{if(!i)for(i=!0,Y--;H.length&&Y<A.MAX_PARALLEL_IMAGE_REQUESTS;){const t=H.shift(),{requestParameters:e,callback:i,cancelled:r}=t;r||(t.cancel=K(e,i).cancel)}},n=j(t,((t,i,n,o)=>{r(),t?e(t):i&&function(t,e){"function"==typeof createImageBitmap?function(t,e){const i=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(i).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(t,e):function(t,e){const i=new Image;i.onload=()=>{e(null,i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((()=>{i.src=W}))},i.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(t)],{type:"image/png"});i.src=t.byteLength?URL.createObjectURL(r):W}(t,e)}(i,((t,i)=>{null!=t?e(t):null!=i&&e(null,i,{cacheControl:n,expires:o})}))}));return{cancel:()=>{n.cancel(),r()}}};function J(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function Q(t,e,i){if(i&&i[t]){const r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}class tt{constructor(t,e={}){a(this,e),this.type=t}}class et extends tt{constructor(t,e={}){super("error",a({error:t},e))}}class it{on(t,e){return this._listeners=this._listeners||{},J(t,e,this._listeners),this}off(t,e){return Q(t,e,this._listeners),Q(t,e,this._oneTimeListeners),this}once(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},J(t,e,this._oneTimeListeners),this}fire(t,e){"string"==typeof t&&(t=new tt(t,e||{}));const i=t.type;if(this.listens(i)){t.target=this;const e=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of e)i.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const e of r)Q(i,e,this._oneTimeListeners),e.call(this,t);const n=this._eventedParent;n&&(a(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),n.fire(t))}else t instanceof et&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class nt{constructor(t,e,i,r){this.message=(t?`${t}: `:"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function ot(t){const e=t.value;return e?[new nt(t.key,e,"constants have been deprecated as of v8")]:[]}function st(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}function at(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function lt(t){if(Array.isArray(t))return t.map(lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=lt(t[i]);return e}return at(t)}class ct extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ut{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,i]of e)this.bindings[t]=i}concat(t){return new ut(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ht={kind:"null"},pt={kind:"number"},dt={kind:"string"},ft={kind:"boolean"},mt={kind:"color"},gt={kind:"object"},yt={kind:"value"},_t={kind:"collator"},xt={kind:"formatted"},vt={kind:"resolvedImage"};function bt(t,e){return{kind:"array",itemType:t,N:e}}function wt(t){if("array"===t.kind){const e=wt(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const St=[ht,pt,dt,ft,mt,xt,gt,bt(yt),vt];function It(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!It(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of St)if(!It(t,e))return null}return`Expected ${wt(t)} but found ${wt(e)} instead.`}function Tt(t,e){return e.some((e=>e.kind===t.kind))}function Et(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var At,Mt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pt(t){return(t=Math.round(t))<0?0:t>255?255:t}function zt(t){return Pt("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function kt(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Ct(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{At={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in Mt)return Mt[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=i.indexOf("("),n=i.indexOf(")");if(-1!==r&&n+1===i.length){var o=i.substr(0,r),s=i.substr(r+1,n-(r+1)).split(","),a=1;switch(o){case"rgba":if(4!==s.length)return null;a=kt(s.pop());case"rgb":return 3!==s.length?null:[zt(s[0]),zt(s[1]),zt(s[2]),a];case"hsla":if(4!==s.length)return null;a=kt(s.pop());case"hsl":if(3!==s.length)return null;var l=(parseFloat(s[0])%360+360)%360/360,c=kt(s[1]),u=kt(s[2]),h=u<=.5?u*(c+1):u+c-u*c,p=2*u-h;return[Pt(255*Ct(p,h,l+1/3)),Pt(255*Ct(p,h,l)),Pt(255*Ct(p,h,l-1/3)),a];default:return null}}return null}}catch(t){}class Lt{constructor(t,e,i,r=1){this.r=t,this.g=e,this.b=i,this.a=r}static parse(t){if(!t)return;if(t instanceof Lt)return t;if("string"!=typeof t)return;const e=At(t);return e?new Lt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${r})`}toArray(){const{r:t,g:e,b:i,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*i/r,r]}}Lt.black=new Lt(0,0,0,1),Lt.white=new Lt(1,1,1,1),Lt.transparent=new Lt(0,0,0,0),Lt.red=new Lt(1,0,0,1);class Dt{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Bt{constructor(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n}}class Ft{constructor(t){this.sections=t}static fromString(t){return new Ft([new Bt(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Ft?t:Ft.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class Rt{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Rt({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Ot(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,i,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ut(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Lt)return!0;if(t instanceof Dt)return!0;if(t instanceof Ft)return!0;if(t instanceof Rt)return!0;if(Array.isArray(t)){for(const e of t)if(!Ut(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Ut(t[e]))return!1;return!0}return!1}function Vt(t){if(null===t)return ht;if("string"==typeof t)return dt;if("boolean"==typeof t)return ft;if("number"==typeof t)return pt;if(t instanceof Lt)return mt;if(t instanceof Dt)return _t;if(t instanceof Ft)return xt;if(t instanceof Rt)return vt;if(Array.isArray(t)){const e=t.length;let i;for(const e of t){const t=Vt(e);if(i){if(i===t)continue;i=yt;break}i=t}return bt(i||yt,e)}return gt}function Nt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Lt||t instanceof Ft||t instanceof Rt?t.toString():JSON.stringify(t)}class $t{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ut(t[1]))return e.error("invalid value");const i=t[1];let r=Vt(i);const n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new $t(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Lt?["rgba"].concat(this.value.toArray()):this.value instanceof Ft?this.value.serialize():this.value}}class qt{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Gt={string:dt,number:pt,boolean:ft,object:gt};class Zt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,r=1;const n=t[0];if("array"===n){let n,o;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in Gt)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=Gt[i],r++}else n=yt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}i=bt(n,o)}else i=Gt[n];const o=[];for(;r<t.length;r++){const i=e.parse(t[r],r,yt);if(!i)return null;o.push(i)}return new Zt(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!It(this.type,Vt(i)))return i;if(e===this.args.length-1)throw new qt(`Expected value to be of type ${wt(this.type)}, but found ${wt(Vt(i))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((t=>t.serialize())))}}class jt{constructor(t){this.type=xt,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const r=[];let n=!1;for(let i=1;i<=t.length-1;++i){const o=t[i];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,pt),!t))return null;let i=null;if(o["text-font"]&&(i=e.parse(o["text-font"],1,bt(dt)),!i))return null;let s=null;if(o["text-color"]&&(s=e.parse(o["text-color"],1,mt),!s))return null;const a=r[r.length-1];a.scale=t,a.font=i,a.textColor=s}else{const o=e.parse(t[i],1,yt);if(!o)return null;const s=o.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new jt(r)}evaluate(t){return new Ft(this.sections.map((e=>{const i=e.content.evaluate(t);return Vt(i)===vt?new Bt("",i,null,null,null):new Bt(Nt(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class Xt{constructor(t){this.type=vt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,dt);return i?new Xt(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=Rt.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Wt={"to-boolean":ft,"to-color":mt,"to-number":pt,"to-string":dt};class Ht{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const r=Wt[i],n=[];for(let i=1;i<t.length;i++){const r=e.parse(t[i],i,yt);if(!r)return null;n.push(r)}return new Ht(r,n)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const r of this.args){if(e=r.evaluate(t),i=null,e instanceof Lt)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Ot(e[0],e[1],e[2],e[3]),!i))return new Lt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new qt(i||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new qt(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Ft.fromString(Nt(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Rt.fromString(Nt(this.args[0].evaluate(t))):Nt(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new jt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Xt(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Yt=["Unknown","Point","LineString","Polygon"];class Kt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Yt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Lt.parse(t)),e}}class Jt{constructor(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const i=t[0],r=Jt.definitions[i];if(!r)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const n=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let a=null;for(const[r,o]of s){a=new be(e.registry,e.path,null,e.scope);const s=[];let l=!1;for(let e=1;e<t.length;e++){const i=t[e],n=Array.isArray(r)?r[e-1]:r.type,o=a.parse(i,1+s.length,n);if(!o){l=!0;break}s.push(o)}if(!l)if(Array.isArray(r)&&r.length!==s.length)a.error(`Expected ${r.length} arguments, but found ${s.length} instead.`);else{for(let t=0;t<s.length;t++){const e=Array.isArray(r)?r[t]:r.type,i=s[t];a.concat(t+1).checkSubtype(e,i.type)}if(0===a.errors.length)return new Jt(i,n,o,s)}}if(1===s.length)e.errors.push(...a.errors);else{const i=(s.length?s:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(wt).join(", ")})`:`(${wt(e.type)}...)`;var e})).join(" | "),r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],1+r.length);if(!n)return null;r.push(wt(n.type))}e.error(`Expected arguments of type ${i}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){Jt.definitions=e;for(const i in e)t[i]=Jt}}class Qt{constructor(t,e,i){this.type=_t,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,ft);if(!r)return null;const n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,ft);if(!n)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,dt),!o)?null:new Qt(r,n,o)}evaluate(t){return new Dt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const te=8192;function ee(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ie(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function re(t,e){const i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*te),Math.round(r*n*te)]}function ne(t,e,i){const r=t[0]-e[0],n=t[1]-e[1],o=t[0]-i[0],s=t[1]-i[1];return r*s-o*n==0&&r*o<=0&&n*s<=0}function oe(t,e){let i=!1;for(let s=0,a=e.length;s<a;s++){const a=e[s];for(let e=0,s=a.length;e<s-1;e++){if(ne(t,a[e],a[e+1]))return!1;(n=a[e])[1]>(r=t)[1]!=(o=a[e+1])[1]>r[1]&&r[0]<(o[0]-n[0])*(r[1]-n[1])/(o[1]-n[1])+n[0]&&(i=!i)}}var r,n,o;return i}function se(t,e){for(let i=0;i<e.length;i++)if(oe(t,e[i]))return!0;return!1}function ae(t,e,i,r){const n=r[0]-i[0],o=r[1]-i[1],s=(t[0]-i[0])*o-n*(t[1]-i[1]),a=(e[0]-i[0])*o-n*(e[1]-i[1]);return s>0&&a<0||s<0&&a>0}function le(t,e,i){for(const c of i)for(let i=0;i<c.length-1;++i)if(0!=(a=[(s=c[i+1])[0]-(o=c[i])[0],s[1]-o[1]])[0]*(l=[(n=e)[0]-(r=t)[0],n[1]-r[1]])[1]-a[1]*l[0]&&ae(r,n,o,s)&&ae(o,s,r,n))return!0;var r,n,o,s,a,l;return!1}function ce(t,e){for(let i=0;i<t.length;++i)if(!oe(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(le(t[i],t[i+1],e))return!1;return!0}function ue(t,e){for(let i=0;i<e.length;i++)if(ce(t,e[i]))return!0;return!1}function he(t,e,i){const r=[];for(let n=0;n<t.length;n++){const o=[];for(let r=0;r<t[n].length;r++){const s=re(t[n][r],i);ee(e,s),o.push(s)}r.push(o)}return r}function pe(t,e,i){const r=[];for(let n=0;n<t.length;n++){const o=he(t[n],e,i);r.push(o)}return r}function de(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){const e=.5*r;let n=t[0]-i[0]>e?-r:i[0]-t[0]>e?r:0;0===n&&(n=t[0]-i[2]>e?-r:i[2]-t[0]>e?r:0),t[0]+=n}ee(e,t)}function fe(t,e,i,r){const n=Math.pow(2,r.z)*te,o=[r.x*te,r.y*te],s=[];for(const r of t)for(const t of r){const r=[t.x+o[0],t.y+o[1]];de(r,e,i,n),s.push(r)}return s}function me(t,e,i,r){const n=Math.pow(2,r.z)*te,o=[r.x*te,r.y*te],s=[];for(const i of t){const t=[];for(const r of i){const i=[r.x+o[0],r.y+o[1]];ee(e,i),t.push(i)}s.push(t)}if(e[2]-e[0]<=n/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of s)for(const r of t)de(r,e,i,n)}var a;return s}class ge{constructor(t,e){this.type=ft,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ut(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new ge(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new ge(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new ge(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){const o=he(e.coordinates,r,n),s=fe(t.geometry(),i,r,n);if(!ie(i,r))return!1;for(const t of s)if(!oe(t,o))return!1}if("MultiPolygon"===e.type){const o=pe(e.coordinates,r,n),s=fe(t.geometry(),i,r,n);if(!ie(i,r))return!1;for(const t of s)if(!se(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){const o=he(e.coordinates,r,n),s=me(t.geometry(),i,r,n);if(!ie(i,r))return!1;for(const t of s)if(!ce(t,o))return!1}if("MultiPolygon"===e.type){const o=pe(e.coordinates,r,n),s=me(t.geometry(),i,r,n);if(!ie(i,r))return!1;for(const t of s)if(!ue(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function ye(t){if(t instanceof Jt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof ge)return!1;let e=!0;return t.eachChild((t=>{e&&!ye(t)&&(e=!1)})),e}function _e(t){if(t instanceof Jt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!_e(t)&&(e=!1)})),e}function xe(t,e){if(t instanceof Jt&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!xe(t,e)&&(i=!1)})),i}class ve{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new ve(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class be{constructor(t,e=[],i,r=new ut,n=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=n,this.expectedType=i}parse(t,e,i,r,n={}){return e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)}_parse(t,e){function i(t,e,i){return"assert"===i?new Zt(e,[t]):"coerce"===i?new Ht(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const n=this.registry[r];if(n){let r=n.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,n=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==n.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==n.kind&&"string"!==n.kind){if(this.checkSubtype(t,n))return null}else r=i(r,t,e.typeAnnotation||"coerce");else r=i(r,t,e.typeAnnotation||"assert")}if(!(r instanceof $t)&&"resolvedImage"!==r.type.kind&&we(r)){const e=new Kt;try{r=new $t(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new be(this.registry,r,e||null,n,this.errors)}error(t,...e){const i=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new ct(i,t))}checkSubtype(t,e){const i=It(t,e);return i&&this.error(i),i}}function we(t){if(t instanceof ve)return we(t.boundExpression);if(t instanceof Jt&&"error"===t.name)return!1;if(t instanceof Qt)return!1;if(t instanceof ge)return!1;const e=t instanceof Ht||t instanceof Zt;let i=!0;return t.eachChild((t=>{i=e?i&&we(t):i&&t instanceof $t})),!!i&&ye(t)&&xe(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Se(t,e){const i=t.length-1;let r,n,o=0,s=i,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),r=t[a],n=t[a+1],r<=e){if(a===i||e<n)return a;o=a+1}else{if(!(r>e))throw new qt("Input is not a number.");s=a-1}return 0}class Ie{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,pt);if(!i)return null;const r=[];let n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(let i=1;i<t.length;i+=2){const o=1===i?-1/0:t[i],s=t[i+1],a=i,l=i+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=e.parse(s,l,n);if(!c)return null;n=n||c.type,r.push([o,c])}return new Ie(n,i,r)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[Se(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function Te(t,e,i){return t*(1-i)+e*i}var Ee=Object.freeze({__proto__:null,number:Te,color:function(t,e,i){return new Lt(Te(t.r,e.r,i),Te(t.g,e.g,i),Te(t.b,e.b,i),Te(t.a,e.a,i))},array:function(t,e,i){return t.map(((t,r)=>Te(t,e[r],i)))}});const Ae=.95047,Me=1.08883,Pe=4/29,ze=6/29,ke=3*ze*ze,Ce=Math.PI/180,Le=180/Math.PI;function De(t){return t>.008856451679035631?Math.pow(t,1/3):t/ke+Pe}function Be(t){return t>ze?t*t*t:ke*(t-Pe)}function Fe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Re(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Oe(t){const e=Re(t.r),i=Re(t.g),r=Re(t.b),n=De((.4124564*e+.3575761*i+.1804375*r)/Ae),o=De((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-De((.0193339*e+.119192*i+.9503041*r)/Me)),alpha:t.a}}function Ue(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Be(e),i=Ae*Be(i),r=Me*Be(r),new Lt(Fe(3.2404542*i-1.5371385*e-.4985314*r),Fe(-.969266*i+1.8760108*e+.041556*r),Fe(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}function Ve(t,e,i){const r=e-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}const Ne={forward:Oe,reverse:Ue,interpolate:function(t,e,i){return{l:Te(t.l,e.l,i),a:Te(t.a,e.a,i),b:Te(t.b,e.b,i),alpha:Te(t.alpha,e.alpha,i)}}},$e={forward:function(t){const{l:e,a:i,b:r}=Oe(t),n=Math.atan2(r,i)*Le;return{h:n<0?n+360:n,c:Math.sqrt(i*i+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Ce,i=t.c;return Ue({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:Ve(t.h,e.h,i),c:Te(t.c,e.c,i),l:Te(t.l,e.l,i),alpha:Te(t.alpha,e.alpha,i)}}};var qe=Object.freeze({__proto__:null,lab:Ne,hcl:$e});class Ge{constructor(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,i,r,n){let o=0;if("exponential"===t.name)o=Ze(i,t.base,r,n);else if("linear"===t.name)o=Ze(i,1,r,n);else if("cubic-bezier"===t.name){const s=t.controlPoints;o=new e(s[0],s[1],s[2],s[3]).solve(Ze(i,1,r,n))}return o}static parse(t,e){let[i,r,n,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(n=e.parse(n,2,pt),!n)return null;const s=[];let a=null;"interpolate-hcl"===i||"interpolate-lab"===i?a=mt:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let t=0;t<o.length;t+=2){const i=o[t],r=o[t+1],n=t+3,l=t+4;if("number"!=typeof i)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(s.length&&s[s.length-1][0]>=i)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const c=e.parse(r,l,a);if(!c)return null;a=a||c.type,s.push([i,c])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new Ge(a,i,r,n,s):e.error(`Type ${wt(a)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);const o=Se(e,r),s=Ge.interpolationFactor(this.interpolation,r,e[o],e[o+1]),a=i[o].evaluate(t),l=i[o+1].evaluate(t);return"interpolate"===this.operator?Ee[this.type.kind.toLowerCase()](a,l,s):"interpolate-hcl"===this.operator?$e.reverse($e.interpolate($e.forward(a),$e.forward(l),s)):Ne.reverse(Ne.interpolate(Ne.forward(a),Ne.forward(l),s))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function Ze(t,e,i,r){const n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}class je{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const r=e.expectedType;r&&"value"!==r.kind&&(i=r);const n=[];for(const r of t.slice(1)){const t=e.parse(r,1+n.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,n.push(t)}const o=r&&n.some((t=>It(r,t.type)));return new je(o?yt:i,n)}evaluate(t){let e,i=null,r=0;for(const n of this.args)if(r++,i=n.evaluate(t),i&&i instanceof Rt&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Xe{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let r=1;r<t.length-1;r+=2){const n=t[r];if("string"!=typeof n)return e.error(`Expected string, but found ${typeof n} instead.`,r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return r?new Xe(i,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}class We{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,pt),r=e.parse(t[2],2,bt(e.expectedType||yt));return i&&r?new We(r.type.itemType,i,r):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new qt(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new qt(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new qt(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class He{constructor(t,e){this.type=ft,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,yt),r=e.parse(t[2],2,yt);return i&&r?Tt(i.type,[ft,dt,pt,ht,yt])?new He(i,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Et(e,["boolean","string","number","null"]))throw new qt(`Expected first argument to be of type boolean, string, number or null, but found ${wt(Vt(e))} instead.`);if(!Et(i,["string","array"]))throw new qt(`Expected second argument to be of type array or string, but found ${wt(Vt(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ye{constructor(t,e,i){this.type=pt,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,yt),r=e.parse(t[2],2,yt);if(!i||!r)return null;if(!Tt(i.type,[ft,dt,pt,ht,yt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(i.type)} instead`);if(4===t.length){const n=e.parse(t[3],3,pt);return n?new Ye(i,r,n):null}return new Ye(i,r)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Et(e,["boolean","string","number","null"]))throw new qt(`Expected first argument to be of type boolean, string, number or null, but found ${wt(Vt(e))} instead.`);if(!Et(i,["string","array"]))throw new qt(`Expected second argument to be of type array or string, but found ${wt(Vt(i))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ke{constructor(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n={},o=[];for(let s=2;s<t.length-1;s+=2){let a=t[s];const l=t[s+1];Array.isArray(a)||(a=[a]);const c=e.concat(s);if(0===a.length)return c.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,Vt(t)))return null}else i=Vt(t);if(void 0!==n[String(t)])return c.error("Branch labels must be unique.");n[String(t)]=o.length}const u=e.parse(l,s,r);if(!u)return null;r=r||u.type,o.push(u)}const s=e.parse(t[1],1,yt);if(!s)return null;const a=e.parse(t[t.length-1],t.length-1,r);return a?"value"!==s.type.kind&&e.concat(1).checkSubtype(i,s.type)?null:new Ke(i,r,s,n,o,a):null}evaluate(t){const e=this.input.evaluate(t);return(Vt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],r={};for(const t of e){const e=r[this.cases[t]];void 0===e?(r[this.cases[t]]=i.length,i.push([this.cases[t],[t]])):i[e][1].push(t)}const n=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,r]of i)t.push(1===r.length?n(r[0]):r.map(n)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class Je{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r=[];for(let n=1;n<t.length-1;n+=2){const o=e.parse(t[n],n,ft);if(!o)return null;const s=e.parse(t[n+1],n+1,i);if(!s)return null;r.push([o,s]),i=i||s.type}const n=e.parse(t[t.length-1],t.length-1,i);return n?new Je(i,r,n):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Qe{constructor(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,yt),r=e.parse(t[2],2,pt);if(!i||!r)return null;if(!Tt(i.type,[bt(yt),dt,yt]))return e.error(`Expected first argument to be of type array or string, but found ${wt(i.type)} instead`);if(4===t.length){const n=e.parse(t[3],3,pt);return n?new Qe(i.type,i,r,n):null}return new Qe(i.type,i,r)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Et(e,["string","array"]))throw new qt(`Expected first argument to be of type array or string, but found ${wt(Vt(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function ti(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ei(t,e,i,r){return 0===r.compare(e,i)}function ii(t,e,i){const r="=="!==t&&"!="!==t;return class n{constructor(t,e,i){this.type=ft,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let o=e.parse(t[1],1,yt);if(!o)return null;if(!ti(i,o.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${wt(o.type)}'.`);let s=e.parse(t[2],2,yt);if(!s)return null;if(!ti(i,s.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${wt(s.type)}'.`);if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error(`Cannot compare types '${wt(o.type)}' and '${wt(s.type)}'.`);r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new Zt(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new Zt(o.type,[s])));let a=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,_t),!a)return null}return new n(o,s,a)}evaluate(n){const o=this.lhs.evaluate(n),s=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){const e=Vt(o),i=Vt(s);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new qt(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=Vt(o),i=Vt(s);if("string"!==t.kind||"string"!==i.kind)return e(n,o,s)}return this.collator?i(n,o,s,this.collator.evaluate(n)):e(n,o,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const ri=ii("==",(function(t,e,i){return e===i}),ei),ni=ii("!=",(function(t,e,i){return e!==i}),(function(t,e,i,r){return!ei(0,e,i,r)})),oi=ii("<",(function(t,e,i){return e<i}),(function(t,e,i,r){return r.compare(e,i)<0})),si=ii(">",(function(t,e,i){return e>i}),(function(t,e,i,r){return r.compare(e,i)>0})),ai=ii("<=",(function(t,e,i){return e<=i}),(function(t,e,i,r){return r.compare(e,i)<=0})),li=ii(">=",(function(t,e,i){return e>=i}),(function(t,e,i,r){return r.compare(e,i)>=0}));class ci{constructor(t,e,i,r,n){this.type=dt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,pt);if(!i)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let n=null;if(r.locale&&(n=e.parse(r.locale,1,dt),!n))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,dt),!o))return null;let s=null;if(r["min-fraction-digits"]&&(s=e.parse(r["min-fraction-digits"],1,pt),!s))return null;let a=null;return r["max-fraction-digits"]&&(a=e.parse(r["max-fraction-digits"],1,pt),!a)?null:new ci(i,n,o,s,a)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class ui{constructor(t){this.type=pt,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${wt(i.type)} instead.`):new ui(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new qt(`Expected value to be of type string or array, but found ${wt(Vt(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const hi={"==":ri,"!=":ni,">":si,"<":oi,">=":li,"<=":ai,array:Zt,at:We,boolean:Zt,case:Je,coalesce:je,collator:Qt,format:jt,image:Xt,in:He,"index-of":Ye,interpolate:Ge,"interpolate-hcl":Ge,"interpolate-lab":Ge,length:ui,let:Xe,literal:$t,match:Ke,number:Zt,"number-format":ci,object:Zt,slice:Qe,step:Ie,string:Zt,"to-boolean":Ht,"to-color":Ht,"to-number":Ht,"to-string":Ht,var:ve,within:ge};function pi(t,[e,i,r,n]){e=e.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);const o=n?n.evaluate(t):1,s=Ot(e,i,r,o);if(s)throw new qt(s);return new Lt(e/255*o,i/255*o,r/255*o,o)}function di(t,e){return t in e}function fi(t,e){const i=e[t];return void 0===i?null:i}function mi(t){return{type:t}}function gi(t){return{result:"success",value:t}}function yi(t){return{result:"error",value:t}}function _i(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function xi(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function vi(t){return!!t.expression&&t.expression.interpolated}function bi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function wi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Si(t){return t}function Ii(t,e){const i="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],n=r||!(r||void 0!==t.property),o=t.type||(vi(e)?"exponential":"interval");if(i&&((t=st({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Lt.parse(t[1])]))),t.default=Lt.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!qe[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,a,l;if("exponential"===o)s=Mi;else if("interval"===o)s=Ai;else if("categorical"===o){s=Ei,a=Object.create(null);for(const e of t.stops)a[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);s=Pi}if(r){const i={},r=[];for(let e=0;e<t.stops.length;e++){const n=t.stops[e],o=n[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),i[o].stops.push([n[0].value,n[1]])}const n=[];for(const t of r)n.push([i[t].zoom,Ii(i[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Ge.interpolationFactor.bind(void 0,o),zoomStops:n.map((t=>t[0])),evaluate:({zoom:i},r)=>Mi({stops:n,base:t.base},e,i).evaluate(i,r)}}if(n){const i="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:Ge.interpolationFactor.bind(void 0,i),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:i})=>s(t,e,i,a,l)}}return{kind:"source",evaluate(i,r){const n=r&&r.properties?r.properties[t.property]:void 0;return void 0===n?Ti(t.default,e.default):s(t,e,n,a,l)}}}function Ti(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Ei(t,e,i,r,n){return Ti(typeof i===n?r[i]:void 0,t.default,e.default)}function Ai(t,e,i){if("number"!==bi(i))return Ti(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];const n=Se(t.stops.map((t=>t[0])),i);return t.stops[n][1]}function Mi(t,e,i){const r=void 0!==t.base?t.base:1;if("number"!==bi(i))return Ti(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];const o=Se(t.stops.map((t=>t[0])),i),s=function(t,e,i,r){const n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[o][0],t.stops[o+1][0]),a=t.stops[o][1],l=t.stops[o+1][1];let c=Ee[e.type]||Si;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=qe[t.colorSpace];c=(t,i)=>e.reverse(e.interpolate(e.forward(t),e.forward(i),s))}return"function"==typeof a.evaluate?{evaluate(...t){const e=a.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==i)return c(e,i,s)}}:c(a,l,s)}function Pi(t,e,i){return"color"===e.type?i=Lt.parse(i):"formatted"===e.type?i=Ft.fromString(i.toString()):"resolvedImage"===e.type?i=Rt.fromString(i.toString()):bi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),Ti(i,t.default,e.default)}Jt.register(hi,{error:[{kind:"error"},[dt],(t,[e])=>{throw new qt(e.evaluate(t))}],typeof:[dt,[yt],(t,[e])=>wt(Vt(e.evaluate(t)))],"to-rgba":[bt(pt,4),[mt],(t,[e])=>e.evaluate(t).toArray()],rgb:[mt,[pt,pt,pt],pi],rgba:[mt,[pt,pt,pt,pt],pi],has:{type:ft,overloads:[[[dt],(t,[e])=>di(e.evaluate(t),t.properties())],[[dt,gt],(t,[e,i])=>di(e.evaluate(t),i.evaluate(t))]]},get:{type:yt,overloads:[[[dt],(t,[e])=>fi(e.evaluate(t),t.properties())],[[dt,gt],(t,[e,i])=>fi(e.evaluate(t),i.evaluate(t))]]},"feature-state":[yt,[dt],(t,[e])=>fi(e.evaluate(t),t.featureState||{})],properties:[gt,[],t=>t.properties()],"geometry-type":[dt,[],t=>t.geometryType()],id:[yt,[],t=>t.id()],zoom:[pt,[],t=>t.globals.zoom],"heatmap-density":[pt,[],t=>t.globals.heatmapDensity||0],"line-progress":[pt,[],t=>t.globals.lineProgress||0],accumulated:[yt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[pt,mi(pt),(t,e)=>{let i=0;for(const r of e)i+=r.evaluate(t);return i}],"*":[pt,mi(pt),(t,e)=>{let i=1;for(const r of e)i*=r.evaluate(t);return i}],"-":{type:pt,overloads:[[[pt,pt],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[pt],(t,[e])=>-e.evaluate(t)]]},"/":[pt,[pt,pt],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[pt,[pt,pt],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[pt,[],()=>Math.LN2],pi:[pt,[],()=>Math.PI],e:[pt,[],()=>Math.E],"^":[pt,[pt,pt],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[pt,[pt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[pt,[pt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[pt,[pt],(t,[e])=>Math.log(e.evaluate(t))],log2:[pt,[pt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[pt,[pt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[pt,[pt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[pt,[pt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[pt,[pt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[pt,[pt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[pt,[pt],(t,[e])=>Math.atan(e.evaluate(t))],min:[pt,mi(pt),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[pt,mi(pt),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[pt,[pt],(t,[e])=>Math.abs(e.evaluate(t))],round:[pt,[pt],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[pt,[pt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[pt,[pt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[ft,[dt,yt],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[ft,[yt],(t,[e])=>t.id()===e.value],"filter-type-==":[ft,[dt],(t,[e])=>t.geometryType()===e.value],"filter-<":[ft,[dt,yt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<n}],"filter-id-<":[ft,[yt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i<r}],"filter->":[ft,[dt,yt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>n}],"filter-id->":[ft,[yt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i>r}],"filter-<=":[ft,[dt,yt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<=n}],"filter-id-<=":[ft,[yt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i<=r}],"filter->=":[ft,[dt,yt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>=n}],"filter-id->=":[ft,[yt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i>=r}],"filter-has":[ft,[yt],(t,[e])=>e.value in t.properties()],"filter-has-id":[ft,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ft,[bt(dt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[ft,[bt(yt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[ft,[dt,bt(yt)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[ft,[dt,bt(yt)],(t,[e,i])=>function(t,e,i,r){for(;i<=r;){const n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:ft,overloads:[[[ft,ft],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[mi(ft),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:ft,overloads:[[[ft,ft],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[mi(ft),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[ft,[ft],(t,[e])=>!e.evaluate(t)],"is-supported-script":[ft,[dt],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[dt,[dt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[dt,[dt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[dt,mi(yt),(t,e)=>e.map((e=>Nt(e.evaluate(t)))).join("")],"resolved-locale":[dt,[_t],(t,[e])=>e.evaluate(t).resolvedLocale()]});class zi{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Kt,this._defaultValue=e?function(t){return"color"===t.type&&wi(t.default)?new Lt(0,0,0,0):"color"===t.type?Lt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,r,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new qt(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function ki(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in hi}function Ci(t,e){const i=new be(hi,[],e?function(t){const e={color:mt,string:dt,number:pt,enum:dt,boolean:ft,formatted:xt,resolvedImage:vt};return"array"===t.type?bt(e[t.value]||yt,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?gi(new zi(r,e)):yi(i.errors)}class Li{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!_e(e.expression)}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)}evaluate(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)}}class Di{constructor(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!_e(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)}evaluate(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)}interpolationFactor(t,e,i){return this.interpolationType?Ge.interpolationFactor(this.interpolationType,t,e,i):0}}function Bi(t,e){const i=Ci(t,e);if("error"===i.result)return i;const r=i.value.expression,n=ye(r);if(!n&&!_i(e))return yi([new ct("","data expressions not supported")]);const o=xe(r,["zoom"]);if(!o&&!xi(e))return yi([new ct("","zoom expressions not supported")]);const s=Ri(r);return s||o?s instanceof ct?yi([s]):s instanceof Ge&&!vi(e)?yi([new ct("",'"interpolate" expressions cannot be used with this property')]):gi(s?new Di(n?"camera":"composite",i.value,s.labels,s instanceof Ge?s.interpolation:void 0):new Li(n?"constant":"source",i.value)):yi([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fi{constructor(t,e){this._parameters=t,this._specification=e,st(this,Ii(this._parameters,this._specification))}static deserialize(t){return new Fi(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ri(t){let e=null;if(t instanceof Xe)e=Ri(t.result);else if(t instanceof je){for(const i of t.args)if(e=Ri(i),e)break}else(t instanceof Ie||t instanceof Ge)&&t.input instanceof Jt&&"zoom"===t.input.name&&(e=t);return e instanceof ct||t.eachChild((t=>{const i=Ri(t);i instanceof ct?e=i:!e&&i?e=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Oi(t){const e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,s=t.styleSpec;let a=[];const l=bi(i);if("object"!==l)return[new nt(e,i,`object expected, ${l} found`)];for(const t in i){const l=t.split(".")[0],c=r[l]||r["*"];let u;if(n[l])u=n[l];else if(r[l])u=hr;else if(n["*"])u=n["*"];else{if(!r["*"]){a.push(new nt(e,i[t],`unknown property "${t}"`));continue}u=hr}a=a.concat(u({key:(e?`${e}.`:e)+t,value:i[t],valueSpec:c,style:o,styleSpec:s,object:i,objectKey:t},i))}for(const t in r)n[t]||r[t].required&&void 0===r[t].default&&void 0===i[t]&&a.push(new nt(e,i,`missing required property "${t}"`));return a}function Ui(t){const e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,s=t.arrayElementValidator||hr;if("array"!==bi(e))return[new nt(o,e,`array expected, ${bi(e)} found`)];if(i.length&&e.length!==i.length)return[new nt(o,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new nt(o,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let a={type:i.value,values:i.values};n.$version<7&&(a.function=i.function),"object"===bi(i.value)&&(a=i.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(s({array:e,arrayIndex:t,value:e[t],valueSpec:a,style:r,styleSpec:n,key:`${o}[${t}]`}));return l}function Vi(t){const e=t.key,i=t.value,r=t.valueSpec;let n=bi(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new nt(e,i,`number expected, ${n} found`)]:"minimum"in r&&i<r.minimum?[new nt(e,i,`${i} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&i>r.maximum?[new nt(e,i,`${i} is greater than the maximum value ${r.maximum}`)]:[]}function Ni(t){const e=t.valueSpec,i=at(t.value.type);let r,n,o,s={};const a="categorical"!==i&&void 0===t.value.property,l=!a,c="array"===bi(t.value.stops)&&"array"===bi(t.value.stops[0])&&"object"===bi(t.value.stops[0][0]),u=Oi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new nt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(Ui({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===bi(r)&&0===r.length&&e.push(new nt(t.key,r,"array must have at least one stop")),e},default:function(t){return hr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&a&&u.push(new nt(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new nt(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!vi(t.valueSpec)&&u.push(new nt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!_i(t.valueSpec)?u.push(new nt(t.key,t.value,"property functions not supported")):a&&!xi(t.valueSpec)&&u.push(new nt(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==t.value.property||u.push(new nt(t.key,t.value,'"property" property is required')),u;function h(t){let i=[];const r=t.value,a=t.key;if("array"!==bi(r))return[new nt(a,r,`array expected, ${bi(r)} found`)];if(2!==r.length)return[new nt(a,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==bi(r[0]))return[new nt(a,r,`object expected, ${bi(r[0])} found`)];if(void 0===r[0].zoom)return[new nt(a,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new nt(a,r,"object stop key must have value")];if(o&&o>at(r[0].zoom))return[new nt(a,r[0].zoom,"stop zoom values must appear in ascending order")];at(r[0].zoom)!==o&&(o=at(r[0].zoom),n=void 0,s={}),i=i.concat(Oi({key:`${a}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Vi,value:p}}))}else i=i.concat(p({key:`${a}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return ki(lt(r[1]))?i.concat([new nt(`${a}[1]`,r[1],"expressions are not allowed in function stops.")]):i.concat(hr({key:`${a}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,o){const a=bi(t.value),l=at(t.value),c=null!==t.value?t.value:o;if(r){if(a!==r)return[new nt(t.key,c,`${a} stop domain type must match previous stop domain type ${r}`)]}else r=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new nt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==i){let r=`number expected, ${a} found`;return _i(e)&&void 0===i&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(t.key,c,r)]}return"categorical"!==i||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===a&&void 0!==n&&l<n?[new nt(t.key,c,"stop domain values must appear in ascending order")]:(n=l,"categorical"===i&&l in s?[new nt(t.key,c,"stop domain values must be unique")]:(s[l]=!0,[])):[new nt(t.key,c,`integer expected, found ${l}`)]}}function $i(t){const e=("property"===t.expressionContext?Bi:Ci)(lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new nt(`${t.key}${e.key}`,t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new nt(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!_e(i))return[new nt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!_e(i))return[new nt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!xe(i,["zoom","feature-state"]))return[new nt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ye(i))return[new nt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qi(t){const e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(at(i))&&n.push(new nt(e,i,`expected one of [${r.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(r.values).indexOf(at(i))&&n.push(new nt(e,i,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(i)} found`)),n}function Gi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Gi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Zi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ji(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Gi(t)||(t=Hi(t));const e=Ci(t,Zi);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,i,r)=>e.value.evaluate(t,i,{},r),needGeometry:Wi(t)}}function Xi(t,e){return t<e?-1:t>e?1:0}function Wi(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Wi(t[e]))return!0;return!1}function Hi(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Yi(t[1],t[2],"=="):"!="===e?Qi(Yi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Yi(t[1],t[2],e):"any"===e?(i=t.slice(1),["any"].concat(i.map(Hi))):"all"===e?["all"].concat(t.slice(1).map(Hi)):"none"===e?["all"].concat(t.slice(1).map(Hi).map(Qi)):"in"===e?Ki(t[1],t.slice(2)):"!in"===e?Qi(Ki(t[1],t.slice(2))):"has"===e?Ji(t[1]):"!has"===e?Qi(Ji(t[1])):"within"!==e||t;var i}function Yi(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function Ki(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Xi)]]:["filter-in-small",t,["literal",e]]}}function Ji(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Qi(t){return["!",t]}function tr(t){return Gi(lt(t.value))?$i(st({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):er(t)}function er(t){const e=t.value,i=t.key;if("array"!==bi(e))return[new nt(i,e,`array expected, ${bi(e)} found`)];const r=t.styleSpec;let n,o=[];if(e.length<1)return[new nt(i,e,"filter array must have at least 1 element")];switch(o=o.concat(qi({key:`${i}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),at(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===at(e[1])&&o.push(new nt(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new nt(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(n=bi(e[1]),"string"!==n&&o.push(new nt(`${i}[1]`,e[1],`string expected, ${n} found`)));for(let s=2;s<e.length;s++)n=bi(e[s]),"$type"===at(e[1])?o=o.concat(qi({key:`${i}[${s}]`,value:e[s],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new nt(`${i}[${s}]`,e[s],`string, number, or boolean expected, ${n} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(er({key:`${i}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":n=bi(e[1]),2!==e.length?o.push(new nt(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==n&&o.push(new nt(`${i}[1]`,e[1],`string expected, ${n} found`));break;case"within":n=bi(e[1]),2!==e.length?o.push(new nt(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==n&&o.push(new nt(`${i}[1]`,e[1],`object expected, ${n} found`))}return o}function ir(t,e){const i=t.key,r=t.style,n=t.styleSpec,o=t.value,s=t.objectKey,a=n[`${e}_${t.layerType}`];if(!a)return[];const l=s.match(/^(.*)-transition$/);if("paint"===e&&l&&a[l[1]]&&a[l[1]].transition)return hr({key:i,value:o,valueSpec:n.transition,style:r,styleSpec:n});const c=t.valueSpec||a[s];if(!c)return[new nt(i,o,`unknown property "${s}"`)];let u;if("string"===bi(o)&&_i(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new nt(i,o,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===s&&r&&!r.glyphs&&h.push(new nt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&wi(lt(o))&&"identity"===at(o.type)&&h.push(new nt(i,o,'"text-font" does not support identity functions'))),h.concat(hr({key:t.key,value:o,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:s}))}function rr(t){return ir(t,"paint")}function nr(t){return ir(t,"layout")}function or(t){let e=[];const i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new nt(r,i,'either "type" or "ref" is required'));let s=at(i.type);const a=at(i.ref);if(i.id){const o=at(i.id);for(let s=0;s<t.arrayIndex;s++){const t=n.layers[s];at(t.id)===o&&e.push(new nt(r,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new nt(r,i[t],`"${t}" is prohibited for ref layers`))})),n.layers.forEach((e=>{at(e.id)===a&&(t=e)})),t?t.ref?e.push(new nt(r,i.ref,"ref cannot reference another ref layer")):s=at(t.type):e.push(new nt(r,i.ref,`ref layer "${a}" not found`))}else if("background"!==s)if(i.source){const t=n.sources&&n.sources[i.source],o=t&&at(t.type);t?"vector"===o&&"raster"===s?e.push(new nt(r,i.source,`layer "${i.id}" requires a raster source`)):"raster"===o&&"raster"!==s?e.push(new nt(r,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==s?e.push(new nt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new nt(r,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new nt(r,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new nt(r,i.source,`source "${i.source}" not found`))}else e.push(new nt(r,i,'missing required property "source"'));return e=e.concat(Oi({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>hr({key:`${r}.type`,value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:tr,layout:t=>Oi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>nr(st({layerType:s},t))}}),paint:t=>Oi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>rr(st({layerType:s},t))}})}})),e}function sr(t){const e=t.value,i=t.key,r=bi(e);return"string"!==r?[new nt(i,e,`string expected, ${r} found`)]:[]}const ar={promoteId:function({key:t,value:e}){if("string"===bi(e))return sr({key:t,value:e});{const i=[];for(const r in e)i.push(...sr({key:`${t}.${r}`,value:e[r]}));return i}}};function lr(t){const e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new nt(i,e,'"type" is required')];const o=at(e.type);let s;switch(o){case"vector":case"raster":case"raster-dem":return s=Oi({key:i,value:e,valueSpec:r[`source_${o.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:ar}),s;case"geojson":if(s=Oi({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:ar}),e.cluster)for(const t in e.clusterProperties){const[r,n]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;s.push(...$i({key:`${i}.${t}.map`,value:n,expressionContext:"cluster-map"})),s.push(...$i({key:`${i}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return s;case"video":return Oi({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return Oi({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new nt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qi({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function cr(t){const e=t.value,i=t.styleSpec,r=i.light,n=t.style;let o=[];const s=bi(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new nt("light",e,`object expected, ${s} found`)]),o;for(const t in e){const s=t.match(/^(.*)-transition$/);o=o.concat(s&&r[s[1]]&&r[s[1]].transition?hr({key:t,value:e[t],valueSpec:i.transition,style:n,styleSpec:i}):r[t]?hr({key:t,value:e[t],valueSpec:r[t],style:n,styleSpec:i}):[new nt(t,e[t],`unknown property "${t}"`)])}return o}const ur={"*":()=>[],array:Ui,boolean:function(t){const e=t.value,i=t.key,r=bi(e);return"boolean"!==r?[new nt(i,e,`boolean expected, ${r} found`)]:[]},number:Vi,color:function(t){const e=t.key,i=t.value,r=bi(i);return"string"!==r?[new nt(e,i,`color expected, ${r} found`)]:null===At(i)?[new nt(e,i,`color expected, "${i}" found`)]:[]},constants:ot,enum:qi,filter:tr,function:Ni,layer:or,object:Oi,source:lr,light:cr,string:sr,formatted:function(t){return 0===sr(t).length?[]:$i(t)},resolvedImage:function(t){return 0===sr(t).length?[]:$i(t)}};function hr(t){const e=t.value,i=t.valueSpec,r=t.styleSpec;return i.expression&&wi(at(e))?Ni(t):i.expression&&ki(lt(e))?$i(t):i.type&&ur[i.type]?ur[i.type](t):Oi(st({},t,{valueSpec:i.type?r[i.type]:i}))}function pr(t){const e=t.value,i=t.key,r=sr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new nt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new nt(i,e,'"glyphs" url must include a "{range}" token'))),r}function dr(t,e=rt){let i=[];return i=i.concat(hr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:pr,"*":()=>[]}})),t.constants&&(i=i.concat(ot({key:"constants",value:t.constants,style:t,styleSpec:e}))),fr(i)}function fr(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function mr(t){return function(...e){return fr(t.apply(this,e))}}dr.source=mr(lr),dr.light=mr(cr),dr.layer=mr(or),dr.filter=mr(tr),dr.paintProperty=mr(rr),dr.layoutProperty=mr(nr);const gr=dr,yr=gr.light,_r=gr.paintProperty,xr=gr.layoutProperty;function vr(t,e){let i=!1;if(e&&e.length)for(const r of e)t.fire(new et(new Error(r.message))),i=!0;return i}class br{constructor(t,e,i){const r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(let t=0;t<this.d*this.d;t++){const e=n[3+t],i=n[3+t+1];r.push(e===i?null:n.subarray(e,i))}const o=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],o),this.bboxes=n.subarray(o),this.insert=this._insertReadonly}else{this.d=e+2*i;for(let t=0;t<this.d*this.d;t++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;const n=i/e*t;this.min=-n,this.max=t+n}insert(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,i,r,n,o){this.cells[n].push(o)}query(t,e,i,r,n){const o=this.min,s=this.max;if(t<=o&&e<=o&&s<=i&&s<=r&&!n)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(t,e,i,r,this._queryCell,o,{},n),o}}_queryCell(t,e,i,r,n,o,s,a){const l=this.cells[n];if(null!==l){const n=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===s[h]){const l=4*h;(a?a(c[l+0],c[l+1],c[l+2],c[l+3]):t<=c[l+2]&&e<=c[l+3]&&i>=c[l+0]&&r>=c[l+1])?(s[h]=!0,o.push(n[h])):s[h]=!1}}}}_forEachCell(t,e,i,r,n,o,s,a){const l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(i),h=this._convertToCellCoord(r);for(let p=l;p<=u;p++)for(let l=c;l<=h;l++){const c=this.d*l+p;if((!a||a(this._convertFromCellCoord(p),this._convertFromCellCoord(l),this._convertFromCellCoord(p+1),this._convertFromCellCoord(l+1)))&&n.call(this,t,e,i,r,c,o,s,a))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let i=0;for(let t=0;t<this.cells.length;t++)i+=this.cells[t].length;const r=new Int32Array(e+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let n=e;for(let e=0;e<t.length;e++){const i=t[e];r[3+e]=n,r.set(i,n),n+=i.length}return r[3+t.length]=n,r.set(this.keys,n),n+=this.keys.length,r[3+t.length+1]=n,r.set(this.bboxes,n),n+=this.bboxes.length,r.buffer}static serialize(t,e){const i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}}static deserialize(t){return new br(t.buffer)}}const wr={};function Sr(t,e,i={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),wr[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}Sr("Object",Object),Sr("TransferableGridIndex",br),Sr("Color",Lt),Sr("Error",Error),Sr("AJAXError",$),Sr("ResolvedImage",Rt),Sr("StylePropertyFunction",Fi),Sr("StyleExpression",zi,{omit:["_evaluator"]}),Sr("ZoomDependentExpression",Di),Sr("ZoomConstantExpression",Li),Sr("CompoundExpression",Jt,{omit:["_evaluate"]});for(const t in hi)hi[t]._classRegistryKey||Sr(`Expression_${t}`,hi[t]);function Ir(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Tr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(Ir(t))return e&&e.push(t),t;if(S(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const i=t;return e&&e.push(i.buffer),i}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const i=[];for(const r of t)i.push(Tr(r,e));return i}if("object"==typeof t){const i=t.constructor,r=i._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");const n=i.serialize?i.serialize(t,e):{};if(!i.serialize){for(const i in t){if(!t.hasOwnProperty(i))continue;if(wr[r].omit.indexOf(i)>=0)continue;const o=t[i];n[i]=wr[r].shallow.indexOf(i)>=0?o:Tr(o,e)}t instanceof Error&&(n.message=t.message)}if(n.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(n.$name=r),n}throw new Error("can't serialize object of type "+typeof t)}function Er(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||Ir(t)||S(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Er);if("object"==typeof t){const e=t.$name||"Object";if(!wr[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:i}=wr[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(t);const r=Object.create(i.prototype);for(const i of Object.keys(t)){if("$name"===i)continue;const n=t[i];r[i]=wr[e].shallow.indexOf(i)>=0?n:Er(n)}return r}throw new Error("can't deserialize object of type "+typeof t)}class Ar{constructor(){this.first=!0}update(t,e){const i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}const Mr={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function Pr(t){for(const e of t)if(Cr(e.charCodeAt(0)))return!0;return!1}function zr(t){for(const e of t)if(!kr(e.charCodeAt(0)))return!1;return!0}function kr(t){return!(Mr.Arabic(t)||Mr["Arabic Supplement"](t)||Mr["Arabic Extended-A"](t)||Mr["Arabic Presentation Forms-A"](t)||Mr["Arabic Presentation Forms-B"](t))}function Cr(t){return!(746!==t&&747!==t&&(t<4352||!(Mr["Bopomofo Extended"](t)||Mr.Bopomofo(t)||Mr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Mr["CJK Compatibility Ideographs"](t)||Mr["CJK Compatibility"](t)||Mr["CJK Radicals Supplement"](t)||Mr["CJK Strokes"](t)||!(!Mr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Mr["CJK Unified Ideographs Extension A"](t)||Mr["CJK Unified Ideographs"](t)||Mr["Enclosed CJK Letters and Months"](t)||Mr["Hangul Compatibility Jamo"](t)||Mr["Hangul Jamo Extended-A"](t)||Mr["Hangul Jamo Extended-B"](t)||Mr["Hangul Jamo"](t)||Mr["Hangul Syllables"](t)||Mr.Hiragana(t)||Mr["Ideographic Description Characters"](t)||Mr.Kanbun(t)||Mr["Kangxi Radicals"](t)||Mr["Katakana Phonetic Extensions"](t)||Mr.Katakana(t)&&12540!==t||!(!Mr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Mr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Mr["Unified Canadian Aboriginal Syllabics"](t)||Mr["Unified Canadian Aboriginal Syllabics Extended"](t)||Mr["Vertical Forms"](t)||Mr["Yijing Hexagram Symbols"](t)||Mr["Yi Syllables"](t)||Mr["Yi Radicals"](t))))}function Lr(t){return!(Cr(t)||function(t){return!!(Mr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Mr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Mr["Letterlike Symbols"](t)||Mr["Number Forms"](t)||Mr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Mr["Control Pictures"](t)&&9251!==t||Mr["Optical Character Recognition"](t)||Mr["Enclosed Alphanumerics"](t)||Mr["Geometric Shapes"](t)||Mr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Mr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Mr["CJK Symbols and Punctuation"](t)||Mr.Katakana(t)||Mr["Private Use Area"](t)||Mr["CJK Compatibility Forms"](t)||Mr["Small Form Variants"](t)||Mr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Dr(t){return t>=1424&&t<=2303||Mr["Arabic Presentation Forms-A"](t)||Mr["Arabic Presentation Forms-B"](t)}function Br(t,e){return!(!e&&Dr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Mr.Khmer(t))}function Fr(t){for(const e of t)if(Dr(e.charCodeAt(0)))return!0;return!1}const Rr="deferred",Or="loading",Ur="loaded";let Vr=null,Nr="unavailable",$r=null;const qr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Nr="error"),Vr&&Vr(t)};function Gr(){Zr.fire(new tt("pluginStateChange",{pluginStatus:Nr,pluginURL:$r}))}const Zr=new it,jr=function(){return Nr},Xr=function(){if(Nr!==Rr||!$r)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Nr=Or,Gr(),$r&&j({url:$r},(t=>{t?qr(t):(Nr=Ur,Gr())}))},Wr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Nr===Ur||null!=Wr.applyArabicShaping,isLoading:()=>Nr===Or,setState(t){Nr=t.pluginStatus,$r=t.pluginURL},isParsed:()=>null!=Wr.applyArabicShaping&&null!=Wr.processBidirectionalText&&null!=Wr.processStyledBidirectionalText,getPluginURL:()=>$r};class Hr{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ar,this.transition={})}isSupportedScript(t){return function(t,e){for(const i of t)if(!Br(i.charCodeAt(0),e))return!1;return!0}(t,Wr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class Yr{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(wi(t))return new Fi(t,e);if(ki(t)){const i=Bi(t,e);if("error"===i.result)throw new Error(i.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return i.value}{let i=t;return"string"==typeof t&&"color"===e.type&&(i=Lt.parse(t)),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class Kr{constructor(t){this.property=t,this.value=new Yr(t,void 0)}transitioned(t,e){return new Qr(this.property,this.value,e,a({},t.transition,this.transition),t.now)}untransitioned(){return new Qr(this.property,this.value,null,{},0)}}class Jr{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return p(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Kr(this._values[t].property)),this._values[t].value=new Yr(this._values[t].property,null===e?void 0:p(e))}getTransition(t){return p(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Kr(this._values[t].property)),this._values[t].transition=p(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i);const r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){const i=new tn(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].transitioned(t,e._values[r]);return i}untransitioned(){const t=new tn(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Qr{constructor(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){const r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(t,e,i);{const s=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),n,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(s))}}return n}}class tn{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){const r=new nn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class en{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return p(this._values[t].value)}setValue(t,e){this._values[t]=new Yr(this._values[t].property,null===e?void 0:p(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){const r=new nn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}}class rn{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)}}class nn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class on{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,i){const r=Ee[this.specification.type];return r?r(t,e,i):t}}class sn{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,r){return new rn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new rn(this,{kind:"constant",value:void 0},t.parameters);const r=Ee[this.specification.type];return r?new rn(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t}evaluate(t,e,i,r,n,o){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,o)}}class an extends sn{possiblyEvaluate(t,e,i,r){if(void 0===t.value)return new rn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const n=t.expression.evaluate(e,null,{},i,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,s=this._calculate(o,o,o,e);return new rn(this,{kind:"constant",value:s},e)}if("camera"===t.expression.kind){const i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new rn(this,{kind:"constant",value:i},e)}return new rn(this,t.expression,e)}evaluate(t,e,i,r,n,o){if("source"===t.kind){const s=t.evaluate(e,i,r,n,o);return this._calculate(s,s,s,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class ln{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){const n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new Hr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Hr(Math.floor(e.zoom),e)),t.expression.evaluate(new Hr(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class cn{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)}interpolate(){return!1}}class un{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const i=t[e];i.specification.overridable&&this.overridableProperties.push(e);const r=this.defaultPropertyValues[e]=new Yr(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new Kr(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}Sr("DataDrivenProperty",sn),Sr("DataConstantProperty",on),Sr("CrossFadedDataDrivenProperty",an),Sr("CrossFadedProperty",ln),Sr("ColorRampProperty",cn);const hn="-transition";class pn extends it{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new en(e.layout)),e.paint)){this._transitionablePaint=new Jr(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nn(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,i={}){null!=e&&this._validate(xr,`layers.${this.id}.layout.${t}`,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(hn)?this._transitionablePaint.getTransition(t.slice(0,-hn.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,i={}){if(null!=e&&this._validate(_r,`layers.${this.id}.paint.${t}`,t,e,i))return!1;if(t.endsWith(hn))return this._transitionablePaint.setTransition(t.slice(0,-hn.length),e||void 0),!1;{const i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"],n=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value;return s.isDataDriven()||n||r||this._handleOverridablePaintPropertyUpdate(t,o,s)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),h(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,i,r,n={}){return(!n||!1!==n.validate)&&vr(this,t.call(gr,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof rn&&_i(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const dn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class fn{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gn(t,e=1){let i=0,r=0;return{members:t.map((t=>{const n=dn[t.type].BYTES_PER_ELEMENT,o=i=yn(i,Math.max(e,n)),s=t.components||1;return r=Math.max(r,n),i+=n*s,{name:t.name,type:t.type,components:s,offset:o}})),size:yn(i,Math.max(r,e)),alignment:e}}function yn(t,e){return Math.ceil(t/e)*e}class _n extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t}}_n.prototype.bytesPerElement=4,Sr("StructArrayLayout2i4",_n);class xn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,t}}xn.prototype.bytesPerElement=8,Sr("StructArrayLayout4i8",xn);class vn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,s){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=r,this.int16[a+3]=n,this.int16[a+4]=o,this.int16[a+5]=s,t}}vn.prototype.bytesPerElement=12,Sr("StructArrayLayout2i4i12",vn);class bn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,s){const a=4*t,l=8*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.uint8[l+4]=r,this.uint8[l+5]=n,this.uint8[l+6]=o,this.uint8[l+7]=s,t}}bn.prototype.bytesPerElement=8,Sr("StructArrayLayout2i4ub8",bn);class wn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t}}wn.prototype.bytesPerElement=8,Sr("StructArrayLayout2f8",wn);class Sn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,s,a,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,r,n,o,s,a,l,c)}emplace(t,e,i,r,n,o,s,a,l,c,u){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=i,this.uint16[h+2]=r,this.uint16[h+3]=n,this.uint16[h+4]=o,this.uint16[h+5]=s,this.uint16[h+6]=a,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t}}Sn.prototype.bytesPerElement=20,Sr("StructArrayLayout10ui20",Sn);class In extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,s,a,l,c,u,h){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,i,r,n,o,s,a,l,c,u,h)}emplace(t,e,i,r,n,o,s,a,l,c,u,h,p){const d=12*t;return this.int16[d+0]=e,this.int16[d+1]=i,this.int16[d+2]=r,this.int16[d+3]=n,this.uint16[d+4]=o,this.uint16[d+5]=s,this.uint16[d+6]=a,this.uint16[d+7]=l,this.int16[d+8]=c,this.int16[d+9]=u,this.int16[d+10]=h,this.int16[d+11]=p,t}}In.prototype.bytesPerElement=24,Sr("StructArrayLayout4i4ui4i24",In);class Tn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t}}Tn.prototype.bytesPerElement=12,Sr("StructArrayLayout3f12",Tn);class En extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}En.prototype.bytesPerElement=4,Sr("StructArrayLayout1ul4",En);class An extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,s,a,l){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,r,n,o,s,a,l)}emplace(t,e,i,r,n,o,s,a,l,c){const u=10*t,h=5*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.int16[u+2]=r,this.int16[u+3]=n,this.int16[u+4]=o,this.int16[u+5]=s,this.uint32[h+3]=a,this.uint16[u+8]=l,this.uint16[u+9]=c,t}}An.prototype.bytesPerElement=20,Sr("StructArrayLayout6i1ul2ui20",An);class Mn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,s){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=r,this.int16[a+3]=n,this.int16[a+4]=o,this.int16[a+5]=s,t}}Mn.prototype.bytesPerElement=12,Sr("StructArrayLayout2i2i2i12",Mn);class Pn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n)}emplace(t,e,i,r,n,o){const s=4*t,a=8*t;return this.float32[s+0]=e,this.float32[s+1]=i,this.float32[s+2]=r,this.int16[a+6]=n,this.int16[a+7]=o,t}}Pn.prototype.bytesPerElement=16,Sr("StructArrayLayout2f1f2i16",Pn);class zn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const o=12*t,s=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[s+1]=r,this.float32[s+2]=n,t}}zn.prototype.bytesPerElement=12,Sr("StructArrayLayout2ub2f12",zn);class kn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t}}kn.prototype.bytesPerElement=6,Sr("StructArrayLayout3ui6",kn);class Cn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,s,a,l,c,u,h,p,d,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,e,i,r,n,o,s,a,l,c,u,h,p,d,f,m,g)}emplace(t,e,i,r,n,o,s,a,l,c,u,h,p,d,f,m,g,y){const _=24*t,x=12*t,v=48*t;return this.int16[_+0]=e,this.int16[_+1]=i,this.uint16[_+2]=r,this.uint16[_+3]=n,this.uint32[x+2]=o,this.uint32[x+3]=s,this.uint32[x+4]=a,this.uint16[_+10]=l,this.uint16[_+11]=c,this.uint16[_+12]=u,this.float32[x+7]=h,this.float32[x+8]=p,this.uint8[v+36]=d,this.uint8[v+37]=f,this.uint8[v+38]=m,this.uint32[x+10]=g,this.int16[_+22]=y,t}}Cn.prototype.bytesPerElement=48,Sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Cn);class Ln extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,s,a,l,c,u,h,p,d,f,m,g,y,_,x,v,b,w,S,I,T,E,A){const M=this.length;return this.resize(M+1),this.emplace(M,t,e,i,r,n,o,s,a,l,c,u,h,p,d,f,m,g,y,_,x,v,b,w,S,I,T,E,A)}emplace(t,e,i,r,n,o,s,a,l,c,u,h,p,d,f,m,g,y,_,x,v,b,w,S,I,T,E,A,M){const P=34*t,z=17*t;return this.int16[P+0]=e,this.int16[P+1]=i,this.int16[P+2]=r,this.int16[P+3]=n,this.int16[P+4]=o,this.int16[P+5]=s,this.int16[P+6]=a,this.int16[P+7]=l,this.uint16[P+8]=c,this.uint16[P+9]=u,this.uint16[P+10]=h,this.uint16[P+11]=p,this.uint16[P+12]=d,this.uint16[P+13]=f,this.uint16[P+14]=m,this.uint16[P+15]=g,this.uint16[P+16]=y,this.uint16[P+17]=_,this.uint16[P+18]=x,this.uint16[P+19]=v,this.uint16[P+20]=b,this.uint16[P+21]=w,this.uint16[P+22]=S,this.uint32[z+12]=I,this.float32[z+13]=T,this.float32[z+14]=E,this.float32[z+15]=A,this.float32[z+16]=M,t}}Ln.prototype.bytesPerElement=68,Sr("StructArrayLayout8i15ui1ul4f68",Ln);class Dn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Dn.prototype.bytesPerElement=4,Sr("StructArrayLayout1f4",Dn);class Bn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t}}Bn.prototype.bytesPerElement=6,Sr("StructArrayLayout3i6",Bn);class Fn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=i,this.uint16[n+3]=r,t}}Fn.prototype.bytesPerElement=8,Sr("StructArrayLayout1ul2ui8",Fn);class Rn extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t}}Rn.prototype.bytesPerElement=4,Sr("StructArrayLayout2ui4",Rn);class On extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}On.prototype.bytesPerElement=2,Sr("StructArrayLayout1ui2",On);class Un extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,t}}Un.prototype.bytesPerElement=16,Sr("StructArrayLayout4f16",Un);class Vn extends fn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}Vn.prototype.size=20;class Nn extends An{get(t){return new Vn(this,t)}}Sr("CollisionBoxArray",Nn);class $n extends fn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}$n.prototype.size=48;class qn extends Cn{get(t){return new $n(this,t)}}Sr("PlacedSymbolArray",qn);class Gn extends fn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Gn.prototype.size=68;class Zn extends Ln{get(t){return new Gn(this,t)}}Sr("SymbolInstanceArray",Zn);class jn extends Dn{getoffsetX(t){return this.float32[1*t+0]}}Sr("GlyphOffsetArray",jn);class Xn extends Bn{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Sr("SymbolLineVertexArray",Xn);class Wn extends fn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Wn.prototype.size=8;class Hn extends Fn{get(t){return new Wn(this,t)}}Sr("FeatureIndexArray",Hn);class Yn extends _n{}class Kn extends _n{}class Jn extends vn{}class Qn extends bn{}class to extends wn{}class eo extends Sn{}class io extends In{}class ro extends Tn{}class no extends En{}class oo extends Mn{}class so extends zn{}class ao extends kn{}class lo extends Rn{}const co=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:uo}=co;class ho{constructor(t=[]){this.segments=t}prepareSegment(t,e,i,r){let n=this.segments[this.segments.length-1];return t>ho.MAX_VERTEX_ARRAY_LENGTH&&f(`Max vertices per segment is ${ho.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!n||n.vertexLength+t>ho.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,r){return new ho([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}function po(t,e){return 256*(t=o(Math.floor(t),0,255))+o(Math.floor(e),0,255)}ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sr("SegmentVector",ho);const fo=gn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var mo={exports:{}},go={exports:{}};go.exports=function(t,e){var i,r,n,o,s,a,l,c;for(r=t.length-(i=3&t.length),n=e,s=3432918353,a=461845907,c=0;c<r;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,n=27492+(65535&(o=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0};var yo={exports:{}};yo.exports=function(t,e){for(var i,r=t.length,n=e^r,o=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0};var _o=go.exports,xo=yo.exports;mo.exports=_o,mo.exports.murmur3=_o,mo.exports.murmur2=xo;var vo=mo.exports;class bo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,r){this.ids.push(wo(t)),this.positions.push(e,i,r)}getPositions(t){const e=wo(t);let i=0,r=this.ids.length-1;for(;i<r;){const t=i+r>>1;this.ids[t]>=e?r=t:i=t+1}const n=[];for(;this.ids[i]===e;)n.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return n}static serialize(t,e){const i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return So(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}}static deserialize(t){const e=new bo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function wo(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:vo(String(t))}function So(t,e,i,r){for(;i<r;){const n=t[i+r>>1];let o=i-1,s=r+1;for(;;){do{o++}while(t[o]<n);do{s--}while(t[s]>n);if(o>=s)break;Io(t,o,s),Io(e,3*o,3*s),Io(e,3*o+1,3*s+1),Io(e,3*o+2,3*s+2)}s-i<r-s?(So(t,e,i,s),i=s+1):(So(t,e,s+1,r),r=s)}}function Io(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}Sr("FeaturePositionMap",bo);class To{constructor(t,e){this.gl=t.gl,this.location=e}}class Eo extends To{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Ao extends To{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Mo extends To{constructor(t,e){super(t,e),this.current=Lt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Po=new Float32Array(16);function zo(t){return[po(255*t.r,255*t.g),po(255*t.b,255*t.a)]}class ko{constructor(t,e,i){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new Mo(t,e):new Eo(t,e)}}class Co{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,i,r){const n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)}getBinding(t,e,i){return"u_pattern"===i.substr(0,9)?new Ao(t,e):new Eo(t,e)}}class Lo{constructor(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,i,r,n){const o=this.paintVertexArray.length,s=this.expression.evaluate(new Hr(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,s)}updatePaintArray(t,e,i,r){const n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)}_setPaintValue(t,e,i){if("color"===this.type){const r=zo(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Do{constructor(t,e,i,r,n,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,i,r,n){const o=this.expression.evaluate(new Hr(this.zoom),e,{},r,[],n),s=this.expression.evaluate(new Hr(this.zoom+1),e,{},r,[],n),a=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(a,t,o,s)}updatePaintArray(t,e,i,r){const n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,o)}_setPaintValue(t,e,i,r){if("color"===this.type){const n=zo(i),o=zo(r);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1],o[0],o[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=o(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,i){return new Eo(t,e)}}class Bo{constructor(t,e,i,r,n,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n}populatePaintArray(t,e,i){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)}_setPaintValues(t,e,i,r){if(!r||!i)return;const{min:n,mid:o,max:s}=i,a=r[n],l=r[o],c=r[s];if(a&&l&&c)for(let i=t;i<e;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],l.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,fo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,fo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fo{constructor(t,e,i){this.binders={},this._buffers=[];const r=[];for(const n in t.paint._values){if(!i(n))continue;const o=t.paint.get(n);if(!(o instanceof rn&&_i(o.property.specification)))continue;const s=Oo(n,t.type),a=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===a.kind)this.binders[n]=h?new Co(a.value,s):new ko(a.value,s,l),r.push(`/u_${n}`);else if("source"===a.kind||h){const i=Uo(n,l,"source");this.binders[n]=h?new Bo(a,l,c,e,i,t.id):new Lo(a,s,l,i),r.push(`/a_${n}`)}else{const t=Uo(n,l,"composite");this.binders[n]=new Do(a,s,l,c,e,t),r.push(`/z_${n}`)}}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Lo||e instanceof Do?e.maxValue:0}populatePaintArrays(t,e,i,r,n){for(const o in this.binders){const s=this.binders[o];(s instanceof Lo||s instanceof Do||s instanceof Bo)&&s.populatePaintArray(t,e,i,r,n)}}setConstantPatternPositions(t,e){for(const i in this.binders){const r=this.binders[i];r instanceof Co&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,r,n){let o=!1;for(const s in t){const a=e.getPositions(s);for(const e of a){const a=i.feature(e.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof Lo||l instanceof Do||l instanceof Bo)&&!0===l.expression.isStateDependent){const c=r.paint.get(i);l.expression=c.value,l.updatePaintArray(e.start,e.end,a,t[s],n),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const i=this.binders[e];(i instanceof ko||i instanceof Co)&&t.push(...i.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Lo||i instanceof Do)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof Bo)for(let e=0;e<fo.members.length;e++)t.push(fo.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof ko||i instanceof Co||i instanceof Do)for(const e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const i=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof ko||n instanceof Co||n instanceof Do)for(const o of n.uniformNames)if(e[o]){const s=n.getBinding(t,e[o],o);i.push({name:o,property:r,binding:s})}}return i}setUniforms(t,e,i,r){for(const{name:t,property:n,binding:o}of e)this.binders[n].setUniform(o,r,i.get(n),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const i=this.binders[e];if(t&&i instanceof Bo){const e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof Lo||i instanceof Do)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const e in this.binders){const i=this.binders[e];(i instanceof Lo||i instanceof Do||i instanceof Bo)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Lo||e instanceof Do||e instanceof Bo)&&e.destroy()}}}class Ro{constructor(t,e,i=(()=>!0)){this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Fo(r,e,i);this.needsUpload=!1,this._featureMap=new bo,this._bufferOffset=0}populatePaintArrays(t,e,i,r,n,o){for(const i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,r,n,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,r){for(const n of i)this.needsUpload=this.programConfigurations[n.id].updatePaintArrays(t,this._featureMap,e,n,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Oo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Uo(t,e,i){const r={color:{source:wn,composite:Un},number:{source:Dn,composite:wn}},n=function(t){return{"line-pattern":{source:eo,composite:eo},"fill-pattern":{source:eo,composite:eo},"fill-extrusion-pattern":{source:eo,composite:eo}}[t]}(t);return n&&n[i]||r[e][i]}Sr("ConstantBinder",ko),Sr("CrossFadedConstantBinder",Co),Sr("SourceExpressionBinder",Lo),Sr("CrossFadedCompositeBinder",Bo),Sr("CompositeExpressionBinder",Do),Sr("ProgramConfiguration",Fo,{omit:["_buffers"]}),Sr("ProgramConfigurationSet",Ro);var Vo=8192;const No=Math.pow(2,14)-1,$o=-No-1;function qo(t){const e=Vo/t.extent,i=t.loadGeometry();for(let t=0;t<i.length;t++){const r=i[t];for(let t=0;t<r.length;t++){const i=r[t],n=Math.round(i.x*e),s=Math.round(i.y*e);i.x=o(n,$o,No),i.y=o(s,$o,No),(n<i.x||n>i.x+1||s<i.y||s>i.y+1)&&f("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Go(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?qo(t):[]}}function Zo(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}class jo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Yn,this.indexArray=new ao,this.segments=new ho,this.programConfigurations=new Ro(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){const r=this.layers[0],n=[];let o=null,s=!1;"circle"===r.type&&(o=r.layout.get("circle-sort-key"),s=!o.isConstant());for(const{feature:e,id:r,index:a,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Go(e,t);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),c,i))continue;const u=s?o.evaluate(c,{},i):void 0,h={id:r,properties:e.properties,type:e.type,sourceLayerIndex:l,index:a,geometry:t?c.geometry:qo(e),patterns:{},sortKey:u};n.push(h)}s&&n.sort(((t,e)=>t.sortKey-e.sortKey));for(const r of n){const{geometry:n,index:o,sourceLayerIndex:s}=r,a=t[o].feature;this.addFeature(r,n,o,i),e.featureIndex.insert(a,n,o,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,uo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,r){for(const i of e)for(const e of i){const i=e.x,r=e.y;if(i<0||i>=Vo||r<0||r>=Vo)continue;const n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=n.vertexLength;Zo(this.layoutVertexArray,i,r,-1,-1),Zo(this.layoutVertexArray,i,r,1,-1),Zo(this.layoutVertexArray,i,r,1,1),Zo(this.layoutVertexArray,i,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)}}function Xo(t,e){for(let i=0;i<t.length;i++)if(is(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(is(t,e[i]))return!0;return!!Ko(t,e)}function Wo(t,e,i){return!!is(t,e)||!!Qo(e,t,i)}function Ho(t,e){if(1===t.length)return es(e,t[0]);for(let i=0;i<e.length;i++){const r=e[i];for(let e=0;e<r.length;e++)if(is(t,r[e]))return!0}for(let i=0;i<t.length;i++)if(es(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(Ko(t,e[i]))return!0;return!1}function Yo(t,e,i){if(t.length>1){if(Ko(t,e))return!0;for(let r=0;r<e.length;r++)if(Qo(e[r],t,i))return!0}for(let r=0;r<t.length;r++)if(Qo(t[r],e,i))return!0;return!1}function Ko(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){const r=t[i],n=t[i+1];for(let t=0;t<e.length-1;t++)if(Jo(r,n,e[t],e[t+1]))return!0}return!1}function Jo(t,e,i,r){return m(t,i,r)!==m(e,i,r)&&m(t,e,i)!==m(t,e,r)}function Qo(t,e,i){const r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(let i=1;i<e.length;i++)if(ts(t,e[i-1],e[i])<r)return!0;return!1}function ts(t,e,i){const r=e.distSqr(i);if(0===r)return t.distSqr(e);const n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function es(t,e){let i,r,n,o=!1;for(let s=0;s<t.length;s++){i=t[s];for(let t=0,s=i.length-1;t<i.length;s=t++)r=i[t],n=i[s],r.y>e.y!=n.y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o)}return o}function is(t,e){let i=!1;for(let r=0,n=t.length-1;r<t.length;n=r++){const o=t[r],s=t[n];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(i=!i)}return i}function rs(t,e,i){const r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;const o=m(t,e,i[0]);return o!==m(t,e,i[1])||o!==m(t,e,i[2])||o!==m(t,e,i[3])}function ns(t,e,i){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function os(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ss(t,e,i,r,n){if(!e[0]&&!e[1])return t;const o=T.convert(e)._mult(n);"viewport"===i&&o._rotate(-r);const s=[];for(let e=0;e<t.length;e++)s.push(t[e].sub(o));return s}Sr("CircleBucket",jo,{omit:["layers"]});const as=new un({"circle-sort-key":new sn(rt.layout_circle["circle-sort-key"])});var ls={paint:new un({"circle-radius":new sn(rt.paint_circle["circle-radius"]),"circle-color":new sn(rt.paint_circle["circle-color"]),"circle-blur":new sn(rt.paint_circle["circle-blur"]),"circle-opacity":new sn(rt.paint_circle["circle-opacity"]),"circle-translate":new on(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new on(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new on(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new on(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(rt.paint_circle["circle-stroke-opacity"])}),layout:as},cs="undefined"!=typeof Float32Array?Float32Array:Array;function us(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hs(t,e,i){var r=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],_=e[15],x=i[0],v=i[1],b=i[2],w=i[3];return t[0]=x*r+v*a+b*h+w*m,t[1]=x*n+v*l+b*p+w*g,t[2]=x*o+v*c+b*d+w*y,t[3]=x*s+v*u+b*f+w*_,t[4]=(x=i[4])*r+(v=i[5])*a+(b=i[6])*h+(w=i[7])*m,t[5]=x*n+v*l+b*p+w*g,t[6]=x*o+v*c+b*d+w*y,t[7]=x*s+v*u+b*f+w*_,t[8]=(x=i[8])*r+(v=i[9])*a+(b=i[10])*h+(w=i[11])*m,t[9]=x*n+v*l+b*p+w*g,t[10]=x*o+v*c+b*d+w*y,t[11]=x*s+v*u+b*f+w*_,t[12]=(x=i[12])*r+(v=i[13])*a+(b=i[14])*h+(w=i[15])*m,t[13]=x*n+v*l+b*p+w*g,t[14]=x*o+v*c+b*d+w*y,t[15]=x*s+v*u+b*f+w*_,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ps,ds=hs;function fs(t,e,i){var r=e[0],n=e[1],o=e[2],s=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*s,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*s,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*s,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*s,t}function ms(t,e){const i=fs([],[t.x,t.y,0,1],e);return new T(i[0]/i[3],i[1]/i[3])}ps=new cs(4),cs!=Float32Array&&(ps[0]=0,ps[1]=0,ps[2]=0,ps[3]=0);class gs extends jo{}Sr("HeatmapBucket",gs,{omit:["layers"]});var ys={paint:new un({"heatmap-radius":new sn(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new on(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cn(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new on(rt.paint_heatmap["heatmap-opacity"])})};function _s(t,{width:e,height:i},r,n){if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==e*i*r)throw new RangeError(`mismatched image size. expected: ${n.length} but got: ${e*i*r}`)}else n=new Uint8Array(e*i*r);return t.width=e,t.height=i,t.data=n,t}function xs(t,{width:e,height:i},r){if(e===t.width&&i===t.height)return;const n=_s({},{width:e,height:i},r);vs(t,n,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,i)},r),t.width=e,t.height=i,t.data=n.data}function vs(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const s=t.data,a=e.data;for(let l=0;l<n.height;l++){const c=((i.y+l)*t.width+i.x)*o,u=((r.y+l)*e.width+r.x)*o;for(let t=0;t<n.width*o;t++)a[u+t]=s[c+t]}return e}class bs{constructor(t,e){_s(this,t,1,e)}resize(t){xs(this,t,1)}clone(){return new bs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){vs(t,e,i,r,n,1)}}class ws{constructor(t,e){_s(this,t,4,e)}resize(t){xs(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ws({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){vs(t,e,i,r,n,4)}}function Ss(t){const e={},i=t.resolution||256,r=t.clips?t.clips.length:1,n=t.image||new ws({width:i,height:r}),o=(i,r,o)=>{e[t.evaluationKey]=o;const s=t.expression.evaluate(e);n.data[i+r+0]=Math.floor(255*s.r/s.a),n.data[i+r+1]=Math.floor(255*s.g/s.a),n.data[i+r+2]=Math.floor(255*s.b/s.a),n.data[i+r+3]=Math.floor(255*s.a)};if(t.clips)for(let e=0,n=0;e<r;++e,n+=4*i)for(let r=0,s=0;r<i;r++,s+=4){const a=r/(i-1),{start:l,end:c}=t.clips[e];o(n,s,l*(1-a)+c*a)}else for(let t=0,e=0;t<i;t++,e+=4)o(0,e,t/(i-1));return n}Sr("AlphaImage",bs),Sr("RGBAImage",ws);var Is={paint:new un({"hillshade-illumination-direction":new on(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new on(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new on(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new on(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new on(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new on(rt.paint_hillshade["hillshade-accent-color"])})};const Ts=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Es}=Ts;var As={exports:{}};function Ms(t,e,i){i=i||2;var r,n,o,s,a,l,c,u=e&&e.length,h=u?e[0]*i:t.length,p=Ps(t,0,h,i,!0),d=[];if(!p||p.next===p.prev)return d;if(u&&(p=function(t,e,i,r){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=Ps(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(Vs(s));for(a.sort(Fs),n=0;n<a.length;n++)i=zs(i=Rs(a[n],i),i.next);return i}(t,e,p,i)),t.length>80*i){r=o=t[0],n=s=t[1];for(var f=i;f<h;f+=i)(a=t[f])<r&&(r=a),(l=t[f+1])<n&&(n=l),a>o&&(o=a),l>s&&(s=l);c=0!==(c=Math.max(o-r,s-n))?1/c:0}return ks(p,d,i,r,n,c),d}function Ps(t,e,i,r,n){var o,s;if(n===Qs(t,e,i,r)>0)for(o=e;o<i;o+=r)s=Ys(o,t[o],t[o+1],s);else for(o=i-r;o>=e;o-=r)s=Ys(o,t[o],t[o+1],s);return s&&Gs(s,s.next)&&(Ks(s),s=s.next),s}function zs(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!Gs(r,r.next)&&0!==qs(r.prev,r,r.next))r=r.next;else{if(Ks(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function ks(t,e,i,r,n,o,s){if(t){!s&&o&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=Us(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,s,a,l,c=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,l--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,c*=2}while(s>1)}(n)}(t,r,n,o);for(var a,l,c=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?Ls(t,r,n,o):Cs(t))e.push(a.i/i),e.push(t.i/i),e.push(l.i/i),Ks(t),t=l.next,c=l.next;else if((t=l)===c){s?1===s?ks(t=Ds(zs(t),e,i),e,i,r,n,o,2):2===s&&Bs(t,e,i,r,n,o):ks(zs(t),e,i,r,n,o,1);break}}}function Cs(t){var e=t.prev,i=t,r=t.next;if(qs(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(Ns(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&qs(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Ls(t,e,i,r){var n=t.prev,o=t,s=t.next;if(qs(n,o,s)>=0)return!1;for(var a=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,l=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=Us(n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,e,i,r),u=Us(a,l,e,i,r),h=t.prevZ,p=t.nextZ;h&&h.z>=c&&p&&p.z<=u;){if(h!==t.prev&&h!==t.next&&Ns(n.x,n.y,o.x,o.y,s.x,s.y,h.x,h.y)&&qs(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&Ns(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&qs(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&Ns(n.x,n.y,o.x,o.y,s.x,s.y,h.x,h.y)&&qs(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=u;){if(p!==t.prev&&p!==t.next&&Ns(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&qs(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ds(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!Gs(n,o)&&Zs(n,r,r.next,o)&&Ws(n,o)&&Ws(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),Ks(r),Ks(r.next),r=t=o),r=r.next}while(r!==t);return zs(r)}function Bs(t,e,i,r,n,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&$s(s,a)){var l=Hs(s,a);return s=zs(s,s.next),l=zs(l,l.next),ks(s,e,i,r,n,o),void ks(l,e,i,r,n,o)}a=a.next}s=s.next}while(s!==t)}function Fs(t,e){return t.x-e.x}function Rs(t,e){var i=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i;var l,c=i,u=i.x,h=i.y,p=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&Ns(o<h?n:s,o,u,h,o<h?s:n,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(n-r.x),Ws(r,t)&&(l<p||l===p&&(r.x>i.x||r.x===i.x&&Os(i,r)))&&(i=r,p=l)),r=r.next}while(r!==c);return i}(t,e);if(!i)return e;var r=Hs(i,t),n=zs(i,i.next);return zs(r,r.next),e===i?n:e}function Os(t,e){return qs(t.prev,t,e.prev)<0&&qs(e.next,t,t.next)<0}function Us(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Vs(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Ns(t,e,i,r,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function $s(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Zs(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Ws(t,e)&&Ws(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(qs(t.prev,t,e.prev)||qs(t,e.prev,e))||Gs(t,e)&&qs(t.prev,t,t.next)>0&&qs(e.prev,e,e.next)>0)}function qs(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Gs(t,e){return t.x===e.x&&t.y===e.y}function Zs(t,e,i,r){var n=Xs(qs(t,e,i)),o=Xs(qs(t,e,r)),s=Xs(qs(i,r,t)),a=Xs(qs(i,r,e));return n!==o&&s!==a||!(0!==n||!js(t,i,e))||!(0!==o||!js(t,r,e))||!(0!==s||!js(i,t,r))||!(0!==a||!js(i,e,r))}function js(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Xs(t){return t>0?1:t<0?-1:0}function Ws(t,e){return qs(t.prev,t,t.next)<0?qs(t,e,t.next)>=0&&qs(t,t.prev,e)>=0:qs(t,e,t.prev)<0||qs(t,t.next,e)<0}function Hs(t,e){var i=new Js(t.i,t.x,t.y),r=new Js(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Ys(t,e,i,r){var n=new Js(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Ks(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Js(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Qs(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}As.exports=Ms,As.exports.default=Ms,Ms.deviation=function(t,e,i,r){var n=e&&e.length,o=Math.abs(Qs(t,0,n?e[0]*i:t.length,i));if(n)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(Qs(t,e[s]*i,s<a-1?e[s+1]*i:t.length,i));var l=0;for(s=0;s<r.length;s+=3){var c=r[s]*i,u=r[s+1]*i,h=r[s+2]*i;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Ms.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);n>0&&i.holes.push(r+=t[n-1].length)}return i};var ta=As.exports;function ea(t,e,i,r,n){ia(t,e,i||0,r||t.length-1,n||na)}function ia(t,e,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,s=e-i+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);ia(t,e,Math.max(i,Math.floor(e-s*l/o+c)),Math.min(r,Math.floor(e+(o-s)*l/o+c)),n)}var u=t[e],h=i,p=r;for(ra(t,i,e),n(t[r],u)>0&&ra(t,i,r);h<p;){for(ra(t,h,p),h++,p--;n(t[h],u)<0;)h++;for(;n(t[p],u)>0;)p--}0===n(t[i],u)?ra(t,i,p):ra(t,++p,r),p<=e&&(i=p+1),e<=p&&(r=p-1)}}function ra(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function na(t,e){return t<e?-1:t>e?1:0}function oa(t,e){const i=t.length;if(i<=1)return[t];const r=[];let n,o;for(let e=0;e<i;e++){const i=g(t[e]);0!==i&&(t[e].area=Math.abs(i),void 0===o&&(o=i<0),o===i<0?(n&&r.push(n),n=[t[e]]):n.push(t[e]))}if(n&&r.push(n),e>1)for(let t=0;t<r.length;t++)r[t].length<=e||(ea(r[t],e,1,r[t].length-1,sa),r[t]=r[t].slice(0,e));return r}function sa(t,e){return e.area-t.area}function aa(t,e,i){const r=i.patternDependencies;let n=!1;for(const i of e){const e=i.paint.get(`${t}-pattern`);e.isConstant()||(n=!0);const o=e.constantOr(null);o&&(n=!0,r[o.to]=!0,r[o.from]=!0)}return n}function la(t,e,i,r,n){const o=n.patternDependencies;for(const s of e){const e=s.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},i,{},n.availableImages),a=e.evaluate({zoom:r},i,{},n.availableImages),l=e.evaluate({zoom:r+1},i,{},n.availableImages);t=t&&t.name?t.name:t,a=a&&a.name?a.name:a,l=l&&l.name?l.name:l,o[t]=!0,o[a]=!0,o[l]=!0,i.patterns[s.id]={min:t,mid:a,max:l}}}return i}class ca{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kn,this.indexArray=new ao,this.indexArray2=new lo,this.programConfigurations=new Ro(t.layers,t.zoom),this.segments=new ho,this.segments2=new ho,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=aa("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),n=!r.isConstant(),o=[];for(const{feature:s,id:a,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Go(s,t);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),u,i))continue;const h=n?r.evaluate(u,{},i,e.availableImages):void 0,p={id:a,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:t?u.geometry:qo(s),patterns:{},sortKey:h};o.push(p)}n&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const r of o){const{geometry:n,index:o,sourceLayerIndex:s}=r;if(this.hasPattern){const t=la("fill",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,n,o,i,{});e.featureIndex.insert(t[o].feature,n,o,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Es),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,r,n){for(const t of oa(e,500)){let e=0;for(const i of t)e+=i.length;const i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=i.vertexLength,n=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(n.length/2);const i=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),r=i.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(r+e.length-1,r),n.push(e[0].x),n.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(r+t-1,r+t),n.push(e[t].x),n.push(e[t].y);i.vertexLength+=e.length,i.primitiveLength+=e.length}const s=ta(n,o);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(r+s[t],r+s[t+1],r+s[t+2]);i.vertexLength+=e,i.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}}Sr("FillBucket",ca,{omit:["layers","patternFeatures"]});const ua=new un({"fill-sort-key":new sn(rt.layout_fill["fill-sort-key"])});var ha={paint:new un({"fill-antialias":new on(rt.paint_fill["fill-antialias"]),"fill-opacity":new sn(rt.paint_fill["fill-opacity"]),"fill-color":new sn(rt.paint_fill["fill-color"]),"fill-outline-color":new sn(rt.paint_fill["fill-outline-color"]),"fill-translate":new on(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new on(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new an(rt.paint_fill["fill-pattern"])}),layout:ua};const pa=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:da}=pa;var fa={},ma=T,ga=ya;function ya(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(_a,this,e)}function _a(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function xa(t){for(var e,i,r=0,n=0,o=t.length,s=o-1;n<o;s=n++)r+=((i=t[s]).x-(e=t[n]).x)*(e.y+i.y);return r}ya.types=["Unknown","Point","LineString","Polygon"],ya.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,s=0,a=[];t.pos<i;){if(n<=0){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)o+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&a.push(e),e=[]),e.push(new ma(o,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&a.push(e),a},ya.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,s=1/0,a=-1/0,l=1/0,c=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<s&&(s=n),n>a&&(a=n),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[s,l,a,c]},ya.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),s=this.extent*t,a=this.extent*e,l=this.loadGeometry(),c=ya.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+s)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+a)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var s=xa(t[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)u(l[r][n])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var va=ga,ba=wa;function wa(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Sa,this,e),this.length=this._features.length}function Sa(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}wa.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new va(this._pbf,e,this.extent,this._keys,this._values)};var Ia=ba;function Ta(t,e,i){if(3===t){var r=new Ia(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}fa.VectorTile=function(t,e){this.layers=t.readFields(Ta,{},e)},fa.VectorTileFeature=ga,fa.VectorTileLayer=ba;const Ea=fa.VectorTileFeature.types,Aa=Math.pow(2,13);function Ma(t,e,i,r,n,o,s,a){t.emplaceBack(e,i,2*Math.floor(r*Aa)+s,n*Aa*2,o*Aa*2,Math.round(a))}class Pa{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jn,this.indexArray=new ao,this.programConfigurations=new Ro(t.layers,t.zoom),this.segments=new ho,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.features=[],this.hasPattern=aa("fill-extrusion",this.layers,e);for(const{feature:r,id:n,index:o,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,a=Go(r,t);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),a,i))continue;const l={id:n,sourceLayerIndex:s,index:o,geometry:t?a.geometry:qo(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(la("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,i,{}),e.featureIndex.insert(r,l.geometry,o,s,this.index,!0)}}addFeatures(t,e,i){for(const t of this.features){const{geometry:r}=t;this.addFeature(t,r,t.index,e,i)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,da),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,r,n){for(const i of oa(e,500)){let e=0;for(const t of i)e+=t.length;let r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of i){if(0===t.length)continue;if(ka(t))continue;let e=0;for(let i=0;i<t.length;i++){const n=t[i];if(i>=1){const o=t[i-1];if(!za(n,o)){r.vertexLength+4>ho.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=n.sub(o)._perp()._unit(),i=o.dist(n);e+i>32768&&(e=0),Ma(this.layoutVertexArray,n.x,n.y,t.x,t.y,0,0,e),Ma(this.layoutVertexArray,n.x,n.y,t.x,t.y,0,1,e),e+=i,Ma(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,0,e),Ma(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,1,e);const s=r.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+e>ho.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Ea[t.type])continue;const n=[],o=[],s=r.vertexLength;for(const t of i)if(0!==t.length){t!==i[0]&&o.push(n.length/2);for(let e=0;e<t.length;e++){const i=t[e];Ma(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),n.push(i.x),n.push(i.y)}}const a=ta(n,o);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(s+a[t],s+a[t+2],s+a[t+1]);r.primitiveLength+=a.length/3,r.vertexLength+=e}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}}function za(t,e){return t.x===e.x&&(t.x<0||t.x>Vo)||t.y===e.y&&(t.y<0||t.y>Vo)}function ka(t){return t.every((t=>t.x<0))||t.every((t=>t.x>Vo))||t.every((t=>t.y<0))||t.every((t=>t.y>Vo))}Sr("FillExtrusionBucket",Pa,{omit:["layers","features"]});var Ca={paint:new un({"fill-extrusion-opacity":new on(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new on(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new on(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new an(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new on(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function La(t,e){return t.x*e.x+t.y*e.y}function Da(t,e){if(1===t.length){let i=0;const r=e[i++];let n;for(;!n||r.equals(n);)if(n=e[i++],!n)return 1/0;for(;i<e.length;i++){const o=e[i],s=t[0],a=n.sub(r),l=o.sub(r),c=s.sub(r),u=La(a,a),h=La(a,l),p=La(l,l),d=La(c,a),f=La(c,l),m=u*p-h*h,g=(p*d-h*f)/m,y=(u*f-h*d)/m,_=r.z*(1-g-y)+n.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let t=1/0;for(const i of e)t=Math.min(t,i.z);return t}}const Ba=gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Fa}=Ba,Ra=gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Oa}=Ra,Ua=fa.VectorTileFeature.types,Va=Math.cos(Math.PI/180*37.5),Na=Math.pow(2,14)/.5;class $a{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Qn,this.layoutVertexArray2=new to,this.indexArray=new ao,this.programConfigurations=new Ro(t.layers,t.zoom),this.segments=new ho,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=aa("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),n=!r.isConstant(),o=[];for(const{feature:e,id:s,index:a,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Go(e,t);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom),c,i))continue;const u=n?r.evaluate(c,{},i):void 0,h={id:s,properties:e.properties,type:e.type,sourceLayerIndex:l,index:a,geometry:t?c.geometry:qo(e),patterns:{},sortKey:u};o.push(h)}n&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const r of o){const{geometry:n,index:o,sourceLayerIndex:s}=r;if(this.hasPattern){const t=la("line",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,n,o,i,{});e.featureIndex.insert(t[o].feature,n,o,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Oa)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Fa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,r,n){const o=this.layers[0].layout,s=o.get("line-join").evaluate(t,{}),a=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const i of e)this.addLine(i,t,s,a,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}addLine(t,e,i,r,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===Ua[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let l=0;for(;l<a-1&&t[l].equals(t[l+1]);)l++;if(a<(s?3:2))return;"bevel"===i&&(n=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let h,p,d,f,m;this.e1=this.e2=-1,s&&(h=t[a-2],m=t[l].sub(h)._unit()._perp());for(let e=l;e<a;e++){if(d=e===a-1?s?t[l+1]:void 0:t[e+1],d&&t[e].equals(d))continue;m&&(f=m),h&&(p=h),h=t[e],m=d?d.sub(h)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const y=f.x*m.x+f.y*m.y,_=g.x*m.x+g.y*m.y,x=0!==_?1/_:1/0,v=2*Math.sqrt(2-2*_),b=_<Va&&p&&d,w=f.x*m.y-f.y*m.x>0;if(b&&e>l){const t=h.dist(p);if(t>2*c){const e=h.sub(h.sub(p)._mult(c/t)._round());this.updateDistance(p,e),this.addCurrentVertex(e,f,0,0,u),p=e}}const S=p&&d;let I=S?i:s?"butt":r;if(S&&"round"===I&&(x<o?I="miter":x<=2&&(I="fakeround")),"miter"===I&&x>n&&(I="bevel"),"bevel"===I&&(x>2&&(I="flipbevel"),x<n&&(I="miter")),p&&this.updateDistance(p,h),"miter"===I)g._mult(x),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===I){if(x>100)g=m.mult(-1);else{const t=x*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===I||"fakeround"===I){const t=-Math.sqrt(x*x-1),e=w?t:0,i=w?0:t;if(p&&this.addCurrentVertex(h,f,e,i,u),"fakeround"===I){const t=Math.round(180*v/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){const t=i-.5;i+=i*t*(i-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(i)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}d&&this.addCurrentVertex(h,m,-e,-i,u)}else if("butt"===I)this.addCurrentVertex(h,g,0,0,u);else if("square"===I){const t=p?1:-1;this.addCurrentVertex(h,g,t,t,u)}else"round"===I&&(p&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),d&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(b&&e<a-1){const t=h.dist(d);if(t>2*c){const e=h.add(d.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,i,r,n,o=!1){const s=e.y*r-e.x,a=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,n),this.addHalfVertex(t,s,a,o,!0,-r,n),this.distance>Na/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,r,n,o))}addHalfVertex({x:t,y:e},i,r,n,o,s,a){const l=.5*(this.lineClips?this.scaledDistance*(Na-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(n?1:0),(e<<1)+(o?1:0),Math.round(63*i)+128,Math.round(63*r)+128,1+(0===s?0:s<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),o?this.e2=c:this.e1=c}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Sr("LineBucket",$a,{omit:["layers","patternFeatures"]});const qa=new un({"line-cap":new on(rt.layout_line["line-cap"]),"line-join":new sn(rt.layout_line["line-join"]),"line-miter-limit":new on(rt.layout_line["line-miter-limit"]),"line-round-limit":new on(rt.layout_line["line-round-limit"]),"line-sort-key":new sn(rt.layout_line["line-sort-key"])});var Ga={paint:new un({"line-opacity":new sn(rt.paint_line["line-opacity"]),"line-color":new sn(rt.paint_line["line-color"]),"line-translate":new on(rt.paint_line["line-translate"]),"line-translate-anchor":new on(rt.paint_line["line-translate-anchor"]),"line-width":new sn(rt.paint_line["line-width"]),"line-gap-width":new sn(rt.paint_line["line-gap-width"]),"line-offset":new sn(rt.paint_line["line-offset"]),"line-blur":new sn(rt.paint_line["line-blur"]),"line-dasharray":new ln(rt.paint_line["line-dasharray"]),"line-pattern":new an(rt.paint_line["line-pattern"]),"line-gradient":new cn(rt.paint_line["line-gradient"])}),layout:qa};const Za=new class extends sn{possiblyEvaluate(t,e){return e=new Hr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,r){return e=a({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,r)}}(Ga.paint.properties["line-width"].specification);function ja(t,e){return e>0?e+2*t:t}Za.useIntegerZoom=!0;const Xa=gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wa=gn([{name:"a_projected_pos",components:3,type:"Float32"}],4);gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ha=gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ya=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ka=gn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ja(t,e,i){return t.sections.forEach((t=>{t.text=function(t,e,i){const r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Wr.applyArabicShaping&&(t=Wr.applyArabicShaping(t)),t}(t.text,e,i)})),t}gn([{name:"triangle",components:3,type:"Uint16"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gn([{type:"Float32",name:"offsetX"}]),gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Qa={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var tl=24,el=nl,il=function(t,e,i,r,n){var o,s,a=8*n-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=i?n-1:0,p=i?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},rl=function(t,e,i,r,n,o){var s,a,l,c=8*o-n-1,u=(1<<c)-1,h=u>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,n),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;t[i+d]=255&a,d+=f,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;t[i+d]=255&s,d+=f,s/=256,c-=8);t[i+d-f]|=128*m};function nl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}nl.Varint=0,nl.Fixed64=1,nl.Bytes=2,nl.Fixed32=5;var ol,sl=4294967296,al=1/sl,ll="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function cl(t){return t.type===nl.Bytes?t.readVarint()+t.pos:t.pos+1}function ul(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function hl(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function pl(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function dl(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function fl(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function ml(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function gl(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function yl(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function _l(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function xl(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function vl(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function bl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function wl(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Sl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Il(t,e,i){1===t&&i.readMessage(Tl,e)}function Tl(t,e,i){if(3===t){const{id:t,bitmap:r,width:n,height:o,left:s,top:a,advance:l}=i.readMessage(El,{});e.push({id:t,bitmap:new bs({width:n+6,height:o+6},r),metrics:{width:n,height:o,left:s,top:a,advance:l}})}}function El(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Al(t){let e=0,i=0;for(const r of t)e+=r.w*r.h,i=Math.max(i,r.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let n=0,o=0;for(const e of t)for(let t=r.length-1;t>=0;t--){const i=r[t];if(!(e.w>i.w||e.h>i.h)){if(e.x=i.x,e.y=i.y,o=Math.max(o,e.y+e.h),n=Math.max(n,e.x+e.w),e.w===i.w&&e.h===i.h){const e=r.pop();t<r.length&&(r[t]=e)}else e.h===i.h?(i.x+=e.w,i.w-=e.w):e.w===i.w?(i.y+=e.h,i.h-=e.h):(r.push({x:i.x+e.w,y:i.y,w:i.w-e.w,h:e.h}),i.y+=e.h,i.h-=e.h);break}}return{w:n,h:o,fill:e/(n*o)||0}}nl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=bl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Sl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=bl(this.buf,this.pos)+bl(this.buf,this.pos+4)*sl;return this.pos+=8,t},readSFixed64:function(){var t=bl(this.buf,this.pos)+Sl(this.buf,this.pos+4)*sl;return this.pos+=8,t},readFloat:function(){var t=il(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=il(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return ul(t,r,e);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return ul(t,r,e);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return ul(t,r,e);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return ul(t,r,e);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return ul(t,r,e);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return ul(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ll?function(t,e,i){return ll.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var o,s,a,l=t[n],c=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[n+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(s=t[n+2],128==(192&(o=t[n+1]))&&128==(192&s)&&((c=(15&l)<<12|(63&o)<<6|63&s)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(s=t[n+2],a=t[n+3],128==(192&(o=t[n+1]))&&128==(192&s)&&128==(192&a)&&((c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),n+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==nl.Bytes)return t.push(this.readVarint(e));var i=cl(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==nl.Bytes)return t.push(this.readSVarint());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==nl.Bytes)return t.push(this.readBoolean());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==nl.Bytes)return t.push(this.readFloat());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==nl.Bytes)return t.push(this.readDouble());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==nl.Bytes)return t.push(this.readFixed32());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==nl.Bytes)return t.push(this.readSFixed32());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==nl.Bytes)return t.push(this.readFixed64());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==nl.Bytes)return t.push(this.readSFixed64());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===nl.Varint)for(;this.buf[this.pos++]>127;);else if(e===nl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===nl.Fixed32)this.pos+=4;else{if(e!==nl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),wl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),wl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),wl(this.buf,-1&t,this.pos),wl(this.buf,Math.floor(t*al),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),wl(this.buf,-1&t,this.pos),wl(this.buf,Math.floor(t*al),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&hl(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),rl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),rl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&hl(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,nl.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,pl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,dl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,gl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,fl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ml,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,yl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,_l,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,xl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,vl,e)},writeBytesField:function(t,e){this.writeTag(t,nl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,nl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,nl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,nl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,nl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,nl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,nl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,nl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,nl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,nl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Ml{constructor(t,{pixelRatio:e,version:i,stretchX:r,stretchY:n,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=n,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Pl{constructor(t,e){const i={},r={};this.haveRenderCallbacks=[];const n=[];this.addImages(t,i,n),this.addImages(e,r,n);const{w:o,h:s}=Al(n),a=new ws({width:o||1,height:s||1});for(const e in t){const r=t[e],n=i[e].paddedRect;ws.copy(r.data,a,{x:0,y:0},{x:n.x+1,y:n.y+1},r.data)}for(const t in e){const i=e[t],n=r[t].paddedRect,o=n.x+1,s=n.y+1,l=i.data.width,c=i.data.height;ws.copy(i.data,a,{x:0,y:0},{x:o,y:s},i.data),ws.copy(i.data,a,{x:0,y:c-1},{x:o,y:s-1},{width:l,height:1}),ws.copy(i.data,a,{x:0,y:0},{x:o,y:s+c},{width:l,height:1}),ws.copy(i.data,a,{x:l-1,y:0},{x:o-1,y:s},{width:1,height:c}),ws.copy(i.data,a,{x:0,y:0},{x:o+l,y:s},{width:1,height:c})}this.image=a,this.iconPositions=i,this.patternPositions=r}addImages(t,e,i){for(const r in t){const n=t[r],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(o),e[r]=new Ml(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,n]=t.tl;i.update(e.data,void 0,{x:r,y:n})}}Sr("ImagePosition",Ml),Sr("ImageAtlas",Pl),t.WritingMode=void 0,(ol=t.WritingMode||(t.WritingMode={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";const zl=-17;class kl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const i=new kl;return i.scale=t||1,i.fontStack=e,i}static forImage(t){const e=new kl;return e.imageName=t,e}}class Cl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const i=new Cl;for(let r=0;r<t.sections.length;r++){const n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&Lr(r)&&!Qa[t[i+1]]||n&&Lr(n)&&!Qa[t[i-1]]||!Qa[t[i]]?t[i]:Qa[t[i]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&Dl[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&Dl[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const i=new Cl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(kl.forText(t.scale,t.fontStack||e));const i=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(i)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void f("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(kl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):f("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ll(e,i,r,n,o,s,a,l,c,u,h,p,d,f,m,g){const y=Cl.fromFeature(e,o);let _;p===t.WritingMode.vertical&&y.verticalizePunctuation();const{processBidirectionalText:x,processStyledBidirectionalText:v}=Wr;if(x&&1===y.sections.length){_=[];const t=x(y.toString(),Nl(y,u,s,i,n,f,m));for(const e of t){const t=new Cl;t.text=e,t.sections=y.sections;for(let i=0;i<e.length;i++)t.sectionIndex.push(0);_.push(t)}}else if(v){_=[];const t=v(y.text,y.sectionIndex,Nl(y,u,s,i,n,f,m));for(const e of t){const t=new Cl;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,_.push(t)}}else _=function(t,e){const i=[],r=t.text;let n=0;for(const r of e)i.push(t.substring(n,r)),n=r;return n<r.length&&i.push(t.substring(n,r.length)),i}(y,Nl(y,u,s,i,n,f,m));const b=[],w={positionedLines:b,text:y.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(e,i,r,n,o,s,a,l,c,u,h,p){let d=0,f=zl,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let _=0;for(const a of o){a.trim();const o=a.getMaxScale(),l=(o-1)*tl,v={positionedGlyphs:[],lineOffset:0};e.positionedLines[_]=v;const b=v.positionedGlyphs;let w=0;if(!a.length()){f+=s,++_;continue}for(let s=0;s<a.length();s++){const m=a.getSection(s),g=a.getSectionIndex(s),y=a.getCharCode(s);let _=0,v=null,S=null,I=null,T=tl;const E=!(c===t.WritingMode.horizontal||!h&&!Cr(y)||h&&(Dl[y]||(x=y,Mr.Arabic(x)||Mr["Arabic Supplement"](x)||Mr["Arabic Extended-A"](x)||Mr["Arabic Presentation Forms-A"](x)||Mr["Arabic Presentation Forms-B"](x))));if(m.imageName){const t=n[m.imageName];if(!t)continue;I=m.imageName,e.iconsInText=e.iconsInText||!0,S=t.paddedRect;const i=t.displaySize;m.scale=m.scale*tl/p,v={width:i[0],height:i[1],left:1,top:-3,advance:E?i[1]:i[0]},_=l+(tl-i[1]*m.scale),T=v.advance;const r=E?i[0]*m.scale-tl*o:i[1]*m.scale-tl*o;r>0&&r>w&&(w=r)}else{const t=r[m.fontStack],e=t&&t[y];if(e&&e.rect)S=e.rect,v=e.metrics;else{const t=i[m.fontStack],e=t&&t[y];if(!e)continue;v=e.metrics}_=(o-m.scale)*tl}E?(e.verticalizable=!0,b.push({glyph:y,imageName:I,x:d,y:f+_,vertical:E,scale:m.scale,fontStack:m.fontStack,sectionIndex:g,metrics:v,rect:S}),d+=T*m.scale+u):(b.push({glyph:y,imageName:I,x:d,y:f+_,vertical:E,scale:m.scale,fontStack:m.fontStack,sectionIndex:g,metrics:v,rect:S}),d+=v.advance*m.scale+u)}0!==b.length&&(m=Math.max(d-u,m),ql(b,0,b.length-1,y,w)),d=0;const S=s*o+w;v.lineOffset=Math.max(w,l),f+=S,g=Math.max(S,g),++_}var x;const v=f-zl,{horizontalAlign:b,verticalAlign:w}=$l(a);(function(t,e,i,r,n,o,s,a,l){const c=(e-i)*n;let u=0;u=o!==s?-a*r-zl:(-r*l+.5)*s;for(const e of t)for(const t of e.positionedGlyphs)t.x+=c,t.y+=u})(e.positionedLines,y,b,w,m,g,s,v,o.length),e.top+=-w*v,e.bottom=e.top+v,e.left+=-b*m,e.right=e.left+m}(w,i,r,n,_,a,l,c,p,u,d,g),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&w}const Dl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Fl(t,e,i,r,n,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*tl/o+n:0}{const r=i[e.fontStack],o=r&&r[t];return o?o.metrics.advance*e.scale+n:0}}function Rl(t,e,i,r){const n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function Ol(t,e,i){let r=0;return 10===t&&(r-=1e4),i&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Ul(t,e,i,r,n,o){let s=null,a=Rl(e,i,n,o);for(const t of r){const r=Rl(e-t.x,i,n,o)+t.badness;r<=a&&(s=t,a=r)}return{index:t,x:e,priorBreak:s,badness:a}}function Vl(t){return t?Vl(t.priorBreak).concat(t.index):[]}function Nl(t,e,i,r,n,o,s){if("point"!==o)return[];if(!t)return[];const a=[],l=function(t,e,i,r,n,o){let s=0;for(let i=0;i<t.length();i++){const a=t.getSection(i);s+=Fl(t.getCharCode(i),a,r,n,e,o)}return s/Math.max(1,Math.ceil(s/i))}(t,e,i,r,n,s),c=t.text.indexOf("​")>=0;let u=0;for(let i=0;i<t.length();i++){const o=t.getSection(i),p=t.getCharCode(i);if(Dl[p]||(u+=Fl(p,o,r,n,e,s)),i<t.length()-1){const e=!((h=p)<11904||!(Mr["Bopomofo Extended"](h)||Mr.Bopomofo(h)||Mr["CJK Compatibility Forms"](h)||Mr["CJK Compatibility Ideographs"](h)||Mr["CJK Compatibility"](h)||Mr["CJK Radicals Supplement"](h)||Mr["CJK Strokes"](h)||Mr["CJK Symbols and Punctuation"](h)||Mr["CJK Unified Ideographs Extension A"](h)||Mr["CJK Unified Ideographs"](h)||Mr["Enclosed CJK Letters and Months"](h)||Mr["Halfwidth and Fullwidth Forms"](h)||Mr.Hiragana(h)||Mr["Ideographic Description Characters"](h)||Mr["Kangxi Radicals"](h)||Mr["Katakana Phonetic Extensions"](h)||Mr.Katakana(h)||Mr["Vertical Forms"](h)||Mr["Yi Radicals"](h)||Mr["Yi Syllables"](h)));(Bl[p]||e||o.imageName)&&a.push(Ul(i+1,u,l,a,Ol(p,t.getCharCode(i+1),e&&c),!1))}}var h;return Vl(Ul(t.length(),u,l,a,0,!0))}function $l(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function ql(t,e,i,r,n){if(!r&&!n)return;const o=t[i],s=(t[i].x+o.metrics.advance*o.scale)*r;for(let r=e;r<=i;r++)t[r].x-=s,t[r].y+=n}function Gl(t,e,i){const{horizontalAlign:r,verticalAlign:n}=$l(i),o=e[0]-t.displaySize[0]*r,s=e[1]-t.displaySize[1]*n;return{image:t,top:s,bottom:s+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Zl(t,e,i,r,n,o){const s=t.image;let a;if(s.content){const t=s.content,e=s.pixelRatio||1;a=[t[0]/e,t[1]/e,s.displaySize[0]-t[2]/e,s.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,h,p,d;"width"===i||"both"===i?(d=n[0]+l-r[3],h=n[0]+c+r[1]):(d=n[0]+(l+c-s.displaySize[0])/2,h=d+s.displaySize[0]);const f=e.top*o,m=e.bottom*o;return"height"===i||"both"===i?(u=n[1]+f-r[0],p=n[1]+m+r[2]):(u=n[1]+(f+m-s.displaySize[1])/2,p=u+s.displaySize[1]),{image:s,top:u,right:h,bottom:p,left:d,collisionPadding:a}}const jl=128;function Xl(t,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new Hr(t+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=i;let n=0;for(;n<e.length&&e[n]<=t;)n++;n=Math.max(0,n-1);let o=n;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const s=e[n],a=e[o];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:a,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:a,minSize:i.evaluate(new Hr(s)),maxSize:i.evaluate(new Hr(a)),interpolationType:r}}}class Wl extends T{constructor(t,e,i,r){super(t,e),this.angle=i,void 0!==r&&(this.segment=r)}clone(){return new Wl(this.x,this.y,this.angle,this.segment)}}function Hl(t,e,i,r,n){if(void 0===e.segment)return!0;let o=e,s=e.segment+1,a=0;for(;a>-i/2;){if(s--,s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;const l=[];let c=0;for(;a<i/2;){const e=t[s],i=t[s+1];if(!i)return!1;let o=t[s-1].angleTo(e)-e.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:o}),c+=o;a-l[0].distance>r;)c-=l.shift().angleDelta;if(c>n)return!1;s++,a+=e.dist(i)}return!0}function Yl(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Kl(t,e,i){return t?.6*e*i:0}function Jl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Ql(t,e,i,r,n,o){const s=Kl(i,n,o),a=Jl(i,r)*o;let l=0;const c=Yl(t)/2;for(let i=0;i<t.length-1;i++){const r=t[i],n=t[i+1],o=r.dist(n);if(l+o>c){const u=(c-l)/o,h=Te(r.x,n.x,u),p=Te(r.y,n.y,u),d=new Wl(h,p,n.angleTo(r),i);return d._round(),!s||Hl(t,d,a,s,e)?d:void 0}l+=o}}function tc(t,e,i,r,n,o,s,a,l){const c=Kl(r,o,s),u=Jl(r,n),h=u*s,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),ec(t,p?e/2*a%e:(u/2+2*o)*s*a%e,e,c,i,h,p,!1,l)}function ec(t,e,i,r,n,o,s,a,l){const c=o/2,u=Yl(t);let h=0,p=e-i,d=[];for(let e=0;e<t.length-1;e++){const s=t[e],a=t[e+1],f=s.dist(a),m=a.angleTo(s);for(;p+i<h+f;){p+=i;const g=(p-h)/f,y=Te(s.x,a.x,g),_=Te(s.y,a.y,g);if(y>=0&&y<l&&_>=0&&_<l&&p-c>=0&&p+c<=u){const i=new Wl(y,_,m,e);i._round(),r&&!Hl(t,i,o,r,n)||d.push(i)}}h+=f}return a||d.length||s||(d=ec(t,h/2,i,r,n,o,s,!0,l)),d}function ic(t,e,i,r,n){const o=[];for(let s=0;s<t.length;s++){const a=t[s];let l;for(let t=0;t<a.length-1;t++){let s=a[t],c=a[t+1];s.x<e&&c.x<e||(s.x<e?s=new T(e,s.y+(e-s.x)/(c.x-s.x)*(c.y-s.y))._round():c.x<e&&(c=new T(e,s.y+(e-s.x)/(c.x-s.x)*(c.y-s.y))._round()),s.y<i&&c.y<i||(s.y<i?s=new T(s.x+(i-s.y)/(c.y-s.y)*(c.x-s.x),i)._round():c.y<i&&(c=new T(s.x+(i-s.y)/(c.y-s.y)*(c.x-s.x),i)._round()),s.x>=r&&c.x>=r||(s.x>=r?s=new T(r,s.y+(r-s.x)/(c.x-s.x)*(c.y-s.y))._round():c.x>=r&&(c=new T(r,s.y+(r-s.x)/(c.x-s.x)*(c.y-s.y))._round()),s.y>=n&&c.y>=n||(s.y>=n?s=new T(s.x+(n-s.y)/(c.y-s.y)*(c.x-s.x),n)._round():c.y>=n&&(c=new T(s.x+(n-s.y)/(c.y-s.y)*(c.x-s.x),n)._round()),l&&s.equals(l[l.length-1])||(l=[s],o.push(l)),l.push(c)))))}}return o}function rc(t,e,i,r){const n=[],o=t.image,s=o.pixelRatio,a=o.paddedRect.w-2,l=o.paddedRect.h-2,c=t.right-t.left,u=t.bottom-t.top,h=o.stretchX||[[0,a]],p=o.stretchY||[[0,l]],d=(t,e)=>t+e[1]-e[0],f=h.reduce(d,0),m=p.reduce(d,0),g=a-f,y=l-m;let _=0,x=f,v=0,b=m,w=0,S=g,I=0,E=y;if(o.content&&r){const t=o.content;_=nc(h,0,t[0]),v=nc(p,0,t[1]),x=nc(h,t[0],t[2]),b=nc(p,t[1],t[3]),w=t[0]-_,I=t[1]-v,S=t[2]-t[0]-x,E=t[3]-t[1]-b}const A=(r,n,a,l)=>{const h=sc(r.stretch-_,x,c,t.left),p=ac(r.fixed-w,S,r.stretch,f),d=sc(n.stretch-v,b,u,t.top),g=ac(n.fixed-I,E,n.stretch,m),y=sc(a.stretch-_,x,c,t.left),A=ac(a.fixed-w,S,a.stretch,f),M=sc(l.stretch-v,b,u,t.top),P=ac(l.fixed-I,E,l.stretch,m),z=new T(h,d),k=new T(y,d),C=new T(y,M),L=new T(h,M),D=new T(p/s,g/s),B=new T(A/s,P/s),F=e*Math.PI/180;if(F){const t=Math.sin(F),e=Math.cos(F),i=[e,-t,t,e];z._matMult(i),k._matMult(i),L._matMult(i),C._matMult(i)}const R=r.stretch+r.fixed,O=n.stretch+n.fixed;return{tl:z,tr:k,bl:L,br:C,tex:{x:o.paddedRect.x+1+R,y:o.paddedRect.y+1+O,w:a.stretch+a.fixed-R,h:l.stretch+l.fixed-O},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:B,minFontScaleX:S/s/c,minFontScaleY:E/s/u,isSDF:i}};if(r&&(o.stretchX||o.stretchY)){const t=oc(h,g,f),e=oc(p,y,m);for(let i=0;i<t.length-1;i++){const r=t[i],o=t[i+1];for(let t=0;t<e.length-1;t++)n.push(A(r,e[t],o,e[t+1]))}}else n.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:l+1}));return n}function nc(t,e,i){let r=0;for(const n of t)r+=Math.max(e,Math.min(i,n[1]))-Math.max(e,Math.min(i,n[0]));return r}function oc(t,e,i){const r=[{fixed:-1,stretch:0}];for(const[e,i]of t){const t=r[r.length-1];r.push({fixed:e-t.stretch,stretch:t.stretch}),r.push({fixed:e-t.stretch,stretch:t.stretch+(i-e)})}return r.push({fixed:e+1,stretch:i}),r}function sc(t,e,i,r){return t/e*i+r}function ac(t,e,i,r){return t-e*i/r}Sr("Anchor",Wl);class lc{constructor(t,e,i,r,n,o,s,a,l,c){if(this.boxStartIndex=t.length,l){let t=o.top,e=o.bottom;const i=o.collisionPadding;i&&(t-=i[1],e+=i[3]);let r=e-t;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let l=o.top*s-a,u=o.bottom*s+a,h=o.left*s-a,p=o.right*s+a;const d=o.collisionPadding;if(d&&(h-=d[0]*s,l-=d[1]*s,p+=d[2]*s,u+=d[3]*s),c){const t=new T(h,l),e=new T(p,l),i=new T(h,u),r=new T(p,u),n=c*Math.PI/180;t._rotate(n),e._rotate(n),i._rotate(n),r._rotate(n),h=Math.min(t.x,e.x,i.x,r.x),p=Math.max(t.x,e.x,i.x,r.x),l=Math.min(t.y,e.y,i.y,r.y),u=Math.max(t.y,e.y,i.y,r.y)}t.emplaceBack(e.x,e.y,h,l,p,u,i,r,n)}this.boxEndIndex=t.length}}class cc{constructor(t=[],e=uc){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,r=e[t];for(;t>0;){const n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r}_down(t){const{data:e,compare:i}=this,r=this.length>>1,n=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const s=r+1;if(s<this.length&&i(e[s],o)<0&&(r=s,o=e[s]),i(o,n)>=0)break;e[t]=o,t=r}e[t]=n}}function uc(t,e){return t<e?-1:t>e?1:0}function hc(t,e=1,i=!1){let r=1/0,n=1/0,o=-1/0,s=-1/0;const a=t[0];for(let t=0;t<a.length;t++){const e=a[t];(!t||e.x<r)&&(r=e.x),(!t||e.y<n)&&(n=e.y),(!t||e.x>o)&&(o=e.x),(!t||e.y>s)&&(s=e.y)}const l=Math.min(o-r,s-n);let c=l/2;const u=new cc([],pc);if(0===l)return new T(r,n);for(let e=r;e<o;e+=l)for(let i=n;i<s;i+=l)u.push(new dc(e+c,i+c,c,t));let h=function(t){let e=0,i=0,r=0;const n=t[0];for(let t=0,o=n.length,s=o-1;t<o;s=t++){const o=n[t],a=n[s],l=o.x*a.y-a.x*o.y;i+=(o.x+a.x)*l,r+=(o.y+a.y)*l,e+=3*l}return new dc(i/e,r/e,0,t)}(t),p=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,i&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-h.d<=e||(c=r.h/2,u.push(new dc(r.p.x-c,r.p.y-c,c,t)),u.push(new dc(r.p.x+c,r.p.y-c,c,t)),u.push(new dc(r.p.x-c,r.p.y+c,c,t)),u.push(new dc(r.p.x+c,r.p.y+c,c,t)),p+=4)}return i&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function pc(t,e){return e.max-t.max}function dc(t,e,i,r){this.p=new T(t,e),this.h=i,this.d=function(t,e){let i=!1,r=1/0;for(let n=0;n<e.length;n++){const o=e[n];for(let e=0,n=o.length,s=n-1;e<n;s=e++){const n=o[e],a=o[s];n.y>t.y!=a.y>t.y&&t.x<(a.x-n.x)*(t.y-n.y)/(a.y-n.y)+n.x&&(i=!i),r=Math.min(r,ts(t,n,a))}}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const fc=Number.POSITIVE_INFINITY;function mc(t,e){return e[1]!==fc?function(t,e,i){let r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){let i=0,r=0;e<0&&(e=0);const n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}function gc(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yc(e,i,r,n,o,s,a,l,c,u,h){let p=s.textMaxSize.evaluate(i,{});void 0===p&&(p=a);const d=e.layers[0].layout,m=d.get("icon-offset").evaluate(i,{},h),g=vc(r.horizontal),y=a/24,_=e.tilePixelRatio*y,x=e.tilePixelRatio*p/24,v=e.tilePixelRatio*l,b=e.tilePixelRatio*d.get("symbol-spacing"),w=d.get("text-padding")*e.tilePixelRatio,S=d.get("icon-padding")*e.tilePixelRatio,I=d.get("text-max-angle")/180*Math.PI,T="viewport"!==d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),E="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),A=d.get("symbol-placement"),M=b/2,P=d.get("icon-text-fit");let z;n&&"none"!==P&&(e.allowVerticalPlacement&&r.vertical&&(z=Zl(n,r.vertical,P,d.get("icon-text-fit-padding"),m,y)),g&&(n=Zl(n,g,P,d.get("icon-text-fit-padding"),m,y)));const k=(l,p)=>{p.x<0||p.x>=Vo||p.y<0||p.y>=Vo||function(e,i,r,n,o,s,a,l,c,u,h,p,d,m,g,y,_,x,v,b,w,S,I,T,E){const A=e.addToLineVertexArray(i,r);let M,P,z,k,C=0,L=0,D=0,B=0,F=-1,R=-1;const O={};let U=vo(""),V=0,N=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[V,N]=l.layout.get("text-offset").evaluate(w,{},T).map((t=>t*tl)):(V=l.layout.get("text-radial-offset").evaluate(w,{},T)*tl,N=fc),e.allowVerticalPlacement&&n.vertical){const t=l.layout.get("text-rotate").evaluate(w,{},T)+90;z=new lc(c,i,u,h,p,n.vertical,d,m,g,t),a&&(k=new lc(c,i,u,h,p,a,_,x,g,t))}if(o){const r=l.layout.get("icon-rotate").evaluate(w,{}),n="none"!==l.layout.get("icon-text-fit"),s=rc(o,r,I,n),d=a?rc(a,r,I,n):void 0;P=new lc(c,i,u,h,p,o,_,x,!1,r),C=4*s.length;const m=e.iconSizeData;let g=null;"source"===m.kind?(g=[jl*l.layout.get("icon-size").evaluate(w,{})],g[0]>_c&&f(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===m.kind&&(g=[jl*S.compositeIconSizes[0].evaluate(w,{},T),jl*S.compositeIconSizes[1].evaluate(w,{},T)],(g[0]>_c||g[1]>_c)&&f(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,s,g,b,v,w,t.WritingMode.none,i,A.lineStartIndex,A.lineLength,-1,T),F=e.icon.placedSymbolArray.length-1,d&&(L=4*d.length,e.addSymbols(e.icon,d,g,b,v,w,t.WritingMode.vertical,i,A.lineStartIndex,A.lineLength,-1,T),R=e.icon.placedSymbolArray.length-1)}const $=Object.keys(n.horizontal);for(const r of $){const o=n.horizontal[r];if(!M){U=vo(o.text);const t=l.layout.get("text-rotate").evaluate(w,{},T);M=new lc(c,i,u,h,p,o,d,m,g,t)}const a=1===o.positionedLines.length;if(D+=xc(e,i,o,s,l,g,w,y,A,n.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,a?$:[r],O,F,S,T),a)break}n.vertical&&(B+=xc(e,i,n.vertical,s,l,g,w,y,A,t.WritingMode.vertical,["vertical"],O,R,S,T));const q=M?M.boxStartIndex:e.collisionBoxArray.length,G=M?M.boxEndIndex:e.collisionBoxArray.length,Z=z?z.boxStartIndex:e.collisionBoxArray.length,j=z?z.boxEndIndex:e.collisionBoxArray.length,X=P?P.boxStartIndex:e.collisionBoxArray.length,W=P?P.boxEndIndex:e.collisionBoxArray.length,H=k?k.boxStartIndex:e.collisionBoxArray.length,Y=k?k.boxEndIndex:e.collisionBoxArray.length;let K=-1;const J=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;K=J(M,K),K=J(z,K),K=J(P,K),K=J(k,K);const Q=K>-1?1:0;Q&&(K*=E/tl),e.glyphOffsetArray.length>=Pc.MAX_GLYPHS&&f("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey),e.symbolInstances.emplaceBack(i.x,i.y,O.right>=0?O.right:-1,O.center>=0?O.center:-1,O.left>=0?O.left:-1,O.vertical||-1,F,R,U,q,G,Z,j,X,W,H,Y,u,D,B,C,L,Q,0,d,V,N,K)}(e,p,l,r,n,o,z,e.layers[0],e.collisionBoxArray,i.index,i.sourceLayerIndex,e.index,_,w,T,c,v,S,E,m,i,s,u,h,a)};if("line"===A)for(const t of ic(i.geometry,0,0,Vo,Vo)){const i=tc(t,b,I,r.vertical||g,n,24,x,e.overscaling,Vo);for(const r of i){const i=g;i&&bc(e,i.text,M,r)||k(t,r)}}else if("line-center"===A){for(const t of i.geometry)if(t.length>1){const e=Ql(t,I,r.vertical||g,n,24,x);e&&k(t,e)}}else if("Polygon"===i.type)for(const t of oa(i.geometry,0)){const e=hc(t,16);k(t[0],new Wl(e.x,e.y,0))}else if("LineString"===i.type)for(const t of i.geometry)k(t,new Wl(t[0].x,t[0].y,0));else if("Point"===i.type)for(const t of i.geometry)for(const e of t)k([e],new Wl(e.x,e.y,0))}const _c=32640;function xc(t,e,i,r,n,o,s,a,l,c,u,h,p,d,m){const g=function(t,e,i,r,n,o,s,a){const l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[];for(const t of e.positionedLines)for(const r of t.positionedGlyphs){if(!r.rect)continue;const o=r.rect||{};let u=4,h=!0,p=1,d=0;const f=(n||a)&&r.vertical,m=r.metrics.advance*r.scale/2;if(a&&e.verticalizable){const e=(r.scale-1)*tl,i=(tl-r.metrics.width*r.scale)/2;d=t.lineOffset/2-(r.imageName?-i:e)}if(r.imageName){const t=s[r.imageName];h=t.sdf,p=t.pixelRatio,u=1/p}const g=n?[r.x+m,r.y]:[0,0];let y=n?[0,0]:[r.x+m+i[0],r.y+i[1]-d],_=[0,0];f&&(_=y,y=[0,0]);const x=(r.metrics.left-u)*r.scale-m+y[0],v=(-r.metrics.top-u)*r.scale+y[1],b=x+o.w*r.scale/p,w=v+o.h*r.scale/p,S=new T(x,v),I=new T(b,v),E=new T(x,w),A=new T(b,w);if(f){const t=new T(-m,m-zl),e=-Math.PI/2,i=12-m,n=new T(22-i,-(r.imageName?i:0)),o=new T(..._);S._rotateAround(e,t)._add(n)._add(o),I._rotateAround(e,t)._add(n)._add(o),E._rotateAround(e,t)._add(n)._add(o),A._rotateAround(e,t)._add(n)._add(o)}if(l){const t=Math.sin(l),e=Math.cos(l),i=[e,-t,t,e];S._matMult(i),I._matMult(i),E._matMult(i),A._matMult(i)}const M=new T(0,0),P=new T(0,0);c.push({tl:S,tr:I,bl:E,br:A,tex:o,writingMode:e.writingMode,glyphOffset:g,sectionIndex:r.sectionIndex,isSDF:h,pixelOffsetTL:M,pixelOffsetBR:P,minFontScaleX:0,minFontScaleY:0})}return c}(0,i,a,n,o,s,r,t.allowVerticalPlacement),y=t.textSizeData;let _=null;"source"===y.kind?(_=[jl*n.layout.get("text-size").evaluate(s,{})],_[0]>_c&&f(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===y.kind&&(_=[jl*d.compositeTextSizes[0].evaluate(s,{},m),jl*d.compositeTextSizes[1].evaluate(s,{},m)],(_[0]>_c||_[1]>_c)&&f(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,g,_,a,o,s,c,e,l.lineStartIndex,l.lineLength,p,m);for(const e of u)h[e]=t.text.placedSymbolArray.length-1;return 4*g.length}function vc(t){for(const e in t)return t[e];return null}function bc(t,e,i,r){const n=t.compareText;if(e in n){const t=n[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<i)return!0}else n[e]=[];return n[e].push(r),!1}const wc=fa.VectorTileFeature.types,Sc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ic(t,e,i,r,n,o,s,a,l,c,u,h,p){const d=a?Math.min(_c,Math.round(a[0])):0,f=a?Math.min(_c,Math.round(a[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),o,s,(d<<1)+(l?1:0),f,16*c,16*u,256*h,256*p)}function Tc(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Ec(t){for(const e of t.sections)if(Fr(e.text))return!0;return!1}class Ac{constructor(t){this.layoutVertexArray=new io,this.indexArray=new ao,this.programConfigurations=t,this.segments=new ho,this.dynamicLayoutVertexArray=new ro,this.opacityVertexArray=new no,this.placedSymbolArray=new qn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xa.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Wa.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Sc,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Sr("SymbolBuffers",Ac);class Mc{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new ho,this.collisionVertexArray=new so}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ha.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Sr("CollisionBuffers",Mc);class Pc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=us([]),this.placementViewportMatrix=us([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xl(this.zoom,i["text-size"]),this.iconSizeData=Xl(this.zoom,i["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==Dc(r,"text-overlap","text-allow-overlap")||"never"!==Dc(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!n.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((e=>t.WritingMode[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Ac(new Ro(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Ac(new Ro(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new jn,this.lineVertexArray=new Xn,this.symbolInstances=new Zn}calculateGlyphDependencies(t,e,i,r,n){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||r)&&n){const i=Qa[t.charAt(o)];i&&(e[i.charCodeAt(0)]=!0)}}populate(e,i,r){const n=this.layers[0],o=n.layout,s=o.get("text-font"),a=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==a.value.kind||a.value.value instanceof Ft&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const p=i.iconDependencies,d=i.glyphDependencies,f=i.availableImages,m=new Hr(this.zoom);for(const{feature:i,id:a,index:l,sourceLayerIndex:g}of e){const e=n._featureFilter.needGeometry,y=Go(i,e);if(!n._featureFilter.filter(m,y,r))continue;let _,x;if(e||(y.geometry=qo(i)),c){const t=n.getValueAndResolveTokens("text-field",y,r,f),e=Ft.factory(t);Ec(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===jr()||this.hasRTLText&&Wr.isParsed())&&(_=Ja(e,n,y))}if(u){const t=n.getValueAndResolveTokens("icon-image",y,r,f);x=t instanceof Rt?t:Rt.fromString(t)}if(!_&&!x)continue;const v=this.sortFeaturesByKey?h.evaluate(y,{},r):void 0;if(this.features.push({id:a,text:_,icon:x,index:l,sourceLayerIndex:g,geometry:y.geometry,properties:i.properties,type:wc[i.type],sortKey:v}),x&&(p[x.name]=!0),_){const e=s.evaluate(y,{},r).join(","),i="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.WritingMode.vertical)>=0;for(const t of _.sections)if(t.image)p[t.image.name]=!0;else{const r=Pr(_.toString()),n=t.fontStack||e,o=d[n]=d[n]||{};this.calculateGlyphDependencies(t.text,o,i,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},i={},r=[];let n=0;function o(e){r.push(t[e]),n++}function s(t,e,n){const o=i[t];return delete i[t],i[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function a(t,i,n){const o=e[i];return delete e[i],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function l(t,e,i){const r=i?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,p=u.text?u.text.toString():null;if(!p){o(c);continue}const d=l(p,h),f=l(p,h,!0);if(d in i&&f in e&&i[d]!==e[f]){const t=a(d,f,h),n=s(d,f,r[t].geometry);delete e[d],delete i[f],i[l(p,r[n].geometry,!0)]=n,r[t].geometry=null}else d in i?s(d,f,h):f in e?a(d,f,h):(o(c),e[d]=n-1,i[f]=n-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]);const n={};for(let r=t.segment+1;r<e.length;r++)n[r]={x:e[r].x,y:e[r].y,tileUnitDistanceFromAnchor:i},r<e.length-1&&(i+=e[r+1].dist(e[r]));for(let i=t.segment||0;i>=0;i--)n[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:r},i>0&&(r+=e[i-1].dist(e[i]));for(let t=0;t<e.length;t++){const e=n[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,i,r,n,o,s,a,l,c,u,h,p){const d=e.indexArray,f=e.layoutVertexArray,m=e.segments.prepareSegment(4*i.length,f,d,this.canOverlap?s.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,_=this.allowVerticalPlacement&&a===t.WritingMode.vertical?Math.PI/2:0,x=s.text&&s.text.sections;for(let t=0;t<i.length;t++){const{tl:n,tr:o,bl:a,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:v,glyphOffset:b,isSDF:w,sectionIndex:S}=i[t],I=m.vertexLength,T=b[1];Ic(f,l.x,l.y,n.x,T+n.y,u.x,u.y,r,w,h.x,h.y,y,v),Ic(f,l.x,l.y,o.x,T+o.y,u.x+u.w,u.y,r,w,g.x,h.y,y,v),Ic(f,l.x,l.y,a.x,T+a.y,u.x,u.y+u.h,r,w,h.x,g.y,y,v),Ic(f,l.x,l.y,c.x,T+c.y,u.x+u.w,u.y+u.h,r,w,g.x,g.y,y,v),Tc(e.dynamicLayoutVertexArray,l,_),d.emplaceBack(I,I+1,I+2),d.emplaceBack(I+1,I+2,I+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),t!==i.length-1&&S===i[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,s,s.index,{},p,x&&x[S])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,0,!1,0,h)}_addCollisionDebugVertex(t,e,i,r,n,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(t,e,i,r,n,o,s){const a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=a.vertexLength,c=n.layoutVertexArray,u=n.collisionVertexArray,h=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(c,u,o,h,p,new T(t,e)),this._addCollisionDebugVertex(c,u,o,h,p,new T(i,e)),this._addCollisionDebugVertex(c,u,o,h,p,new T(i,r)),this._addCollisionDebugVertex(c,u,o,h,p,new T(t,r)),a.vertexLength+=4;const d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),a.primitiveLength+=4}addDebugCollisionBoxes(t,e,i,r){for(let n=t;n<e;n++){const t=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,r?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,i)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Mc(oo,Ya.members,lo),this.iconCollisionBox=new Mc(oo,Ya.members,lo);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,i,r,n,o,s,a,l){const c={};for(let r=e;r<i;r++){const e=t.get(r);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.textFeatureIndex=e.featureIndex;break}for(let e=r;e<n;e++){const i=t.get(e);c.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalTextFeatureIndex=i.featureIndex;break}for(let e=o;e<s;e++){const i=t.get(e);c.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.iconFeatureIndex=i.featureIndex;break}for(let e=a;e<l;e++){const i=t.get(e);c.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalIconFeatureIndex=i.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs;for(let e=i.vertexStartIndex;e<r;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),i=Math.cos(t),r=[],n=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const s=this.symbolInstances.get(t);r.push(0|Math.round(e*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||n[e]-n[t])),o}addToSortKeyRanges(t,e){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Sr("SymbolBucket",Pc,{omit:["layers","collisionBoxArray","features","compareText"]}),Pc.MAX_GLYPHS=65535,Pc.addDynamicAttributes=Tc;const zc=new un({"symbol-placement":new on(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new on(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new on(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new on(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new on(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new on(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new on(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new on(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new on(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(rt.layout_symbol["icon-size"]),"icon-text-fit":new on(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new on(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(rt.layout_symbol["icon-image"]),"icon-rotate":new sn(rt.layout_symbol["icon-rotate"]),"icon-padding":new on(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new on(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(rt.layout_symbol["icon-offset"]),"icon-anchor":new sn(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new on(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new on(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new on(rt.layout_symbol["text-rotation-alignment"]),"text-field":new sn(rt.layout_symbol["text-field"]),"text-font":new sn(rt.layout_symbol["text-font"]),"text-size":new sn(rt.layout_symbol["text-size"]),"text-max-width":new sn(rt.layout_symbol["text-max-width"]),"text-line-height":new on(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(rt.layout_symbol["text-letter-spacing"]),"text-justify":new sn(rt.layout_symbol["text-justify"]),"text-radial-offset":new sn(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new on(rt.layout_symbol["text-variable-anchor"]),"text-anchor":new sn(rt.layout_symbol["text-anchor"]),"text-max-angle":new on(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new on(rt.layout_symbol["text-writing-mode"]),"text-rotate":new sn(rt.layout_symbol["text-rotate"]),"text-padding":new on(rt.layout_symbol["text-padding"]),"text-keep-upright":new on(rt.layout_symbol["text-keep-upright"]),"text-transform":new sn(rt.layout_symbol["text-transform"]),"text-offset":new sn(rt.layout_symbol["text-offset"]),"text-allow-overlap":new on(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new on(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new on(rt.layout_symbol["text-ignore-placement"]),"text-optional":new on(rt.layout_symbol["text-optional"])});var kc={paint:new un({"icon-opacity":new sn(rt.paint_symbol["icon-opacity"]),"icon-color":new sn(rt.paint_symbol["icon-color"]),"icon-halo-color":new sn(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new on(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new on(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(rt.paint_symbol["text-opacity"]),"text-color":new sn(rt.paint_symbol["text-color"],{runtimeType:mt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new sn(rt.paint_symbol["text-halo-color"]),"text-halo-width":new sn(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(rt.paint_symbol["text-halo-blur"]),"text-translate":new on(rt.paint_symbol["text-translate"]),"text-translate-anchor":new on(rt.paint_symbol["text-translate-anchor"])}),layout:zc};class Cc{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ht,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Sr("FormatSectionOverride",Cc,{omit:["defaultValue"]});class Lc extends pn{constructor(t){super(t,kc)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const i of t)e.indexOf(i)<0&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,r){const n=this.layout.get(t).evaluate(e,{},i,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||ki(o.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,((e,i)=>i in t?String(t[i]):""))}(e.properties,n)}createBucket(t){return new Pc(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of kc.paint.overridableProperties){if(!Lc.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),i=new Cc(e),r=new zi(i,e.property.specification);let n=null;n="constant"===e.value.kind||"source"===e.value.kind?new Li("source",r):new Di("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new rn(e.property,n,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&Lc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const i=t.get("text-field"),r=kc.paint.properties[e];let n=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof Ft)o(i.value.value.sections);else if("source"===i.value.kind){const t=e=>{n||(e instanceof $t&&Vt(e.value)===xt?o(e.value.sections):e instanceof jt?o(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return n}}function Dc(t,e,i){let r="never";const n=t.get(e);return n?r=n:t.get(i)&&(r="always"),r}var Bc={paint:new un({"background-color":new on(rt.paint_background["background-color"]),"background-pattern":new ln(rt.paint_background["background-pattern"]),"background-opacity":new on(rt.paint_background["background-opacity"])})},Fc={paint:new un({"raster-opacity":new on(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new on(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new on(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new on(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new on(rt.paint_raster["raster-saturation"]),"raster-contrast":new on(rt.paint_raster["raster-contrast"]),"raster-resampling":new on(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new on(rt.paint_raster["raster-fade-duration"])})};class Rc extends pn{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const Oc={circle:class extends pn{constructor(t){super(t,ls)}createBucket(t){return new jo(t)}queryRadius(t){const e=t;return ns("circle-radius",this,e)+ns("circle-stroke-width",this,e)+os(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,r,n,o,s,a){const l=ss(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,s),c=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(t,e){return t.map((t=>ms(t,e)))}(l,a),p=u?c*s:c;for(const t of r)for(const e of t){const t=u?e:ms(e,a);let i=p;const r=fs([],[e.x,e.y,0,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?i*=r[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(i*=o.cameraToCenterDistance/r[3]),Wo(h,t,i))return!0}return!1}},heatmap:class extends pn{constructor(t){super(t,ys),this._updateColorRamp()}createBucket(t){return new gs(t)}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ss({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends pn{constructor(t){super(t,Is)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends pn{constructor(t){super(t,ha)}recalculate(t,e){super.recalculate(t,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new ca(t)}queryRadius(){return os(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,r,n,o,s){return Ho(ss(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,s),r)}isTileClipped(){return!0}},"fill-extrusion":class extends pn{constructor(t){super(t,Ca)}createBucket(t){return new Pa(t)}queryRadius(){return os(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,i,r,n,o,s,a){const l=ss(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,i),u=this.paint.get("fill-extrusion-base").evaluate(e,i),h=function(t,e,i,r){const n=[];for(const i of t){const t=[i.x,i.y,0,1];fs(t,t,e),n.push(new T(t[0]/t[3],t[1]/t[3]))}return n}(l,a),p=function(t,e,i,r){const n=[],o=[],s=r[8]*e,a=r[9]*e,l=r[10]*e,c=r[11]*e,u=r[8]*i,h=r[9]*i,p=r[10]*i,d=r[11]*i;for(const e of t){const t=[],i=[];for(const n of e){const e=n.x,o=n.y,f=r[0]*e+r[4]*o+r[12],m=r[1]*e+r[5]*o+r[13],g=r[2]*e+r[6]*o+r[14],y=r[3]*e+r[7]*o+r[15],_=g+l,x=y+c,v=f+u,b=m+h,w=g+p,S=y+d,I=new T((f+s)/x,(m+a)/x);I.z=_/x,t.push(I);const E=new T(v/S,b/S);E.z=w/S,i.push(E)}n.push(t),o.push(i)}return[n,o]}(r,u,c,a);return function(t,e,i){let r=1/0;Ho(i,e)&&(r=Da(i,e[0]));for(let n=0;n<e.length;n++){const o=e[n],s=t[n];for(let t=0;t<o.length-1;t++){const e=o[t],n=[e,o[t+1],s[t+1],s[t],e];Xo(i,n)&&(r=Math.min(r,Da(i,n)))}}return r!==1/0&&r}(p[0],p[1],h)}},line:class extends pn{constructor(t){super(t,Ga),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ie,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Za.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new $a(t)}queryRadius(t){const e=t,i=ja(ns("line-width",this,e),ns("line-gap-width",this,e)),r=ns("line-offset",this,e);return i/2+Math.abs(r)+os(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,r,n,o,s){const a=ss(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),l=s/2*ja(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(r=function(t,e){const i=[];for(let r=0;r<t.length;r++){const n=t[r],o=[];for(let t=0;t<n.length;t++){const i=n[t-1],r=n[t],s=n[t+1],a=0===t?new T(0,0):r.sub(i)._unit()._perp(),l=t===n.length-1?new T(0,0):s.sub(r)._unit()._perp(),c=a._add(l)._unit(),u=c.x*l.x+c.y*l.y;0!==u&&c._mult(1/u),o.push(c._mult(e)._add(r))}i.push(o)}return i}(r,c*s)),function(t,e,i){for(let r=0;r<e.length;r++){const n=e[r];if(t.length>=3)for(let e=0;e<n.length;e++)if(is(t,n[e]))return!0;if(Yo(t,n,i))return!0}return!1}(a,r,l)}isTileClipped(){return!0}},symbol:Lc,background:class extends pn{constructor(t){super(t,Bc)}},raster:class extends pn{constructor(t){super(t,Fc)}}};class Uc{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Vc=6371008.8;class Nc{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Nc(s(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Vc*Math.acos(Math.min(n,1))}toBounds(t=0){const e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new $c(new Nc(this.lng-i,this.lat-e),new Nc(this.lng+i,this.lat+e))}static convert(t){if(t instanceof Nc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Nc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Nc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class $c{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Nc?new Nc(t.lng,t.lat):Nc.convert(t),this}setSouthWest(t){return this._sw=t instanceof Nc?new Nc(t.lng,t.lat):Nc.convert(t),this}extend(t){const e=this._sw,i=this._ne;let r,n;if(t instanceof Nc)r=t,n=t;else{if(!(t instanceof $c))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend($c.convert(t)):this.extend(Nc.convert(t)):this;if(r=t._sw,n=t._ne,!r||!n)return this}return e||i?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Nc(r.lng,r.lat),this._ne=new Nc(n.lng,n.lat)),this}getCenter(){return new Nc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Nc(this.getWest(),this.getNorth())}getSouthEast(){return new Nc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:i}=Nc.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}static convert(t){return t instanceof $c?t:t?new $c(t):t}}const qc=2*Math.PI*Vc;function Gc(t){return qc*Math.cos(t*Math.PI/180)}function Zc(t){return(180+t)/360}function jc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Xc(t,e){return t/Gc(e)}function Wc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class Hc{constructor(t,e,i=0){this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t,e=0){const i=Nc.convert(t);return new Hc(Zc(i.lng),jc(i.lat),Xc(e,i.lat))}toLngLat(){return new Nc(360*this.x-180,Wc(this.y))}toAltitude(){return this.z*Gc(Wc(this.y))}meterInMercatorCoordinateUnits(){return 1/qc*(t=Wc(this.y),1/Math.cos(t*Math.PI/180));var t}}function Yc(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class Kc{constructor(t,e,i){this.z=t,this.x=e,this.y=i,this.key=tu(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,i){const r=(o=this.y,s=this.z,a=Yc(256*(n=this.x),256*(o=Math.pow(2,s)-o-1),s),l=Yc(256*(n+1),256*(o+1),s),a[0]+","+a[1]+","+l[0]+","+l[1]);var n,o,s,a,l;const c=function(t,e,i){let r,n="";for(let o=t;o>0;o--)r=1<<o-1,n+=(e&r?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,r)}getTilePoint(t){const e=Math.pow(2,this.z);return new T((t.x*e-this.x)*Vo,(t.y*e-this.y)*Vo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Jc{constructor(t,e){this.wrap=t,this.canonical=e,this.key=tu(t,e.z,e.z,e.x,e.y)}}class Qc{constructor(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new Kc(i,+r,+n),this.key=tu(e,t,i,r,n)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Qc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){const i=this.canonical.z-t;return t>this.canonical.z?tu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):tu(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Qc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new Qc(e,this.wrap,e,i,r),new Qc(e,this.wrap,e,i+1,r),new Qc(e,this.wrap,e,i,r+1),new Qc(e,this.wrap,e,i+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Qc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Qc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Jc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Hc(t.x-this.wrap,t.y))}}function tu(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);const o=1<<i;return(o*o*t+o*n+r).toString(36)+i.toString(36)+e.toString(36)}Sr("CanonicalTileID",Kc),Sr("OverscaledTileID",Qc,{omit:["posMatrix"]});class eu{constructor(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return void f(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(let t=0;t<r;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(r,t)]=this.data[this._idx(r-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,r)]=this.data[this._idx(t,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]}get(t,e){const i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,i){return(256*t*256+256*e+i)/10-1e4}_unpackTerrarium(t,e,i){return 256*t+e+i/256-32768}getPixels(){return new ws({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,n=e*this.dim+this.dim,o=i*this.dim,s=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=s-1;break;case 1:s=o+1}const a=-e*this.dim,l=-i*this.dim;for(let e=o;e<s;e++)for(let i=r;i<n;i++)this.data[this._idx(i,e)]=t.data[this._idx(i+a,e+l)]}}Sr("DEMData",eu);class iu{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class ru{constructor(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class nu{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new br(Vo,16,0),this.grid3D=new br(Vo,16,0),this.featureIndexArray=new Hn,this.promoteId=e}insert(t,e,i,r,n,o){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);const a=o?this.grid3D:this.grid;for(let t=0;t<e.length;t++){const i=e[t],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<i.length;t++){const e=i[t];r[0]=Math.min(r[0],e.x),r[1]=Math.min(r[1],e.y),r[2]=Math.max(r[2],e.x),r[3]=Math.max(r[3],e.y)}r[0]<Vo&&r[1]<Vo&&r[2]>=0&&r[3]>=0&&a.insert(s,r[0],r[1],r[2],r[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new fa.VectorTile(new el(this.rawTileData)).layers,this.sourceLayerCoder=new iu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,r){this.loadVTLayers();const n=t.params||{},o=Vo/t.tileSize/t.scale,s=ji(n.filter),a=t.queryGeometry,l=t.queryPadding*o,c=su(a),u=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),h=su(t.cameraQueryGeometry),p=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,((e,i,r,n)=>function(t,e,i,r,n){for(const o of t)if(e<=o.x&&i<=o.y&&r>=o.x&&n>=o.y)return!0;const o=[new T(e,i),new T(e,n),new T(r,n),new T(r,i)];if(t.length>2)for(const e of o)if(is(t,e))return!0;for(let e=0;e<t.length-1;e++)if(rs(t[e],t[e+1],o))return!0;return!1}(t.cameraQueryGeometry,e-l,i-l,r+l,n+l)));for(const t of p)u.push(t);u.sort(au);const d={};let f;for(let l=0;l<u.length;l++){const c=u[l];if(c===f)continue;f=c;const h=this.featureIndexArray.get(c);let p=null;this.loadMatchingFeature(d,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,s,n.layers,n.availableImages,e,i,r,((e,i,r)=>(p||(p=qo(e)),i.queryIntersectsFeature(a,e,r,p,this.z,t.transform,o,t.pixelPosMatrix))))}return d}loadMatchingFeature(t,e,i,r,n,o,s,l,c,u,h){const p=this.bucketLayerIDs[e];if(o&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,p))return;const d=this.sourceLayerCoder.decode(i),f=this.vtLayers[d].feature(r);if(n.needGeometry){const t=Go(f,!0);if(!n.filter(new Hr(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new Hr(this.tileID.overscaledZ),f))return;const m=this.getId(f,d);for(let e=0;e<p.length;e++){const i=p[e];if(o&&o.indexOf(i)<0)continue;const n=l[i];if(!n)continue;let d={};m&&u&&(d=u.getState(n.sourceLayer||"_geojsonTileLayer",m));const g=a({},c[i]);g.paint=ou(g.paint,n.paint,f,d,s),g.layout=ou(g.layout,n.layout,f,d,s);const y=!h||h(f,n,d);if(!y)continue;const _=new ru(f,this.z,this.x,this.y,m);_.layer=g;let x=t[i];void 0===x&&(x=t[i]=[]),x.push({featureIndex:r,feature:_,intersectionZ:y})}}lookupSymbolFeatures(t,e,i,r,n,o,s,a){const l={};this.loadVTLayers();const c=ji(n);for(const n of t)this.loadMatchingFeature(l,i,r,n,c,o,s,a,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof i&&(i=Number(i))),i}}function ou(t,e,i,r,n){return u(t,((t,o)=>{const s=e instanceof nn?e.get(o):null;return s&&s.evaluate?s.evaluate(i,r,n):s}))}function su(t){let e=1/0,i=1/0,r=-1/0,n=-1/0;for(const o of t)e=Math.min(e,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),n=Math.max(n,o.y);return{minX:e,minY:i,maxX:r,maxY:n}}function au(t,e){return e-t}var lu;Sr("FeatureIndex",nu,{omit:["rawTileData","sourceLayerCoder"]}),t.PerformanceMarkers=void 0,(lu=t.PerformanceMarkers||(t.PerformanceMarkers={})).create="create",lu.load="load",lu.fullLoad="fullLoad";let cu=null,uu=[];const hu=1e3/30,pu={mark(t){performance.mark(t)},frame(t){const e=t;null!=cu&&uu.push(e-cu),cu=e},clearMetrics(){cu=null,uu=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const e in t.PerformanceMarkers)performance.clearMarks(t.PerformanceMarkers[e])},getPerformanceMetrics(){performance.measure("loadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.load),performance.measure("fullLoadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.fullLoad);const e=performance.getEntriesByName("loadTime")[0].duration,i=performance.getEntriesByName("fullLoadTime")[0].duration,r=uu.length,n=1/(uu.reduce(((t,e)=>t+e),0)/r/1e3),o=uu.filter((t=>t>hu)).reduce(((t,e)=>t+(e-hu)/hu),0);return{loadTime:e,fullLoadTime:i,fps:n,percentDroppedFrames:o/(r+o)*100}}};t.AJAXError=$,t.ARRAY_TYPE=cs,t.Actor=class{constructor(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new Uc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=y()?t:window}send(t,e,i,r,n=!1){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);const s=w(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:Tr(e,s)},s),{cancel:()=>{i&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];const t=this.cancelCallbacks[i];delete this.cancelCallbacks[i],t&&t()}else y()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)}process(){if(!this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,e){if("<response>"===e.type){const i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Er(e.error)):i(null,Er(e.data)))}else{let i=!1;const r=w(this.globalScope)?void 0:[],n=e.hasCallback?(e,n)=>{i=!0,delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Tr(e):null,data:Tr(n,r)},r)}:t=>{i=!0};let o=null;const s=Er(e.data);if(this.parent[e.type])o=this.parent[e.type](e.sourceMapId,s,n);else if(this.parent.getWorkerSource){const t=e.type.split(".");o=this.parent.getWorkerSource(e.sourceMapId,t[0],s.source)[t[1]](s,n)}else n(new Error(`Could not find function ${e.type}`));!i&&o&&o.cancel&&(this.cancelCallbacks[t]=o.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.AlphaImage=bs,t.CanonicalTileID=Kc,t.CollisionBoxArray=Nn,t.CollisionCircleLayoutArray=class extends Pn{},t.Color=Lt,t.DEMData=eu,t.DataConstantProperty=on,t.DictionaryCoder=iu,t.EXTENT=Vo,t.ErrorEvent=et,t.EvaluationParameters=Hr,t.Event=tt,t.Evented=it,t.FeatureIndex=nu,t.FillBucket=ca,t.FillExtrusionBucket=Pa,t.GeoJSONFeature=ru,t.ImageAtlas=Pl,t.ImagePosition=Ml,t.LineBucket=$a,t.LineStripIndexArray=class extends On{},t.LngLat=Nc,t.LngLatBounds=$c,t.MercatorCoordinate=Hc,t.ONE_EM=tl,t.OverscaledTileID=Qc,t.PerformanceUtils=pu,t.PosArray=class extends _n{},t.Properties=un,t.QuadTriangleArray=class extends kn{},t.RGBAImage=ws,t.RasterBoundsArray=class extends xn{},t.RequestPerformance=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.ResourceType=N,t.SegmentVector=ho,t.SymbolBucket=Pc,t.Transitionable=Jr,t.TriangleIndexArray=ao,t.Uniform1f=Eo,t.Uniform1i=class extends To{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends To{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends To{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Ao,t.UniformColor=Mo,t.UniformMatrix4f=class extends To{constructor(t,e){super(t,e),this.current=Po}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=Jc,t.ValidationError=nt,t.ZoomHistory=Ar,t.addDynamicAttributes=Tc,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);let r=t.length;const n=new Array(t.length);let o=null;t.forEach(((t,s)=>{e(t,((t,e)=>{t&&(o=t),n[s]=e,0==--r&&i(o,n)}))}))},t.bezier=r,t.bindAll=c,t.cacheEntryPossiblyAdded=function(t){D++,D>C&&(t.getActor().send("enforceCacheSizeLimit",k),D=0)},t.clamp=o,t.clearTileCache=function(t){const e=caches.delete(M);t&&e.catch(t).then((()=>t()))},t.clipLine=ic,t.clone=function(t){var e=new cs(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=p,t.collisionCircleLayout=Ka,t.config=A,t.create=function(){var t=new cs(16);return cs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.createExpression=Ci,t.createFilter=ji,t.createLayout=gn,t.createStyleLayer=function(t){return"custom"===t.type?new Rc(t):new Oc[t.type](t)},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=n,t.emitValidationErrors=vr,t.enforceCacheSizeLimit=function(t){L(),P&&P.then((e=>{e.keys().then((i=>{for(let r=0;r<i.length-t;r++)e.delete(i[r])}))}))},t.evaluateSizeForFeature=function(t,{uSize:e,uSizeT:i},{lowerSize:r,upperSize:n}){return"source"===t.kind?r/jl:"composite"===t.kind?Te(r/jl,n/jl,i):e},t.evaluateSizeForZoom=function(t,e){let i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:n,minZoom:s,maxZoom:a}=t,l=n?o(Ge.interpolationFactor(n,e,s,a),0,1):0;"camera"===t.kind?r=Te(t.minSize,t.maxSize,l):i=l}return{uSizeT:i,uSize:r}},t.evaluateVariableOffset=mc,t.evented=Zr,t.exported=I,t.exported$1=B,t.extend=a,t.filterObject=h,t.getAnchorAlignment=$l,t.getAnchorJustification=gc,t.getArrayBuffer=j,t.getImage=K,t.getJSON=function(t,e){return Z(a(t,{type:"json"}),e)},t.getOverlapMode=Dc,t.getRTLTextPluginStatus=jr,t.getReferrer=q,t.getVideo=function(t,e){const i=window.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let e=0;e<t.length;e++){const r=window.document.createElement("source");X(t[e])||(i.crossOrigin="Anonymous"),r.src=t[e],i.appendChild(r)}return{cancel:()=>{}}},t.identity=us,t.invert=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=i*a-r*s,x=i*l-n*s,v=i*c-o*s,b=r*l-n*a,w=r*c-o*a,S=n*c-o*l,I=u*m-h*f,T=u*g-p*f,E=u*y-d*f,A=h*g-p*m,M=h*y-d*m,P=p*y-d*g,z=_*P-x*M+v*A+b*E-w*T+S*I;return z?(t[0]=(a*P-l*M+c*A)*(z=1/z),t[1]=(n*M-r*P-o*A)*z,t[2]=(m*S-g*w+y*b)*z,t[3]=(p*w-h*S-d*b)*z,t[4]=(l*E-s*P-c*T)*z,t[5]=(i*P-n*E+o*T)*z,t[6]=(g*v-f*S-y*x)*z,t[7]=(u*S-p*v+d*x)*z,t[8]=(s*M-a*E+c*I)*z,t[9]=(r*E-i*M-o*I)*z,t[10]=(f*w-m*v+y*_)*z,t[11]=(h*v-u*w-d*_)*z,t[12]=(a*T-s*A-l*I)*z,t[13]=(i*A-r*T+n*I)*z,t[14]=(m*x-f*b-g*_)*z,t[15]=(u*b-h*x+p*_)*z,t):null},t.isImageBitmap=S,t.isSafari=w,t.keysDifference=function(t,e){const i=[];for(const r in t)r in e||i.push(r);return i},t.lazyLoadRTLTextPlugin=function(){Wr.isLoading()||Wr.isLoaded()||"deferred"!==jr()||Xr()},t.makeRequest=Z,t.mapObject=u,t.mercatorXfromLng=Zc,t.mercatorYfromLat=jc,t.mercatorZfromAltitude=Xc,t.mul=ds,t.multiply=hs,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.number=Te,t.ortho=function(t,e,i,r,n,o,s){var a=1/(e-i),l=1/(r-n),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(s+o)*c,t[15]=1,t},t.parseCacheControl=_,t.parseGlyphPBF=function(t){return new el(t).readFields(Il,[])},t.pbf=el,t.performSymbolLayout=function(e,i,r,n,o,s,a){e.createArrays(),e.tilePixelRatio=Vo/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const l=e.layers[0].layout,c=e.layers[0]._unevaluatedLayout._values,u={layoutIconSize:c["icon-size"].possiblyEvaluate(new Hr(e.zoom+1),a),layoutTextSize:c["text-size"].possiblyEvaluate(new Hr(e.zoom+1),a),textMaxSize:c["text-size"].possiblyEvaluate(new Hr(18))};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:i}=e.textSizeData;u.compositeTextSizes=[c["text-size"].possiblyEvaluate(new Hr(t),a),c["text-size"].possiblyEvaluate(new Hr(i),a)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:i}=e.iconSizeData;u.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new Hr(t),a),c["icon-size"].possiblyEvaluate(new Hr(i),a)]}const h=l.get("text-line-height")*tl,p="viewport"!==l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),d=l.get("text-keep-upright"),m=l.get("text-size");for(const s of e.features){const c=l.get("text-font").evaluate(s,{},a).join(","),g=m.evaluate(s,{},a),y=u.layoutTextSize.evaluate(s,{},a),_=u.layoutIconSize.evaluate(s,{},a),x={horizontal:{},vertical:void 0},v=s.text;let b,w=[0,0];if(v){const n=v.toString(),u=l.get("text-letter-spacing").evaluate(s,{},a)*tl,f=zr(n)?u:0,m=l.get("text-anchor").evaluate(s,{},a),_=l.get("text-variable-anchor");if(!_){const t=l.get("text-radial-offset").evaluate(s,{},a);w=t?mc(m,[t*tl,fc]):l.get("text-offset").evaluate(s,{},a).map((t=>t*tl))}let b=p?"center":l.get("text-justify").evaluate(s,{},a);const S=l.get("symbol-placement"),I="point"===S?l.get("text-max-width").evaluate(s,{},a)*tl:0,T=()=>{e.allowVerticalPlacement&&Pr(n)&&(x.vertical=Ll(v,i,r,o,c,I,h,m,"left",f,w,t.WritingMode.vertical,!0,S,y,g))};if(!p&&_){const e="auto"===b?_.map((t=>gc(t))):[b];let n=!1;for(let s=0;s<e.length;s++){const a=e[s];if(!x.horizontal[a])if(n)x.horizontal[a]=x.horizontal[0];else{const e=Ll(v,i,r,o,c,I,h,"center",a,f,w,t.WritingMode.horizontal,!1,S,y,g);e&&(x.horizontal[a]=e,n=1===e.positionedLines.length)}}T()}else{"auto"===b&&(b=gc(m));const e=Ll(v,i,r,o,c,I,h,m,b,f,w,t.WritingMode.horizontal,!1,S,y,g);e&&(x.horizontal[b]=e),T(),Pr(n)&&p&&d&&(x.vertical=Ll(v,i,r,o,c,I,h,m,b,f,w,t.WritingMode.vertical,!1,S,y,g))}}let S=!1;if(s.icon&&s.icon.name){const t=n[s.icon.name];t&&(b=Gl(o[s.icon.name],l.get("icon-offset").evaluate(s,{},a),l.get("icon-anchor").evaluate(s,{},a)),S=!!t.sdf,void 0===e.sdfIcons?e.sdfIcons=S:e.sdfIcons!==S&&f("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const I=vc(x.horizontal)||x.vertical;e.iconsInText=!!I&&I.iconsInText,(I||b)&&yc(e,s,x,b,n,u,y,_,w,S,a)}s&&e.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,r,n){var o,s=1/Math.tan(e/2);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(o=1/(r-n)),t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const i={};for(let r=0;r<e.length;r++){const n=e[r];n in t&&(i[n]=t[n])}return i},t.plugin=Wr,t.pointGeometry=T,t.polygonIntersectsPolygon=Xo,t.potpack=Al,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Sr,t.registerForPluginStateChange=function(t){return t({pluginStatus:Nr,pluginURL:$r}),Zr.on("pluginStateChange",t),t},t.renderColorRamp=Ss,t.rotateX=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+c*r,t[5]=s*n+u*r,t[6]=a*n+h*r,t[7]=l*n+p*r,t[8]=c*n-o*r,t[9]=u*n-s*r,t[10]=h*n-a*r,t[11]=p*n-l*r,t},t.rotateZ=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+c*r,t[1]=s*n+u*r,t[2]=a*n+h*r,t[3]=l*n+p*r,t[4]=c*n-o*r,t[5]=u*n-s*r,t[6]=h*n-a*r,t[7]=p*n-l*r,t},t.scale=function(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.setCacheLimits=function(t,e){k=t,C=e},t.setRTLTextPlugin=function(t,e,i=!1){if(Nr===Rr||Nr===Or||Nr===Ur)throw new Error("setRTLTextPlugin cannot be called multiple times.");$r=I.resolveURL(t),Nr=Rr,Vr=e,Gr(),i||Xr()},t.spec=rt,t.sphericalToCartesian=function([t,e,i]){return e+=90,e*=Math.PI/180,i*=Math.PI/180,{x:t*Math.cos(e)*Math.sin(i),y:t*Math.sin(e)*Math.sin(i),z:t*Math.cos(i)}},t.toEvaluationFeature=Go,t.transformMat4=fs,t.translate=function(t,e,i){var r,n,o,s,a,l,c,u,h,p,d,f,m=i[0],g=i[1],y=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=r=e[0],t[1]=n,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=r*m+a*g+h*y+e[12],t[13]=n*m+l*g+p*y+e[13],t[14]=o*m+c*g+d*y+e[14],t[15]=s*m+u*g+f*y+e[15]),t},t.triggerPluginCompletionEvent=qr,t.unicodeBlockLookup=Mr,t.uniqueId=function(){return l++},t.validateCustomStyleLayer=function(t){const e=[],i=t.id;return void 0===i&&e.push({message:`layers.${i}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${i}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=yr,t.validateStyle=gr,t.vectorTile=fa,t.warnOnce=f,t.wrap=s})),r(["./shared"],(function(t){function e(t){const i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){let i="[";for(const r of t)i+=`${e(r)},`;return`${i}]`}const r=Object.keys(t).sort();let n="{";for(let i=0;i<r.length;i++)n+=`${JSON.stringify(r[i])}:${e(t[r[i]])},`;return`${n}}`}function i(i){let r="";for(const n of t.refProperties)r+=`/${e(i[n])}`;return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const i of e){this._layerConfigs[i.id]=i;const e=this._layers[i.id]=t.createStyleLayer(i);e._featureFilter=t.createFilter(e.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const n=function(t,e){const r={};for(let n=0;n<t.length;n++){const o=e&&e[t[n].id]||i(t[n]);e&&(e[t[n].id]=o);let s=r[o];s||(s=r[o]=[]),s.push(t[n])}const n=[];for(const t in r)n.push(r[t]);return n}(Object.values(this._layerConfigs),this.keyCache);for(const t of n){const e=t.map((t=>this._layers[t.id])),i=e[0];if("none"===i.visibility)continue;const r=i.source||"";let n=this.familiesBySource[r];n||(n=this.familiesBySource[r]={});const o=i.sourceLayer||"_geojsonTileLayer";let s=n[o];s||(s=n[o]=[]),s.push(e)}}}class n{constructor(e){const i={},r=[];for(const t in e){const n=e[t],o=i[t]={};for(const t in n){const e=n[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const i={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};r.push(i),o[t]={rect:i,metrics:e.metrics}}}const{w:n,h:o}=t.potpack(r),s=new t.AlphaImage({width:n||1,height:o||1});for(const r in e){const n=e[r];for(const e in n){const o=n[+e];if(!o||0===o.bitmap.width||0===o.bitmap.height)continue;const a=i[r][e].rect;t.AlphaImage.copy(o.bitmap,s,{x:0,y:0},{x:a.x+1,y:a.y+1},o.bitmap)}}this.image=s,this.positions=i}}t.register("GlyphAtlas",n);class o{constructor(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId}parse(e,i,r,o,a){this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;const l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},h={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},p=i.familiesBySource[this.source];for(const i in p){const n=e.layers[i];if(!n)continue;1===n.version&&t.warnOnce(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const o=l.encode(i),a=[];for(let t=0;t<n.length;t++){const e=n.feature(t),r=c.getId(e,i);a.push({feature:e,id:r,index:t,sourceLayerIndex:o})}for(const t of p[i]){const e=t[0];e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(s(t,this.zoom,r),(u[e.id]=e.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(a,h,this.tileID.canonical),c.bucketLayerIDs.push(t.map((t=>t.id))))}}let d,f,m,g;const y=t.mapObject(h.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?o.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{d||(d=t,f=e,v.call(this))})):f={};const _=Object.keys(h.iconDependencies);_.length?o.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{d||(d=t,m=e,v.call(this))})):m={};const x=Object.keys(h.patternDependencies);function v(){if(d)return a(d);if(f&&m&&g){const e=new n(f),i=new t.ImageAtlas(m,g);for(const n in u){const o=u[n];o instanceof t.SymbolBucket?(s(o.layers,this.zoom,r),t.performSymbolLayout(o,f,e.positions,m,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(s(o.layers,this.zoom,r),o.addFeatures(h,this.tileID.canonical,i.patternPositions))}this.status="done",a(null,{buckets:Object.values(u).filter((t=>!t.isEmpty())),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:i,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?e.positions:null})}}x.length?o.send("getImages",{icons:x,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{d||(d=t,g=e,v.call(this))})):g={},v.call(this)}}function s(e,i,r){const n=new t.EvaluationParameters(i);for(const t of e)t.recalculate(n,r)}function a(e,i){const r=t.getArrayBuffer(e.request,((e,r,n,o)=>{e?i(e):r&&i(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:n,expires:o})}));return()=>{r.cancel(),i()}}class l{constructor(t,e,i,r){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=r||a,this.loading={},this.loaded={}}loadTile(e,i){const r=e.uid;this.loading||(this.loading={});const n=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[r]=new o(e);s.abort=this.loadVectorData(e,((e,o)=>{if(delete this.loading[r],e||!o)return s.status="done",this.loaded[r]=s,i(e);const a=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);const c={};if(n){const t=n.finish();t&&(c.resourceTiming=JSON.parse(JSON.stringify(t)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return i(e);i(null,t.extend({rawTileData:a.slice(0)},r,l,c))})),this.loaded=this.loaded||{},this.loaded[r]=s}))}reloadTile(t,e){const i=this.loaded,r=t.uid,n=this;if(i&&i[r]){const o=i[r];o.showCollisionBoxes=t.showCollisionBoxes;const s=(t,i)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,n.layerIndex,this.availableImages,n.actor,r)),e(t,i)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}abortTile(t,e){const i=this.loading,r=t.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),e()}removeTile(t,e){const i=this.loaded,r=t.uid;i&&i[r]&&delete i[r],e()}}class c{constructor(){this.loaded={}}loadTile(e,i){const{uid:r,encoding:n,rawImageData:o}=e,s=t.isImageBitmap(o)?this.getImageData(o):o,a=new t.DEMData(r,s,n);this.loaded=this.loaded||{},this.loaded[r]=a,i(null,a)}getImageData(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const i=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)}removeTile(t){const e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]}}var u=function t(e,i){var r,n=e&&e.type;if("FeatureCollection"===n)for(r=0;r<e.features.length;r++)t(e.features[r],i);else if("GeometryCollection"===n)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],i);else if("Feature"===n)t(e.geometry,i);else if("Polygon"===n)h(e.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<e.coordinates.length;r++)h(e.coordinates[r],i);return e};function h(t,e){if(0!==t.length){p(t[0],e);for(var i=1;i<t.length;i++)p(t[i],!e)}}function p(t,e){for(var i=0,r=0,n=0,o=t.length,s=o-1;n<o;s=n++){var a=(t[n][0]-t[s][0])*(t[s][1]+t[n][1]),l=i+a;r+=Math.abs(i)>=Math.abs(a)?i-l+a:a-l+i,i=l}i+r>=0!=!!e&&t.reverse()}const d=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class f{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const i of this._feature.geometry)e.push([new t.pointGeometry(i[0],i[1])]);return e}{const e=[];for(const i of this._feature.geometry){const r=[];for(const e of i)r.push(new t.pointGeometry(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,i){return d.call(this,t,e,i)}}class m{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new f(this._features[t])}}var g={exports:{}},y=t.pointGeometry,_=t.vectorTile.VectorTileFeature,x=v;function v(t,e){this.options=e||{},this.features=t,this.length=t.length}function b(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}v.prototype.feature=function(t){return new b(this.features[t],this.options.extent)},b.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],r=[],n=0;n<i.length;n++)r.push(new y(i[n][0],i[n][1]));this.geometry.push(r)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var l=s[a];e=Math.min(e,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[e,r,i,n]},b.prototype.toGeoJSON=_.prototype.toGeoJSON;var w=t.pbf,S=x;function I(t){var e=new w;return function(t,e){for(var i in t.layers)e.writeMessage(3,T,t.layers[i])}(t,e),e.finish()}function T(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,E,r);var n=r.keys;for(i=0;i<n.length;i++)e.writeStringField(3,n[i]);var o=r.values;for(i=0;i<o.length;i++)e.writeMessage(4,k,o[i])}function E(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,A,t),e.writeVarintField(3,i.type),e.writeMessage(4,z,i)}function A(t,e){var i=t.feature,r=t.keys,n=t.values,o=t.keycache,s=t.valuecache;for(var a in i.properties){var l=i.properties[a],c=o[a];if(null!==l){void 0===c&&(r.push(a),o[a]=c=r.length-1),e.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,p=s[h];void 0===p&&(n.push(l),s[h]=p=n.length-1),e.writeVarint(p)}}}function M(t,e){return(e<<3)+(7&t)}function P(t){return t<<1^t>>31}function z(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,o=0,s=i.length,a=0;a<s;a++){var l=i[a],c=1;1===r&&(c=l.length),e.writeVarint(M(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&e.writeVarint(M(2,u-1));var p=l[h].x-n,d=l[h].y-o;e.writeVarint(P(p)),e.writeVarint(P(d)),n+=p,o+=d}3===r&&e.writeVarint(M(7,1))}}function k(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}g.exports=I,g.exports.fromVectorTileJs=I,g.exports.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new S(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return I({layers:i})},g.exports.GeoJSONWrapper=S;var C=g.exports;function L(t,e,i,r,n,o){if(n-r<=i)return;const s=r+n>>1;D(t,e,s,r,n,o%2),L(t,e,i,r,s-1,o+1),L(t,e,i,s+1,n,o+1)}function D(t,e,i,r,n,o){for(;n>r;){if(n-r>600){const s=n-r+1,a=i-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(a-s/2<0?-1:1);D(t,e,i,Math.max(r,Math.floor(i-a*c/s+u)),Math.min(n,Math.floor(i+(s-a)*c/s+u)),o)}const s=e[2*i+o];let a=r,l=n;for(B(t,e,r,i),e[2*n+o]>s&&B(t,e,r,n);a<l;){for(B(t,e,a,l),a++,l--;e[2*a+o]<s;)a++;for(;e[2*l+o]>s;)l--}e[2*r+o]===s?B(t,e,r,l):(l++,B(t,e,l,n)),l<=i&&(r=l+1),i<=l&&(n=l-1)}}function B(t,e,i,r){F(t,i,r),F(e,2*i,2*r),F(e,2*i+1,2*r+1)}function F(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function R(t,e,i,r){const n=t-i,o=e-r;return n*n+o*o}const O=t=>t[0],U=t=>t[1];class V{constructor(t,e=O,i=U,r=64,n=Float64Array){this.nodeSize=r,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),a=this.coords=new n(2*t.length);for(let r=0;r<t.length;r++)s[r]=r,a[2*r]=e(t[r]),a[2*r+1]=i(t[r]);L(s,a,r,0,s.length-1,0)}range(t,e,i,r){return function(t,e,i,r,n,o,s){const a=[0,t.length-1,0],l=[];let c,u;for(;a.length;){const h=a.pop(),p=a.pop(),d=a.pop();if(p-d<=s){for(let s=d;s<=p;s++)c=e[2*s],u=e[2*s+1],c>=i&&c<=n&&u>=r&&u<=o&&l.push(t[s]);continue}const f=Math.floor((d+p)/2);c=e[2*f],u=e[2*f+1],c>=i&&c<=n&&u>=r&&u<=o&&l.push(t[f]);const m=(h+1)%2;(0===h?i<=c:r<=u)&&(a.push(d),a.push(f-1),a.push(m)),(0===h?n>=c:o>=u)&&(a.push(f+1),a.push(p),a.push(m))}return l}(this.ids,this.coords,t,e,i,r,this.nodeSize)}within(t,e,i){return function(t,e,i,r,n,o){const s=[0,t.length-1,0],a=[],l=n*n;for(;s.length;){const c=s.pop(),u=s.pop(),h=s.pop();if(u-h<=o){for(let n=h;n<=u;n++)R(e[2*n],e[2*n+1],i,r)<=l&&a.push(t[n]);continue}const p=Math.floor((h+u)/2),d=e[2*p],f=e[2*p+1];R(d,f,i,r)<=l&&a.push(t[p]);const m=(c+1)%2;(0===c?i-n<=d:r-n<=f)&&(s.push(h),s.push(p-1),s.push(m)),(0===c?i+n>=d:r+n>=f)&&(s.push(p+1),s.push(u),s.push(m))}return a}(this.ids,this.coords,t,e,i,this.nodeSize)}}const N={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},$=Math.fround||(q=new Float32Array(1),t=>(q[0]=+t,q[0]));var q;class G{constructor(t){this.options=J(Object.create(N),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:i,maxZoom:r,nodeSize:n}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let s=[];for(let e=0;e<t.length;e++)t[e].geometry&&s.push(j(t[e],e));this.trees[r+1]=new V(s,Q,tt,n,Float32Array),e&&console.timeEnd(o);for(let t=r;t>=i;t--){const i=+Date.now();s=this._cluster(s,t),this.trees[t]=new V(s,Q,tt,n,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,s.length,+Date.now()-i)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let n=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,n=180;else if(i>n){const t=this.getClusters([i,r,180,o],e),s=this.getClusters([-180,r,n,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(H(i),Y(o),H(n),Y(r)),l=[];for(const t of a){const e=s.points[t];l.push(e.numPoints?X(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);const o=n.points[e];if(!o)throw new Error(r);const s=this.options.radius/(this.options.extent*Math.pow(2,i-1)),a=n.within(o.x,o.y,s),l=[];for(const e of a){const i=n.points[e];i.parentId===t&&l.push(i.numPoints?X(i):this.points[i.index])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,i){const r=[];return this._appendLeaves(r,t,e=e||10,i=i||0,0),r}getTile(t,e,i){const r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,l=(i-a)/n,c=(i+1+a)/n,u={features:[]};return this._addTileFeatures(r.range((e-a)/n,l,(e+1+a)/n,c),r.points,e,i,n,u),0===e&&this._addTileFeatures(r.range(1-a/n,l,1,c),r.points,n,i,n,u),e===n-1&&this._addTileFeatures(r.range(0,l,a/n,c),r.points,-1,i,n,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,r,n){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?n+o.point_count<=r?n+=o.point_count:n=this._appendLeaves(t,o.cluster_id,i,r,n):n<r?n++:t.push(e),t.length===i)break}return n}_addTileFeatures(t,e,i,r,n,o){for(const s of t){const t=e[s],a=t.numPoints;let l,c,u;if(a)l=W(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=H(e.geometry.coordinates[0]),u=Y(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*n-i)),Math.round(this.options.extent*(u*n-r))]],tags:l};let p;a?p=t.id:this.options.generateId?p=t.index:this.points[t.index].id&&(p=this.points[t.index].id),void 0!==p&&(h.id=p),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const i=[],{radius:r,extent:n,reduce:o,minPoints:s}=this.options,a=r/(n*Math.pow(2,e));for(let r=0;r<t.length;r++){const n=t[r];if(n.zoom<=e)continue;n.zoom=e;const l=this.trees[e+1],c=l.within(n.x,n.y,a),u=n.numPoints||1;let h=u;for(const t of c){const i=l.points[t];i.zoom>e&&(h+=i.numPoints||1)}if(h>u&&h>=s){let t=n.x*u,s=n.y*u,a=o&&u>1?this._map(n,!0):null;const p=(r<<5)+(e+1)+this.points.length;for(const i of c){const r=l.points[i];if(r.zoom<=e)continue;r.zoom=e;const c=r.numPoints||1;t+=r.x*c,s+=r.y*c,r.parentId=p,o&&(a||(a=this._map(n,!0)),o(a,this._map(r)))}n.parentId=p,i.push(Z(t/h,s/h,p,h,a))}else if(i.push(n),h>1)for(const t of c){const r=l.points[t];r.zoom<=e||(r.zoom=e,i.push(r))}}return i}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?J({},t.properties):t.properties;const i=this.points[t.index].properties,r=this.options.map(i);return e&&r===i?J({},r):r}}function Z(t,e,i,r,n){return{x:$(t),y:$(e),zoom:1/0,id:i,parentId:-1,numPoints:r,properties:n}}function j(t,e){const[i,r]=t.geometry.coordinates;return{x:$(H(i)),y:$(Y(r)),zoom:1/0,index:e,parentId:-1}}function X(t){return{type:"Feature",id:t.id,properties:W(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),K(t.y)]}};var e}function W(t){const e=t.numPoints,i=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return J(J({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function H(t){return t/360+.5}function Y(t){const e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function K(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function J(t,e){for(const i in e)t[i]=e[i];return t}function Q(t){return t.x}function tt(t){return t.y}function et(t,e,i,r){for(var n,o=r,s=i-e>>1,a=i-e,l=t[e],c=t[e+1],u=t[i],h=t[i+1],p=e+3;p<i;p+=3){var d=it(t[p],t[p+1],l,c,u,h);if(d>o)n=p,o=d;else if(d===o){var f=Math.abs(p-s);f<a&&(n=p,a=f)}}o>r&&(n-e>3&&et(t,e,n,r),t[n+2]=o,i-n>3&&et(t,n,i,r))}function it(t,e,i,r,n,o){var s=n-i,a=o-r;if(0!==s||0!==a){var l=((t-i)*s+(e-r)*a)/(s*s+a*a);l>1?(i=n,r=o):l>0&&(i+=s*l,r+=a*l)}return(s=t-i)*s+(a=e-r)*a}function rt(t,e,i,r){var n={id:void 0===t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)nt(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)nt(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)nt(t,e[r][n])}(n),n}function nt(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function ot(t,e,i,r){if(e.geometry){var n=e.geometry.coordinates,o=e.geometry.type,s=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),a=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===o)st(n,a);else if("MultiPoint"===o)for(var c=0;c<n.length;c++)st(n[c],a);else if("LineString"===o)at(n,a,s,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<n.length;c++)at(n[c],a=[],s,!1),t.push(rt(l,"LineString",a,e.properties));return}lt(n,a,s,!1)}else if("Polygon"===o)lt(n,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)ot(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<n.length;c++){var u=[];lt(n[c],u,s,!0),a.push(u)}}t.push(rt(l,o,a,e.properties))}}function st(t,e){e.push(ct(t[0])),e.push(ut(t[1])),e.push(0)}function at(t,e,i,r){for(var n,o,s=0,a=0;a<t.length;a++){var l=ct(t[a][0]),c=ut(t[a][1]);e.push(l),e.push(c),e.push(0),a>0&&(s+=r?(n*c-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(c-o,2))),n=l,o=c}var u=e.length-3;e[2]=1,et(e,0,u,i),e[u+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function lt(t,e,i,r){for(var n=0;n<t.length;n++){var o=[];at(t[n],o,i,r),e.push(o)}}function ct(t){return t/360+.5}function ut(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function ht(t,e,i,r,n,o,s,a){if(r/=e,o>=(i/=e)&&s<r)return t;if(s<i||o>=r)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,p=u.type,d=0===n?u.minX:u.minY,f=0===n?u.maxX:u.maxY;if(d>=i&&f<r)l.push(u);else if(!(f<i||d>=r)){var m=[];if("Point"===p||"MultiPoint"===p)pt(h,m,i,r,n);else if("LineString"===p)dt(h,m,i,r,n,!1,a.lineMetrics);else if("MultiLineString"===p)mt(h,m,i,r,n,!1);else if("Polygon"===p)mt(h,m,i,r,n,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var y=[];mt(h[g],y,i,r,n,!0),y.length&&m.push(y)}if(m.length){if(a.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push(rt(u.id,p,m[g],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(rt(u.id,p,m,u.tags))}}}return l.length?l:null}function pt(t,e,i,r,n){for(var o=0;o<t.length;o+=3){var s=t[o+n];s>=i&&s<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function dt(t,e,i,r,n,o,s){for(var a,l,c=ft(t),u=0===n?yt:_t,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],g=t[p+3],y=t[p+4],_=0===n?d:f,x=0===n?g:y,v=!1;s&&(a=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-y,2))),_<i?x>i&&(l=u(c,d,f,g,y,i),s&&(c.start=h+a*l)):_>r?x<r&&(l=u(c,d,f,g,y,r),s&&(c.start=h+a*l)):gt(c,d,f,m),x<i&&_>=i&&(l=u(c,d,f,g,y,i),v=!0),x>r&&_<=r&&(l=u(c,d,f,g,y,r),v=!0),!o&&v&&(s&&(c.end=h+a*l),e.push(c),c=ft(t)),s&&(h+=a)}var b=t.length-3;d=t[b],f=t[b+1],m=t[b+2],(_=0===n?d:f)>=i&&_<=r&&gt(c,d,f,m),b=c.length-3,o&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&gt(c,c[0],c[1],c[2]),c.length&&e.push(c)}function ft(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function mt(t,e,i,r,n,o){for(var s=0;s<t.length;s++)dt(t[s],e,i,r,n,o,!1)}function gt(t,e,i,r){t.push(e),t.push(i),t.push(r)}function yt(t,e,i,r,n,o){var s=(o-e)/(r-e);return t.push(o),t.push(i+(n-i)*s),t.push(1),s}function _t(t,e,i,r,n,o){var s=(o-i)/(n-i);return t.push(e+(r-e)*s),t.push(o),t.push(1),s}function xt(t,e){for(var i=[],r=0;r<t.length;r++){var n,o=t[r],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)n=vt(o.geometry,e);else if("MultiLineString"===s||"Polygon"===s){n=[];for(var a=0;a<o.geometry.length;a++)n.push(vt(o.geometry[a],e))}else if("MultiPolygon"===s)for(n=[],a=0;a<o.geometry.length;a++){for(var l=[],c=0;c<o.geometry[a].length;c++)l.push(vt(o.geometry[a][c],e));n.push(l)}i.push(rt(o.id,s,n,o.tags))}return i}function vt(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function bt(t,e){if(t.transformed)return t;var i,r,n,o=1<<t.z,s=t.x,a=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(wt(c[r],c[r+1],e,o,s,a));else for(r=0;r<c.length;r++){var h=[];for(n=0;n<c[r].length;n+=2)h.push(wt(c[r][n],c[r][n+1],e,o,s,a));l.geometry.push(h)}}return t.transformed=!0,t}function wt(t,e,i,r,n,o){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-o))]}function St(t,e,i,r,n){for(var o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){s.numFeatures++,It(s,t[a],o,n);var l=t[a].minX,c=t[a].minY,u=t[a].maxX,h=t[a].maxY;l<s.minX&&(s.minX=l),c<s.minY&&(s.minY=c),u>s.maxX&&(s.maxX=u),h>s.maxY&&(s.maxY=h)}return s}function It(t,e,i,r){var n=e.geometry,o=e.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<n.length;a+=3)s.push(n[a]),s.push(n[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Tt(s,n,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<n.length;a++)Tt(s,n[a],t,i,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var l=0;l<n.length;l++){var c=n[l];for(a=0;a<c.length;a++)Tt(s,c[a],t,i,!0,0===a)}if(s.length){var u=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=n.start/n.size,u.mapbox_clip_end=n.end/n.size}var p={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(p.id=e.id),t.features.push(p)}}function Tt(t,e,i,r,n,o){var s=r*r;if(r>0&&e.size<(n?s:r))i.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>s)&&(i.numSimplified++,a.push(e[l]),a.push(e[l+1])),i.numPoints++;n&&function(t,e){for(var i=0,r=0,n=t.length,o=n-2;r<n;o=r,r+=2)i+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(i>0===e)for(r=0,n=t.length;r<n/2;r+=2){var s=t[r],a=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=s,t[n-1-r]=a}}(a,o),t.push(a)}}function Et(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)ot(i,t.features[r],e,r);else ot(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var i=e.buffer/e.extent,r=t,n=ht(t,1,-1-i,i,0,-1,2,e),o=ht(t,1,1-i,2+i,0,-1,2,e);return(n||o)&&(r=ht(t,1,-i,1+i,0,-1,2,e)||[],n&&(r=xt(n,1).concat(r)),o&&(r=r.concat(xt(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function At(t,e,i){return 32*((1<<t)*i+e)+t}function Mt(t,e){const i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return e(null,null);const n=new m(r.features);let o=C(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:n,rawData:o.buffer})}Et.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Et.prototype.splitTile=function(t,e,i,r,n,o,s){for(var a=[t,e,i,r],l=this.options,c=l.debug;a.length;){r=a.pop(),i=a.pop(),e=a.pop(),t=a.pop();var u=1<<e,h=At(e,i,r),p=this.tiles[h];if(!p&&(c>1&&console.time("creation"),p=this.tiles[h]=St(t,e,i,r,l),this.tileCoords.push({z:e,x:i,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,n){if(e===l.maxZoom||e===n)continue;var f=1<<n-e;if(i!==Math.floor(o/f)||r!==Math.floor(s/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,y,_,x,v,b=.5*l.buffer/l.extent,w=.5-b,S=.5+b,I=1+b;m=g=y=_=null,x=ht(t,u,i-b,i+S,0,p.minX,p.maxX,l),v=ht(t,u,i+w,i+I,0,p.minX,p.maxX,l),t=null,x&&(m=ht(x,u,r-b,r+S,1,p.minY,p.maxY,l),g=ht(x,u,r+w,r+I,1,p.minY,p.maxY,l),x=null),v&&(y=ht(v,u,r-b,r+S,1,p.minY,p.maxY,l),_=ht(v,u,r+w,r+I,1,p.minY,p.maxY,l),v=null),c>1&&console.timeEnd("clipping"),a.push(m||[],e+1,2*i,2*r),a.push(g||[],e+1,2*i,2*r+1),a.push(y||[],e+1,2*i+1,2*r),a.push(_||[],e+1,2*i+1,2*r+1)}}},Et.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,o=r.debug;if(t<0||t>24)return null;var s=1<<t,a=At(t,e=(e%s+s)%s,i);if(this.tiles[a])return bt(this.tiles[a],n);o>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,c=t,u=e,h=i;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[At(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,i),o>1&&console.timeEnd("drilling down"),this.tiles[a]?bt(this.tiles[a],n):null):null};class Pt extends l{constructor(t,e,i,r){super(t,e,i,Mt),r&&(this.loadGeoJSON=r)}loadData(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const e=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const r=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,((n,o)=>{if(n||!o)return e(n);if("object"!=typeof o)return e(new Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`));{u(o,!0);try{if(i.filter){const e=t.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const r=o.features.filter((t=>e.value.evaluate({zoom:0},t)));o={type:"FeatureCollection",features:r}}this._geoJSONIndex=i.cluster?new G(function({superclusterOptions:e,clusterProperties:i}){if(!i||!e)return e;const r={},n={},o={accumulated:null,zoom:0},s={properties:null},a=Object.keys(i);for(const e of a){const[o,s]=i[e],a=t.createExpression(s),l=t.createExpression("string"==typeof o?[o,["accumulated"],["get",e]]:o);r[e]=a.value,n[e]=l.value}return e.map=t=>{s.properties=t;const e={};for(const t of a)e[t]=r[t].evaluate(o,s);return e},e.reduce=(t,e)=>{s.properties=e;for(const e of a)o.accumulated=t[e],t[e]=n[e].evaluate(o,s)},e}(i)).load(o.features):function(t,e){return new Et(t,e)}(o,i.geojsonVtOptions)}catch(n){return e(n)}this.loaded={};const s={};if(r){const t=r.finish();t&&(s.resourceTiming={},s.resourceTiming[i.source]=JSON.parse(JSON.stringify(t)))}e(null,s)}}))}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(t,e){const i=this.loaded;return i&&i[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class zt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}setReferrer(t,e){this.referrer=e}setImages(t,e,i){this.availableImages[t]=e;for(const i in this.workerSources[t]){const r=this.workerSources[t][i];for(const t in r)r[t].availableImages=e}i()}setLayers(t,e,i){this.getLayerIndex(t).replace(e),i()}updateLayers(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()}loadTile(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)}loadDEMTile(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)}reloadTile(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)}abortTile(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)}removeTile(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)}removeDEMTile(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}removeSource(t,e,i){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,i):i()}loadWorkerSource(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}}syncRTLPluginState(e,i,r){try{t.plugin.setState(i);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const i=t.plugin.isParsed();r(i?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),i)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,i){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][i]){const r={send:(e,i,r)=>{this.actor.send(e,i,r,t)}};this.workerSources[t][e][i]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][i]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,i){t.enforceCacheSizeLimit(i)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new zt(self)),zt})),r(["./shared"],(function(t){var e=i;function i(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(i.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};function n(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!n(t[i],e[i]))return!1;return!0}return t===e}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class o{static testProp(t){if(!o.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in o.docStyle)return t[e];return t[0]}static create(t,e,i){const r=window.document.createElement(t);return void 0!==e&&(r.className=e),i&&i.appendChild(r),r}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(t,e){t.style[o.transformProp]=e}static addEventListener(t,e,i,r={}){t.addEventListener(e,i,"passive"in r?r:r.capture)}static removeEventListener(t,e,i,r={}){t.removeEventListener(e,i,"passive"in r?r:r.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static mousePos(e,i){const r=e.getBoundingClientRect();return new t.pointGeometry(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop)}static touchPos(e,i){const r=e.getBoundingClientRect(),n=[];for(let o=0;o<i.length;o++)n.push(new t.pointGeometry(i[o].clientX-r.left-e.clientLeft,i[o].clientY-r.top-e.clientTop));return n}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);class s{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeSpriteURL(t,e,i){const r=function(t){const e=t.match(a);if(!e)throw new Error(`Unable to parse URL "${t}"`);return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return r.path+=`${e}${i}`,function(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}(r)}setTransformRequest(t){this._transformRequestFn=t}}const a=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function l(e){var i=new t.ARRAY_TYPE(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i}var c,u=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};c=new t.ARRAY_TYPE(3),t.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0);var h=function(t){var e=t[0],i=t[1];return e*e+i*i};!function(){var e=new t.ARRAY_TYPE(2);t.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0)}();class p{constructor(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)}update(e,i,r){const{width:n,height:o}=e,s=!(this.size&&this.size[0]===n&&this.size[1]===o||r),{context:a}=this,{gl:l}=a;if(this.useMipmap=Boolean(i&&i.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!i||!1!==i.premultiply)),s)this.size=[n,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,n,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:i,y:s}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texSubImage2D(l.TEXTURE_2D,0,i,s,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,i,s,n,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,i){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function d(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class f extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,i){let r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let i=0;for(const r of t){if(r[0]<i||r[1]<r[0]||e<r[1])return!1;i=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let i=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,i){const r={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?r[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const i=this.patterns[e],r=this.getImage(e);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{const i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},n=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:n}}return this._updatePatternAtlas(),this.patterns[e].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new p(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:i,h:r}=t.potpack(e),n=this.atlasImage;n.resize({width:i||1,height:r||1});for(const e in this.patterns){const{bin:i}=this.patterns[e],r=i.x+1,o=i.y+1,s=this.images[e].data,a=s.width,l=s.height;t.RGBAImage.copy(s,n,{x:0,y:0},{x:r,y:o},{width:a,height:l}),t.RGBAImage.copy(s,n,{x:0,y:l-1},{x:r,y:o-1},{width:a,height:1}),t.RGBAImage.copy(s,n,{x:0,y:0},{x:r,y:o+l},{width:a,height:1}),t.RGBAImage.copy(s,n,{x:a-1,y:0},{x:r-1,y:o},{width:1,height:l}),t.RGBAImage.copy(s,n,{x:0,y:0},{x:r+a,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];d(t)&&this.updateImage(e,t)}}}const m=1e20;function g(t,e,i,r,n,o,s,a,l){for(let c=e;c<e+r;c++)y(t,i*o+c,o,n,s,a,l);for(let c=i;c<i+n;c++)y(t,c*o+e,1,r,s,a,l)}function y(t,e,i,r,n,o,s){o[0]=0,s[0]=-m,s[1]=m,n[0]=t[e];for(let a=1,l=0,c=0;a<r;a++){n[a]=t[e+a*i];const r=a*a;do{const t=o[l];c=(n[a]-n[t]+r-t*t)/(a-t)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=m}for(let a=0,l=0;a<r;a++){for(;s[l+1]<a;)l++;const r=o[l],c=a-r;t[e+a*i]=n[r]+c*c}}class _{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(e,i){const r=[];for(const t in e)for(const i of e[t])r.push({stack:t,id:i});t.asyncAll(r,(({stack:t,id:e},i)=>{let r=this.entries[t];r||(r=this.entries[t]={glyphs:{},requests:{},ranges:{}});let n=r.glyphs[e];if(void 0!==n)return void i(null,{stack:t,id:e,glyph:n});if(n=this._tinySDF(r,t,e),n)return r.glyphs[e]=n,void i(null,{stack:t,id:e,glyph:n});const o=Math.floor(e/256);if(256*o>65535)return void i(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void i(null,{stack:t,id:e,glyph:n});let s=r.requests[o];s||(s=r.requests[o]=[],_.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e[+t]);r.ranges[o]=!0}for(const i of s)i(t,e);delete r.requests[o]}))),s.push(((r,n)=>{r?i(r):n&&i(null,{stack:t,id:e,glyph:n[e]||null})}))}),((t,e)=>{if(t)i(t);else if(e){const t={};for(const{stack:i,id:r,glyph:n}of e)(t[i]||(t[i]={}))[r]=n&&{id:n.id,bitmap:n.bitmap.clone(),metrics:n.metrics};i(null,t)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.unicodeBlockLookup["CJK Unified Ideographs"](e)||t.unicodeBlockLookup["Hangul Syllables"](e)||t.unicodeBlockLookup.Hiragana(e)||t.unicodeBlockLookup.Katakana(e))}_tinySDF(e,i,r){const n=this.localIdeographFontFamily;if(!n)return;if(!this._doesCharSupportLocalGlyph(r))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(i)?t="900":/medium/i.test(i)?t="500":/light/i.test(i)&&(t="200"),o=e.tinySDF=new _.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:n,fontWeight:t})}const s=o.draw(String.fromCharCode(r));return{id:r,bitmap:new t.AlphaImage({width:s.width||30,height:s.height||30},s.data),metrics:{width:s.glyphWidth||24,height:s.glyphHeight||24,left:s.glyphLeft||0,top:s.glyphTop-27||-8,advance:s.glyphAdvance||24}}}}_.loadGlyphRange=function(e,i,r,n,o){const s=256*i,a=s+255,l=n.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${s}-${a}`),t.ResourceType.Glyphs);t.getArrayBuffer(l,((e,i)=>{if(e)o(e);else if(i){const e={};for(const r of t.parseGlyphPBF(i))e[r.id]=r;o(null,e)}}))},_.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:i=8,cutoff:r=.25,fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=r,this.radius=i;const a=this.size=t+4*e,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${s} ${o} ${t}px ${n}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:n,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(i),a=Math.min(this.size-this.buffer,Math.ceil(o-n)),l=Math.min(this.size-this.buffer,s+Math.ceil(r)),c=a+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),p=new Uint8ClampedArray(h),d={data:p,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return d;const{ctx:f,buffer:y,gridInner:_,gridOuter:x}=this;f.clearRect(y,y,a,l),f.fillText(t,y,y+s);const v=f.getImageData(y,y,a,l);x.fill(m,0,h),_.fill(0,0,h);for(let t=0;t<l;t++)for(let e=0;e<a;e++){const i=v.data[4*(t*a+e)+3]/255;if(0===i)continue;const r=(t+y)*c+e+y;if(1===i)x[r]=0,_[r]=m;else{const t=.5-i;x[r]=t>0?t*t:0,_[r]=t<0?t*t:0}}g(x,0,0,c,u,c,this.f,this.v,this.z),g(_,y,y,a,l,c,this.f,this.v,this.z);for(let t=0;t<h;t++){const e=Math.sqrt(x[t])-Math.sqrt(_[t]);p[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return d}};const x=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))}interpolate(e,i,r){return{x:t.number(e.x,i.x,r),y:t.number(e.y,i.y,r),z:t.number(e.z,i.z,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),v="-transition";class b extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(x),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(t.validateLight,e,i))for(const t in e){const i=e[t];t.endsWith(v)?this._transitionable.setTransition(t.slice(0,-v.length),i):this._transitionable.setValue(t,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,i,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class w{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]}getDashRanges(t,e,i){const r=[];let n=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,s=!0;r.push({left:n,right:o,isDash:s,zeroLength:0===t[0]});let a=t[0];for(let e=1;e<t.length;e++){s=!s;const l=t[e];n=a*i,a+=l,o=a*i,r.push({left:n,right:o,isDash:s,zeroLength:0===l})}return r}addRoundDash(t,e,i){const r=e/2;for(let e=-i;e<=i;e++){const n=this.width*(this.nextRow+i+e);let o=0,s=t[o];for(let a=0;a<this.width;a++){a/s.right>1&&(s=t[++o]);const l=Math.abs(a-s.left),c=Math.abs(a-s.right),u=Math.min(l,c);let h;const p=e/i*(r+1);if(s.isDash){const t=r-Math.abs(p);h=Math.sqrt(u*u+t*t)}else h=r-Math.sqrt(u*u+p*p);this.data[n+a]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t){for(let e=t.length-1;e>=0;--e){const i=t[e],r=t[e+1];i.zeroLength?t.splice(e,1):r&&r.isDash===i.isDash&&(r.left=i.left,t.splice(e,1))}const e=t[0],i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=e.right+this.width);const r=this.width*this.nextRow;let n=0,o=t[n];for(let e=0;e<this.width;e++){e/o.right>1&&(o=t[++n]);const i=Math.abs(e-o.left),s=Math.abs(e-o.right),a=Math.min(i,s);this.data[r+e]=Math.max(0,Math.min(255,(o.isDash?a:-a)+128))}}addDash(e,i){const r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return t.warnOnce("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,n=this.getDashRanges(e,this.width,t);i?this.addRoundDash(n,t,r):this.addRegularDash(n)}const s={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=n,this.dirty=!0,s}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class S{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new S.Actor(r[t],i,this.id);e.name=`Worker ${t}`,this.actors.push(e)}}broadcast(e,i,r){t.asyncAll(this.actors,((t,r)=>{t.send(e,i,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function I(e,i,r){const n=function(i,n){if(i)return r(i);if(n){const i=t.pick(t.extend(n,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map((t=>t.id))),r(null,i)}};return e.url?t.getJSON(i.transformRequest(e.url,t.ResourceType.Source),n):t.exported.frame((()=>n(null,e)))}S.Actor=t.Actor;class T{constructor(e,i,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),n=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),s=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=r&&e.x<o&&e.y>=n&&e.y<s}}class E extends t.Evented{constructor(e,i,r,n){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new T(i.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,i){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,n){return delete e.request,e.aborted?i(null):r&&404!==r.status?i(r):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",n,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",n,o.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class A extends t.Evented{constructor(e,i,r,n){super(),this.id=e,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new T(i.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,i){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((r,n,o)=>{if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(n){this.map._refreshExpiredTiles&&e.setExpiryData(o);const r=this.map.painter.context,s=r.gl;e.texture=this.map.painter.getTileTexture(n.width),e.texture?e.texture.update(n,{useMipmap:!0}):(e.texture=new p(r,n,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),i(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let M;class P extends A{constructor(e,i,r,n){super(e,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,i){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function n(t,r){t&&(e.state="errored",i(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;const i=t.isImageBitmap(o)&&(null==M&&(M="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),M)?o:t.exported.getImageData(o,1),r={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:i,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",r,n.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}_getNeighboringTiles(e){const i=e.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,o=0===i.x?e.wrap-1:e.wrap,s=(i.x+1+r)%r,a=i.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,i.z,s,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,i.z,s,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,i.z,s,i.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class z extends t.Evented{constructor(e,i,r,n){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},r),this}_updateWorkerData(e){const i=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(t.exported.resolveURL(r),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this._pendingLoads++,this.fire(new t.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,i,((r,n)=>{if(this._pendingLoads--,this._removed||n&&n.abandoned)return;let o=null;if(n&&n.resourceTiming&&n.resourceTiming[this.id]&&(o=n.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:i.source},null),r)return void this.fire(new t.ErrorEvent(r));const s={dataType:"source",sourceDataType:e};this._collectResourceTiming&&o&&o.length>0&&t.extend(s,{resourceTiming:o}),this.fire(new t.Event("data",s))}))}loaded(){return 0===this._pendingLoads}loadTile(t,e){const i=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const r={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(i,r,((r,n)=>(delete t.request,t.unloadVectorData(),t.aborted?e(null):r?e(r):(t.loadVectorData(n,this.map.painter,"reloadTile"===i),e(null)))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var k=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class C extends t.Evented{constructor(t,e,i,r){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(e,i){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((r,n)=>{this._loaded=!0,r?this.fire(new t.ErrorEvent(r)):n&&(this.image=n,e&&(this.coordinates=e),i&&i(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let i=1/0,r=1/0,n=-1/0,o=-1/0;for(const t of e)i=Math.min(i,t.x),r=Math.min(r,t.y),n=Math.max(n,t.x),o=Math.max(o,t.y);const s=Math.max(n-i,o-r),a=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,a);return new t.CanonicalTileID(a,Math.floor((i+n)/2*l),Math.floor((r+o)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const r=i.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,k.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new p(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class L extends C{constructor(t,e,i,r){super(t,e,i,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const i of e.urls)this.urls.push(this.map._requestManager.transformRequest(i,t.ResourceType.Source).url);t.getVideo(this.urls,((e,i)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,k.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new p(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class D extends C{constructor(e,i,r,n){super(e,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,r=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,k.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new p(i,this.canvas,r.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const B={vector:E,raster:A,"raster-dem":P,geojson:z,video:L,image:C,canvas:D};function F(e,i){const r=t.create();return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(i.toUnwrapped()))}function R(t,e,i,r,n,o){const s=function(t,e,i){if(t)for(const r of t){const t=e[r];if(t&&t.source===i&&"fill-extrusion"===t.type)return!0}else for(const t in e){const r=e[t];if(r.source===i&&"fill-extrusion"===r.type)return!0}return!1}(n&&n.layers,e,t.id),a=o.maxPitchScaleFactor(),l=t.tilesIn(r,a,s);l.sort(O);const c=[];for(const r of l)c.push({wrappedTileID:r.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(e,i,t._state,r.queryGeometry,r.cameraQueryGeometry,r.scale,n,o,a,F(t.transform,r.tileID))});const u=function(t){const e={},i={};for(const r of t){const t=r.queryResults,n=r.wrappedTileID,o=i[n]=i[n]||{};for(const i in t){const r=t[i],n=o[i]=o[i]||{},s=e[i]=e[i]||[];for(const t of r)n[t.featureIndex]||(n[t.featureIndex]=!0,s.push(t))}}return e}(c);for(const e in u)u[e].forEach((e=>{const i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return u}function O(t,e){const i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}class U{constructor(e,i){this.tileID=e,this.uid=t.uniqueId(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const i=e+this.timeAdded;i<t.exported.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,i,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){const i={};if(!e)return i;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)i[e.id]=r}}return i}(e.buckets,i.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.SymbolBucket){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.SymbolBucket&&i.hasRTLText){this.hasRTLText=!0,t.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(t).queryRadius(e))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const i=this.buckets[e];i.uploadPending()&&i.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new p(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new p(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,r,n,o,s,a,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:a,params:s,queryPadding:this.queryPadding*l},t,e,i):{}}querySourceFeatures(e,i){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),o=i?i.sourceLayer:"",s=n._geojsonTileLayer||n[o];if(!s)return;const a=t.createFilter(i&&i.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let i=0;i<s.length;i++){const n=s.feature(i);if(a.needGeometry){const e=t.toEvaluationFeature(n,!0);if(!a.filter(new t.EvaluationParameters(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new t.EvaluationParameters(this.tileID.overscaledZ),n))continue;const p=r.getId(n,o),d=new t.GeoJSONFeature(n,l,c,u,p);d.tile=h,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const i=this.expirationTime;if(e.cacheControl){const i=t.parseCacheControl(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(i)if(this.expirationTime<i)e=!0;else{const r=this.expirationTime-i;r?this.expirationTime=t+Math.max(r,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const n=this.buckets[r],o=n.layers[0].sourceLayer||"_geojsonTileLayer",s=i[o],a=t[o];if(!s||!a||0===Object.keys(a).length)continue;n.update(a,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=t.exported.now()+e}setDependencies(t,e){const i={};for(const t of e)i[t]=!0;this.dependencies[t]=i}hasDependency(t,e){for(const i of t){const t=this.dependencies[i];if(t)for(const i of e)if(t[i])return!0}return!1}}class V{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const n={value:e,timeout:void 0};if(void 0!==i&&(n.timeout=setTimeout((()=>{this.remove(t,n)}),i)),this.data[r].push(n),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const i in this.data)for(const r of this.data[i])t(r.value)||e.push(r);for(const t of e)this.remove(t.value.tileID,t)}}class N{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,i,r){const n=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},t.extend(this.stateChanges[e][n],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==n&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][n]){this.deletedStates[e][n]={};for(const t in this.state[e][n])r[t]||(this.deletedStates[e][n][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][t]&&delete this.deletedStates[e][n][t]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(e,i){const r=String(i),n=t.extend({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][i];if(null===t)return{};for(const e in t)delete n[e]}return n}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(e,i){const r={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const i={};for(const r in this.stateChanges[e])this.state[e][r]||(this.state[e][r]={}),t.extend(this.state[e][r],this.stateChanges[e][r]),i[r]=this.state[e][r];r[e]=i}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const i={};if(null===this.deletedStates[e])for(const t in this.state[e])i[t]={},this.state[e][t]={};else for(const t in this.deletedStates[e]){if(null===this.deletedStates[e][t])this.state[e][t]={};else for(const i of Object.keys(this.deletedStates[e][t]))delete this.state[e][t][i];i[t]=this.state[e][t]}r[e]=r[e]||{},t.extend(r[e],i)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const t in e)e[t].setFeatureState(r,i)}}class $ extends t.Evented{constructor(e,i,r){super(),this.id=e,this.dispatcher=r,this.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(e,i,r,n){const o=new B[i.type](e,i,r,n);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(e,i,r,this),this._tiles={},this._cache=new V(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new N}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,(()=>{})),this._source.fire(new t.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(q).map((t=>t.key))}getRenderableIds(e){const i=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&i.push(this._tiles[t]);return e?i.sort(((e,i)=>{const r=e.tileID,n=i.tileID,o=new t.pointGeometry(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),s=new t.pointGeometry(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||s.y-o.y||s.x-o.x})).map((t=>t.tileID.key)):i.map((t=>t.tileID)).sort(q).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,e){const i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))}_tileLoaded(e,i,r,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new t.ErrorEvent(n,{tile:e})):this.update(this.transform));e.timeAdded=t.exported.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const n=e[r];if(t.neighboringTiles&&t.neighboringTiles[n]){const e=this.getTileByID(n);i(t,e),i(e,t)}}function i(t,e){t.needsHillshadePrepare=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,r){for(const n in this._tiles){let o=this._tiles[n];if(r[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)continue;let s=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(s=t)}let a=s;for(;a.overscaledZ>e;)if(a=a.scaledTo(a.overscaledZ-1),t[a.key]){r[s.key]=s;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){const e=t.scaledTo(i),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const i in this._tiles){const r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}update(e){if(this.transform=e,!this._sourceLoaded||this._paused)return;let i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter((t=>this._source.hasTile(t))))):i=[];const r=e.coveringZoomLevel(this._source),n=Math.max(r-$.maxOverzooming,this._source.minzoom),o=Math.max(r+$.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(i,r);if(G(this._source.type)){const e={},i={},a=Object.keys(s);for(const r of a){const o=s[r],a=this._tiles[r];if(!a||a.fadeEndTime&&a.fadeEndTime<=t.exported.now())continue;const l=this.findLoadedParent(o,n);l&&(this._addTile(l.tileID),e[l.tileID.key]=l.tileID),i[r]=o}this._retainLoadedChildren(i,r,o,s);for(const t in e)s[t]||(this._coveredTiles[t]=!0,s[t]=e[t])}for(const t in s)this._tiles[t].clearFadeHold();const a=t.keysDifference(this._tiles,s);for(const t of a){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){const i={},r={},n=Math.max(e-$.maxOverzooming,this._source.minzoom),o=Math.max(e+$.maxUnderzooming,this._source.minzoom),s={};for(const r of t){const t=this._addTile(r);i[r.key]=r,t.hasData()||e<this._source.maxzoom&&(s[r.key]=r)}this._retainLoadedChildren(s,e,o,i);for(const o of t){let t=this._tiles[o.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=o.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){i[t.key]=t;continue}}else{const t=o.children(this._source.maxzoom);if(i[t[0].key]&&i[t[1].key]&&i[t[2].key]&&i[t[3].key])continue}let s=t.wasRequested();for(let e=o.overscaledZ-1;e>=n;--e){const n=o.scaledTo(e);if(r[n.key])break;if(r[n.key]=!0,t=this.getTile(n),!t&&s&&(t=this._addTile(n)),t&&(i[n.key]=n,s=t.wasRequested(),t.hasData()))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let i,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(t),i)break;r=t}for(const t of e)this._loadedParentTiles[t]=i}}_addTile(e){let i=this._tiles[e.key];if(i)return i;i=this._cache.getAndRemove(e),i&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));const r=i;return i||(i=new U(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i.uses++,this._tiles[e.key]=i,r||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),i))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(e,i,r){const n=[],o=this.transform;if(!o)return n;const s=r?o.getCameraQueryGeometry(e):e,a=e.map((t=>o.pointCoordinate(t))),l=s.map((t=>o.pointCoordinate(t))),c=this.getIds();let u=1/0,h=1/0,p=-1/0,d=-1/0;for(const t of l)u=Math.min(u,t.x),h=Math.min(h,t.y),p=Math.max(p,t.x),d=Math.max(d,t.y);for(let e=0;e<c.length;e++){const r=this._tiles[c[e]];if(r.holdingForFade())continue;const s=r.tileID,f=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=i*r.queryPadding*t.EXTENT/r.tileSize/f,g=[s.getTilePoint(new t.MercatorCoordinate(u,h)),s.getTilePoint(new t.MercatorCoordinate(p,d))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){const t=a.map((t=>s.getTilePoint(t))),e=l.map((t=>s.getTilePoint(t)));n.push({tile:r,tileID:s,queryGeometry:t,cameraQueryGeometry:e,scale:f})}}return n}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.posMatrix=this.transform.calculatePosMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(G(this._source.type))for(const e in this._tiles){const i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.exported.now())return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){const r=this._tiles[t];r&&r.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(const i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((i=>!i.hasDependency(t,e)))}}function q(t,e){const i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function G(t){return"raster"===t||"image"===t||"video"===t}$.maxOverzooming=10,$.maxUnderzooming=3;const Z="mapboxgl_preloaded_worker_pool";class j{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<j.workerCount;)this.workers.push(new Worker(xn.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Z]}numActive(){return Object.keys(this.active).length}}const X=Math.floor(t.exported.hardwareConcurrency/2);let W;function H(){return W||(W=new j),W}function Y(e,i){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach((t=>{t in i&&(r[t]=i[t])})),r}function K(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Y(t[i],e[t[i].ref]));return t}j.workerCount=Math.max(Math.min(X,6),1);const J={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Q(t,e,i){i.push({command:J.addSource,args:[t,e[t]]})}function tt(t,e,i){e.push({command:J.removeSource,args:[t]}),i[t]=!0}function et(t,e,i,r){tt(t,i,r),Q(t,e,i)}function it(t,e,i){let r;for(r in t[i])if(Object.prototype.hasOwnProperty.call(t[i],r)&&"data"!==r&&!n(t[i][r],e[i][r]))return!1;for(r in e[i])if(Object.prototype.hasOwnProperty.call(e[i],r)&&"data"!==r&&!n(t[i][r],e[i][r]))return!1;return!0}function rt(t,e,i,r,o,s){let a;for(a in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,a)&&(n(t[a],e[a])||i.push({command:s,args:[r,a,e[a],o]}));for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&!Object.prototype.hasOwnProperty.call(t,a)&&(n(t[a],e[a])||i.push({command:s,args:[r,a,e[a],o]}))}function nt(t){return t.id}function ot(t,e){return t[e.id]=e,t}class st{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let i=1,r=this._distances[i];const n=e*this.paddedLength+this.padding;for(;r<n&&i<this._distances.length;)r=this._distances[++i];const o=i-1,s=this._distances[o],a=r-s,l=a>0?(n-s)/a:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}function at(t,e){let i=!0;return"always"===t||"never"!==t&&"never"!==e||(i=!1),i}class lt{constructor(t,e,i){const r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let t=0;t<this.xCellCount*this.yCellCount;t++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}insertCircle(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)}_insertBoxCell(t,e,i,r,n,o){this.boxCells[n].push(o)}_insertCircleCell(t,e,i,r,n,o){this.circleCells[n].push(o)}_query(t,e,i,r,n,o,s){if(i<0||t>this.width||r<0||e>this.height)return[];const a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return[{key:null,x1:t,y1:e,x2:i,y2:r}];for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],i=this.circles[3*t+1],r=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-r,y1:i-r,x2:e+r,y2:i+r})}}else this._forEachCell(t,e,i,r,this._queryCell,a,{hitTest:n,overlapMode:o,seenUids:{box:{},circle:{}}},s);return a}query(t,e,i,r){return this._query(t,e,i,r,!1,null)}hitTest(t,e,i,r,n,o){return this._query(t,e,i,r,!0,n,o).length>0}hitTestCircle(t,e,i,r,n){const o=t-i,s=t+i,a=e-i,l=e+i;if(s<0||o>this.width||l<0||a>this.height)return!1;const c=[];return this._forEachCell(o,a,s,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),c.length>0}_queryCell(t,e,i,r,n,o,s,a){const{seenUids:l,hitTest:c,overlapMode:u}=s,h=this.boxCells[n];if(null!==h){const n=this.bboxes;for(const s of h)if(!l.box[s]){l.box[s]=!0;const h=4*s,p=this.boxKeys[s];if(t<=n[h+2]&&e<=n[h+3]&&i>=n[h+0]&&r>=n[h+1]&&(!a||a(p))&&(!c||!at(u,p.overlapMode))&&(o.push({key:p,x1:n[h],y1:n[h+1],x2:n[h+2],y2:n[h+3]}),c))return!0}}const p=this.circleCells[n];if(null!==p){const n=this.circles;for(const s of p)if(!l.circle[s]){l.circle[s]=!0;const h=3*s,p=this.circleKeys[s];if(this._circleAndRectCollide(n[h],n[h+1],n[h+2],t,e,i,r)&&(!a||a(p))&&(!c||!at(u,p.overlapMode))){const t=n[h],e=n[h+1],i=n[h+2];if(o.push({key:p,x1:t-i,y1:e-i,x2:t+i,y2:e+i}),c)return!0}}}return!1}_queryCellCircle(t,e,i,r,n,o,s,a){const{circle:l,seenUids:c,overlapMode:u}=s,h=this.boxCells[n];if(null!==h){const t=this.bboxes;for(const e of h)if(!c.box[e]){c.box[e]=!0;const i=4*e,r=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!a||a(r))&&!at(u,r.overlapMode))return o.push(!0),!0}}const p=this.circleCells[n];if(null!==p){const t=this.circles;for(const e of p)if(!c.circle[e]){c.circle[e]=!0;const i=3*e,r=this.circleKeys[e];if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!a||a(r))&&!at(u,r.overlapMode))return o.push(!0),!0}}}_forEachCell(t,e,i,r,n,o,s,a){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(r);for(let p=l;p<=u;p++)for(let l=c;l<=h;l++)if(n.call(this,t,e,i,r,this.xCellCount*l+p,o,s,a))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,r,n,o){const s=r-t,a=n-e,l=i+o;return l*l>s*s+a*a}_circleAndRectCollide(t,e,i,r,n,o,s){const a=(o-r)/2,l=Math.abs(t-(r+a));if(l>a+i)return!1;const c=(s-n)/2,u=Math.abs(e-(n+c));if(u>c+i)return!1;if(l<=a||u<=c)return!0;const h=l-a,p=u-c;return h*h+p*p<=i*i}}function ct(e,i,r,n,o){const s=t.create();return i?(t.scale(s,s,[1/o,1/o,1]),r||t.rotateZ(s,s,n.angle)):t.multiply(s,n.labelPlaneMatrix,e),s}function ut(e,i,r,n,o){if(i){const i=t.clone(e);return t.scale(i,i,[o,o,1]),r||t.rotateZ(i,i,-n.angle),i}return n.glCoordMatrix}function ht(e,i){const r=[e.x,e.y,0,1];wt(r,r,i);const n=r[3];return{point:new t.pointGeometry(r[0]/n,r[1]/n),signedDistanceFromCamera:n}}function pt(t,e){return.5+t/e*.5}function dt(t,e){const i=t[0]/t[3],r=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&r>=-e[1]&&r<=e[1]}function ft(e,i,r,n,o,s,a,l,c){const u=n?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(u,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],d=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;d.clear();const f=e.lineVertexArray,m=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=r.transform.width/r.transform.height;let y=!1;for(let n=0;n<m.length;n++){const _=m.get(n);if(_.hidden||_.writingMode===t.WritingMode.vertical&&!y){bt(_.numGlyphs,d);continue}y=!1;const x=[_.anchorX,_.anchorY,0,1];if(t.transformMat4(x,x,i),!dt(x,p)){bt(_.numGlyphs,d);continue}const v=pt(r.transform.cameraToCenterDistance,x[3]),b=t.evaluateSizeForFeature(u,h,_),w=a?b/v:b*v,S=new t.pointGeometry(_.anchorX,_.anchorY),I=ht(S,o).point,T={},E=yt(_,w,!1,l,i,o,s,e.glyphOffsetArray,f,d,I,S,T,g,c);y=E.useVertical,(E.notEnoughRoom||y||E.needsFlipping&&yt(_,w,!0,l,i,o,s,e.glyphOffsetArray,f,d,I,S,T,g,c).notEnoughRoom)&&bt(_.numGlyphs,d)}n?e.text.dynamicLayoutVertexBuffer.updateData(d):e.icon.dynamicLayoutVertexBuffer.updateData(d)}function mt(t,e,i,r,n,o,s,a,l,c,u,h){const p=a.glyphStartIndex+a.numGlyphs,d=a.lineStartIndex,f=a.lineStartIndex+a.lineLength,m=e.getoffsetX(a.glyphStartIndex),g=e.getoffsetX(p-1),y=xt(t*m,i,r,n,o,s,a.segment,d,f,l,c,u,h);if(!y)return null;const _=xt(t*g,i,r,n,o,s,a.segment,d,f,l,c,u,h);return _?{first:y,last:_}:null}function gt(e,i,r,n){return e===t.WritingMode.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function yt(e,i,r,n,o,s,a,l,c,u,h,p,d,f,m){const g=i/24,y=e.lineOffsetX*g,_=e.lineOffsetY*g;let x;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,i=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,u=mt(g,l,y,_,r,h,p,e,c,s,d,m);if(!u)return{notEnoughRoom:!0};const v=ht(u.first.point,a).point,b=ht(u.last.point,a).point;if(n&&!r){const t=gt(e.writingMode,v,b,f);if(t)return t}x=[u.first];for(let n=e.glyphStartIndex+1;n<t-1;n++)x.push(xt(g*l.getoffsetX(n),y,_,r,h,p,e.segment,i,o,c,s,d,m));x.push(u.last)}else{if(n&&!r){const i=ht(p,o).point,r=e.lineStartIndex+e.segment+1,n=new t.pointGeometry(c.getx(r),c.gety(r)),s=ht(n,o),a=s.signedDistanceFromCamera>0?s.point:_t(p,n,i,1,o),l=gt(e.writingMode,i,a,f);if(l)return l}const i=xt(g*l.getoffsetX(e.glyphStartIndex),y,_,r,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,s,d,m);if(!i)return{notEnoughRoom:!0};x=[i]}for(const e of x)t.addDynamicAttributes(u,e.point,e.angle);return{}}function _t(t,e,i,r,n){const o=ht(t.add(t.sub(e)._unit()),n).point,s=i.sub(o);return i.add(s._mult(r/s.mag()))}function xt(e,i,r,n,o,s,a,l,c,u,h,p,d){const f=n?e-i:e+i;let m=f>0?1:-1,g=0;n&&(m*=-1,g=Math.PI),m<0&&(g+=Math.PI);let y=m>0?l+a:l+a+1,_=o,x=o,v=0,b=0;const w=Math.abs(f),S=[];for(;v+b<=w;){if(y+=m,y<l||y>=c)return null;if(x=_,S.push(_),_=p[y],void 0===_){const e=new t.pointGeometry(u.getx(y),u.gety(y)),i=ht(e,h);if(i.signedDistanceFromCamera>0)_=p[y]=i.point;else{const i=y-m;_=_t(0===v?s:new t.pointGeometry(u.getx(i),u.gety(i)),e,x,w-v+1,h)}}v+=b,b=x.dist(_)}const I=(w-v)/b,T=_.sub(x),E=T.mult(I)._add(x);E._add(T._unit()._perp()._mult(r*m));const A=g+Math.atan2(_.y-x.y,_.x-x.x);return S.push(E),{point:E,angle:d?A:0,path:S}}const vt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bt(t,e){for(let i=0;i<t;i++){const t=e.length;e.resize(t+4),e.float32.set(vt,3*t)}}function wt(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}const St=100;class It{constructor(t,e=new lt(t.width+200,t.height+200,25),i=new lt(t.width+200,t.height+200,25)){this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+St,this.screenBottomBoundary=t.height+St,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}placeCollisionBox(t,e,i,r,n){const o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),s=i*o.perspectiveRatio,a=t.x1*s+o.point.x,l=t.y1*s+o.point.y,c=t.x2*s+o.point.x,u=t.y2*s+o.point.y;return!this.isInsideGrid(a,l,c,u)||"always"!==e&&this.grid.hitTest(a,l,c,u,e,n)?{box:[],offscreen:!1}:{box:[a,l,c,u],offscreen:this.isOffscreen(a,l,c,u)}}placeCollisionCircles(e,i,r,n,o,s,a,l,c,u,h,p,d){const f=[],m=new t.pointGeometry(i.anchorX,i.anchorY),g=ht(m,s),y=pt(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),_=(u?o/y:o*y)/t.ONE_EM,x=ht(m,a).point,v=mt(_,n,i.lineOffsetX*_,i.lineOffsetY*_,!1,x,m,i,r,a,{},!1);let b=!1,w=!1,S=!0;if(v){const i=.5*p*y+d,r=new t.pointGeometry(-100,-100),n=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new st,s=v.first,a=v.last;let u=[];for(let t=s.path.length-1;t>=1;t--)u.push(s.path[t]);for(let t=1;t<a.path.length;t++)u.push(a.path[t]);const m=2.5*i;if(l){const t=u.map((t=>ht(t,l)));u=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let g=[];if(u.length>0){const e=u[0].clone(),i=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),i.x=Math.max(i.x,u[t].x),i.y=Math.max(i.y,u[t].y);g=e.x>=r.x&&i.x<=n.x&&e.y>=r.y&&i.y<=n.y?[u]:i.x<r.x||e.x>n.x||i.y<r.y||e.y>n.y?[]:t.clipLine([u],r.x,r.y,n.x,n.y)}for(const t of g){o.reset(t,.25*i);let r=0;r=o.length<=.5*i?1:Math.ceil(o.paddedLength/m)+1;for(let t=0;t<r;t++){const n=t/Math.max(r-1,1),s=o.lerp(n),a=s.x+St,l=s.y+St;f.push(a,l,i,0);const u=a-i,p=l-i,d=a+i,m=l+i;if(S=S&&this.isOffscreen(u,p,d,m),w=w||this.isInsideGrid(u,p,d,m),"always"!==e&&this.grid.hitTestCircle(a,l,i,e,h)&&(b=!0,!c))return{circles:[],offscreen:!1,collisionDetected:b}}}}return{circles:!c&&b||!w?[]:f,offscreen:S,collisionDetected:b}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let r=1/0,n=1/0,o=-1/0,s=-1/0;for(const a of e){const e=new t.pointGeometry(a.x+St,a.y+St);r=Math.min(r,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),s=Math.max(s,e.y),i.push(e)}const a=this.grid.query(r,n,o,s).concat(this.ignoredGrid.query(r,n,o,s)),l={},c={};for(const e of a){const r=e.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;const n=[new t.pointGeometry(e.x1,e.y1),new t.pointGeometry(e.x2,e.y1),new t.pointGeometry(e.x2,e.y2),new t.pointGeometry(e.x1,e.y2)];t.polygonIntersectsPolygon(i,n)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]=[]),c[r.bucketInstanceId].push(r.featureIndex))}return c}insertCollisionBox(t,e,i,r,n,o){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,r,n,o){const s=i?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:e};for(let e=0;e<t.length;e+=4)s.insertCircle(a,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,i,r){const n=[i,r,0,1];return wt(n,n,e),{point:new t.pointGeometry((n[0]/n[3]+1)/2*this.transform.width+St,(-n[1]/n[3]+1)/2*this.transform.height+St),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}}isOffscreen(t,e,i,r){return i<St||t>=this.screenRightBoundary||r<St||e>this.screenBottomBoundary}isInsideGrid(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function Tt(e,i,r){return i*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}class Et{constructor(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class At{constructor(t,e,i,r,n){this.text=new Et(t?t.text:null,e,i,n),this.icon=new Et(t?t.icon:null,e,r,n)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Mt{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class Pt{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class zt{constructor(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n}}class kt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Ct(e,i,r,n,o){const{horizontalAlign:s,verticalAlign:a}=t.getAnchorAlignment(e),l=-(s-.5)*i,c=-(a-.5)*r,u=t.evaluateVariableOffset(e,n);return new t.pointGeometry(l+u[0]*o,c+u[1]*o)}function Lt(e,i,r,n,o,s){const{x1:a,x2:l,y1:c,y2:u,anchorPointX:h,anchorPointY:p}=e,d=new t.pointGeometry(i,r);return n&&d._rotate(o?s:-s),{x1:a+d.x,y1:c+d.y,x2:l+d.x,y2:u+d.y,anchorPointX:h,anchorPointY:p}}class Dt{constructor(t,e,i,r){this.transform=t.clone(),this.collisionIndex=new It(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new kt(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,i,r,n){const o=r.getBucket(i),s=r.latestFeatureIndex;if(!o||!s||i.id!==o.layerIds[0])return;const a=r.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=Tt(r,1,this.transform.zoom),m=ct(h,p,d,this.transform,f);let g=null;if(p){const e=ut(h,p,d,this.transform,f);g=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new zt(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,r.tileID);const y={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(const t of o.sortKeyRanges){const{sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n}=t;e.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}attemptAnchorPlacement(t,e,i,r,n,o,s,a,l,c,u,h,p,d,f){const m=[h.textOffset0,h.textOffset1],g=Ct(t,i,r,m,n),y=this.collisionIndex.placeCollisionBox(Lt(e,g.x,g.y,o,s,this.transform.angle),u,a,l,c.predicate);if((!f||0!==this.collisionIndex.placeCollisionBox(Lt(f,g.x,g.y,o,s,this.transform.angle),u,a,l,c.predicate).box.length)&&y.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:m,width:i,height:r,anchor:t,textBoxScale:n,prevAnchor:e},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:y}}}placeLayerBucketPart(e,i,r){const{bucket:n,layout:o,posMatrix:s,textLabelPlaneMatrix:a,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:p,collisionGroup:d}=e.parameters,f=o.get("text-optional"),m=o.get("icon-optional"),g=t.getOverlapMode(o,"text-overlap","text-allow-overlap"),y="always"===g,_=t.getOverlapMode(o,"icon-overlap","icon-allow-overlap"),x="always"===_,v="map"===o.get("text-rotation-alignment"),b="map"===o.get("text-pitch-alignment"),w="none"!==o.get("icon-text-fit"),S="viewport-y"===o.get("symbol-z-order"),I=y&&(x||!n.hasIconData()||m),T=x&&(y||!n.hasTextData()||f);!n.collisionArrays&&h&&n.deserializeCollisionBoxes(h);const E=(e,h)=>{if(i[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new Mt(!1,!1,!1));let x=!1,S=!1,E=!0,A=null,M={box:null,offscreen:null},P={box:null,offscreen:null},z=null,k=null,C=null,L=0,D=0,B=0;h.textFeatureIndex?L=h.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),h.verticalTextFeatureIndex&&(D=h.verticalTextFeatureIndex);const F=h.textBox;if(F){const i=i=>{let r=t.WritingMode.horizontal;if(n.allowVerticalPlacement&&!i&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(n,r,e))}return r},r=(i,r)=>{if(n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const e of n.writingModes)if(e===t.WritingMode.vertical?(M=r(),P=M):M=i(),M&&M.box&&M.box.length)break}else M=i()};if(o.get("text-variable-anchor")){let a=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];a.indexOf(t.anchor)>0&&(a=a.filter((e=>e!==t.anchor)),a.unshift(t.anchor))}const l=(t,i,r)=>{const o=t.x2-t.x1,l=t.y2-t.y1,u=e.textBoxScale,h=w&&"never"===_?i:null;let p={box:[],offscreen:!1};const f="never"!==g?2*a.length:a.length;for(let i=0;i<f;++i){const f=this.attemptAnchorPlacement(a[i%a.length],t,o,l,u,v,b,c,s,d,i>=a.length?g:"never",e,n,r,h);if(f&&(p=f.placedGlyphBoxes,p&&p.box&&p.box.length)){x=!0,A=f.shift;break}}return p};r((()=>l(F,h.iconBox,t.WritingMode.horizontal)),(()=>{const i=h.verticalTextBox;return n.allowVerticalPlacement&&!(M&&M.box&&M.box.length)&&e.numVerticalGlyphVertices>0&&i?l(i,h.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),M&&(x=M.box,E=M.offscreen);const u=i(M&&M.box);if(!x&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(n,t.anchor,e,u))}}else{const o=(t,i)=>{const r=this.collisionIndex.placeCollisionBox(t,g,c,s,d.predicate);return r&&r.box&&r.box.length&&(this.markUsedOrientation(n,i,e),this.placedOrientations[e.crossTileID]=i),r};r((()=>o(F,t.WritingMode.horizontal)),(()=>{const i=h.verticalTextBox;return n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?o(i,t.WritingMode.vertical):{box:null,offscreen:null}})),i(M&&M.box&&M.box.length)}}if(z=M,x=z&&z.box&&z.box.length>0,E=z&&z.offscreen,e.useRuntimeCollisionCircles){const i=n.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),c=t.evaluateSizeForFeature(n.textSizeData,p,i),u=o.get("text-padding");k=this.collisionIndex.placeCollisionCircles(g,i,n.lineVertexArray,n.glyphOffsetArray,c,s,a,l,r,b,d.predicate,e.collisionCircleDiameter,u),x=y||k.circles.length>0&&!k.collisionDetected,E=E&&k.offscreen}if(h.iconFeatureIndex&&(B=h.iconFeatureIndex),h.iconBox){const t=t=>{const e=w&&A?Lt(t,A.x,A.y,v,b,this.transform.angle):t;return this.collisionIndex.placeCollisionBox(e,_,c,s,d.predicate)};P&&P.box&&P.box.length&&h.verticalIconBox?(C=t(h.verticalIconBox),S=C.box.length>0):(C=t(h.iconBox),S=C.box.length>0),E=E&&C.offscreen}const R=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,O=m||0===e.numIconVertices;if(R||O?O?R||(S=S&&x):x=S&&x:S=x=S&&x,x&&z&&z.box&&this.collisionIndex.insertCollisionBox(z.box,g,o.get("text-ignore-placement"),n.bucketInstanceId,P&&P.box&&D?D:L,d.ID),S&&C&&this.collisionIndex.insertCollisionBox(C.box,_,o.get("icon-ignore-placement"),n.bucketInstanceId,B,d.ID),k&&(x&&this.collisionIndex.insertCollisionCircles(k.circles,g,o.get("text-ignore-placement"),n.bucketInstanceId,L,d.ID),r)){const t=n.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Pt);for(let t=0;t<k.circles.length;t+=4)e.circles.push(k.circles[t+0]),e.circles.push(k.circles[t+1]),e.circles.push(k.circles[t+2]),e.circles.push(k.collisionDetected?1:0)}this.placements[e.crossTileID]=new Mt(x||I,S||T,E||n.justReloaded),i[e.crossTileID]=!0};if(S){const t=n.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const i=t[e];E(n.symbolInstances.get(i),n.collisionArrays[i])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)E(n.symbolInstances.get(t),n.collisionArrays[t]);if(r&&n.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[n.bucketInstanceId];t.invert(e.invProjMatrix,s),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}n.justReloaded=!1}markUsedJustification(e,i,r,n){let o;o=n===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];const s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:r.crossTileID)}markUsedOrientation(e,i,r){const n=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,o=i===t.WritingMode.vertical?i:0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},s=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],o=n[t];o?(this.opacities[t]=new At(o,r,e.text,e.icon),i=i||e.text!==o.text.placed||e.icon!==o.icon.placed):(this.opacities[t]=new At(null,r,e.text,e.icon,e.skipFade),i=i||e.text||e.icon)}for(const t in n){const e=n[t];if(!this.opacities[t]){const n=new At(e,r,!1,!1);n.isHidden()||(this.opacities[t]=n,i=i||e.text.placed||e.icon.placed)}}for(const t in o)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=o[t]);for(const t in s)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=s[t]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const i={};for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,i,r.collisionBoxArray)}}updateBucketOpacities(e,i,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const n=e.layers[0].layout,o=new At(null,0,!1,!1,!0),s=n.get("text-allow-overlap"),a=n.get("icon-allow-overlap"),l=n.get("text-variable-anchor"),c="map"===n.get("text-rotation-alignment"),u="map"===n.get("text-pitch-alignment"),h="none"!==n.get("icon-text-fit"),p=new At(null,0,s&&(a||!e.hasIconData()||n.get("icon-optional")),a&&(s||!e.hasTextData()||n.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const d=(t,e,i)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i)};for(let r=0;r<e.symbolInstances.length;r++){const n=e.symbolInstances.get(r),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:a,crossTileID:f}=n;let m=this.opacities[f];i[f]?m=o:m||(m=p,this.opacities[f]=m),i[f]=!0;const g=n.numIconVertices>0,y=this.placedOrientations[n.crossTileID],_=y===t.WritingMode.vertical,x=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(s>0||a>0){const t=qt(m.text);d(e.text,s,_?Gt:t),d(e.text,a,x?Gt:t);const i=m.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||_?1:0)})),n.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=i||x?1:0);const r=this.variableOffsets[n.crossTileID];r&&this.markUsedJustification(e,r.anchor,n,y);const o=this.placedOrientations[n.crossTileID];o&&(this.markUsedJustification(e,"left",n,o),this.markUsedOrientation(e,o,n))}if(g){const t=qt(m.icon),i=!(h&&n.verticalPlacedIconSymbolIndex&&_);n.placedIconSymbolIndex>=0&&(d(e.icon,n.numIconVertices,i?t:Gt),e.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=m.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,n.numVerticalIconVertices,i?Gt:t),e.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const i=e.collisionArrays[r];if(i){let r=new t.pointGeometry(0,0);if(i.textBox||i.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[f];e?(r=Ct(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),c&&r._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}i.textBox&&Bt(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||_,r.x,r.y),i.verticalTextBox&&Bt(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||x,r.x,r.y)}const n=Boolean(!x&&i.verticalIconBox);i.iconBox&&Bt(e.iconCollisionBox.collisionVertexArray,m.icon.placed,n,h?r.x:0,h?r.y:0),i.verticalIconBox&&Bt(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!n,h?r.x:0,h?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function Bt(t,e,i,r,n){t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0)}const Ft=Math.pow(2,25),Rt=Math.pow(2,24),Ot=Math.pow(2,17),Ut=Math.pow(2,16),Vt=Math.pow(2,9),Nt=Math.pow(2,8),$t=Math.pow(2,1);function qt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Ft+e*Rt+i*Ot+e*Ut+i*Vt+e*Nt+i*$t+e}const Gt=0;class Zt{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,r,n){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1}}class jt{constructor(t,e,i,r,n,o,s){this.placement=new Dt(t,n,o,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,i,r){const n=t.exported.now(),o=()=>{const e=t.exported.now()-n;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=i[e[this._currentPlacementIndex]],n=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=n)&&(!t.maxzoom||t.maxzoom>n)){if(this._inProgressLayer||(this._inProgressLayer=new Zt(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Xt=512/t.EXTENT/2;class Wt{constructor(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<e.length;i++){const r=e.get(i),n=r.key;this.indexedSymbolInstances[n]||(this.indexedSymbolInstances[n]=[]),this.indexedSymbolInstances[n].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}}getScaledCoordinates(e,i){const r=Xt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*r)}}findMatches(t,e,i){const r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let n=0;n<t.length;n++){const o=t.get(n);if(o.crossTileID)continue;const s=this.indexedSymbolInstances[o.key];if(!s)continue;const a=this.getScaledCoordinates(o,e);for(const t of s)if(Math.abs(t.coord.x-a.x)<=r&&Math.abs(t.coord.y-a.y)<=r&&!i[t.crossTileID]){i[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Ht{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Yt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const i=this.indexes[t],r={};for(const t in i){const n=i[t];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[t]=r}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const r=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=n[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let t=0;t<e.symbolInstances.length;t++){const n=e.symbolInstances.get(t);n.crossTileID||(n.crossTileID=i.generate(),r[n.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Wt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const i in e.indexedSymbolInstances)for(const r of e.indexedSymbolInstances[i])delete this.usedCrossTileIDs[t][r.crossTileID]}removeStaleBuckets(t){let e=!1;for(const i in this.indexes){const r=this.indexes[i];for(const n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e}}class Kt{constructor(){this.layerIndexes={},this.crossTileIDs=new Ht,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Yt);let n=!1;const o={};r.handleWrapJump(i);for(const i of e){const e=i.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(i.tileID,e,this.crossTileIDs)&&(n=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const Jt=(e,i)=>t.emitValidationErrors(e,i&&i.filter((t=>"source.canvas"!==t.identifier))),Qt=t.pick(J,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),te=t.pick(J,["setCenter","setZoom","setBearing","setPitch"]),ee=function(){const e={},i=t.spec.$version;for(const r in t.spec.$root){const n=t.spec.$root[r];if(n.required){let t=null;t="version"===r?i:"array"===n.type?[]:{},null!=t&&(e[r]=t)}}return e}();class ie extends t.Evented{constructor(e,i={}){super(),this.map=e,this.dispatcher=new S(H(),this),this.imageManager=new f,this.imageManager.setEventedParent(this),this.glyphManager=new _(e._requestManager,i.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new Kt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=ie.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,i)=>{if(t.triggerPluginCompletionEvent(e),i&&i.every((t=>t)))for(const t in r.sourceCaches)r.sourceCaches[t].reload()}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const i=e.getSource();if(i&&i.vectorLayerIds)for(const t in this._layers){const e=this._layers[t];e.source===i.id&&this._validateLayer(e)}}))}loadURL(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"!=typeof i.validate||i.validate,n=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(n,((e,i)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):i&&this._load(i,r)}))}loadJSON(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==i.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(ee,!1)}_load(e,i){if(i&&Jt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);const r=K(this.stylesheet.layers);this._order=r.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let e of r)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,i,r,n){let o,s,a;const l=r>1?"@2x":"";let c=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,l,".json"),t.ResourceType.SpriteJSON),((t,e)=>{c=null,a||(a=t,o=e,h())})),u=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,l,".png"),t.ResourceType.SpriteImage),((t,e)=>{u=null,a||(a=t,s=e,h())}));function h(){if(a)n(a);else if(o&&s){const e=t.exported.getImageData(s),i={};for(const r in o){const{width:n,height:s,x:a,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:p,content:d}=o[r],f=new t.RGBAImage({width:n,height:s});t.RGBAImage.copy(e,f,{x:a,y:l},{x:0,y:0},{width:n,height:s}),i[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:p,content:d}}n(null,i)}}return{cancel(){c&&(c.cancel(),c=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),((e,i)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(i)for(const t in i)this.imageManager.addImage(t,i[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const i=this.sourceCaches[e.source];if(!i)return;const r=e.sourceLayer;if(!r)return;const n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const i of t){const t=this._layers[i];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const i=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(t.length||i.length)&&this._updateWorkerLayers(t,i);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const i=this._layers[t];i.recalculate(e,this._availableImages),!i.isHidden(e.zoom)&&i.source&&(this.sourceCaches[i.source].used=!0)}for(const e in r){const i=this.sourceCaches[e];r[e]!==i.used&&i.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e}))}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Jt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=K(e.layers);const i=function(t,e){if(!t)return[{command:J.setStyle,args:[e]}];let i=[];try{if(!n(t.version,e.version))return[{command:J.setStyle,args:[e]}];n(t.center,e.center)||i.push({command:J.setCenter,args:[e.center]}),n(t.zoom,e.zoom)||i.push({command:J.setZoom,args:[e.zoom]}),n(t.bearing,e.bearing)||i.push({command:J.setBearing,args:[e.bearing]}),n(t.pitch,e.pitch)||i.push({command:J.setPitch,args:[e.pitch]}),n(t.sprite,e.sprite)||i.push({command:J.setSprite,args:[e.sprite]}),n(t.glyphs,e.glyphs)||i.push({command:J.setGlyphs,args:[e.glyphs]}),n(t.transition,e.transition)||i.push({command:J.setTransition,args:[e.transition]}),n(t.light,e.light)||i.push({command:J.setLight,args:[e.light]});const r={},o=[];!function(t,e,i,r){let o;for(o in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,o)&&(Object.prototype.hasOwnProperty.call(e,o)||tt(o,i,r));for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(Object.prototype.hasOwnProperty.call(t,o)?n(t[o],e[o])||("geojson"===t[o].type&&"geojson"===e[o].type&&it(t,e,o)?i.push({command:J.setGeoJSONSourceData,args:[o,e[o].data]}):et(o,e,i,r)):Q(o,e,i))}(t.sources,e.sources,o,r);const s=[];t.layers&&t.layers.forEach((t=>{r[t.source]?i.push({command:J.removeLayer,args:[t.id]}):s.push(t)})),i=i.concat(o),function(t,e,i){e=e||[];const r=(t=t||[]).map(nt),o=e.map(nt),s=t.reduce(ot,{}),a=e.reduce(ot,{}),l=r.slice(),c=Object.create(null);let u,h,p,d,f,m,g;for(u=0,h=0;u<r.length;u++)p=r[u],Object.prototype.hasOwnProperty.call(a,p)?h++:(i.push({command:J.removeLayer,args:[p]}),l.splice(l.indexOf(p,h),1));for(u=0,h=0;u<o.length;u++)p=o[o.length-1-u],l[l.length-1-u]!==p&&(Object.prototype.hasOwnProperty.call(s,p)?(i.push({command:J.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-h),1)):h++,m=l[l.length-u],i.push({command:J.addLayer,args:[a[p],m]}),l.splice(l.length-u,0,p),c[p]=!0);for(u=0;u<o.length;u++)if(p=o[u],d=s[p],f=a[p],!c[p]&&!n(d,f))if(n(d.source,f.source)&&n(d["source-layer"],f["source-layer"])&&n(d.type,f.type)){for(g in rt(d.layout,f.layout,i,p,null,J.setLayoutProperty),rt(d.paint,f.paint,i,p,null,J.setPaintProperty),n(d.filter,f.filter)||i.push({command:J.setFilter,args:[p,f.filter]}),n(d.minzoom,f.minzoom)&&n(d.maxzoom,f.maxzoom)||i.push({command:J.setLayerZoomRange,args:[p,f.minzoom,f.maxzoom]}),d)Object.prototype.hasOwnProperty.call(d,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?rt(d[g],f[g],i,p,g.slice(6),J.setPaintProperty):n(d[g],f[g])||i.push({command:J.setLayerProperty,args:[p,g,f[g]]}));for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&!Object.prototype.hasOwnProperty.call(d,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?rt(d[g],f[g],i,p,g.slice(6),J.setPaintProperty):n(d[g],f[g])||i.push({command:J.setLayerProperty,args:[p,g,f[g]]}))}else i.push({command:J.removeLayer,args:[p]}),m=l[l.lastIndexOf(p)+1],i.push({command:J.addLayer,args:[f,m]})}(s,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:J.setStyle,args:[e]}]}return i}(this.serialize(),e).filter((t=>!(t.command in te)));if(0===i.length)return!1;const r=i.filter((t=>!(t.command in Qt)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((t=>t.command)).join(", ")}.`);return i.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,i),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,i,null,r))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const n=this.sourceCaches[e]=new $(e,i,this.dispatcher);n.style=this,n.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:n.serialize(),sourceId:e}))),n.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));const i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(e,i,r={}){this._checkLoaded();const n=e.id;if(this.getLayer(n))return void this.fire(new t.ErrorEvent(new Error(`Layer "${n}" already exists on this map.`)));let o;if("custom"===e.type){if(Jt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})),this._validate(t.validateStyle.layer,`layers.${n}`,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[o.id]=o.serialize()}const s=i?this._order.indexOf(i):this._order.length;if(i&&-1===s)this.fire(new t.ErrorEvent(new Error(`Cannot add layer "${n}" before non-existing layer "${i}".`)));else{if(this._order.splice(s,0,n),this._layerOrderChanged=!0,this._layers[n]=o,this._removedLayers[n]&&o.source&&"custom"!==o.type){const t=this._removedLayers[n];delete this._removedLayers[n],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===i)return;const r=this._order.indexOf(e);this._order.splice(r,1);const n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new t.ErrorEvent(new Error(`Cannot move layer "${e}" before non-existing layer "${i}".`))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new t.ErrorEvent(new Error(`Cannot remove non-existing layer "${e}".`)));i.setEventedParent(null);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(e,i,r){this._checkLoaded();const n=this.getLayer(e);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new t.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,i,r={}){this._checkLoaded();const o=this.getLayer(e);if(o){if(!n(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,`layers.${o.id}.filter`,i,null,r)||(o.filter=t.clone$1(i),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,i,r,o={}){this._checkLoaded();const s=this.getLayer(e);s?n(s.getLayoutProperty(i),r)||(s.setLayoutProperty(i,r,o),this._updateLayer(s)):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,i){const r=this.getLayer(e);if(r)return r.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,i,r,o={}){this._checkLoaded();const s=this.getLayer(e);s?n(s.getPaintProperty(i),r)||(s.setPaintProperty(i,r,o)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,i){this._checkLoaded();const r=e.source,n=e.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const s=o.getSource().type;"geojson"===s&&n?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||n?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(n,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,i){this._checkLoaded();const r=e.source,n=this.sourceCaches[r];if(void 0===n)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=n.getSource().type,s="vector"===o?e.sourceLayer:void 0;"vector"!==o||s?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(s,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const i=e.source,r=e.sourceLayer,n=this.sourceCaches[i];if(void 0!==n)return"vector"!==n.getSource().type||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(r,e.id)):void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(t=>t.serialize())),layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,i={},r=[];for(let n=this._order.length-1;n>=0;n--){const o=this._order[n];if(e(o)){i[o]=n;for(const e of t){const t=e[o];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const n=[];for(let o=this._order.length-1;o>=0;o--){const s=this._order[o];if(e(s))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(i[e.layer.id]<o)break;n.push(e),r.pop()}else for(const e of t){const t=e[s];if(t)for(const e of t)n.push(e.feature)}}return n}queryRenderedFeatures(e,i,r){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of i.layers){const i=this._layers[e];if(!i)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];n[i.source]=!0}}const o=[];i.availableImages=this._availableImages;for(const t in this.sourceCaches)i.layers&&!n[t]||o.push(R(this.sourceCaches[t],this._layers,this._serializedLayers,e,i,r));return this.placement&&o.push(function(t,e,i,r,n,o,s){const a={},l=o.queryRenderedSymbols(r),c=[];for(const t of Object.keys(l).map(Number))c.push(s[t]);c.sort(O);for(const i of c){const r=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(const t in r){const e=a[t]=a[t]||[],n=r[t];n.sort(((t,e)=>{const r=i.featureSortOrder;if(r){const i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(const t of n)e.push(t)}}for(const e in a)a[e].forEach((r=>{const n=r.feature,o=i[t[e].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}));return a}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const r=this.sourceCaches[e];return r?function(t,e){const i=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],n={};for(let t=0;t<i.length;t++){const o=i[t],s=o.tileID.canonical.key;n[s]||(n[s]=!0,o.querySourceFeatures(r,e))}return r}(r,i):[]}addSourceType(t,e,i){return ie.getSourceType(t)?i(new Error(`A source type called "${t}" already exists.`)):(ie.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const r=this.light.getLight();let o=!1;for(const t in e)if(!n(e[t],r[t])){o=!0;break}if(!o)return;const s={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(s)}_validate(e,i,r,n,o={}){return(!o||!1!==o.validate)&&Jt(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:r,styleSpec:t.spec},n)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(e,i,r,n,o=!1){let s=!1,a=!1;const l={};for(const t of this._order){const i=this._layers[t];if("symbol"!==i.type)continue;if(!l[i.source]){const t=this.sourceCaches[i.source];l[i.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(i,l[i.source],e.center.lng);s=s||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new jt(e,this._order,o,i,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();const r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)}getGlyphs(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)}getResource(e,i,r){return t.makeRequest(i,r)}}ie.getSourceType=function(t){return B[t]},ie.setSourceType=function(t,e){B[t]=e},ie.registerForPluginStateChange=t.registerForPluginStateChange;var re=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),ne={prelude:oe("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),background:oe("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:oe("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:oe("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:oe("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:oe("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:oe("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:oe("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:oe("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:oe("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:oe("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:oe("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:oe("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:oe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:oe("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:oe("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:oe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:oe("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:oe("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:oe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:oe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:oe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:oe("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:oe("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:oe("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:oe("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")};function oe(t,e){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(n):n,a={};return{fragmentSource:t=t.replace(i,((t,e,i,r,n)=>(a[n]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${n}\nvarying ${i} ${r} ${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = u_${n};\n#endif\n`))),vertexSource:e=e.replace(i,((t,e,i,r,n)=>{const o="float"===r?"vec2":"vec4",s=n.match(/color/)?"color":o;return a[n]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${o} a_${n};\nvarying ${i} ${r} ${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = a_${n};\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = unpack_mix_${s}(a_${n}, u_${n}_t);\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${o} a_${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = a_${n};\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = unpack_mix_${s}(a_${n}, u_${n}_t);\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`})),staticAttributes:r,staticUniforms:s}}class se{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,r,n,o,s,a){this.context=t;let l=this.boundPaintVertexBuffers.length!==r.length;for(let t=0;!l&&t<r.length;t++)this.boundPaintVertexBuffers[t]!==r[t]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===n&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===s&&this.boundDynamicVertexBuffer2===a?(t.bindVertexArrayOES.set(this.vao),s&&s.bind(),n&&n.dynamicDraw&&n.bind(),a&&a.bind()):this.freshBind(e,i,r,n,o,s,a)}freshBind(t,e,i,r,n,o,s){let a;const l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=s;else{a=c.currentNumAttributes||0;for(let t=l;t<a;t++)u.disableVertexAttribArray(t)}e.enableAttributes(u,t);for(const e of i)e.enableAttributes(u,t);o&&o.enableAttributes(u,t),s&&s.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,n);for(const e of i)e.bind(),e.setVertexAttribPointers(u,t,n);o&&(o.bind(),o.setVertexAttribPointers(u,t,n)),r&&r.bind(),s&&(s.bind(),s.setVertexAttribPointers(u,t,n)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ae(t){const e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;const r=t[i].split(" ");e.push(r.pop())}return e}class le{constructor(t,e,i,r,n,o){const s=t.gl;this.program=s.createProgram();const a=ae(i.staticAttributes),l=r?r.getBinderAttributes():[],c=a.concat(l),u=i.staticUniforms?ae(i.staticUniforms):[],h=r?r.getBinderUniforms():[],p=u.concat(h),d=[];for(const t of p)d.indexOf(t)<0&&d.push(t);const f=r?r.defines():[];o&&f.push("#define OVERDRAW_INSPECTOR;");const m=f.concat(ne.prelude.fragmentSource,i.fragmentSource).join("\n"),g=f.concat(ne.prelude.vertexSource,i.vertexSource).join("\n"),y=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(y,m),s.compileShader(y),s.attachShader(this.program,y);const _=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(_,g),s.compileShader(_),s.attachShader(this.program,_),this.attributes={};const x={};this.numAttributes=c.length;for(let t=0;t<this.numAttributes;t++)c[t]&&(s.bindAttribLocation(this.program,t,c[t]),this.attributes[c[t]]=t);s.linkProgram(this.program),s.deleteShader(_),s.deleteShader(y);for(let t=0;t<d.length;t++){const e=d[t];if(e&&!x[e]){const t=s.getUniformLocation(this.program,e);t&&(x[e]=t)}}this.fixedUniforms=n(t,x),this.binderUniforms=r?r.getUniforms(t,x):[]}draw(t,e,i,r,n,o,s,a,l,c,u,h,p,d,f,m){const g=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(o);for(const t in this.fixedUniforms)this.fixedUniforms[t].set(s[t]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});const y={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[e];for(const i of u.get()){const r=i.vaos||(i.vaos={});(r[a]||(r[a]=new se)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,i.vertexOffset,f,m),g.drawElements(e,i.primitiveLength*y,g.UNSIGNED_SHORT,i.primitiveOffset*y*2)}}}function ce(t,e,i){const r=1/Tt(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,s=o*(i.tileID.canonical.x+i.tileID.wrap*n),a=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,a>>16],u_pixel_coord_lower:[65535&s,65535&a]}}const ue=(e,i,r,n)=>{const o=i.style.light,s=o.properties.get("position"),a=[s.x,s.y,s.z],l=function(){var e=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===o.properties.get("anchor")&&function(t,e){var i=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(l,-i.transform.angle),function(t,e,i){var r=e[0],n=e[1],o=e[2];t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8]}(a,a,l);const c=o.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:n}},he=(e,i,r,n,o,s,a)=>t.extend(ue(e,i,r,n),ce(s,i,a),{u_height_factor:-Math.pow(2,o.overscaledZ)/a.tileSize/8}),pe=t=>({u_matrix:t}),de=(e,i,r,n)=>t.extend(pe(e),ce(r,i,n)),fe=(t,e)=>({u_matrix:t,u_world:e}),me=(e,i,r,n,o)=>t.extend(de(e,i,r,n),{u_world:o}),ge=(t,e,i,r)=>{const n=t.transform;let o,s;if("map"===r.paint.get("circle-pitch-alignment")){const t=Tt(i,1,n.zoom);o=!0,s=[t,t]}else o=!1,s=n.pixelsToGLUnits;return{u_camera_to_center_distance:n.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:s}},ye=(t,e,i)=>{const r=Tt(i,1,e.zoom),n=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*n),e.pixelsToGLUnits[1]/(r*n)],u_overscale_factor:o}},_e=(t,e,i=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}),xe=t=>({u_matrix:t}),ve=(t,e,i,r)=>({u_matrix:t,u_extrude_scale:Tt(e,1,i),u_intensity:r});function be(e,i){const r=Math.pow(2,i.canonical.z),n=i.canonical.y;return[new t.MercatorCoordinate(0,n/r).toLngLat().lat,new t.MercatorCoordinate(0,(n+1)/r).toLngLat().lat]}const we=(t,e,i)=>{const r=t.transform;return{u_matrix:Ae(t,e,i),u_ratio:1/Tt(e,1,r.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Se=(e,i,r,n)=>t.extend(we(e,i,r),{u_image:0,u_image_height:n}),Ie=(t,e,i,r)=>{const n=t.transform,o=Ee(e,n);return{u_matrix:Ae(t,e,i),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Tt(e,1,n.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Te=(e,i,r,n,o)=>{const s=e.lineAtlas,a=Ee(i,e.transform),l="round"===r.layout.get("line-cap"),c=s.getDash(n.from,l),u=s.getDash(n.to,l),h=c.width*o.fromScale,p=u.width*o.toScale;return t.extend(we(e,i,r),{u_patternscale_a:[a/h,-c.height/2],u_patternscale_b:[a/p,-u.height/2],u_sdfgamma:s.width/(256*Math.min(h,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:u.y,u_mix:o.t})};function Ee(t,e){return 1/Tt(t,1,e.tileZoom)}function Ae(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const Me=(t,e,i,r,n)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(s=n.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Pe(n.paint.get("raster-hue-rotate"))};var o,s};function Pe(t){t*=Math.PI/180;const e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const ze=(t,e,i,r,n,o,s,a,l,c)=>{const u=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:a,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},ke=(e,i,r,n,o,s,a,l,c,u,h)=>{const p=o.transform;return t.extend(ze(e,i,r,n,o,s,a,l,c,u),{u_gamma_scale:n?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:+h})},Ce=(e,i,r,n,o,s,a,l,c,u)=>t.extend(ke(e,i,r,n,o,s,a,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Le=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),De=(e,i,r,n,o,s)=>t.extend(function(t,e,i,r){const n=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),{width:s,height:a}=i.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,a],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/Tt(r,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(n,s,r,o),{u_matrix:e,u_opacity:i}),Be={fillExtrusion:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fillExtrusionPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fill:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),fillPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),fillOutline:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}),fillOutlinePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),circle:(e,i)=>({u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),collisionBox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}),collisionCircle:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}),debug:(e,i)=>({u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}),clippingMask:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmap:(e,i)=>({u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmapTexture:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}),hillshade:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}),hillshadePrepare:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}),line:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}),lineGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}),linePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),lineSDF:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}),raster:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}),symbolIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}),symbolSDF:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),symbolTextAndIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),background:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}),backgroundPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)})};class Fe{constructor(t,e,i){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Oe{constructor(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){const r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,i){for(let r=0;r<this.attributes.length;r++){const n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[Re[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ue{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ve extends Ue{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ne extends Ue{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class $e extends Ue{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class qe extends Ue{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Ge extends Ue{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ze extends Ue{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class je extends Ue{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Xe extends Ue{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class We extends Ue{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class He extends Ue{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ye extends Ue{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ke extends Ue{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Je extends Ue{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class Qe extends Ue{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class ti extends Ue{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ei extends Ue{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class ii extends Ue{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class ri extends Ue{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ni extends Ue{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class oi extends Ue{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class si extends Ue{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ai extends Ue{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class li extends Ue{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class ci extends Ue{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ui extends Ue{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class hi extends Ue{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class pi extends Ue{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class di extends Ue{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class fi extends Ue{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class mi extends Ue{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class gi extends Ue{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class yi extends Ue{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class _i extends yi{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class xi extends yi{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class vi{constructor(t,e,i,r){this.context=t,this.width=e,this.height=i;const n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new _i(t,n),r&&(this.depthAttachment=new xi(t,n))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class bi{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}bi.Replace=[1,0],bi.disabled=new bi(bi.Replace,t.Color.transparent,[!1,!1,!1,!1]),bi.unblended=new bi(bi.Replace,t.Color.transparent,[!0,!0,!0,!0]),bi.alphaBlended=new bi([1,771],t.Color.transparent,[!0,!0,!0,!0]);class wi{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ve(this),this.clearDepth=new Ne(this),this.clearStencil=new $e(this),this.colorMask=new qe(this),this.depthMask=new Ge(this),this.stencilMask=new Ze(this),this.stencilFunc=new je(this),this.stencilOp=new Xe(this),this.stencilTest=new We(this),this.depthRange=new He(this),this.depthTest=new Ye(this),this.depthFunc=new Ke(this),this.blend=new Je(this),this.blendFunc=new Qe(this),this.blendColor=new ti(this),this.blendEquation=new ei(this),this.cullFace=new ii(this),this.cullFaceSide=new ri(this),this.frontFace=new ni(this),this.program=new oi(this),this.activeTexture=new si(this),this.viewport=new ai(this),this.bindFramebuffer=new li(this),this.bindRenderbuffer=new ci(this),this.bindTexture=new ui(this),this.bindVertexBuffer=new hi(this),this.bindElementBuffer=new pi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new di(this),this.pixelStoreUnpack=new fi(this),this.pixelStoreUnpackPremultiplyAlpha=new mi(this),this.pixelStoreUnpackFlipY=new gi(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Fe(this,t,e)}createVertexBuffer(t,e,i){return new Oe(this,t,e,i)}createRenderbuffer(t,e,i){const r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n}createFramebuffer(t,e,i){return new vi(this,t,e,i)}clear({color:t,depth:e}){const i=this.gl;let r=0;t&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),i.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){n(t.blendFunction,bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Si{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}Si.ReadOnly=!1,Si.ReadWrite=!0,Si.disabled=new Si(519,Si.ReadOnly,[0,1]);const Ii=7680;class Ti{constructor(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o}}Ti.disabled=new Ti({func:519,mask:0},0,0,Ii,Ii,Ii);class Ei{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}let Ai;function Mi(e,i,r,n,o,s,a){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let p=0,d=0;for(let f=0;f<n.length;f++){const m=n[f],g=i.getTile(m),y=g.getBucket(r);if(!y)continue;let _=m.posMatrix;0===o[0]&&0===o[1]||(_=e.translatePosMatrix(m.posMatrix,g,o,s));const x=a?y.textCollisionBox:y.iconCollisionBox,v=y.collisionCircleArray;if(v.length>0){const i=t.create(),r=_;t.mul(i,y.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(i,i,y.placementViewportMatrix),h.push({circleArray:v,circleOffset:d,transform:r,invTransform:i}),p+=v.length/4,d=p}x&&u.draw(l,c.LINES,Si.disabled,Ti.disabled,e.colorModeForRenderPass(),Ei.disabled,ye(_,e.transform,g),r.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,null,e.transform.zoom,null,null,x.collisionVertexBuffer)}if(!a||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.CollisionCircleLayoutArray;m.resize(4*p),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const i=4*e,r=t.circleArray[i+0],n=t.circleArray[i+1],o=t.circleArray[i+2],s=t.circleArray[i+3];m.emplace(g++,r,n,o,s,0),m.emplace(g++,r,n,o,s,1),m.emplace(g++,r,n,o,s,2),m.emplace(g++,r,n,o,s,3)}(!Ai||Ai.length<2*p)&&(Ai=function(e){const i=2*e,r=new t.QuadTriangleArray;r.resize(i),r._trim();for(let t=0;t<i;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(p));const y=l.createIndexBuffer(Ai,!0),_=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const i of h){const n={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(x=e.transform).cameraToCenterDistance,u_viewport_size:[x.width,x.height]};f.draw(l,c.TRIANGLES,Si.disabled,Ti.disabled,e.colorModeForRenderPass(),Ei.disabled,n,r.id,_,y,t.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,e.transform.zoom,null,null,null)}var x;_.destroy(),y.destroy()}Ei.disabled=new Ei(!1,1029,2305),Ei.backCCW=new Ei(!0,1029,2305);const Pi=t.identity(new Float32Array(16));function zi(e,i,r,n,o,s){const{horizontalAlign:a,verticalAlign:l}=t.getAnchorAlignment(e),c=-(a-.5)*i,u=-(l-.5)*r,h=t.evaluateVariableOffset(e,n);return new t.pointGeometry((c/o+h[0])*s,(u/o+h[1])*s)}function ki(e,i,r,n,o,s,a,l,c,u){const h=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,f={};p.clear();for(let d=0;d<h.length;d++){const m=h.get(d),g=e.allowVerticalPlacement&&!m.placedOrientation,y=m.hidden||!m.crossTileID||g?null:n[m.crossTileID];if(y){const n=new t.pointGeometry(m.anchorX,m.anchorY),h=ht(n,r?a:s),d=pt(o.cameraToCenterDistance,h.signedDistanceFromCamera);let g=t.evaluateSizeForFeature(e.textSizeData,c,m)*d/t.ONE_EM;r&&(g*=e.tilePixelRatio/l);const{width:_,height:x,anchor:v,textOffset:b,textBoxScale:w}=y,S=zi(v,_,x,b,w,g),I=r?ht(n.add(S),s).point:h.point.add(i?S.rotate(-o.angle):S),T=e.allowVerticalPlacement&&m.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<m.numGlyphs;e++)t.addDynamicAttributes(p,I,T);u&&m.associatedIconIndex>=0&&(f[m.associatedIconIndex]={shiftedAnchor:I,angle:T})}else bt(m.numGlyphs,p)}if(u){d.clear();const i=e.icon.placedSymbolArray;for(let e=0;e<i.length;e++){const r=i.get(e);if(r.hidden)bt(r.numGlyphs,d);else{const i=f[e];if(i)for(let e=0;e<r.numGlyphs;e++)t.addDynamicAttributes(d,i.shiftedAnchor,i.angle);else bt(r.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function Ci(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Li(e,i,r,n,o,s,a,l,c,u,h,p){const d=e.context,f=d.gl,m=e.transform,g="map"===l,y="map"===c,_="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),x=g&&!y&&!_,v=!r.layout.get("symbol-sort-key").isConstant();let b=!1;const w=e.depthModeForSublayer(0,Si.ReadOnly),S=r.layout.get("text-variable-anchor"),I=[];for(const l of n){const n=i.getTile(l),c=n.getBucket(r);if(!c)continue;const h=o?c.text:c.icon;if(!h||!h.segments.get().length)continue;const p=h.programConfigurations.get(r.id),d=o||c.sdfIcons,w=o?c.textSizeData:c.iconSizeData,T=y||0!==m.pitch,E=e.useProgram(Ci(d,o,c),p),A=t.evaluateSizeForZoom(w,m.zoom);let M,P,z,k,C=[0,0],L=null;if(o){if(P=n.glyphAtlasTexture,z=f.LINEAR,M=n.glyphAtlasTexture.size,c.iconsInText){C=n.imageAtlasTexture.size,L=n.imageAtlasTexture;const t="composite"===w.kind||"camera"===w.kind;k=T||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;P=n.imageAtlasTexture,z=d||e.options.rotating||e.options.zooming||t||T?f.LINEAR:f.NEAREST,M=n.imageAtlasTexture.size}const D=Tt(n,1,e.transform.zoom),B=ct(l.posMatrix,y,g,e.transform,D),F=ut(l.posMatrix,y,g,e.transform,D),R=S&&c.hasTextData(),O="none"!==r.layout.get("icon-text-fit")&&R&&c.hasIconData();if(_){const t="map"===r.layout.get("text-rotation-alignment");ft(c,l.posMatrix,e,o,B,F,y,u,t)}const U=e.translatePosMatrix(l.posMatrix,n,s,a),V=_||o&&S||O?Pi:B,N=e.translatePosMatrix(F,n,s,a,!0),$=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let q;q=d?c.iconsInText?Ce(w.kind,A,x,y,e,U,V,N,M,C):ke(w.kind,A,x,y,e,U,V,N,o,M,!0):ze(w.kind,A,x,y,e,U,V,N,o,M);const G={program:E,buffers:h,uniformValues:q,atlasTexture:P,atlasTextureIcon:L,atlasInterpolation:z,atlasInterpolationIcon:k,isSDF:d,hasHalo:$};if(v&&c.canOverlap){b=!0;const e=h.segments.get();for(const i of e)I.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:G})}else I.push({segments:h.segments,sortKey:0,state:G})}b&&I.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of I){const i=t.state;if(d.activeTexture.set(f.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,f.CLAMP_TO_EDGE),i.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),i.isSDF){const n=i.uniformValues;i.hasHalo&&(n.u_is_halo=1,Di(i.buffers,t.segments,r,e,i.program,w,h,p,n)),n.u_is_halo=0}Di(i.buffers,t.segments,r,e,i.program,w,h,p,i.uniformValues)}}function Di(t,e,i,r,n,o,s,a,l){const c=r.context;n.draw(c,c.gl.TRIANGLES,o,s,a,Ei.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Bi(t,e,i,r,n,o,s){const a=t.context.gl,l=i.paint.get("fill-pattern"),c=l&&l.constantOr(1),u=i.getCrossfadeParameters();let h,p,d,f,m;s?(p=c&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=a.LINES):(p=c?"fillPattern":"fill",h=a.TRIANGLES);for(const g of r){const r=e.getTile(g);if(c&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;const _=y.programConfigurations.get(i.id),x=t.useProgram(p,_);c&&(t.context.activeTexture.set(a.TEXTURE0),r.imageAtlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),_.updatePaintBuffers(u));const v=l.constantOr(null);if(v&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[v.to.toString()],i=t.patternPositions[v.from.toString()];e&&i&&_.setConstantPatternPositions(e,i)}const b=t.translatePosMatrix(g.posMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){f=y.indexBuffer2,m=y.segments2;const e=[a.drawingBufferWidth,a.drawingBufferHeight];d="fillOutlinePattern"===p&&c?me(b,t,u,r,e):fe(b,e)}else f=y.indexBuffer,m=y.segments,d=c?de(b,t,u,r):pe(b);x.draw(t.context,h,n,t.stencilModeForClipping(g),o,Ei.disabled,d,i.id,y.layoutVertexBuffer,f,m,i.paint,t.transform.zoom,_)}}function Fi(t,e,i,r,n,o,s){const a=t.context,l=a.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity");for(const d of r){const r=e.getTile(d),f=r.getBucket(i);if(!f)continue;const m=f.programConfigurations.get(i.id),g=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",m);u&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),m.updatePaintBuffers(h));const y=c.constantOr(null);if(y&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[y.to.toString()],i=t.patternPositions[y.from.toString()];e&&i&&m.setConstantPatternPositions(e,i)}const _=t.translatePosMatrix(d.posMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),x=i.paint.get("fill-extrusion-vertical-gradient"),v=u?he(_,t,x,p,d,h,r):ue(_,t,x,p);g.draw(a,a.gl.TRIANGLES,n,o,s,Ei.backCCW,v,i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,i.paint,t.transform.zoom,m)}}function Ri(t,e,i,r,n,o){const s=t.context,a=s.gl,l=e.fbo;if(!l)return;const c=t.useProgram("hillshade");s.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,l.colorAttachment.get());const u=((t,e,i)=>{const r=i.paint.get("hillshade-shadow-color"),n=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color");let s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const a=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),a),u_image:0,u_latrange:be(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:n,u_accent:o}})(t,e,i);c.draw(s,a.TRIANGLES,r,n,o,Ei.disabled,u,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function Oi(e,i,r,n,o,s){const a=e.context,l=a.gl,c=i.dem;if(c&&c.data){const u=c.dim,h=c.stride,d=c.getPixels();if(a.activeTexture.set(l.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(h),i.demTexture){const t=i.demTexture;t.update(d,{premultiply:!1}),t.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new p(a,d,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);a.activeTexture.set(l.TEXTURE0);let f=i.fbo;if(!f){const t=new p(a,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),f=i.fbo=a.createFramebuffer(u,u,!0),f.colorAttachment.set(t.texture)}a.bindFramebuffer.set(f.framebuffer),a.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,n,o,s,Ei.disabled,((e,i)=>{const r=i.stride,n=t.create();return t.ortho(n,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(n,n,[0,-t.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:i.getUnpackVector()}})(i.tileID,c),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ui(e,i,r,n,o){const s=n.paint.get("raster-fade-duration");if(s>0){const n=t.exported.now(),a=(n-e.timeAdded)/s,l=i?(n-i.timeAdded)/s:-1,c=r.getSource(),u=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),p=h&&e.refreshedUponExpiration?1:t.clamp(h?a:1-l,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const Vi=new t.Color(1,0,0,1),Ni=new t.Color(0,1,0,1),$i=new t.Color(0,0,1,1),qi=new t.Color(1,0,1,1),Gi=new t.Color(0,1,1,1);function Zi(t,e,i,r){Xi(t,0,e+i/2,t.transform.width,i,r)}function ji(t,e,i,r){Xi(t,e-i/2,0,i,t.transform.height,r)}function Xi(t,e,i,r,n,o){const s=t.context,a=s.gl;a.enable(a.SCISSOR_TEST),a.scissor(e*t.pixelRatio,i*t.pixelRatio,r*t.pixelRatio,n*t.pixelRatio),s.clear({color:o}),a.disable(a.SCISSOR_TEST)}function Wi(e,i,r){const n=e.context,o=n.gl,s=r.posMatrix,a=e.useProgram("debug"),l=Si.disabled,c=Ti.disabled,u=e.colorModeForRenderPass(),h="$debug";n.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),a.draw(n,o.LINE_STRIP,l,c,u,Ei.disabled,_e(s,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const p=i.getTileByID(r.key).latestRawTileData,d=Math.floor((p&&p.byteLength||0)/1024),f=i.getTile(r).tileSize,m=512/Math.min(f,512)*(r.overscaledZ/e.transform.zoom)*.5;let g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=` => ${r.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${g} ${d}kb`),a.draw(n,o.TRIANGLES,l,c,bi.alphaBlended,Ei.disabled,_e(s,t.Color.transparent,m),h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const Hi={symbol:function(e,i,r,n,o){if("translucent"!==e.renderPass)return;const s=Ti.disabled,a=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,i,r,n,o,s,a){const l=i.transform,c="map"===o,u="map"===s;for(const o of e){const e=n.getTile(o),s=e.getBucket(r);if(!s||!s.text||!s.text.segments.get().length)continue;const h=t.evaluateSizeForZoom(s.textSizeData,l.zoom),p=Tt(e,1,i.transform.zoom),d=ct(o.posMatrix,u,c,i.transform,p),f="none"!==r.layout.get("icon-text-fit")&&s.hasIconData();if(h){const t=Math.pow(2,l.zoom-e.tileID.overscaledZ);ki(s,c,u,a,l,d,o.posMatrix,t,h,f)}}}(n,e,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&Li(e,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),s,a),0!==r.paint.get("text-opacity").constantOr(1)&&Li(e,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),s,a),i.map.showCollisionBoxes&&(Mi(e,i,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Mi(e,i,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,i,r,n){if("translucent"!==e.renderPass)return;const o=r.paint.get("circle-opacity"),s=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===s.constantOr(1)||0===a.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,Si.ReadOnly),p=Ti.disabled,d=e.colorModeForRenderPass(),f=[];for(let o=0;o<n.length;o++){const s=n[o],a=i.getTile(s),c=a.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),h={programConfiguration:u,program:e.useProgram("circle",u),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:ge(e,s,a,r)};if(l){const e=c.segments.get();for(const i of e)f.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:h})}else f.push({segments:c.segments,sortKey:0,state:h})}l&&f.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of f){const{programConfiguration:i,program:n,layoutVertexBuffer:o,indexBuffer:s,uniformValues:a}=t.state;n.draw(c,u.TRIANGLES,h,p,d,Ei.disabled,a,r.id,o,s,t.segments,r.paint,e.transform.zoom,i)}},heatmap:function(e,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,s=o.gl,a=Ti.disabled,l=new bi([s.ONE,s.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){const r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,r){const n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(t,e,o,n)}}(o,e,r),o.clear({color:t.Color.transparent});for(let t=0;t<n.length;t++){const c=n[t];if(i.hasRenderableParent(c))continue;const u=i.getTile(c),h=u.getBucket(r);if(!h)continue;const p=h.programConfigurations.get(r.id),d=e.useProgram("heatmap",p),{zoom:f}=e.transform;d.draw(o,s.TRIANGLES,Si.disabled,a,l,Ei.disabled,ve(c.posMatrix,u,f,r.paint.get("heatmap-intensity")),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,p)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){const r=e.context,n=r.gl,o=i.heatmapFbo;if(!o)return;r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);let s=i.colorRampTexture;s||(s=i.colorRampTexture=new p(r,i.colorRamp,n.RGBA)),s.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,n.TRIANGLES,Si.disabled,Ti.disabled,e.colorModeForRenderPass(),Ei.disabled,((e,i,r,n)=>{const o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);const s=e.context.gl;return{u_matrix:o,u_world:[s.drawingBufferWidth,s.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}(e,r))},line:function(e,i,r,n){if("translucent"!==e.renderPass)return;const o=r.paint.get("line-opacity"),s=r.paint.get("line-width");if(0===o.constantOr(1)||0===s.constantOr(1))return;const a=e.depthModeForSublayer(0,Si.ReadOnly),l=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),h=u.constantOr(1),d=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),m=h?"linePattern":c?"lineSDF":d?"lineGradient":"line",g=e.context,y=g.gl;let _=!0;for(const o of n){const n=i.getTile(o);if(h&&!n.patternsLoaded())continue;const s=n.getBucket(r);if(!s)continue;const x=s.programConfigurations.get(r.id),v=e.context.program.get(),b=e.useProgram(m,x),w=_||b.program!==v,S=u.constantOr(null);if(S&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[S.to.toString()],i=t.patternPositions[S.from.toString()];e&&i&&x.setConstantPatternPositions(e,i)}const I=h?Ie(e,n,r,f):c?Te(e,n,r,c,f):d?Se(e,n,r,s.lineClipsArray.length):we(e,n,r);if(h)g.activeTexture.set(y.TEXTURE0),n.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),x.updatePaintBuffers(f);else if(c&&(w||e.lineAtlas.dirty))g.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(g);else if(d){const n=s.gradients[r.id];let a=n.texture;if(r.gradientVersion!==n.version){let l=256;if(r.stepInterpolant){const r=i.getSource().maxzoom,n=o.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1;l=t.clamp(t.nextPowerOfTwo(s.maxLineLength/t.EXTENT*1024*n),256,g.maxTextureSize)}n.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:n.gradient||void 0,clips:s.lineClipsArray}),n.texture?n.texture.update(n.gradient):n.texture=new p(g,n.gradient,y.RGBA),n.version=r.gradientVersion,a=n.texture}g.activeTexture.set(y.TEXTURE0),a.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}b.draw(g,y.TRIANGLES,a,e.stencilModeForClipping(o),l,Ei.disabled,I,r.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,r.paint,e.transform.zoom,x,s.layoutVertexBuffer2),_=!1}},fill:function(e,i,r,n){const o=r.paint.get("fill-color"),s=r.paint.get("fill-opacity");if(0===s.constantOr(1))return;const a=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Si.ReadWrite:Si.ReadOnly);Bi(e,i,r,n,t,a,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const t=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Si.ReadOnly);Bi(e,i,r,n,t,a,!0)}},"fill-extrusion":function(t,e,i,r){const n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){const o=new Si(t.context.gl.LEQUAL,Si.ReadWrite,t.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))Fi(t,e,i,r,o,Ti.disabled,bi.disabled),Fi(t,e,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const n=t.colorModeForRenderPass();Fi(t,e,i,r,o,Ti.disabled,n)}}},hillshade:function(t,e,i,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const n=t.context,o=t.depthModeForSublayer(0,Si.ReadOnly),s=t.colorModeForRenderPass(),[a,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r];for(const r of l){const n=e.getTile(r);n.needsHillshadePrepare&&"offscreen"===t.renderPass?Oi(t,n,i,o,Ti.disabled,s):"translucent"===t.renderPass&&Ri(t,n,i,o,a[r.overscaledZ],s)}n.viewport.set([0,0,t.width,t.height])},raster:function(t,e,i,r){if("translucent"!==t.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const n=t.context,o=n.gl,s=e.getSource(),a=t.useProgram("raster"),l=t.colorModeForRenderPass(),[c,u]=s instanceof C?[{},r]:t.stencilConfigForOverlap(r),h=u[u.length-1].overscaledZ,p=!t.options.moving;for(const r of u){const u=t.depthModeForSublayer(r.overscaledZ-h,1===i.paint.get("raster-opacity")?Si.ReadWrite:Si.ReadOnly,o.LESS),d=e.getTile(r),f=t.transform.calculatePosMatrix(r.toUnwrapped(),p);d.registerFadeDuration(i.paint.get("raster-fade-duration"));const m=e.findLoadedParent(r,0),g=Ui(d,m,e,i,t.transform);let y,_;const x="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),d.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),m?(m.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,m.tileID.overscaledZ-d.tileID.overscaledZ),_=[d.tileID.canonical.x*y%1,d.tileID.canonical.y*y%1]):d.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const v=Me(f,_||[0,0],y||1,g,i);s instanceof C?a.draw(n,o.TRIANGLES,u,Ti.disabled,l,Ei.disabled,v,i.id,s.boundsBuffer,t.quadTriangleIndexBuffer,s.boundsSegments):a.draw(n,o.TRIANGLES,u,c[r.overscaledZ],l,Ei.disabled,v,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){const r=i.paint.get("background-color"),n=i.paint.get("background-opacity");if(0===n)return;const o=t.context,s=o.gl,a=t.transform,l=a.tileSize,c=i.paint.get("background-pattern");if(t.isPatternMissing(c))return;const u=!c&&1===r.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==u)return;const h=Ti.disabled,p=t.depthModeForSublayer(0,"opaque"===u?Si.ReadWrite:Si.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(c?"backgroundPattern":"background"),m=a.coveringTiles({tileSize:l});c&&(o.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));const g=i.getCrossfadeParameters();for(const e of m){const a=t.transform.calculatePosMatrix(e.toUnwrapped()),u=c?De(a,n,t,c,{tileID:e,tileSize:l},g):Le(a,n,r);f.draw(o,s.TRIANGLES,p,h,d,Ei.disabled,u,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},debug:function(t,e,i){for(let r=0;r<i.length;r++)Wi(t,e,i[r])},custom:function(t,e,i){const r=t.context,n=i.implementation;if("offscreen"===t.renderPass){const e=n.prerender;e&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),e.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Ti.disabled);const e="3d"===n.renderingMode?new Si(t.context.gl.LEQUAL,Si.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Si.ReadOnly);r.setDepthMode(e),n.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}};class Yi{constructor(t,e){this.context=new wi(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=$.maxUnderzooming+$.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kt,this.gpuTimers={}}resize(t,e,i){if(this.width=t*i,this.height=e*i,this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style._order)this.style._layers[t].resize()}setup(){const e=this.context,i=new t.PosArray;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,re.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,re.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const n=new t.RasterBoundsArray;n.emplaceBack(0,0,0,0),n.emplaceBack(t.EXTENT,0,t.EXTENT,0),n.emplaceBack(0,t.EXTENT,0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,k.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,re.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.LineStripIndexArray;s.emplaceBack(0),s.emplaceBack(1),s.emplaceBack(3),s.emplaceBack(2),s.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(s);const a=new t.TriangleIndexArray;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a),this.emptyTexture=new p(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const l=this.context.gl;this.stencilClearMode=new Ti({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,Si.disabled,this.stencilClearMode,bi.disabled,Ei.disabled,xe(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const i=this.context,r=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(bi.disabled),i.setDepthMode(Si.disabled);const n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of e){const e=this._tileClippingMaskIDs[t.key]=this.nextStencilID++;n.draw(i,r.TRIANGLES,Si.disabled,new Ti({func:r.ALWAYS,mask:0},e,255,r.KEEP,r.KEEP,r.REPLACE),bi.disabled,Ei.disabled,xe(t.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new Ti({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new Ti({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,i=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=i[i.length-1].overscaledZ,n=i[0].overscaledZ-r+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const t={};for(let i=0;i<n;i++)t[i+r]=new Ti({func:e.GEQUAL,mask:255},i+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=n,[t,i]}return[{[r]:Ti.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new bi([e.CONSTANT_COLOR,e.ONE],new t.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?bi.unblended:bi.alphaBlended}depthModeForSublayer(t,e,i){if(!this.opaquePassEnabledForLayer())return Si.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Si(i||this.context.gl.LEQUAL,e,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style._order,n=this.style.sourceCaches;for(const t in n){const e=n[t];e.used&&e.prepare(this.context)}const o={},s={},a={};for(const t in n){const e=n[t];o[t]=e.getVisibleCoordinates(),s[t]=o[t].slice().reverse(),a[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}this.renderPass="offscreen";for(const t of r){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const i=s[e.source];("custom"===e.type||i.length)&&this.renderLayer(this,n[e.source],e,i)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],e=n[t.source],i=o[t.source];this._renderTileClippingMasks(t,i),this.renderLayer(this,e,t,i)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],e=n[t.source],i=("symbol"===t.type?a:s)[t.source];this._renderTileClippingMasks(t,o[t.source]),this.renderLayer(this,e,t,i)}if(this.options.showTileBoundaries){let t,e;Object.values(this.style._layers).forEach((i=>{i.source&&!i.isHidden(this.transform.zoom)&&(i.source!==(e&&e.id)&&(e=this.style.sourceCaches[i.source]),(!t||t.getSource().maxzoom<e.getSource().maxzoom)&&(t=e))})),t&&Hi.debug(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Zi(t,t.transform.height-(e.top||0),3,Vi),Zi(t,e.bottom||0,3,Ni),ji(t,e.left||0,3,$i),ji(t,t.transform.width-(e.right||0),3,qi);const i=t.transform.centerPoint;!function(t,e,i,r){Xi(t,e-1,i-10,2,20,r),Xi(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,Gi)}(this),this.context.setDefault()}renderLayer(t,e,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||r.length)&&(this.id=i.id,this.gpuTimingStart(i),Hi[i.type](t,e,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const i in t){const r=t[i],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),e[i]=o}return e}translatePosMatrix(e,i,r,n,o){if(!r[0]&&!r[1])return e;const s=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(s){const t=Math.sin(s),e=Math.cos(s);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const a=[o?r[0]:Tt(i,r[0],this.transform.zoom),o?r[1]:Tt(i,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,a),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}useProgram(t,e){this.cache=this.cache||{};const i=`${t}${e?e.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[i]||(this.cache[i]=new le(this.context,t,ne[t],e,Be[t],this._showOverdrawInspector)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new p(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Ki{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,i,r){const n=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((i=>t.transformMat4([],i,e))).map((e=>t.scale$1([],e,1/e[3]/i*n))),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,i){var r=e[0],n=e[1],o=e[2],s=i[0],a=i[1],l=i[2];return t[0]=n*l-o*a,t[1]=o*s-r*l,t[2]=r*a-n*s,t}([],u([],o[t[0]],o[t[1]]),u([],o[t[2]],o[t[1]]))),i=-((r=e)[0]*(n=o[t[1]])[0]+r[1]*n[1]+r[2]*n[2]);var r,n;return e.concat(i)}));return new Ki(o,s)}}class Ji{constructor(t,e){this.min=t,this.max=e,this.center=function(t,e,i){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}([],this.min,this.max))}quadrant(t){const e=[t%2==0,t<2],i=l(this.min),r=l(this.max);for(let t=0;t<e.length;t++)i[t]=e[t]?this.min[t]:this.center[t],r[t]=e[t]?this.center[t]:this.max[t];return r[2]=this.max[2],new Ji(i,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(e){const i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let r=!0;for(let n=0;n<e.planes.length;n++){const o=e.planes[n];let s=0;for(let e=0;e<i.length;e++)t.dot(o,i[e])>=0&&s++;if(0===s)return 0;s!==i.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let i=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let n=0;n<e.points.length;n++){const o=e.points[n][t]-this.min[t];i=Math.min(i,o),r=Math.max(r,o)}if(r<0||i>this.max[t]-this.min[t])return 0}return 1}}class Qi{constructor(t=0,e=0,i=0,r=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r}interpolate(e,i,r){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,r)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,r)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,r)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,r)),this}getCenter(e,i){const r=t.clamp((this.left+e-this.right)/2,0,e),n=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.pointGeometry(r,n)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Qi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class tr{constructor(e,i,r,n,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Qi,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new tr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(t,e,i){var r=e[0],n=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);t[0]=r*l+o*a,t[1]=n*l+s*a,t[2]=r*-a+o*l,t[3]=n*-a+s*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const r=this.pointCoordinate(new t.pointGeometry(0,0)),n=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),s=this.pointCoordinate(new t.pointGeometry(0,this.height)),a=Math.floor(Math.min(r.x,n.x,o.x,s.x)),l=Math.floor(Math.max(r.x,n.x,o.x,s.x)),c=1;for(let r=a-c;r<=l+c;r++)0!==r&&i.push(new t.UnwrappedTileID(r,e))}return i}coveringTiles(e){let i=this.coveringZoomLevel(e);const r=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const n=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,i),s=[o*n.x,o*n.y,0],a=Ki.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i);let l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=i);const c=t=>({aabb:new Ji([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),u=[],p=[],d=i,f=e.reparseOverscaled?r:i;if(this._renderWorldCopies)for(let t=1;t<=3;t++)u.push(c(-t)),u.push(c(t));for(u.push(c(0));u.length>0;){const e=u.pop(),i=e.x,r=e.y;let n=e.fullyVisible;if(!n){const t=e.aabb.intersects(a);if(0===t)continue;n=2===t}const o=e.aabb.distanceX(s),c=e.aabb.distanceY(s),m=Math.max(Math.abs(o),Math.abs(c)),g=3+(1<<d-e.zoom)-2;if(e.zoom===d||m>g&&e.zoom>=l)p.push({tileID:new t.OverscaledTileID(e.zoom===d?f:e.zoom,e.wrap,e.zoom,i,r),distanceSq:h([s[0]-.5-i,s[1]-.5-r])});else for(let t=0;t<4;t++){const o=(i<<1)+t%2,s=(r<<1)+(t>>1);u.push({aabb:e.aabb.quadrant(t),zoom:e.zoom+1,x:o,y:s,wrap:e.wrap,fullyVisible:n})}}return p.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,i){const r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),s=new t.MercatorCoordinate(o.x-(r.x-n.x),o.y-(r.y-n.y));this.center=this.coordinateLocation(s),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointCoordinate(e){const i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);const n=i[3],o=r[3],s=i[1]/n,a=r[1]/o,l=i[2]/n,c=r[2]/o,u=l===c?0:(0-l)/(c-l);return new t.MercatorCoordinate(t.number(i[0]/n,r[0]/o,u)/this.worldSize,t.number(s,a,u)/this.worldSize)}coordinatePoint(e){const i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.pointGeometry(i[0]/i[3],i[1]/i[3])}getBounds(){return(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(0,0))).extend(this.pointLocation(new t.pointGeometry(this.width,0))).extend(this.pointLocation(new t.pointGeometry(this.width,this.height))).extend(this.pointLocation(new t.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,i=!1){const r=e.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];const o=e.canonical,s=this.worldSize/this.zoomScale(o.z),a=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[a*s,o.y*s,0]),t.scale(l,l,[s/t.EXTENT,s/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),n[r]=new Float32Array(l),n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,i,r,n,o=-90,s=90,a=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const i=this.latRange;o=t.mercatorYfromLat(i[1])*this.worldSize,s=t.mercatorYfromLat(i[0])*this.worldSize,e=s-o<c.y?c.y/(s-o):0}if(this.lngRange){const e=this.lngRange;a=t.mercatorXfromLng(e[0])*this.worldSize,l=t.mercatorXfromLng(e[1])*this.worldSize,i=l-a<c.x?c.x/(l-a):0}const h=this.point,p=Math.max(i||0,e||0);if(p)return this.center=this.unproject(new t.pointGeometry(i?(l+a)/2:h.x,e?(s+o)/2:h.y)),this.zoom+=this.scaleZoom(p),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const t=h.y,e=c.y/2;t-e<o&&(n=o+e),t+e>s&&(n=s-e)}if(this.lngRange){const t=h.x,e=c.x/2;t-e<a&&(r=a+e),t+e>l&&(r=l-e)}void 0===r&&void 0===n||(this.center=this.unproject(new t.pointGeometry(void 0!==r?r:h.x,void 0!==n?n:h.y))),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const i=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),n=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-i-r,.01,Math.PI-.01)),o=this.point,s=o.x,a=o.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),c=this.height/50;let u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,c,l),u[8]=2*-e.x/this.width,u[9]=2*e.y/this.height,t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-s,-a,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=u,this.invProjMatrix=t.invert([],this.projMatrix);const h=this.width%2/2,p=this.height%2/2,d=Math.cos(this.angle),f=Math.sin(this.angle),m=s-Math.round(s)+d*h+f*p,g=a-Math.round(a)+d*p+f*h,y=new Float64Array(u);if(t.translate(y,y,[m>.5?m-1:m,g>.5?g-1:g,0]),this.alignedProjMatrix=y,u=t.create(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=t.create(),t.scale(u,u,[1,-1,1]),t.translate(u,u,[-1,-1,0]),t.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),u=t.invert(new Float64Array(16),this.pixelMatrix),!u)throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.pointGeometry(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}getCameraQueryGeometry(e){const i=this.getCameraPoint();if(1===e.length)return[e[0],i];{let r=i.x,n=i.y,o=i.x,s=i.y;for(const t of e)r=Math.min(r,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),s=Math.max(s,t.y);return[new t.pointGeometry(r,n),new t.pointGeometry(o,n),new t.pointGeometry(o,s),new t.pointGeometry(r,s),new t.pointGeometry(r,n)]}}}class er{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){let i=!1,r=null;const n=()=>{r=null,i&&(t(),r=setTimeout(n,300),i=!1)};return()=>(i=!0,r||n(),r)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),o=Math.round(e.lng*n)/n,s=Math.round(e.lat*n)/n,a=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=t?`/${o}/${s}/${i}`:`${i}/${s}/${o}`,(a||l)&&(c+="/"+Math.round(10*a)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const t=this._hashName;let e=!1;const i=window.location.hash.slice(1).split("&").map((i=>{const r=i.split("=")[0];return r===t?(e=!0,`${r}=${c}`):i})).filter((t=>t));return e||i.push(`${t}=${c}`),`#${i.join("&")}`}return`#${c}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}}}const ir={linearity:.3,easing:t.bezier(0,0,.3,1)},rr=t.extend({deceleration:2500,maxSpeed:1400},ir),nr=t.extend({deceleration:20,maxSpeed:1400},ir),or=t.extend({deceleration:1e3,maxSpeed:360},ir),sr=t.extend({deceleration:1e3,maxSpeed:90},ir);class ar{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=t.exported.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)i.zoom+=t.zoomDelta||0,i.bearing+=t.bearingDelta||0,i.pitch+=t.pitchDelta||0,t.panDelta&&i.pan._add(t.panDelta),t.around&&(i.around=t.around),t.pinchAround&&(i.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(i.pan.mag()){const o=cr(i.pan.mag(),r,t.extend({},rr,e||{}));n.offset=i.pan.mult(o.amount/i.pan.mag()),n.center=this._map.transform.center,lr(n,o)}if(i.zoom){const t=cr(i.zoom,r,nr);n.zoom=this._map.transform.zoom+t.amount,lr(n,t)}if(i.bearing){const e=cr(i.bearing,r,or);n.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),lr(n,e)}if(i.pitch){const t=cr(i.pitch,r,sr);n.pitch=this._map.transform.pitch+t.amount,lr(n,t)}if(n.zoom||n.bearing){const t=void 0===i.pinchAround?i.around:i.pinchAround;n.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(n,{noMoveStart:!0})}}function lr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function cr(e,i,r){const{maxSpeed:n,linearity:o,deceleration:s}=r,a=t.clamp(e*o/(i/1e3),-n,n),l=Math.abs(a)/(s*o);return{easing:r.easing,duration:1e3*l,amount:a*(l/2)}}class ur extends t.Event{constructor(e,i,r,n={}){const s=o.mousePos(i.getCanvasContainer(),r),a=i.unproject(s);super(e,t.extend({point:s,lngLat:a,originalEvent:r},n)),this._defaultPrevented=!1,this.target=i}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class hr extends t.Event{constructor(e,i,r){const n="touchend"===e?r.changedTouches:r.touches,s=o.touchPos(i.getCanvasContainer(),n),a=s.map((t=>i.unproject(t))),l=s.reduce(((t,e,i,r)=>t.add(e.div(r.length))),new t.pointGeometry(0,0));super(e,{points:s,point:l,lngLats:a,lngLat:i.unproject(l),originalEvent:r}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class pr extends t.Event{constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class dr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new pr(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new ur(t.type,this._map,t))}mouseup(t){this._map.fire(new ur(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new ur(t.type,this._map,t))}dblclick(t){return this._firePreventable(new ur(t.type,this._map,t))}mouseover(t){this._map.fire(new ur(t.type,this._map,t))}mouseout(t){this._map.fire(new ur(t.type,this._map,t))}touchstart(t){return this._firePreventable(new hr(t.type,this._map,t))}touchmove(t){this._map.fire(new hr(t.type,this._map,t))}touchend(t){this._map.fire(new hr(t.type,this._map,t))}touchcancel(t){this._map.fire(new hr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new ur(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ur("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new ur(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const i=e;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=i,this._box||(this._box=o.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const n=Math.min(r.x,i.x),s=Math.max(r.x,i.x),a=Math.min(r.y,i.y),l=Math.max(r.y,i.y);o.setTransform(this._box,`translate(${n}px,${a}px)`),this._box.style.width=s-n+"px",this._box.style.height=l-a+"px"}mouseupWindow(e,i){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,n=i;if(this.reset(),o.suppressClick(),r.x!==n.x||r.y!==n.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,n,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))}}function gr(t,e){const i={};for(let r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}class yr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const i=new t.pointGeometry(0,0);for(const t of e)i._add(t);return i.div(e.length)}(i),this.touches=gr(r,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;const r=gr(i,e);for(const t in this.touches){const e=this.touches[t],i=r[t];(!i||i.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class _r{constructor(t){this.singleTap=new yr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){const r=this.singleTap.touchend(t,e,i);if(r){const e=t.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(r)<30;if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class xr{constructor(){this._zoomIn=new _r({numTouches:1,numTaps:2}),this._zoomOut=new _r({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){const r=this._zoomIn.touchend(t,e,i),n=this._zoomOut.touchend(t,e,i);return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):n?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(n)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vr={0:1,2:2};class br{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const i=o.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}mousemoveWindow(t,e){const i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){const i=vr[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)}mouseupWindow(t){this._lastPoint&&o.mouseButton(t)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wr extends br{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Sr extends br{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(t){t.preventDefault()}}class Ir extends br{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(t){t.preventDefault()}}class Tr{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,r){r.length>0&&(this._active=!0);const n=gr(r,i),o=new t.pointGeometry(0,0),s=new t.pointGeometry(0,0);let a=0;for(const t in n){const e=n[t],i=this._touches[t];i&&(o._add(e),s._add(e.sub(i)),a++,n[t]=e)}if(this._touches=n,a<this._minTouches||!s.mag())return;const l=s.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(a),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Er{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,i){return{}}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();const[r,n]=this._firstTwoTouches,o=Ar(i,e,r),s=Ar(i,e,n);if(!o||!s)return;const a=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],a,t)}touchend(t,e,i){if(!this._firstTwoTouches)return;const[r,n]=this._firstTwoTouches,s=Ar(i,e,r),a=Ar(i,e,n);s&&a||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ar(t,e,i){for(let r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function Mr(t,e){return Math.log(t/e)/Math.LN2}class Pr extends Er{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Mr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mr(this._distance,i),pinchAround:e}}}function zr(t,e){return 180*t.angleWith(e)/Math.PI}class kr extends Er{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zr(this._vector,i),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,i=zr(t,this._startVector);return Math.abs(i)<e}}function Cr(t){return Math.abs(t.y)>Math.abs(t.x)}class Lr extends Er{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,Cr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){const r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,n=e.mag()>=2;if(!r&&!n)return;if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Cr(t)&&Cr(e)&&o}}const Dr={panStep:100,bearingStep:15,pitchStep:10};class Br{constructor(){const t=Dr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,r=0,n=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),n=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),n=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:s=>{const a=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Fr,zoom:e?Math.round(a)+e*(t.shiftKey?2:1):a,bearing:s.getBearing()+i*this._bearingStep,pitch:s.getPitch()+r*this._pitchStep,offset:[-n*this._panStep,-o*this._panStep],center:s.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fr(t){return t*(2-t)}const Rr=4.000244140625;class Or{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let i=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%Rr==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=o.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Rr?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*i))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:e.zoom,r=this._startZoom,n=this._easing;let o,s=!1;if("wheel"===this._type&&r&&n){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),a=n(e);o=t.number(r,i,a),e<1?this._frameId||(this._frameId=!0):s=!0}else o=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,n=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(n*n+1e-4)*.01,s=Math.sqrt(.0729-o*o);i=t.bezier(o,s,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:i},i}reset(){this._active=!1}}class Ur{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vr{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nr{constructor(){this._tap=new _r({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $r{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qr{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gr{constructor(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Zr=t=>t.zoom||t.drag||t.pitch||t.rotate;class jr extends t.Event{}function Xr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Wr{constructor(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ar(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,e,i]of this._listeners)o.addEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[t,e,i]of this._listeners)o.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new dr(e,t));const r=e.boxZoom=new mr(e,t);this._add("boxZoom",r);const n=new xr,o=new Vr;e.doubleClickZoom=new Ur(o,n),this._add("tapZoom",n),this._add("clickZoom",o);const s=new Nr;this._add("tapDragZoom",s);const a=e.touchPitch=new Lr;this._add("touchPitch",a);const l=new Sr(t),c=new Ir(t);e.dragRotate=new qr(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new wr(t),h=new Tr(t);e.dragPan=new $r(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const p=new kr,d=new Pr;e.touchZoomRotate=new Gr(i,d,p,s),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);const f=e.scrollZoom=new Or(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new Br;this._add("keyboard",m),this._add("blockableMapEvent",new fr(e));for(const i of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[i]&&e[i].enable(t[i])}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Zr(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,i){for(const r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const i of t)this._el.contains(i.target)&&e.push(i);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},n={},s={},a=t.touches,l=a?this._getMapTouches(a):void 0,c=l?o.touchPos(this._el,l):o.mousePos(this._el,t);for(const{handlerName:o,handler:a,allowed:u}of this._handlers){if(!a.isEnabled())continue;let h;this._blockedByActive(s,u,o)?a.reset():a[e||t.type]&&(h=a[e||t.type](t,c,l),this.mergeHandlerResult(r,n,h,o,i),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||a.isActive())&&(s[o]=a)}const u={};for(const t in this._previousActiveHandlers)s[t]||(u[t]=i);this._previousActiveHandlers=s,(Object.keys(u).length||Xr(r))&&(this._changes.push([r,n,u]),this._triggerRenderFrame()),(Object.keys(s).length||Xr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,i,r,n,o){if(!r)return;t.extend(e,r);const s={handlerName:n,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(i.zoom=s),void 0!==r.panDelta&&(i.drag=s),void 0!==r.pitchDelta&&(i.pitch=s),void 0!==r.bearingDelta&&(i.rotate=s)}_applyChanges(){const e={},i={},r={};for(const[n,o,s]of this._changes)n.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(n.panDelta)),n.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(e.around=n.around),void 0!==n.pinchAround&&(e.pinchAround=n.pinchAround),n.noInertia&&(e.noInertia=n.noInertia),t.extend(i,o),t.extend(r,s);this._updateMapTransform(e,i,r),this._changes=[]}_updateMapTransform(t,e,i){const r=this._map,n=r.transform;if(!Xr(t))return this._fireEvents(e,i,!0);let{panDelta:o,zoomDelta:s,bearingDelta:a,pitchDelta:l,around:c,pinchAround:u}=t;void 0!==u&&(c=u),r._stop(!0),c=c||r.transform.centerPoint;const h=n.pointLocation(o?c.sub(o):c);a&&(n.bearing+=a),l&&(n.pitch+=l),s&&(n.zoom+=s),n.setLocationAtPoint(h,c),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)}_fireEvents(e,i,r){const n=Zr(this._eventsInProgress),o=Zr(e),s={};for(const t in e){const{originalEvent:i}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=i),this._eventsInProgress[t]=e[t]}!n&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in s)this._fireEvent(t,s[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:i}=e[t];this._fireEvent(t,i)}const a={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=i[e]||r,a[`${t}end`]=l)}for(const t in a)this._fireEvent(t,a[t]);const c=Zr(this._eventsInProgress);if(r&&(n||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(i(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new jr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Hr={extend:(e,...i)=>t.extend(e,...i),run(t){t()},logToElement(t,e=!1,i="log"){const r=window.document.getElementById(i);r&&(e&&(r.innerHTML=""),r.innerHTML+=`<br>${t}`)}};class Yr extends t.Evented{constructor(e,i){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,i,r){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),r)}panTo(e,i,r){return this.easeTo(t.extend({center:e},i),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,i,r){return this.easeTo(t.extend({zoom:e},i),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,i,r){return this.easeTo(t.extend({bearing:e},i),r)}resetNorth(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,i){e=t.LngLatBounds.convert(e);const r=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,i)}_cameraForBoxAndBearing(e,i,r,n){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){const t=n.padding;n.padding={top:t,bottom:t,right:t,left:t}}n.padding=t.extend(o,n.padding);const s=this.transform,a=s.padding,l=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(i)),u=l.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),p=new t.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),d=new t.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=p.sub(d),m=(s.width-(a.left+a.right+n.padding.left+n.padding.right))/f.x,g=(s.height-(a.top+a.bottom+n.padding.top+n.padding.bottom))/f.y;if(g<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(s.scaleZoom(s.scale*Math.min(m,g)),n.maxZoom),_=t.pointGeometry.convert(n.offset),x=new t.pointGeometry((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(r*Math.PI/180),v=_.add(x).mult(s.scale/s.zoomScale(y));return{center:s.unproject(l.add(c).div(2).sub(v)),zoom:y,bearing:r}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}fitScreenCoordinates(e,i,r,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(i)),r,n),n,o)}_fitInternal(e,i,r){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this}jumpTo(e,i){this.stop();const r=this.transform;let n=!1,o=!1,s=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(n=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(s=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),n&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),o&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),s&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))}easeTo(e,i){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const r=this.transform,n=this.getZoom(),o=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l="zoom"in e?+e.zoom:n,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:r.padding,p=t.pointGeometry.convert(e.offset);let d=r.centerPoint.add(p);const f=r.pointLocation(d),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);const g=r.project(f),y=r.project(m).sub(g),_=r.zoomScale(l-n);let x,v;e.around&&(x=t.LngLat.convert(e.around),v=r.locationPoint(x));const b={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==n,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==s,this._padding=!r.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,b),this._ease((e=>{if(this._zooming&&(r.zoom=t.number(n,l,e)),this._rotating&&(r.bearing=t.number(o,c,e)),this._pitching&&(r.pitch=t.number(s,u,e)),this._padding&&(r.interpolatePadding(a,h,e),d=r.centerPoint.add(p)),x)r.setLocationAtPoint(x,v);else{const t=r.zoomScale(r.zoom-n),i=l>n?Math.min(2,_):Math.max(.5,_),o=Math.pow(i,1-e),s=r.unproject(g.add(y.mult(e*o)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?s.wrap():s,d)}this._fireMoveEvents(i)}),(t=>{this._afterEase(i,t)}),e),this}_prepareEase(e,i,r={}){this._moving=!0,i||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId;const r=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,i){if(!e.essential&&t.exported.prefersReducedMotion){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,n=this.getZoom(),o=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):n,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:r.padding,p=r.zoomScale(l-n),d=t.pointGeometry.convert(e.offset);let f=r.centerPoint.add(d);const m=r.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=r.project(m),_=r.project(g).sub(y);let x=e.curve;const v=Math.max(r.width,r.height),b=v/p,w=_.mag();if("minZoom"in e){const i=t.clamp(Math.min(e.minZoom,n,l),r.minZoom,r.maxZoom),o=v/r.zoomScale(i-n);x=Math.sqrt(o/w*2)}const S=x*x;function I(t){const e=(b*b-v*v+(t?-1:1)*S*S*w*w)/(2*(t?b:v)*S*w);return Math.log(Math.sqrt(e*e+1)-e)}function T(t){return(Math.exp(t)-Math.exp(-t))/2}function E(t){return(Math.exp(t)+Math.exp(-t))/2}const A=I(0);let M=function(t){return E(A)/E(A+x*t)},P=function(t){return v*((E(A)*(T(e=A+x*t)/E(e))-T(A))/S)/w;var e},z=(I(1)-A)/x;if(Math.abs(w)<1e-6||!isFinite(z)){if(Math.abs(v-b)<1e-6)return this.easeTo(e,i);const t=b<v?-1:1;z=Math.abs(Math.log(b/v))/x,P=function(){return 0},M=function(e){return Math.exp(t*x*e)}}return e.duration="duration"in e?+e.duration:1e3*z/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==s,this._padding=!r.isPaddingEqual(h),this._prepareEase(i,!1),this._ease((e=>{const p=e*z,m=1/M(p);r.zoom=1===e?l:n+r.scaleZoom(m),this._rotating&&(r.bearing=t.number(o,c,e)),this._pitching&&(r.pitch=t.number(s,u,e)),this._padding&&(r.interpolatePadding(a,h,e),f=r.centerPoint.add(d));const x=1===e?g:r.unproject(y.add(_.mult(P(p))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,f),this._fireMoveEvents(i)}),(()=>this._afterEase(i)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,i,r){!1===r.animate||0===r.duration?(e(1),i()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,i){e=t.wrap(e,-180,180);const r=Math.abs(e-i);return Math.abs(e-360-i)<r&&(e-=360),Math.abs(e+360-i)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}}class Kr{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const i=this._map._getUIString(`AttributionControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const i in e){const r=e[i];if(r.used){const e=r.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,i)=>{for(let r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}));const i=t.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Jr{constructor(e={}){this.options=e,t.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl mapboxgl-ctrl");const e=o.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Qr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(const e of i)if(e.id===t)return void(e.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const i of e)if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const tn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},en={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},rn={showCompass:!0,showZoom:!0,visualizePitch:!1};class nn{constructor(e,i,r=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new Sr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Ir({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(i,"mousedown",this.mousedown),o.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(i,"touchmove",this.touchmove),o.addEventListener(i,"touchend",this.touchend),o.addEventListener(i,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),o.disableDrag()}move(t,e){const i=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&i.setPitch(i.getPitch()+r.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function on(e,i,r){if(e=new t.LngLat(e.lng,e.lat),i){const n=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),s=r.locationPoint(e).distSqr(i);r.locationPoint(n).distSqr(i)<s?e=n:r.locationPoint(o).distSqr(i)<s&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const sn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function an(t,e,i){const r=t.classList;for(const t in sn)r.remove(`maplibregl-${i}-anchor-${t}`,`mapboxgl-${i}-anchor-${t}`);r.add(`maplibregl-${i}-anchor-${e}`,`mapboxgl-${i}-anchor-${e}`)}class ln extends t.Evented{constructor(e,i){if(super(),(e instanceof HTMLElement||i)&&(e=t.extend({element:e},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const i=o.createNS("http://www.w3.org/2000/svg","svg"),r=41,n=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${r}px`),i.setAttributeNS(null,"width",`${n}px`),i.setAttributeNS(null,"viewBox",`0 0 ${n} ${r}`);const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=o.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const p=o.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");const d=o.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(d);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),a.appendChild(l),a.appendChild(u),a.appendChild(p),a.appendChild(f),a.appendChild(m),i.appendChild(a),i.setAttributeNS(null,"height",r*this._scale+"px"),i.setAttributeNS(null,"width",n*this._scale+"px"),this._element.appendChild(i),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),an(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,i=13.5,r=Math.sqrt(Math.pow(i,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-i+r)],"bottom-right":[-r,-1*(e-i+r)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=on(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${sn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${i} ${e}`)}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const cn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let un,hn=0,pn=!1;const dn={maxWidth:100,unit:"metric"};function fn(t,e,i){const r=i&&i.maxWidth||100,n=t._container.clientHeight/2,o=t.unproject([0,n]),s=t.unproject([r,n]),a=o.distanceTo(s);if(i&&"imperial"===i.unit){const i=3.2808*a;i>5280?mn(e,r,i/5280,t._getUIString("ScaleControl.Miles")):mn(e,r,i,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?mn(e,r,a/1852,t._getUIString("ScaleControl.NauticalMiles")):a>=1e3?mn(e,r,a/1e3,t._getUIString("ScaleControl.Kilometers")):mn(e,r,a,t._getUIString("ScaleControl.Meters"))}function mn(t,e,i,r){const n=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i),e*i}(i);t.style.width=e*(n/i)+"px",t.innerHTML=`${n}&nbsp;${r}`}const gn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},yn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function _n(e){if(e){if("number"==typeof e){const i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(i,i),"top-right":new t.pointGeometry(-i,i),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(i,-i),"bottom-right":new t.pointGeometry(-i,-i),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const i=t.pointGeometry.convert(e);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return _n(new t.pointGeometry(0,0))}const xn={supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Yr{constructor(e){var i;if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},en,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new tr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Qr,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},tn,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!==(i=e.pixelRatio)&&void 0!==i?i:devicePixelRatio,this._requestManager=new s(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Wr(this,e),this._hash=e.hash&&new er("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Kr({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new Jr,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.Event("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}resize(e){const i=this._containerDimensions(),r=i[0],n=i[1];this._resizeCanvas(r,n,this.getPixelRatio()),this.transform.resize(r,n),this.painter.resize(r,n,this.getPixelRatio());const o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){const[e,i]=this._containerDimensions();this._pixelRatio=t,this._resizeCanvas(e,i,t),this.painter.resize(e,i,t)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let r=!1;const n=n=>{const o=this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[];o.length?r||(r=!0,i.call(this,new ur(t,this,n.originalEvent,{features:o}))):r=!1};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:()=>{r=!1}}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const n=n=>{(this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,i.call(this,new ur(t,this,n.originalEvent)))},o=e=>{r&&(r=!1,i.call(this,new ur(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:o}}}{const r=t=>{const r=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:r}}}}on(t,e,i){if(void 0===i)return super.on(t,e);const r=this._createDelegatedListener(t,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const t in r.delegates)this.on(t,r.delegates[t]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);const r=this._createDelegatedListener(t,e,i);for(const t in r.delegates)this.once(t,r.delegates[t]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(r=>{const n=this._delegatedListeners[t];for(let t=0;t<n.length;t++){const r=n[t];if(r.layer===e&&r.listener===i){for(const t in r.delegates)this.off(t,r.delegates[t]);return n.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,i){if(!this.style)return[];let r;if(void 0!==i||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.pointGeometry||"number"==typeof e[0])r=[t.pointGeometry.convert(e)];else{const i=t.pointGeometry.convert(e[0]),n=t.pointGeometry.convert(e[1]);r=[i,new t.pointGeometry(n.x,i.y),n,new t.pointGeometry(i.x,n.y),i]}return this.style.queryRenderedFeatures(r,i,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ie(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ie(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,i){if("string"==typeof e){const r=this._requestManager.transformRequest(e,t.ResourceType.Style);t.getJSON(r,((e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,i)}))}else"object"==typeof e&&this._updateDiff(e,i)}_updateDiff(e,i){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const i=t[e]._tiles;for(const t in i){const e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,i,{pixelRatio:r=1,sdf:n=!1,stretchX:o,stretchY:s,content:a}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||t.isImageBitmap(i)){const{width:l,height:c,data:u}=t.exported.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:s,content:a,sdf:n,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=i,h=i;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:o,stretchY:s,content:a,sdf:n,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,i){const r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const n=i instanceof HTMLImageElement||t.isImageBitmap(i)?t.exported.getImageData(i):i,{width:o,height:s,data:a}=n;if(void 0===o||void 0===s)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||s!==r.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(i instanceof HTMLImageElement||t.isImageBitmap(i));r.data.replace(a,l),this.style.updateImage(e,r)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e,i={}){return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i,r={}){return this.style.setPaintProperty(t,e,i,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i,r={}){return this.style.setLayoutProperty(t,e,i,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map","mapboxgl-map");const e=this._canvasContainer=o.create("div","maplibregl-canvas-container mapboxgl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const i=this._containerDimensions();this._resizeCanvas(i[0],i[1],this.getPixelRatio());const r=this._controlContainer=o.create("div","maplibregl-control-container mapboxgl-control-container",t),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{n[t]=o.create("div",`maplibregl-ctrl-${t} mapboxgl-ctrl-${t}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,e,i){this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(this.painter=new Yi(r,this.transform),t.exported$1.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let i,r=0;const n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,i),r=t.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=t.exported.now();this.style.zoomHistory.update(e,i);const r=new t.EvaluationParameters(e,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),n=r.crossFadingFactor();1===n&&n===this._crossFadingFactor||(o=!0,this._crossFadingFactor=n),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;n.endQueryEXT(n.TIME_ELAPSED_EXT,i),setTimeout((()=>{const r=n.getQueryObjectEXT(i,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(i),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:i}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty;return s||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),t.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{t.PerformanceUtils.frame(e),this._frame=null,this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,i){t.setCacheLimits(e,i)}},NavigationControl:class{constructor(e){this.options=t.extend({},rn,e),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nn(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const i=o.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i}_setButtonTitle(t,e){const i=this._map._getUIString(`NavigationControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},cn,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var e;return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==un?e(un):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((t=>{un="denied"!==t.state,e(un)})):(un=!!window.navigator.geolocation,e(un)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,hn=0,pn=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,n=this._map.getBearing(),o=t.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),o,{geolocateSource:!0})}_updateMarker(e){if(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),r=e.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&pn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ln(this._dotElement),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ln({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":hn--,pn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),hn++,hn>1?(t={maximumAge:6e5,timeout:0},pn=!0):(t=this.options.positionOptions,pn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Kr,LogoControl:Jr,ScaleControl:class{constructor(e){this.options=t.extend({},dn,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){fn(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,fn(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(gn),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),i=document.createElement("body");let r;for(i.innerHTML=t;r=i.firstChild,r;)e.appendChild(r);return this.setDOMContent(e)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=o.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=on(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let i=this.options.anchor;const r=_n(this.options.offset);if(!i){const t=this._container.offsetWidth,n=this._container.offsetHeight;let o;o=e.y+r.bottom.y<n?["top"]:e.y>this._map.transform.height-n?["bottom"]:[],e.x<t/2?o.push("left"):e.x>this._map.transform.width-t/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}const n=e.add(r[i]).round();o.setTransform(this._container,`${sn[i]} translate(${n.x}px,${n.y}px)`),an(this._container,i,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(yn);t&&t.focus()}_onClose(){this.remove()}},Marker:ln,Style:ie,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,AJAXError:t.AJAXError,config:t.config,CanvasSource:D,GeoJSONSource:z,ImageSource:C,RasterDEMTileSource:P,RasterTileSource:A,VectorTileSource:E,VideoSource:L,prewarm:function(){H().acquire(Z)},clearPrewarmedResources:function(){const t=W;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Z),W=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return j.workerCount},set workerCount(t){j.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",addProtocol(e,i){t.config.REGISTERED_PROTOCOLS[e]=i},removeProtocol(e){delete t.config.REGISTERED_PROTOCOLS[e]}};return Hr.extend(xn,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics}),xn})),i}()}));function b(t,e,i){void 0===i&&(i={});var r={type:"Feature"};return(0===i.id||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=e||{},r.geometry=t,r}function w(t,e,i){void 0===i&&(i={});for(var r=0,n=t;r<n.length;r++){var o=n[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return b({type:"Polygon",coordinates:t},e,i)}function S(t,e,i){return void 0===i&&(i={}),b({type:"MultiPolygon",coordinates:t},e,i)}function I(t,e,i){if(null!==t)for(var r,n,o,s,a,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,m="Feature"===d,g=f?t.features.length:1,y=0;y<g;y++){a=(u=!!(c=f?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<a;_++){var x=0,v=0;if(null!==(s=u?c.geometries[_]:c)){l=s.coordinates;var b=s.type;switch(h=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,v))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,v))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(n=0;n<l[r].length-h;n++){if(!1===e(l[r][n],p,y,x,v))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&v++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(v=0,n=0;n<l[r].length;n++){for(o=0;o<l[r][n].length-h;o++){if(!1===e(l[r][n][o],p,y,x,v))return!1;p++}v++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===I(s.geometries[r],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(t,e){var i=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return function(t,e){var i,r,n,o,s,a,l,c,u,h,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,m=d?t.features.length:1;for(i=0;i<m;i++){for(a=d?t.features[i].geometry:f?t.geometry:t,c=d?t.features[i].properties:f?t.properties:{},u=d?t.features[i].bbox:f?t.bbox:void 0,h=d?t.features[i].id:f?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<s;n++)if(null!==(o=l?a.geometries[n]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,u,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,u,h))return!1;p++}}(t,(function(t,e,n){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var l=0;l<r;l++)a=[[]],s=t,l>0&&(s=w(o).geometry),E(s,a),o=a.slice(0);i.push(w(o,n));break;case"MultiPolygon":o=[[[]]];for(var c=0;c<r;c++)a=[[[]]],s=t,c>0&&(s=S(o).geometry),A(s,a),o=a.slice(0);i.push(S(o,n));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),function(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}(i)}function E(t,e){var i=0,r=0;I(t,(function(n,o,s,a,l){l>i&&(i=l,r=o,e.push([]));var c=o-r,u=t.coordinates[l][c+1],h=n[0],p=n[1],d=u[0],f=u[1];e[l].push([.75*h+.25*d,.75*p+.25*f]),e[l].push([.25*h+.75*d,.25*p+.75*f])}),!0),e.forEach((function(t){t.push(t[0])}))}function A(t,e){var i=0,r=0,n=0;I(t,(function(o,s,a,l,c){l>n&&(n=l,r=s,e.push([[]])),c>i&&(i=c,r=s,e[l].push([]));var u=s-r,h=t.coordinates[l][c][u+1],p=o[0],d=o[1],f=h[0],m=h[1];e[l][c].push([.75*p+.25*f,.75*d+.25*m]),e[l][c].push([.25*p+.75*f,.25*d+.75*m])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}var M={type:"FeatureCollection",features:[{type:"Feature",properties:{nearestId:"4f3268798d50870c477111a424f7f7f7",originalId:"4f3268798d50870c477111a424f7f7f7",id:"8c0c89bedc84afd292082363efb6aac5",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[36.42009,50.297920000000005]}},oldPointsMap:[[36.12156,50.43757],[36.15079,50.42648],[36.170425722510345,50.40905560744468],[36.17739,50.40276],[36.18333370240064,50.35067422231379],[36.17491,50.34315],[36.16343,50.33002],[36.1569,50.32412],[36.14889,50.31622],[36.13064,50.29165],[36.15354957151125,50.269513871287636],[36.15727756357619,50.26781036347666],[36.17361342027051,50.26160595526702],[36.20583,50.24937],[36.24211,50.24209],[36.25343,50.23616],[36.28946,50.2339],[36.28331,50.21008],[36.28926,50.20402],[36.293383779211155,50.19954596390071],[36.332939198119384,50.184891517403415],[36.34755782306465,50.18513464285795],[36.35729664384899,50.182197809794715],[36.37067479100177,50.178163503614],[36.39244,50.1716],[36.42779,50.16906],[36.4515,50.16944],[36.4803,50.1582],[36.50479,50.16316],[36.5199,50.17554],[36.53104,50.18433],[36.55589,50.18718],[36.5961,50.18136],[36.62444,50.19108],[36.6682,50.17051],[36.70951,50.15775],[36.71746,50.1762],[36.71841,50.19024],[36.71862,50.19769],[36.67447,50.21292],[36.66386,50.22154],[36.64865,50.21768],[36.64271,50.22163],[36.62101,50.22607],[36.6111,50.22442],[36.59128,50.23187],[36.55998,50.25087],[36.57375,50.2567],[36.57896,50.26414],[36.57623,50.2755],[36.59276,50.27767],[36.58512,50.28533],[36.56348,50.2842],[36.55658,50.28129],[36.53985,50.28337],[36.52424,50.28652],[36.52404,50.2938],[36.49919,50.30009],[36.49326,50.3105],[36.48391,50.31214],[36.4641,50.31306],[36.43928,50.31149],[36.43289,50.33002],[36.42495,50.32779],[36.41515,50.31752],[36.40382,50.30871],[36.3743,50.30021],[36.37795,50.29392],[36.36579,50.28735],[36.29833,50.29269],[36.29763,50.29918],[36.28629,50.29881],[36.28511,50.30611],[36.27506,50.31612],[36.28071,50.32251],[36.27432,50.32573],[36.28253,50.33614],[36.27456,50.3425],[36.25855,50.35431],[36.24268,50.35794],[36.23154,50.36597],[36.227630574436624,50.37004672963295],[36.220367115308626,50.37762102887075],[36.20966377592717,50.38722154881457],[36.2039253820765,50.39476638692859],[36.19257843929915,50.40185130222035],[36.18489,50.40583],[36.17739,50.40276],[36.17197,50.40753],[36.1604,50.43169],[36.13772,50.43809],[36.12156,50.43757]]},geometry:{type:"Polygon",coordinates:[[[36.12156,50.43757],[36.15079,50.42648],[36.15987,50.40423],[36.16798,50.38189],[36.17488,50.35453],[36.17491,50.34315],[36.16343,50.33002],[36.1569,50.32412],[36.14889,50.31622],[36.13064,50.29165],[36.1547,50.27001],[36.16526,50.27643],[36.17994,50.26843],[36.20583,50.24937],[36.24211,50.24209],[36.25343,50.23616],[36.28946,50.2339],[36.28331,50.21008],[36.28926,50.20402],[36.29342,50.19956],[36.33125,50.20687],[36.36832,50.21341],[36.36812,50.19694],[36.37371,50.1823],[36.39244,50.1716],[36.42779,50.16906],[36.4515,50.16944],[36.4803,50.1582],[36.50479,50.16316],[36.5199,50.17554],[36.53104,50.18433],[36.55589,50.18718],[36.5961,50.18136],[36.62444,50.19108],[36.6682,50.17051],[36.70951,50.15775],[36.71746,50.1762],[36.71841,50.19024],[36.71862,50.19769],[36.67447,50.21292],[36.66386,50.22154],[36.64865,50.21768],[36.64271,50.22163],[36.62101,50.22607],[36.6111,50.22442],[36.59128,50.23187],[36.55998,50.25087],[36.57375,50.2567],[36.57896,50.26414],[36.57623,50.2755],[36.59276,50.27767],[36.58512,50.28533],[36.56348,50.2842],[36.55658,50.28129],[36.53985,50.28337],[36.52424,50.28652],[36.52404,50.2938],[36.49919,50.30009],[36.49326,50.3105],[36.48391,50.31214],[36.4641,50.31306],[36.43928,50.31149],[36.43289,50.33002],[36.42495,50.32779],[36.41515,50.31752],[36.40382,50.30871],[36.3743,50.30021],[36.37795,50.29392],[36.36579,50.28735],[36.29833,50.29269],[36.29763,50.29918],[36.28629,50.29881],[36.28511,50.30611],[36.27506,50.31612],[36.28071,50.32251],[36.27432,50.32573],[36.28253,50.33614],[36.27456,50.3425],[36.25855,50.35431],[36.24268,50.35794],[36.23154,50.36597],[36.23099,50.37137],[36.22127,50.37798],[36.20986,50.38729],[36.20446,50.39499],[36.1939,50.40289],[36.1848,50.4063],[36.17699,50.40128],[36.17197,50.40753],[36.1604,50.43169],[36.13772,50.43809],[36.12156,50.43757]]]}},{type:"Feature",properties:{nearestId:"4c007f6f3958888d232a7e0373b21b94",originalId:"4c007f6f3958888d232a7e0373b21b94",id:"62967be7dcdd8e4934a5b6513a2c0f6a",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[37.732455,49.67714]}},oldPointsMap:[[36.96491,49.80236],[37.01107,49.82339],[36.98382,49.85857],[36.97004,49.9135],[36.90405,49.95055],[36.87945,49.99339],[36.82087,50.02559],[36.80905,50.05659],[36.81799,50.06907],[36.81926,50.07782],[36.80672,50.09989],[36.81082,50.11722],[36.81425,50.13065],[36.816,50.14405],[36.82834,50.15453],[36.85034,50.15843],[36.84726,50.17061],[36.84181,50.17516],[36.8387,50.18159],[36.79742,50.19814],[36.76659,50.20652],[36.74307,50.20739],[36.71886,50.19024],[36.71843,50.19763],[36.67479,50.21273],[36.66386,50.22154],[36.68081,50.24059],[36.68352,50.24943],[36.68408,50.25792],[36.68888,50.2668],[36.7006,50.26683],[36.72246,50.27692],[36.73839,50.28221],[36.7496,50.27982],[36.74981,50.28806],[36.76267,50.29097],[36.76991,50.30208],[36.79135,50.30497],[36.81132,50.31149],[36.82954,50.31201],[36.85483,50.32911],[36.87491,50.33765],[36.8908,50.3394],[36.93886,50.35047],[37.03664,50.34866],[37.0441,50.34525],[37.10368,50.35149],[37.27753,50.39685],[37.32742,50.43827],[37.40524,50.43622],[37.48764,50.46217],[37.46109,50.42981],[37.48489,50.36036],[37.56958,50.31244],[37.63596,50.31595],[37.61696,50.22593],[37.66937,50.1578],[37.75086,50.08153],[37.80167,50.078],[37.87033,50.06037],[37.93625,50.02774],[37.96235,49.98096],[38.01865,49.96153],[38.02414,49.91999],[38.04337,49.91469],[38.11752,49.93881],[38.21503,49.98124],[38.1958,50.02774],[38.19351,50.07766],[38.3345,50.0862],[38.35968,50.00775],[38.4819,49.97243],[38.63846,49.96918],[38.69797,49.99682],[38.7117,49.92942],[38.80105,49.88635],[38.62156,49.79593],[38.41931,49.72009],[38.36975,49.66943],[38.31832,49.61486],[38.26926,49.5638],[38.22647,49.42773],[38.17268,49.38087],[38.14534,49.38708],[38.19034,49.21596],[38.17409,49.14958],[38.1699,49.1092],[38.03457,49.12646],[37.95662,49.13331],[37.95507,49.10634],[37.93502,49.07103],[37.86144,49.05434],[37.84485,49.01743],[37.84708,49.00961],[37.85287,48.98588],[37.8873,48.96827],[37.92137,48.95041],[37.93512,48.94102],[37.90744,48.916],[37.87494,48.89211],[37.83145,48.90355],[37.8108,48.90476],[37.78968,48.89973],[37.76995,48.90049],[37.76312,48.90856],[37.7552,48.91375],[37.74748,48.91711],[37.74026,48.9242],[37.73496,48.93029],[37.73897,48.93787],[37.72741,48.94241],[37.71648,48.95202],[37.69834,48.9575],[37.69156,48.94925],[37.66817,48.94368],[37.64237,48.9487],[37.61501,48.96427],[37.62807,48.97221],[37.63076,48.9844],[37.62542,48.99546],[37.64586,49.00908],[37.6651,49.01608],[37.65464,49.02202],[37.66222,49.02929],[37.65556,49.03355],[37.64705,49.035],[37.6322,49.03733],[37.62614,49.03699],[37.62457,49.04193],[37.62136,49.04546],[37.60153,49.04438],[37.58529,49.03803],[37.57818,49.03664],[37.57361,49.03231],[37.56372,49.02861],[37.55226,49.02458],[37.53895,49.02134],[37.53023,49.02158],[37.51489,49.02219],[37.51007091495012,49.01960487840735],[37.46844414624088,49.008565646824614],[37.456765305332674,49.00873672061244],[37.40304687465619,48.998779410522815],[37.378361411056545,49.000596787642735],[37.35531550218217,49.00259731608645],[37.30823501996159,49.002614594965],[37.19661,49.07685],[37.19661,49.07685],[37.19661,49.07685],[37.17221,49.10423],[37.13022734441097,49.11136967780022],[37.10655739399639,49.11652605796459],[37.07958119641062,49.12776516748231],[37.0732,49.1329],[37.05182,49.14263],[37.02563,49.16694],[36.98518,49.173],[36.96818,49.17112],[36.96288,49.17856],[36.94482,49.17538],[36.93016,49.17659],[36.92127,49.18245],[36.9251,49.19888],[36.93982,49.22125],[36.93884,49.24744],[36.92413,49.27154],[36.94696,49.28678],[36.95654,49.30536],[37.0322,49.2907],[37.09433,49.27794],[37.14518,49.29757],[37.16071,49.31708],[37.15348,49.32906],[37.13059,49.33492],[37.11181,49.34353],[37.08444,49.36667],[37.06819,49.38254],[37.03828,49.38135],[37.02052,49.37796],[37.00313,49.37785],[36.96083,49.38649],[36.93731,49.40361],[36.92025,49.40395],[36.89051,49.3988],[36.886288549202135,49.4044870583449],[36.86911932866202,49.42027721005953],[36.85885,49.42743],[36.85538206547585,49.43392126205802],[36.84871,49.44641],[36.84463,49.45789],[36.85607,49.47397],[36.85744,49.48797],[36.84053,49.50339],[36.8213,49.51817],[36.78936,49.53709],[36.76734,49.54741],[36.78247,49.60407],[36.81138,49.61048],[36.84871,49.60497],[36.87663,49.62458],[36.91902,49.63164],[36.92434,49.64058],[36.95032,49.66852],[36.91768,49.67506],[36.89351,49.69406],[36.85171,49.69957],[36.83038,49.71601],[36.83159,49.73226],[36.90138,49.76905],[36.96491,49.80236]]},geometry:{type:"Polygon",coordinates:[[[36.96491,49.80236],[37.01107,49.82339],[36.98382,49.85857],[36.97004,49.9135],[36.90405,49.95055],[36.87945,49.99339],[36.82087,50.02559],[36.80905,50.05659],[36.81799,50.06907],[36.81926,50.07782],[36.80672,50.09989],[36.81082,50.11722],[36.81425,50.13065],[36.816,50.14405],[36.82834,50.15453],[36.85034,50.15843],[36.84726,50.17061],[36.84181,50.17516],[36.8387,50.18159],[36.79742,50.19814],[36.76659,50.20652],[36.74307,50.20739],[36.71886,50.19024],[36.71843,50.19763],[36.67479,50.21273],[36.66386,50.22154],[36.68081,50.24059],[36.68352,50.24943],[36.68408,50.25792],[36.68888,50.2668],[36.7006,50.26683],[36.72246,50.27692],[36.73839,50.28221],[36.7496,50.27982],[36.74981,50.28806],[36.76267,50.29097],[36.76991,50.30208],[36.79135,50.30497],[36.81132,50.31149],[36.82954,50.31201],[36.85483,50.32911],[36.87491,50.33765],[36.8908,50.3394],[36.93886,50.35047],[37.03664,50.34866],[37.0441,50.34525],[37.10368,50.35149],[37.27753,50.39685],[37.32742,50.43827],[37.40524,50.43622],[37.48764,50.46217],[37.46109,50.42981],[37.48489,50.36036],[37.56958,50.31244],[37.63596,50.31595],[37.61696,50.22593],[37.66937,50.1578],[37.75086,50.08153],[37.80167,50.078],[37.87033,50.06037],[37.93625,50.02774],[37.96235,49.98096],[38.01865,49.96153],[38.02414,49.91999],[38.04337,49.91469],[38.11752,49.93881],[38.21503,49.98124],[38.1958,50.02774],[38.19351,50.07766],[38.3345,50.0862],[38.35968,50.00775],[38.4819,49.97243],[38.63846,49.96918],[38.69797,49.99682],[38.7117,49.92942],[38.80105,49.88635],[38.62156,49.79593],[38.41931,49.72009],[38.36975,49.66943],[38.31832,49.61486],[38.26926,49.5638],[38.22647,49.42773],[38.17268,49.38087],[38.14534,49.38708],[38.19034,49.21596],[38.17409,49.14958],[38.1699,49.1092],[38.03457,49.12646],[37.95662,49.13331],[37.95507,49.10634],[37.93502,49.07103],[37.86144,49.05434],[37.84485,49.01743],[37.84708,49.00961],[37.85287,48.98588],[37.8873,48.96827],[37.92137,48.95041],[37.93512,48.94102],[37.90744,48.916],[37.87494,48.89211],[37.83145,48.90355],[37.8108,48.90476],[37.78968,48.89973],[37.76995,48.90049],[37.76312,48.90856],[37.7552,48.91375],[37.74748,48.91711],[37.74026,48.9242],[37.73496,48.93029],[37.73897,48.93787],[37.72741,48.94241],[37.71648,48.95202],[37.69834,48.9575],[37.69156,48.94925],[37.66817,48.94368],[37.64237,48.9487],[37.61501,48.96427],[37.62807,48.97221],[37.63076,48.9844],[37.62542,48.99546],[37.64586,49.00908],[37.6651,49.01608],[37.65464,49.02202],[37.66222,49.02929],[37.65556,49.03355],[37.64705,49.035],[37.6322,49.03733],[37.62614,49.03699],[37.62457,49.04193],[37.62136,49.04546],[37.60153,49.04438],[37.58529,49.03803],[37.57818,49.03664],[37.57361,49.03231],[37.56372,49.02861],[37.55226,49.02458],[37.53895,49.02134],[37.53023,49.02158],[37.51489,49.02219],[37.49585,49.03101],[37.46912,49.0282],[37.45738,49.0266],[37.40557,49.03128],[37.38686,49.03378],[37.35583,49.04263],[37.30389,49.05106],[37.27915,49.06771],[37.25954,49.07604],[37.21692,49.08227],[37.17221,49.10423],[37.13612,49.12347],[37.11647,49.13208],[37.09607,49.13654],[37.0732,49.1329],[37.05182,49.14263],[37.02563,49.16694],[36.98518,49.173],[36.96818,49.17112],[36.96288,49.17856],[36.94482,49.17538],[36.93016,49.17659],[36.92127,49.18245],[36.9251,49.19888],[36.93982,49.22125],[36.93884,49.24744],[36.92413,49.27154],[36.94696,49.28678],[36.95654,49.30536],[37.0322,49.2907],[37.09433,49.27794],[37.14518,49.29757],[37.16071,49.31708],[37.15348,49.32906],[37.13059,49.33492],[37.11181,49.34353],[37.08444,49.36667],[37.06819,49.38254],[37.03828,49.38135],[37.02052,49.37796],[37.00313,49.37785],[36.96083,49.38649],[36.93731,49.40361],[36.92025,49.40395],[36.89051,49.3988],[36.84949,49.39293],[36.82915,49.39601],[36.81481,49.40516],[36.82467,49.42699],[36.82426,49.44266],[36.84463,49.45789],[36.85607,49.47397],[36.85744,49.48797],[36.84053,49.50339],[36.8213,49.51817],[36.78936,49.53709],[36.76734,49.54741],[36.78247,49.60407],[36.81138,49.61048],[36.84871,49.60497],[36.87663,49.62458],[36.91902,49.63164],[36.92434,49.64058],[36.95032,49.66852],[36.91768,49.67506],[36.89351,49.69406],[36.85171,49.69957],[36.83038,49.71601],[36.83159,49.73226],[36.90138,49.76905],[36.96491,49.80236]]]}},{type:"Feature",properties:{nearestId:"7d8599d841bcd6479ea3d178f1941cef",originalId:"7d8599d841bcd6479ea3d178f1941cef",id:"f287a5d9ca4d9fdeca3e10b90cac74e3",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[39.033075,49.167845]}},oldPointsMap:[[39.69841,49.04973],[39.72519,49.045],[39.76158,49.03892],[39.78424,49.04455],[39.80656,49.05918],[39.8275,49.06053],[39.87626,49.06697],[39.90853,49.05752],[39.93668,49.05467],[39.93394,49.08167],[39.95728,49.10416],[39.99024,49.15271],[40.03144,49.18684],[40.07813,49.19223],[40.13032,49.24607],[40.17564,49.24158],[40.22096,49.25234],[40.18525,49.29268],[40.19349,49.34641],[40.11796,49.37593],[40.09186,49.40144],[40.04013,49.45206],[40.04059,49.52343],[40.17014,49.57095],[40.13306,49.60893],[40.06165,49.60893],[39.95361,49.5941],[39.93393,49.57955],[39.89365,49.55966],[39.83551,49.56442],[39.80576,49.55521],[39.74991,49.59884],[39.68948,49.60923],[39.6492,49.62406],[39.61945,49.68274],[39.5874,49.72004],[39.60663,49.73454],[39.53613,49.7372],[39.49219,49.75436],[39.43085,49.76205],[39.38187,49.73898],[39.28711,49.7582],[39.26193,49.76767],[39.22852,49.80165],[39.22577,49.83798],[39.20563,49.86838],[39.17679,49.88903],[39.13101,49.86278],[39.11316,49.83592],[39.06555,49.81908],[39.03076,49.82529],[38.95248,49.79545],[38.91495,49.80697],[38.91586,49.86927],[38.80051,49.88638],[38.62747,49.7984],[38.47321,49.73986],[38.41919,49.72034],[38.26996,49.56412],[38.22693,49.42795],[38.17276,49.3808],[38.14398,49.38701],[38.16185,49.33231],[38.17146,49.29914],[38.19124,49.21836],[38.17444,49.1507],[38.17017,49.10923],[38.04205,49.12608],[37.95682,49.13385],[37.9547,49.10567],[37.93429,49.07092],[37.86156,49.05429],[37.84519,49.01763],[37.85282,48.98601],[37.92154,48.95053],[37.93512,48.94097],[37.90754,48.91597],[37.89582,48.90796],[37.87442,48.8917],[37.88386,48.88554],[37.89608,48.88847],[37.90239,48.88421],[37.90284,48.87795],[37.91295,48.87992],[37.91879,48.88116],[37.92366,48.88329],[37.93153,48.89158],[37.93783,48.90498],[37.95197,48.91172],[37.95352,48.90319],[37.96497,48.90029],[37.98283,48.91013],[37.98899,48.9095],[37.99226,48.90548],[37.99834,48.91116],[38.00935,48.90781],[38.02799,48.91444],[38.03885,48.92509],[38.04732,48.93532],[38.06405,48.93783],[38.0897,48.94003],[38.09744,48.9341],[38.11121,48.93249],[38.11633,48.9285],[38.12971,48.92572],[38.13591,48.92548],[38.14219,48.93183],[38.15644,48.93123],[38.17292,48.93078],[38.20085,48.92762],[38.201699246396146,48.92790417934961],[38.182632862683235,48.92968108678557],[38.18030383892901,48.92994459251644],[38.18933321878263,48.928923008544466],[38.20085,48.92762],[38.32505,48.8357],[38.32505,48.8357],[38.32505,48.8357],[38.32505,48.8357],[38.32505,48.8357],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.34254,48.81848],[38.35200832072739,48.81402344872722],[38.372266574418504,48.80444918662087],[38.38989962594135,48.79598337572648],[38.41150568992618,48.78561008034816],[38.41481343302997,48.78402199858207],[38.41233474692487,48.7852120414856],[38.41912423068416,48.78195233992446],[38.43622361396123,48.77374274868911],[38.45296377694905,48.765705622839825],[38.488238090054345,48.748770059316286],[38.51048044787213,48.73809127267026],[38.52030564981677,48.733374091327335],[38.54185483250963,48.72302810524715],[38.550755234433524,48.71875492998454],[38.55004550049909,48.71909568060655],[38.544287733389545,48.72186004430504],[38.5466114079187,48.72074442406662],[38.54417656206434,48.72191341881114],[38.54944189983494,48.71938547554487],[38.55179081461238,48.718257737201505],[38.5570892117959,48.715713921768256],[38.56640349372374,48.711242038423734],[38.56391722408511,48.71243572226035],[38.57407589687554,48.7075584381062],[38.57497937578386,48.70712466851305],[38.58221784262263,48.703649405519414],[38.55522164489289,48.716610560005435],[38.53707952824376,48.72532077834606],[38.5490248243491,48.71958571781077],[38.55898265923737,48.71480485801617],[38.55933512285949,48.714635636576084],[38.55114416794199,48.71856819897381],[38.552350599608005,48.71798897862002],[38.55827842350384,48.71514296889491],[38.578565944114885,48.7054027198639],[38.58211339550123,48.70369955166554],[38.58280894414601,48.70336561154819],[38.581125018220064,48.704174081847896],[38.57411279392611,48.70754072344959],[38.58557,48.70204],[38.59583,48.70679],[38.61773,48.71251],[38.63165,48.71133],[38.64963,48.7109],[38.66359,48.7105],[38.67607,48.71354],[38.68885,48.71795],[38.69852,48.7165],[38.70248,48.71474],[38.70789,48.71506],[38.71617,48.71303],[38.71742,48.7101],[38.72591,48.70665],[38.78063,48.69163],[38.78826,48.6948],[38.79269,48.70117],[38.79884,48.70564],[38.80795,48.7205],[38.81269,48.72635],[38.81419,48.73261],[38.82129,48.74183],[38.82973,48.74253],[38.84306,48.74507],[38.84903,48.75091],[38.85306,48.75044],[38.85847,48.75027],[38.86262,48.75161],[38.87052,48.75206],[38.8771,48.75311],[38.8797,48.75302],[38.88127,48.75113],[38.89137,48.75079],[38.90184,48.75145],[38.90674,48.75044],[38.91071,48.74928],[38.91629,48.7444],[38.91875,48.74378],[38.92164,48.7451],[38.92453,48.74563],[38.92968,48.74559],[38.93512,48.74751],[38.93721,48.74787],[38.93904,48.74685],[38.93909,48.7451],[38.93847,48.74334],[38.93535,48.74259],[38.9334,48.73766],[38.93497,48.73638],[38.9417,48.73495],[38.9564,48.73487],[38.95949,48.73698],[38.96055,48.74032],[38.95815,48.74421],[38.96044,48.74655],[38.96473,48.74691],[38.97097,48.74451],[38.97377,48.74459],[38.97617,48.74532],[38.98046,48.74555],[38.98347,48.74317],[38.98355,48.7408],[38.9857,48.73793],[38.98965,48.73617],[38.99254,48.73147],[38.9974,48.72711],[38.99938,48.72476],[39.00084,48.71977],[38.99946,48.71777],[38.99763,48.71609],[38.99119,48.71488],[38.98825,48.71396],[38.98659,48.71301],[38.98504,48.71217],[38.9885,48.71081],[38.9924,48.71103],[38.99746,48.7125],[38.99938,48.71166],[39.00026,48.70954],[38.99972,48.70561],[39.00169,48.69993],[39.00581,48.69723],[39.01614,48.69534],[39.01731,48.68905],[39.016,48.68327],[39.02081,48.67912],[39.02184,48.67203],[39.0259,48.66875],[39.02736,48.66542],[39.02882,48.66349],[39.02421,48.66087],[39.01812,48.66281],[39.01428,48.66334],[39.01051,48.66238],[39.01219,48.6596],[39.02061,48.65712],[39.02504,48.6552],[39.03105,48.65374],[39.03377,48.65264],[39.03686,48.64852],[39.04175,48.64788],[39.05228,48.64713],[39.07963,48.65257],[39.10418,48.65151],[39.12546,48.66183],[39.13931,48.66107],[39.142,48.66958],[39.15041,48.67713],[39.16323,48.67657],[39.17971,48.68597],[39.18463,48.69553],[39.19516,48.7075],[39.19905,48.7066],[39.20139,48.7012],[39.2054,48.69923],[39.22428,48.70754],[39.23098,48.71192],[39.23454,48.71217],[39.23691,48.71166],[39.24053,48.71009],[39.24329,48.71065],[39.24833,48.71305],[39.25077,48.71607],[39.25375,48.72528],[39.27052,48.72796],[39.27767,48.73657],[39.27526,48.74257],[39.27052,48.74672],[39.26994,48.75332],[39.27475,48.75434],[39.28288,48.74853],[39.28751,48.75193],[39.29043,48.76053],[39.29998,48.76505],[39.31103,48.7755],[39.32522,48.77727],[39.32951,48.77324],[39.32739,48.76875],[39.33758,48.76664],[39.34891,48.76962],[39.35572,48.76758],[39.35291,48.76287],[39.34679,48.76068],[39.34513,48.75766],[39.34959,48.74389],[39.35904,48.73808],[39.36047,48.73389],[39.35612,48.72974],[39.35589,48.72619],[39.36533,48.72185],[39.37471,48.71977],[39.37243,48.71581],[39.36556,48.71566],[39.35314,48.71275],[39.34782,48.71226],[39.35114,48.70792],[39.35726,48.69867],[39.36665,48.69349],[39.37677,48.68786],[39.39068,48.68529],[39.39228,48.6838],[39.39119,48.68155],[39.39171,48.67978],[39.39766,48.67577],[39.40538,48.6743],[39.40948,48.67298],[39.41382,48.66997],[39.41543,48.66721],[39.40965,48.66134],[39.4097,48.6593],[39.41362,48.65756],[39.42018,48.65882],[39.43305,48.65748],[39.43708,48.6559],[39.44063,48.65597],[39.44235,48.65624],[39.44695,48.65686],[39.45225,48.65544],[39.45405,48.65323],[39.45059,48.64945],[39.45067,48.64446],[39.45591,48.63979],[39.46741,48.63905],[39.46773,48.63599],[39.46569,48.63397],[39.46527,48.62985],[39.46795,48.62865],[39.4705,48.62835],[39.47628,48.62966],[39.48478,48.62926],[39.48595,48.63106],[39.48601,48.6327],[39.48767,48.63514],[39.49287,48.6323],[39.5129,48.63571],[39.51699,48.63419],[39.51811,48.62837],[39.51336,48.62247],[39.52486,48.61502],[39.52881,48.61097],[39.52792,48.60723],[39.52452,48.60335],[39.52552,48.60057],[39.52809,48.59778],[39.53201,48.59733],[39.53419,48.59671],[39.53447,48.59377],[39.52867,48.59082],[39.52864,48.58802],[39.52998,48.58577],[39.53776,48.5845],[39.5446,48.58486],[39.54758,48.58647],[39.54935,48.58872],[39.54789,48.59343],[39.54967,48.59623],[39.55948,48.59935],[39.56503,48.59805],[39.56629,48.59493],[39.56849,48.59241],[39.56792,48.58902],[39.56526,48.58632],[39.56414,48.5845],[39.56689,48.58302],[39.57461,48.58168],[39.59255,48.593],[39.59756,48.59311],[39.60257,48.59252],[39.60588,48.58872],[39.60571,48.58529],[39.60194,48.58497],[39.59724,48.58109],[39.59573,48.57803],[39.5971,48.57682],[39.59973,48.57511],[39.60674,48.57426],[39.61095,48.57443],[39.61576,48.57755],[39.61985,48.58261],[39.62076,48.58647],[39.62279,48.58736],[39.63435,48.58132],[39.65481,48.58516],[39.67186,48.58906],[39.67804,48.58836],[39.68296,48.58656],[39.68983,48.58639],[39.68491,48.59069],[39.67558,48.59322],[39.67732,48.59517],[39.68016,48.59619],[39.6769,48.59865],[39.67403,48.59618],[39.67109,48.59567],[39.66888,48.5968],[39.66803,48.60055],[39.67103,48.6034],[39.66994,48.6049],[39.66351,48.60503],[39.66022,48.60671],[39.66099,48.61063],[39.66585,48.61803],[39.67026,48.62366],[39.67875,48.6289],[39.68719,48.63268],[39.68994,48.63484],[39.6928,48.63614],[39.69383,48.63794],[39.694,48.64304],[39.69109,48.64796],[39.7007,48.65261],[39.70611,48.65675],[39.7104,48.65463],[39.71163,48.6561],[39.71,48.66113],[39.71094,48.66773],[39.7037,48.66718],[39.70156,48.66965],[39.71323,48.67536],[39.71357,48.67804],[39.72313,48.68401],[39.71746,48.69115],[39.71844,48.70014],[39.71283,48.70048],[39.70539,48.70493],[39.70779,48.70909],[39.71151,48.71479],[39.7035,48.72109],[39.70865,48.72109],[39.7154,48.72845],[39.72301,48.73144],[39.72559,48.73963],[39.73286,48.74438],[39.73932,48.74385],[39.73675,48.75076],[39.72559,48.75053],[39.73045,48.75362],[39.73148,48.75792],[39.7368,48.7637],[39.74356,48.76799],[39.75019,48.77211],[39.7554,48.76769],[39.76336,48.76354],[39.76959,48.76969],[39.76112,48.77248],[39.77852,48.78681],[39.78058,48.79872],[39.78127,48.81711],[39.79386,48.83338],[39.80416,48.84151],[39.82613,48.83157],[39.88793,48.82071],[39.94217,48.80036],[39.96689,48.79674],[39.97445,48.79357],[40.07401,48.87134],[40.06165,48.91018],[40.0383,48.9147],[40.02045,48.90883],[40.01633,48.90206],[40.00534,48.9007],[39.99093,48.86863],[39.94973,48.87631],[39.92913,48.89528],[39.8536,48.89302],[39.8433,48.8998],[39.833,48.89799],[39.83025,48.88625],[39.81583,48.89935],[39.82064,48.90386],[39.8021,48.91289],[39.79729,48.90883],[39.77875,48.91966],[39.77257,48.9499],[39.75609,48.97109],[39.74854,48.98777],[39.72588,48.97425],[39.70322,48.99859],[39.67232,48.99048],[39.66202,48.99814],[39.68193,49.01076],[39.6785,49.03778],[39.69841,49.04973]]},geometry:{type:"Polygon",coordinates:[[[39.69841,49.04973],[39.72519,49.045],[39.76158,49.03892],[39.78424,49.04455],[39.80656,49.05918],[39.8275,49.06053],[39.87626,49.06697],[39.90853,49.05752],[39.93668,49.05467],[39.93394,49.08167],[39.95728,49.10416],[39.99024,49.15271],[40.03144,49.18684],[40.07813,49.19223],[40.13032,49.24607],[40.17564,49.24158],[40.22096,49.25234],[40.18525,49.29268],[40.19349,49.34641],[40.11796,49.37593],[40.09186,49.40144],[40.04013,49.45206],[40.04059,49.52343],[40.17014,49.57095],[40.13306,49.60893],[40.06165,49.60893],[39.95361,49.5941],[39.93393,49.57955],[39.89365,49.55966],[39.83551,49.56442],[39.80576,49.55521],[39.74991,49.59884],[39.68948,49.60923],[39.6492,49.62406],[39.61945,49.68274],[39.5874,49.72004],[39.60663,49.73454],[39.53613,49.7372],[39.49219,49.75436],[39.43085,49.76205],[39.38187,49.73898],[39.28711,49.7582],[39.26193,49.76767],[39.22852,49.80165],[39.22577,49.83798],[39.20563,49.86838],[39.17679,49.88903],[39.13101,49.86278],[39.11316,49.83592],[39.06555,49.81908],[39.03076,49.82529],[38.95248,49.79545],[38.91495,49.80697],[38.91586,49.86927],[38.80051,49.88638],[38.62747,49.7984],[38.47321,49.73986],[38.41919,49.72034],[38.26996,49.56412],[38.22693,49.42795],[38.17276,49.3808],[38.14398,49.38701],[38.16185,49.33231],[38.17146,49.29914],[38.19124,49.21836],[38.17444,49.1507],[38.17017,49.10923],[38.04205,49.12608],[37.95682,49.13385],[37.9547,49.10567],[37.93429,49.07092],[37.86156,49.05429],[37.84519,49.01763],[37.85282,48.98601],[37.92154,48.95053],[37.93512,48.94097],[37.90754,48.91597],[37.89582,48.90796],[37.87442,48.8917],[37.88386,48.88554],[37.89608,48.88847],[37.90239,48.88421],[37.90284,48.87795],[37.91295,48.87992],[37.91879,48.88116],[37.92366,48.88329],[37.93153,48.89158],[37.93783,48.90498],[37.95197,48.91172],[37.95352,48.90319],[37.96497,48.90029],[37.98283,48.91013],[37.98899,48.9095],[37.99226,48.90548],[37.99834,48.91116],[38.00935,48.90781],[38.02799,48.91444],[38.03885,48.92509],[38.04732,48.93532],[38.06405,48.93783],[38.0897,48.94003],[38.09744,48.9341],[38.11121,48.93249],[38.11633,48.9285],[38.12971,48.92572],[38.13591,48.92548],[38.14219,48.93183],[38.15644,48.93123],[38.17292,48.93078],[38.20085,48.92762],[38.20724,48.92077],[38.17789,48.91157],[38.17208,48.89854],[38.17784,48.88503],[38.20572,48.8679],[38.20956,48.84663],[38.21202,48.82546],[38.23276,48.81839],[38.25536,48.81798],[38.26298,48.80616],[38.25965,48.78402],[38.25539,48.76493],[38.25104,48.75914],[38.25426,48.74944],[38.25243,48.74211],[38.25066,48.73469],[38.23999,48.73208],[38.17302,48.709],[38.15034,48.6945],[38.12063,48.67934],[38.11764,48.67436],[38.11082,48.66585],[38.10718,48.66373],[38.10326,48.66228],[38.10819,48.65531],[38.108,48.65173],[38.11541,48.64741],[38.1201,48.64275],[38.12574,48.63909],[38.13058,48.63314],[38.12647,48.62747],[38.10192,48.61776],[38.05868,48.60177],[38.08203,48.58561],[38.09429,48.57679],[38.11077,48.56803],[38.11579,48.54803],[38.11919,48.52104],[38.11969,48.51689],[38.10664,48.50853],[38.101,48.49398],[38.1173,48.48494],[38.13461,48.47732],[38.18852,48.47712],[38.21569,48.47091],[38.20909,48.45132],[38.23971,48.44921],[38.2505,48.44666],[38.25682,48.45337],[38.27586,48.4786],[38.29298,48.4909],[38.29846,48.49924],[38.31075,48.50309],[38.32444,48.51225],[38.34057,48.51954],[38.35489,48.51963],[38.36256,48.53003],[38.37294,48.52538],[38.38425,48.53439],[38.39891,48.53767],[38.39524,48.57172],[38.3885,48.59073],[38.42553,48.60779],[38.43799,48.60531],[38.46134,48.62602],[38.46539,48.64104],[38.47397,48.64716],[38.48911,48.6527],[38.53199,48.66356],[38.54401,48.66957],[38.55,48.67405],[38.55867,48.68426],[38.56216,48.69714],[38.58557,48.70204],[38.59583,48.70679],[38.61773,48.71251],[38.63165,48.71133],[38.64963,48.7109],[38.66359,48.7105],[38.67607,48.71354],[38.68885,48.71795],[38.69852,48.7165],[38.70248,48.71474],[38.70789,48.71506],[38.71617,48.71303],[38.71742,48.7101],[38.72591,48.70665],[38.78063,48.69163],[38.78826,48.6948],[38.79269,48.70117],[38.79884,48.70564],[38.80795,48.7205],[38.81269,48.72635],[38.81419,48.73261],[38.82129,48.74183],[38.82973,48.74253],[38.84306,48.74507],[38.84903,48.75091],[38.85306,48.75044],[38.85847,48.75027],[38.86262,48.75161],[38.87052,48.75206],[38.8771,48.75311],[38.8797,48.75302],[38.88127,48.75113],[38.89137,48.75079],[38.90184,48.75145],[38.90674,48.75044],[38.91071,48.74928],[38.91629,48.7444],[38.91875,48.74378],[38.92164,48.7451],[38.92453,48.74563],[38.92968,48.74559],[38.93512,48.74751],[38.93721,48.74787],[38.93904,48.74685],[38.93909,48.7451],[38.93847,48.74334],[38.93535,48.74259],[38.9334,48.73766],[38.93497,48.73638],[38.9417,48.73495],[38.9564,48.73487],[38.95949,48.73698],[38.96055,48.74032],[38.95815,48.74421],[38.96044,48.74655],[38.96473,48.74691],[38.97097,48.74451],[38.97377,48.74459],[38.97617,48.74532],[38.98046,48.74555],[38.98347,48.74317],[38.98355,48.7408],[38.9857,48.73793],[38.98965,48.73617],[38.99254,48.73147],[38.9974,48.72711],[38.99938,48.72476],[39.00084,48.71977],[38.99946,48.71777],[38.99763,48.71609],[38.99119,48.71488],[38.98825,48.71396],[38.98659,48.71301],[38.98504,48.71217],[38.9885,48.71081],[38.9924,48.71103],[38.99746,48.7125],[38.99938,48.71166],[39.00026,48.70954],[38.99972,48.70561],[39.00169,48.69993],[39.00581,48.69723],[39.01614,48.69534],[39.01731,48.68905],[39.016,48.68327],[39.02081,48.67912],[39.02184,48.67203],[39.0259,48.66875],[39.02736,48.66542],[39.02882,48.66349],[39.02421,48.66087],[39.01812,48.66281],[39.01428,48.66334],[39.01051,48.66238],[39.01219,48.6596],[39.02061,48.65712],[39.02504,48.6552],[39.03105,48.65374],[39.03377,48.65264],[39.03686,48.64852],[39.04175,48.64788],[39.05228,48.64713],[39.07963,48.65257],[39.10418,48.65151],[39.12546,48.66183],[39.13931,48.66107],[39.142,48.66958],[39.15041,48.67713],[39.16323,48.67657],[39.17971,48.68597],[39.18463,48.69553],[39.19516,48.7075],[39.19905,48.7066],[39.20139,48.7012],[39.2054,48.69923],[39.22428,48.70754],[39.23098,48.71192],[39.23454,48.71217],[39.23691,48.71166],[39.24053,48.71009],[39.24329,48.71065],[39.24833,48.71305],[39.25077,48.71607],[39.25375,48.72528],[39.27052,48.72796],[39.27767,48.73657],[39.27526,48.74257],[39.27052,48.74672],[39.26994,48.75332],[39.27475,48.75434],[39.28288,48.74853],[39.28751,48.75193],[39.29043,48.76053],[39.29998,48.76505],[39.31103,48.7755],[39.32522,48.77727],[39.32951,48.77324],[39.32739,48.76875],[39.33758,48.76664],[39.34891,48.76962],[39.35572,48.76758],[39.35291,48.76287],[39.34679,48.76068],[39.34513,48.75766],[39.34959,48.74389],[39.35904,48.73808],[39.36047,48.73389],[39.35612,48.72974],[39.35589,48.72619],[39.36533,48.72185],[39.37471,48.71977],[39.37243,48.71581],[39.36556,48.71566],[39.35314,48.71275],[39.34782,48.71226],[39.35114,48.70792],[39.35726,48.69867],[39.36665,48.69349],[39.37677,48.68786],[39.39068,48.68529],[39.39228,48.6838],[39.39119,48.68155],[39.39171,48.67978],[39.39766,48.67577],[39.40538,48.6743],[39.40948,48.67298],[39.41382,48.66997],[39.41543,48.66721],[39.40965,48.66134],[39.4097,48.6593],[39.41362,48.65756],[39.42018,48.65882],[39.43305,48.65748],[39.43708,48.6559],[39.44063,48.65597],[39.44235,48.65624],[39.44695,48.65686],[39.45225,48.65544],[39.45405,48.65323],[39.45059,48.64945],[39.45067,48.64446],[39.45591,48.63979],[39.46741,48.63905],[39.46773,48.63599],[39.46569,48.63397],[39.46527,48.62985],[39.46795,48.62865],[39.4705,48.62835],[39.47628,48.62966],[39.48478,48.62926],[39.48595,48.63106],[39.48601,48.6327],[39.48767,48.63514],[39.49287,48.6323],[39.5129,48.63571],[39.51699,48.63419],[39.51811,48.62837],[39.51336,48.62247],[39.52486,48.61502],[39.52881,48.61097],[39.52792,48.60723],[39.52452,48.60335],[39.52552,48.60057],[39.52809,48.59778],[39.53201,48.59733],[39.53419,48.59671],[39.53447,48.59377],[39.52867,48.59082],[39.52864,48.58802],[39.52998,48.58577],[39.53776,48.5845],[39.5446,48.58486],[39.54758,48.58647],[39.54935,48.58872],[39.54789,48.59343],[39.54967,48.59623],[39.55948,48.59935],[39.56503,48.59805],[39.56629,48.59493],[39.56849,48.59241],[39.56792,48.58902],[39.56526,48.58632],[39.56414,48.5845],[39.56689,48.58302],[39.57461,48.58168],[39.59255,48.593],[39.59756,48.59311],[39.60257,48.59252],[39.60588,48.58872],[39.60571,48.58529],[39.60194,48.58497],[39.59724,48.58109],[39.59573,48.57803],[39.5971,48.57682],[39.59973,48.57511],[39.60674,48.57426],[39.61095,48.57443],[39.61576,48.57755],[39.61985,48.58261],[39.62076,48.58647],[39.62279,48.58736],[39.63435,48.58132],[39.65481,48.58516],[39.67186,48.58906],[39.67804,48.58836],[39.68296,48.58656],[39.68983,48.58639],[39.68491,48.59069],[39.67558,48.59322],[39.67732,48.59517],[39.68016,48.59619],[39.6769,48.59865],[39.67403,48.59618],[39.67109,48.59567],[39.66888,48.5968],[39.66803,48.60055],[39.67103,48.6034],[39.66994,48.6049],[39.66351,48.60503],[39.66022,48.60671],[39.66099,48.61063],[39.66585,48.61803],[39.67026,48.62366],[39.67875,48.6289],[39.68719,48.63268],[39.68994,48.63484],[39.6928,48.63614],[39.69383,48.63794],[39.694,48.64304],[39.69109,48.64796],[39.7007,48.65261],[39.70611,48.65675],[39.7104,48.65463],[39.71163,48.6561],[39.71,48.66113],[39.71094,48.66773],[39.7037,48.66718],[39.70156,48.66965],[39.71323,48.67536],[39.71357,48.67804],[39.72313,48.68401],[39.71746,48.69115],[39.71844,48.70014],[39.71283,48.70048],[39.70539,48.70493],[39.70779,48.70909],[39.71151,48.71479],[39.7035,48.72109],[39.70865,48.72109],[39.7154,48.72845],[39.72301,48.73144],[39.72559,48.73963],[39.73286,48.74438],[39.73932,48.74385],[39.73675,48.75076],[39.72559,48.75053],[39.73045,48.75362],[39.73148,48.75792],[39.7368,48.7637],[39.74356,48.76799],[39.75019,48.77211],[39.7554,48.76769],[39.76336,48.76354],[39.76959,48.76969],[39.76112,48.77248],[39.77852,48.78681],[39.78058,48.79872],[39.78127,48.81711],[39.79386,48.83338],[39.80416,48.84151],[39.82613,48.83157],[39.88793,48.82071],[39.94217,48.80036],[39.96689,48.79674],[39.97445,48.79357],[40.07401,48.87134],[40.06165,48.91018],[40.0383,48.9147],[40.02045,48.90883],[40.01633,48.90206],[40.00534,48.9007],[39.99093,48.86863],[39.94973,48.87631],[39.92913,48.89528],[39.8536,48.89302],[39.8433,48.8998],[39.833,48.89799],[39.83025,48.88625],[39.81583,48.89935],[39.82064,48.90386],[39.8021,48.91289],[39.79729,48.90883],[39.77875,48.91966],[39.77257,48.9499],[39.75609,48.97109],[39.74854,48.98777],[39.72588,48.97425],[39.70322,48.99859],[39.67232,48.99048],[39.66202,48.99814],[39.68193,49.01076],[39.6785,49.03778],[39.69841,49.04973]]]}},{type:"Feature",properties:{nearestId:"c1e256e2232b197eb288790d84a3132c",originalId:"c1e256e2232b197eb288790d84a3132c",id:"32a39c25d720cc12b14d3af4945faefb",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[38.57379,48.699595]}},oldPointsMap:[[38.56202,48.69715],[38.58556,48.70204],[38.56202,48.69715]]},geometry:{type:"Polygon",coordinates:[[[38.56202,48.69715],[38.58556,48.70204],[38.56202,48.69715]]]}},{type:"Feature",properties:{nearestId:"71915055a03ff53e4cb12df26ae76615",originalId:"71915055a03ff53e4cb12df26ae76615",id:"8ba27932ba6be0449622c323b3c6b224",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[29.919145,50.903909999999996]}},oldPointsMap:[[29.99079,51.48287],[29.98229,51.48688],[29.97465,51.48442],[29.97079,51.47517],[29.96624,51.47303],[29.95903,51.46966],[29.95234,51.47335],[29.9477,51.47865],[29.9483,51.4841],[29.9447,51.48603],[29.93689,51.48897],[29.92581,51.49314],[29.92384,51.48859],[29.91457,51.48688],[29.91225,51.488],[29.90612,51.48561],[29.89453,51.48497],[29.89264,51.484],[29.89547,51.47342],[29.89376,51.46668],[29.8859,51.4625],[29.87844,51.45759],[29.87878,51.45389],[29.88204,51.45004],[29.85106,51.44952],[29.84694,51.45706],[29.81595,51.44887],[29.81604,51.45974],[29.79424,51.45749],[29.79836,51.44829],[29.79612,51.44234],[29.7611,51.4517],[29.74651,51.45877],[29.72969,51.48711],[29.74205,51.49448],[29.74171,51.50378],[29.7393,51.52687],[29.7242,51.53016],[29.69553,51.51767],[29.66583,51.50377],[29.63013,51.50506],[29.60841,51.49373],[29.60764,51.48257],[29.60953,51.4731],[29.58052,51.46321],[29.53812,51.48316],[29.53691,51.46155],[29.52335,51.4531],[29.51992,51.44497],[29.52473,51.42913],[29.49589,51.39764],[29.41692,51.41607],[29.38293,51.40151],[29.3613,51.38649],[29.33247,51.38009],[29.29367,51.35694],[29.30843,51.32946],[29.32457,51.30202],[29.35684,51.27583],[29.37675,51.21837],[29.44542,51.16807],[29.52747,51.08403],[29.56352,51.00758],[29.55048,50.93753],[29.56215,50.8811],[29.57039,50.84815],[29.57497,50.83153],[29.59282,50.80372],[29.61708,50.79287],[29.65141,50.79995],[29.70497,50.79822],[29.79149,50.70804],[29.83835,50.66291],[29.83292,50.6198],[29.786,50.59065],[29.78966,50.56318],[29.79607,50.52783],[29.79149,50.49086],[29.73656,50.46693],[29.71046,50.43389],[29.72225,50.41933],[29.77146,50.40489],[29.78004,50.37948],[29.74869,50.34731],[29.75418,50.32306],[29.76974,50.3289],[29.77547,50.34081],[29.81255,50.36432],[29.86141,50.31042],[29.87766,50.2792],[29.88739,50.27766],[29.89265,50.2917],[29.88661,50.33641],[29.89362,50.35723],[29.91866,50.37378],[29.9548,50.38407],[29.99042,50.39326],[30.04278,50.4021],[30.06585,50.41148],[30.09316,50.41802],[30.1125,50.42566],[30.14053,50.42881],[30.14208,50.42679],[30.15564,50.41857],[30.15873,50.41298],[30.17595,50.41174],[30.19398,50.41646],[30.21435,50.42566],[30.23506,50.45035],[30.23438,50.45554],[30.24261,50.46466],[30.24948,50.47013],[30.24596,50.47733],[30.24628,50.48219],[30.24163,50.4928],[30.23789,50.50026],[30.23679,50.50597],[30.23335,50.50982],[30.23592,50.51239],[30.23174,50.5268],[30.23335,50.53615],[30.25143,50.54575],[30.2611,50.54742],[30.27532,50.54796],[30.28479,50.55289],[30.28419,50.56307],[30.28776,50.58796],[30.28484,50.59814],[30.34536,50.5954],[30.30222,50.61915],[30.27858,50.63171],[30.27406,50.63926],[30.27906,50.64839],[30.27666,50.65488],[30.27709,50.66197],[30.28364,50.66461],[30.29491,50.66841],[30.30539,50.68361],[30.31697,50.69812],[30.33019,50.71059],[30.34452,50.71427],[30.35156,50.71713],[30.34942,50.72251],[30.3616,50.72885],[30.36633,50.74328],[30.37351,50.74415],[30.41908,50.79577],[30.46372,50.92194],[30.46303,51.01321],[30.50354,51.09653],[30.50079,51.16764],[30.53243,51.21674],[30.54462,51.26339],[30.50023,51.28085],[30.45581,51.27385],[30.45159,51.2823],[30.45963,51.29949],[30.4197,51.30802],[30.32901,51.35941],[30.35748,51.37489],[30.34807,51.4244],[30.28393,51.46745],[30.18073,51.51146],[30.16348,51.4937],[30.14227,51.49703],[30.11371,51.48774],[30.05338,51.49816],[30.03032,51.5031],[29.99096,51.48367],[29.99079,51.48287]]},geometry:{type:"Polygon",coordinates:[[[29.99079,51.48287],[29.98229,51.48688],[29.97465,51.48442],[29.97079,51.47517],[29.96624,51.47303],[29.95903,51.46966],[29.95234,51.47335],[29.9477,51.47865],[29.9483,51.4841],[29.9447,51.48603],[29.93689,51.48897],[29.92581,51.49314],[29.92384,51.48859],[29.91457,51.48688],[29.91225,51.488],[29.90612,51.48561],[29.89453,51.48497],[29.89264,51.484],[29.89547,51.47342],[29.89376,51.46668],[29.8859,51.4625],[29.87844,51.45759],[29.87878,51.45389],[29.88204,51.45004],[29.85106,51.44952],[29.84694,51.45706],[29.81595,51.44887],[29.81604,51.45974],[29.79424,51.45749],[29.79836,51.44829],[29.79612,51.44234],[29.7611,51.4517],[29.74651,51.45877],[29.72969,51.48711],[29.74205,51.49448],[29.74171,51.50378],[29.7393,51.52687],[29.7242,51.53016],[29.69553,51.51767],[29.66583,51.50377],[29.63013,51.50506],[29.60841,51.49373],[29.60764,51.48257],[29.60953,51.4731],[29.58052,51.46321],[29.53812,51.48316],[29.53691,51.46155],[29.52335,51.4531],[29.51992,51.44497],[29.52473,51.42913],[29.49589,51.39764],[29.41692,51.41607],[29.38293,51.40151],[29.3613,51.38649],[29.33247,51.38009],[29.29367,51.35694],[29.30843,51.32946],[29.32457,51.30202],[29.35684,51.27583],[29.37675,51.21837],[29.44542,51.16807],[29.52747,51.08403],[29.56352,51.00758],[29.55048,50.93753],[29.56215,50.8811],[29.57039,50.84815],[29.57497,50.83153],[29.59282,50.80372],[29.61708,50.79287],[29.65141,50.79995],[29.70497,50.79822],[29.79149,50.70804],[29.83835,50.66291],[29.83292,50.6198],[29.786,50.59065],[29.78966,50.56318],[29.79607,50.52783],[29.79149,50.49086],[29.73656,50.46693],[29.71046,50.43389],[29.72225,50.41933],[29.77146,50.40489],[29.78004,50.37948],[29.74869,50.34731],[29.75418,50.32306],[29.76974,50.3289],[29.77547,50.34081],[29.81255,50.36432],[29.86141,50.31042],[29.87766,50.2792],[29.88739,50.27766],[29.89265,50.2917],[29.88661,50.33641],[29.89362,50.35723],[29.91866,50.37378],[29.9548,50.38407],[29.99042,50.39326],[30.04278,50.4021],[30.06585,50.41148],[30.09316,50.41802],[30.1125,50.42566],[30.14053,50.42881],[30.14208,50.42679],[30.15564,50.41857],[30.15873,50.41298],[30.17595,50.41174],[30.19398,50.41646],[30.21435,50.42566],[30.23506,50.45035],[30.23438,50.45554],[30.24261,50.46466],[30.24948,50.47013],[30.24596,50.47733],[30.24628,50.48219],[30.24163,50.4928],[30.23789,50.50026],[30.23679,50.50597],[30.23335,50.50982],[30.23592,50.51239],[30.23174,50.5268],[30.23335,50.53615],[30.25143,50.54575],[30.2611,50.54742],[30.27532,50.54796],[30.28479,50.55289],[30.28419,50.56307],[30.28776,50.58796],[30.28484,50.59814],[30.34536,50.5954],[30.30222,50.61915],[30.27858,50.63171],[30.27406,50.63926],[30.27906,50.64839],[30.27666,50.65488],[30.27709,50.66197],[30.28364,50.66461],[30.29491,50.66841],[30.30539,50.68361],[30.31697,50.69812],[30.33019,50.71059],[30.34452,50.71427],[30.35156,50.71713],[30.34942,50.72251],[30.3616,50.72885],[30.36633,50.74328],[30.37351,50.74415],[30.41908,50.79577],[30.46372,50.92194],[30.46303,51.01321],[30.50354,51.09653],[30.50079,51.16764],[30.53243,51.21674],[30.54462,51.26339],[30.50023,51.28085],[30.45581,51.27385],[30.45159,51.2823],[30.45963,51.29949],[30.4197,51.30802],[30.32901,51.35941],[30.35748,51.37489],[30.34807,51.4244],[30.28393,51.46745],[30.18073,51.51146],[30.16348,51.4937],[30.14227,51.49703],[30.11371,51.48774],[30.05338,51.49816],[30.03032,51.5031],[29.99096,51.48367],[29.99079,51.48287]]]}},{type:"Feature",properties:{nearestId:"c9313e7a9be58d35989dba80b096bd8c",originalId:"c9313e7a9be58d35989dba80b096bd8c",id:"ea4e39bd84ece4c13b6ce01e3ce76085",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[32.38291,46.980509999999995]}},oldPointsMap:[[32.47875,46.81412],[32.61882,46.85219],[32.74845,46.85734],[32.76707,46.9356],[32.77064,46.99014],[32.76940265622717,47.05127693386435],[32.76216,47.06153],[32.66380236289605,47.10599616460093],[32.76216,47.06153],[32.79497,47.09067],[32.83062,47.10121],[32.73844,47.1135],[32.60247,47.09983],[32.41196,47.06302],[32.35062,47.05905],[32.26524,47.0522],[32.22313,47.09459],[32.26913,47.14412],[32.34467,47.21148],[32.39868,47.29289],[32.43233,47.33494],[32.37259,47.36362],[32.29683,47.35074],[32.27692,47.32314],[32.24648,47.27534],[32.22061,47.19065],[32.20963,47.12746],[32.17438,47.08805],[32.14783,47.03238],[32.09518,47.05391],[32.06543,47.0327],[32.09929,47.00976],[32.13753,46.97619],[32.1476,46.9326],[32.15446,46.91009],[32.17415,46.86223],[32.13135,46.83984],[31.9352,46.7789],[31.94046,46.73343],[31.97021,46.67049],[32.00821,46.60684],[32.1064,46.5974],[32.13049,46.61212],[32.12849358314758,46.61636959072785],[32.123563764901434,46.64467685717692],[32.206818222073295,46.708396869206766],[32.22949,46.7131],[32.24023798506284,46.728847333543506],[32.27647,46.74771],[32.34196,46.78379],[32.37022,46.80242],[32.44048,46.79165],[32.47875,46.81412]]},geometry:{type:"Polygon",coordinates:[[[32.47875,46.81412],[32.61882,46.85219],[32.74845,46.85734],[32.76707,46.9356],[32.77064,46.99014],[32.68902,47.02496],[32.67562,47.04231],[32.67235,47.06642],[32.72594,47.06811],[32.79497,47.09067],[32.83062,47.10121],[32.73844,47.1135],[32.60247,47.09983],[32.41196,47.06302],[32.35062,47.05905],[32.26524,47.0522],[32.22313,47.09459],[32.26913,47.14412],[32.34467,47.21148],[32.39868,47.29289],[32.43233,47.33494],[32.37259,47.36362],[32.29683,47.35074],[32.27692,47.32314],[32.24648,47.27534],[32.22061,47.19065],[32.20963,47.12746],[32.17438,47.08805],[32.14783,47.03238],[32.09518,47.05391],[32.06543,47.0327],[32.09929,47.00976],[32.13753,46.97619],[32.1476,46.9326],[32.15446,46.91009],[32.17415,46.86223],[32.13135,46.83984],[31.9352,46.7789],[31.94046,46.73343],[31.97021,46.67049],[32.00821,46.60684],[32.1064,46.5974],[32.13049,46.61212],[32.15014,46.62117],[32.17318,46.64371],[32.22546,46.66619],[32.24947,46.69162],[32.2662,46.72053],[32.27647,46.74771],[32.34196,46.78379],[32.37022,46.80242],[32.44048,46.79165],[32.47875,46.81412]]]}},{type:"Feature",properties:{nearestId:"8a27baa3a41f8edca0b19506e1d41a09",originalId:"8a27baa3a41f8edca0b19506e1d41a09",id:"061027cf5906113ae19884e5c340008e",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[33.187305,51.15667]}},oldPointsMap:[[34.09059,51.67073],[34.16337,51.69118],[34.27461,51.7065],[34.3213,51.72268],[34.38722,51.71927],[34.44078,51.74565],[34.41194,51.79326],[34.39958,51.83657],[34.32817,51.88069],[34.24165,51.92053],[34.14826,51.90528],[34.06587,51.87984],[33.96974,51.83402],[33.84339,51.78051],[33.72804,51.75245],[33.58659,51.71161],[33.44788,51.65369],[33.41767,51.58716],[33.40119,51.55642],[33.41355,51.54105],[33.36411,51.52053],[33.30781,51.51284],[33.2364,51.47863],[33.07984,51.43497],[32.9535,51.39642],[32.89033,51.37155],[32.81205,51.33809],[32.7063,51.3113],[32.47558,51.26535],[32.32246,51.22538],[32.05604,51.18106],[31.66992,51.15437],[31.27737,51.11657],[31.12674,51.13267],[31.1254,51.08242],[31.10527,50.93404],[31.07048,50.9121],[30.99289,50.81895],[30.98122,50.77817],[31.07483,50.75556],[31.04965,50.70517],[31.36002,50.7191],[31.5358,50.79828],[31.59805,50.97399],[31.55136,51.10093],[31.68045,51.11732],[31.94893,51.1212],[32.49481,51.17848],[32.64038,51.19957],[32.8141,51.2086],[32.92054,51.19799],[33.00294,51.17301],[33.1128,51.13165],[33.18421,51.11786],[33.28411,51.06923],[33.34797,51.03017],[33.43483,50.91407],[33.48839,50.84974],[33.21625,50.82414],[33.09906,50.80678],[33.06713,50.73037],[32.81548,50.68297],[32.63935,50.65969],[32.47742,50.62565],[32.33276,50.66223],[32.22473,50.64075],[32.09106,50.61171],[31.89148,50.6303],[31.67542,50.60736],[31.50833,50.60067],[31.42159,50.61099],[31.37833,50.64017],[31.35979,50.71962],[31.05057,50.70513],[30.97115,50.63901],[31.02219,50.62405],[31.07254,50.59223],[31.13823,50.55691],[31.15173,50.51997],[31.20392,50.47265],[31.25633,50.47729],[31.40167,50.48738],[31.45958,50.48942],[31.50993,50.50456],[31.66969,50.55534],[31.82671,50.56842],[32.07458,50.5812],[32.22931,50.60503],[32.34192,50.63437],[32.46002,50.58702],[32.547,50.6059],[32.6572,50.61396],[32.79625,50.64794],[33.01598,50.68885],[33.43895,50.73124],[33.48324,50.7521],[33.53073,50.77634],[33.5828,50.78909],[33.58383,50.8123],[33.5717,50.88727],[33.6763,50.88686],[33.78502,50.88758],[33.84109,50.85163],[33.89854,50.84873],[33.95714,50.84423],[33.94958,50.90358],[33.94157,50.94845],[33.95187,50.97801],[33.9061,51.00254],[33.72665,51.04284],[33.58063,51.08943],[33.56805,51.14587],[33.67242,51.15363],[33.81249,51.14243],[33.98004,51.10621],[34.05145,51.08637],[34.20388,51.06997],[34.35494,51.06047],[34.41055,51.0025],[34.52248,50.99342],[34.60602,50.96145],[34.65317,50.92931],[34.73534,50.93147],[34.74014,50.96921],[34.83765,50.96575],[34.89395,50.89044],[34.80698,50.86636],[34.67972,50.85162],[34.62982,50.78944],[34.59457,50.71907],[34.55017,50.58353],[34.64905,50.63407],[34.69849,50.76252],[34.77631,50.81866],[34.89624,50.73356],[34.92645,50.67732],[34.92737,50.53758],[34.77905,50.49726],[34.7818,50.41304],[34.87564,50.41449],[34.93927,50.39281],[35.02075,50.53176],[35.0798,50.67964],[35.08621,50.83754],[35.18098,50.93078],[35.31282,50.93597],[35.35402,50.9827],[35.40346,51.02679],[35.31282,51.07774],[35.2057,51.05788],[35.15214,51.08033],[35.16588,51.1226],[35.11918,51.17947],[35.13978,51.22337],[35.07936,51.23112],[35.04091,51.20702],[34.97087,51.24402],[34.8816,51.19239],[34.81569,51.17689],[34.70445,51.16655],[34.67286,51.20034],[34.65638,51.24766],[34.60144,51.25325],[34.58016,51.22874],[34.54789,51.25454],[34.51493,51.24551],[34.45244,51.25669],[34.38172,51.27639],[34.32679,51.2402],[34.2334,51.26771],[34.26911,51.30466],[34.32267,51.34758],[34.2952,51.39132],[34.24439,51.40161],[34.254,51.46071],[34.29108,51.4975],[34.2952,51.54109],[34.20319,51.5966],[34.12491,51.66141],[34.09059,51.67073]]},geometry:{type:"Polygon",coordinates:[[[34.09059,51.67073],[34.16337,51.69118],[34.27461,51.7065],[34.3213,51.72268],[34.38722,51.71927],[34.44078,51.74565],[34.41194,51.79326],[34.39958,51.83657],[34.32817,51.88069],[34.24165,51.92053],[34.14826,51.90528],[34.06587,51.87984],[33.96974,51.83402],[33.84339,51.78051],[33.72804,51.75245],[33.58659,51.71161],[33.44788,51.65369],[33.41767,51.58716],[33.40119,51.55642],[33.41355,51.54105],[33.36411,51.52053],[33.30781,51.51284],[33.2364,51.47863],[33.07984,51.43497],[32.9535,51.39642],[32.89033,51.37155],[32.81205,51.33809],[32.7063,51.3113],[32.47558,51.26535],[32.32246,51.22538],[32.05604,51.18106],[31.66992,51.15437],[31.27737,51.11657],[31.12674,51.13267],[31.1254,51.08242],[31.10527,50.93404],[31.07048,50.9121],[30.99289,50.81895],[30.98122,50.77817],[31.07483,50.75556],[31.04965,50.70517],[31.36002,50.7191],[31.5358,50.79828],[31.59805,50.97399],[31.55136,51.10093],[31.68045,51.11732],[31.94893,51.1212],[32.49481,51.17848],[32.64038,51.19957],[32.8141,51.2086],[32.92054,51.19799],[33.00294,51.17301],[33.1128,51.13165],[33.18421,51.11786],[33.28411,51.06923],[33.34797,51.03017],[33.43483,50.91407],[33.48839,50.84974],[33.21625,50.82414],[33.09906,50.80678],[33.06713,50.73037],[32.81548,50.68297],[32.63935,50.65969],[32.47742,50.62565],[32.33276,50.66223],[32.22473,50.64075],[32.09106,50.61171],[31.89148,50.6303],[31.67542,50.60736],[31.50833,50.60067],[31.42159,50.61099],[31.37833,50.64017],[31.35979,50.71962],[31.05057,50.70513],[30.97115,50.63901],[31.02219,50.62405],[31.07254,50.59223],[31.13823,50.55691],[31.15173,50.51997],[31.20392,50.47265],[31.25633,50.47729],[31.40167,50.48738],[31.45958,50.48942],[31.50993,50.50456],[31.66969,50.55534],[31.82671,50.56842],[32.07458,50.5812],[32.22931,50.60503],[32.34192,50.63437],[32.46002,50.58702],[32.547,50.6059],[32.6572,50.61396],[32.79625,50.64794],[33.01598,50.68885],[33.43895,50.73124],[33.48324,50.7521],[33.53073,50.77634],[33.5828,50.78909],[33.58383,50.8123],[33.5717,50.88727],[33.6763,50.88686],[33.78502,50.88758],[33.84109,50.85163],[33.89854,50.84873],[33.95714,50.84423],[33.94958,50.90358],[33.94157,50.94845],[33.95187,50.97801],[33.9061,51.00254],[33.72665,51.04284],[33.58063,51.08943],[33.56805,51.14587],[33.67242,51.15363],[33.81249,51.14243],[33.98004,51.10621],[34.05145,51.08637],[34.20388,51.06997],[34.35494,51.06047],[34.41055,51.0025],[34.52248,50.99342],[34.60602,50.96145],[34.65317,50.92931],[34.73534,50.93147],[34.74014,50.96921],[34.83765,50.96575],[34.89395,50.89044],[34.80698,50.86636],[34.67972,50.85162],[34.62982,50.78944],[34.59457,50.71907],[34.55017,50.58353],[34.64905,50.63407],[34.69849,50.76252],[34.77631,50.81866],[34.89624,50.73356],[34.92645,50.67732],[34.92737,50.53758],[34.77905,50.49726],[34.7818,50.41304],[34.87564,50.41449],[34.93927,50.39281],[35.02075,50.53176],[35.0798,50.67964],[35.08621,50.83754],[35.18098,50.93078],[35.31282,50.93597],[35.35402,50.9827],[35.40346,51.02679],[35.31282,51.07774],[35.2057,51.05788],[35.15214,51.08033],[35.16588,51.1226],[35.11918,51.17947],[35.13978,51.22337],[35.07936,51.23112],[35.04091,51.20702],[34.97087,51.24402],[34.8816,51.19239],[34.81569,51.17689],[34.70445,51.16655],[34.67286,51.20034],[34.65638,51.24766],[34.60144,51.25325],[34.58016,51.22874],[34.54789,51.25454],[34.51493,51.24551],[34.45244,51.25669],[34.38172,51.27639],[34.32679,51.2402],[34.2334,51.26771],[34.26911,51.30466],[34.32267,51.34758],[34.2952,51.39132],[34.24439,51.40161],[34.254,51.46071],[34.29108,51.4975],[34.2952,51.54109],[34.20319,51.5966],[34.12491,51.66141],[34.09059,51.67073]]]}},{type:"Feature",properties:{nearestId:"d014f5ab9d88952d7d9b67c040ea8dd3",originalId:"d014f5ab9d88952d7d9b67c040ea8dd3",id:"2446b43a008f7d84c2457f4d89bc900a",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[30.887435,51.714695]}},oldPointsMap:[[30.90455,51.99318],[30.87983,51.97287],[30.84961,51.96695],[30.79194,51.93901],[30.82627,51.92376],[30.81391,51.9085],[30.74844,51.90022],[30.66628,51.83085],[30.63629,51.77835],[30.63652,51.75679],[30.62782,51.73469],[30.57604,51.6973],[30.54915,51.63761],[30.52151,51.59669],[30.54967,51.54095],[30.62075,51.46403],[30.58652,51.4415],[30.6354,51.39867],[30.65787,51.34333],[30.73758,51.34778],[30.83433,51.32469],[30.96004,51.38071],[31.19467,51.34261],[31.23881,51.36372],[31.19098,51.47096],[31.20308,51.5483],[31.2259,51.62369],[31.18882,51.79479],[31.20805,51.86781],[31.24512,51.95933],[31.25336,52.03883],[31.18333,52.07093],[31.09406,52.1047],[31.01443,52.0655],[30.90455,51.99318]]},geometry:{type:"Polygon",coordinates:[[[30.90455,51.99318],[30.87983,51.97287],[30.84961,51.96695],[30.79194,51.93901],[30.82627,51.92376],[30.81391,51.9085],[30.74844,51.90022],[30.66628,51.83085],[30.63629,51.77835],[30.63652,51.75679],[30.62782,51.73469],[30.57604,51.6973],[30.54915,51.63761],[30.52151,51.59669],[30.54967,51.54095],[30.62075,51.46403],[30.58652,51.4415],[30.6354,51.39867],[30.65787,51.34333],[30.73758,51.34778],[30.83433,51.32469],[30.96004,51.38071],[31.19467,51.34261],[31.23881,51.36372],[31.19098,51.47096],[31.20308,51.5483],[31.2259,51.62369],[31.18882,51.79479],[31.20805,51.86781],[31.24512,51.95933],[31.25336,52.03883],[31.18333,52.07093],[31.09406,52.1047],[31.01443,52.0655],[30.90455,51.99318]]]}},{type:"Feature",properties:{nearestId:"62c315a647a2c3ae3cfb43c2fee7b7b4",originalId:"62c315a647a2c3ae3cfb43c2fee7b7b4",id:"812621f9edcdf8bbea38530e551478e7",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[32.373335,51.94467]}},oldPointsMap:[[31.96279,52.04324],[31.92499,52.0943],[31.81898,52.09647],[31.7928,52.10834],[31.78877,52.11008],[31.78465,52.11229],[31.77864,52.11134],[31.77092,52.11071],[31.7292,52.09744],[31.71581,52.10798],[31.6983,52.10608],[31.65882,52.11663],[31.61247,52.1122],[31.53008,52.12337],[31.49506,52.11367],[31.47205,52.11937],[31.44047,52.13686],[31.41712,52.14255],[31.44871,52.05861],[31.45008,51.98551],[31.4415,51.82305],[31.43772,51.70959],[31.4645,51.66468],[31.44928,51.52161],[31.80634,51.55031],[32.05673,51.55059],[32.16019,51.54521],[32.24075,51.55147],[32.45245,51.57326],[32.70694,51.67376],[32.91476,51.79562],[33.10278,51.92403],[33.20555,52.00479],[33.32702,52.19285],[33.32955,52.36531],[33.19881,52.36773],[33.04098,52.31308],[32.95139,52.26018],[32.85691,52.24907],[32.70903,52.26288],[32.52643,52.3243],[32.35912,52.3382],[32.37109,52.26185],[32.35032,52.23569],[32.32356,52.12833],[32.10688,52.04118],[31.96279,52.04324]]},geometry:{type:"Polygon",coordinates:[[[31.96279,52.04324],[31.92499,52.0943],[31.81898,52.09647],[31.7928,52.10834],[31.78877,52.11008],[31.78465,52.11229],[31.77864,52.11134],[31.77092,52.11071],[31.7292,52.09744],[31.71581,52.10798],[31.6983,52.10608],[31.65882,52.11663],[31.61247,52.1122],[31.53008,52.12337],[31.49506,52.11367],[31.47205,52.11937],[31.44047,52.13686],[31.41712,52.14255],[31.44871,52.05861],[31.45008,51.98551],[31.4415,51.82305],[31.43772,51.70959],[31.4645,51.66468],[31.44928,51.52161],[31.80634,51.55031],[32.05673,51.55059],[32.16019,51.54521],[32.24075,51.55147],[32.45245,51.57326],[32.70694,51.67376],[32.91476,51.79562],[33.10278,51.92403],[33.20555,52.00479],[33.32702,52.19285],[33.32955,52.36531],[33.19881,52.36773],[33.04098,52.31308],[32.95139,52.26018],[32.85691,52.24907],[32.70903,52.26288],[32.52643,52.3243],[32.35912,52.3382],[32.37109,52.26185],[32.35032,52.23569],[32.32356,52.12833],[32.10688,52.04118],[31.96279,52.04324]]]}},{type:"Feature",properties:{nearestId:"1be1dde4436f80be3c36c851586728fd",originalId:"1be1dde4436f80be3c36c851586728fd",id:"107c07c661afa56feb5db7543e735fd6",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[35.77315,50.210494999999995]}},oldPointsMap:[[35.57099,50.45468],[35.45975,50.50014],[35.41855,50.56214],[35.3856,50.58134],[35.34714,50.57872],[35.28672,50.54643],[35.2597,50.47703],[35.1796,50.4398],[35.1178,50.38202],[35.056,50.34697],[34.87106,50.41523],[34.78683,50.41448],[34.70581,50.37846],[34.69597,50.34093],[34.75891,50.27062],[34.82437,50.25921],[34.83765,50.31799],[34.89441,50.35773],[34.93515,50.31799],[34.8999,50.27998],[35.02167,50.23696],[35.14252,50.28995],[35.21943,50.27678],[35.40161,50.3733],[35.42862,50.40632],[35.49545,50.3975],[35.60875,50.33945],[35.66734,50.31857],[35.76416,50.28978],[35.80193,50.28846],[35.8271,50.2984],[35.92415,50.29139],[35.9951,50.29212],[36.04202,50.25584],[36.11607,50.2103],[36.1377,50.17794],[36.1615,50.16357],[36.24058,50.15718],[36.25534,50.13458],[36.29608,50.12659],[36.3176,50.13386],[36.35583,50.11364],[36.3474,50.09517],[36.34832,50.08025],[36.3729,50.04985],[36.41418,50.0323],[36.39988,50.01098],[36.41991,49.96904],[36.43547,49.9387],[36.47324,49.90629],[36.53549,49.88123],[36.62132,49.86886],[36.6774,49.83965],[36.70429,49.86197],[36.67145,49.88041],[36.58287,49.91718],[36.52245,49.96955],[36.53984,49.9842],[36.56055,50.00855],[36.63824,50.04294],[36.79573,50.05905],[36.80395,50.06595],[36.80539,50.08273],[36.80664,50.09976],[36.81441,50.13069],[36.81634,50.14389],[36.82842,50.15464],[36.85033,50.15838],[36.84716,50.17035],[36.8416,50.17519],[36.8386,50.18126],[36.79721,50.19819],[36.76707,50.2067],[36.74333,50.20739],[36.71822,50.19084],[36.71783,50.17631],[36.70966,50.15738],[36.66835,50.1705],[36.62454,50.19115],[36.59609,50.18148],[36.55586,50.18723],[36.53113,50.18444],[36.51991,50.17535],[36.50479,50.16308],[36.48055,50.15836],[36.45164,50.16924],[36.42818,50.16912],[36.39071,50.17072],[36.34684,50.18509],[36.31688,50.18436],[36.29551,50.19711],[36.28344,50.21013],[36.28953,50.23377],[36.25332,50.23606],[36.24225,50.24209],[36.20663,50.25008],[36.15757,50.26749],[36.13182,50.29136],[36.15616,50.322],[36.17515719747096,50.34334399202657],[36.182710059275244,50.35182988697896],[36.1821,50.39926],[36.1512,50.4264],[36.09078,50.44915],[35.99122,50.43721],[35.89783,50.43546],[35.87174,50.42408],[35.82368,50.43021],[35.79484,50.40395],[35.74814,50.35927],[35.62043,50.35401],[35.60989,50.36898],[35.58472,50.4057],[35.57099,50.45468]]},geometry:{type:"Polygon",coordinates:[[[35.57099,50.45468],[35.45975,50.50014],[35.41855,50.56214],[35.3856,50.58134],[35.34714,50.57872],[35.28672,50.54643],[35.2597,50.47703],[35.1796,50.4398],[35.1178,50.38202],[35.056,50.34697],[34.87106,50.41523],[34.78683,50.41448],[34.70581,50.37846],[34.69597,50.34093],[34.75891,50.27062],[34.82437,50.25921],[34.83765,50.31799],[34.89441,50.35773],[34.93515,50.31799],[34.8999,50.27998],[35.02167,50.23696],[35.14252,50.28995],[35.21943,50.27678],[35.40161,50.3733],[35.42862,50.40632],[35.49545,50.3975],[35.60875,50.33945],[35.66734,50.31857],[35.76416,50.28978],[35.80193,50.28846],[35.8271,50.2984],[35.92415,50.29139],[35.9951,50.29212],[36.04202,50.25584],[36.11607,50.2103],[36.1377,50.17794],[36.1615,50.16357],[36.24058,50.15718],[36.25534,50.13458],[36.29608,50.12659],[36.3176,50.13386],[36.35583,50.11364],[36.3474,50.09517],[36.34832,50.08025],[36.3729,50.04985],[36.41418,50.0323],[36.39988,50.01098],[36.41991,49.96904],[36.43547,49.9387],[36.47324,49.90629],[36.53549,49.88123],[36.62132,49.86886],[36.6774,49.83965],[36.70429,49.86197],[36.67145,49.88041],[36.58287,49.91718],[36.52245,49.96955],[36.53984,49.9842],[36.56055,50.00855],[36.63824,50.04294],[36.79573,50.05905],[36.80395,50.06595],[36.80539,50.08273],[36.80664,50.09976],[36.81441,50.13069],[36.81634,50.14389],[36.82842,50.15464],[36.85033,50.15838],[36.84716,50.17035],[36.8416,50.17519],[36.8386,50.18126],[36.79721,50.19819],[36.76707,50.2067],[36.74333,50.20739],[36.71822,50.19084],[36.71783,50.17631],[36.70966,50.15738],[36.66835,50.1705],[36.62454,50.19115],[36.59609,50.18148],[36.55586,50.18723],[36.53113,50.18444],[36.51991,50.17535],[36.50479,50.16308],[36.48055,50.15836],[36.45164,50.16924],[36.42818,50.16912],[36.39071,50.17072],[36.34684,50.18509],[36.31688,50.18436],[36.29551,50.19711],[36.28344,50.21013],[36.28953,50.23377],[36.25332,50.23606],[36.24225,50.24209],[36.20663,50.25008],[36.15757,50.26749],[36.13182,50.29136],[36.15616,50.322],[36.17519,50.34334],[36.17497,50.35465],[36.16804,50.38195],[36.1512,50.4264],[36.09078,50.44915],[35.99122,50.43721],[35.89783,50.43546],[35.87174,50.42408],[35.82368,50.43021],[35.79484,50.40395],[35.74814,50.35927],[35.62043,50.35401],[35.60989,50.36898],[35.58472,50.4057],[35.57099,50.45468]]]}},{type:"Feature",properties:{nearestId:"fc84bf11d24c16b4f37eb19f4af3a8c6",originalId:"fc84bf11d24c16b4f37eb19f4af3a8c6",id:"9772526b4cec1244fdd320097e16f0d2",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[37.633095,49.85761]}},oldPointsMap:[[37.61936,49.84566],[37.64683,49.86956],[37.61936,49.84566]]},geometry:{type:"Polygon",coordinates:[[[37.61936,49.84566],[37.64683,49.86956],[37.61936,49.84566]]]}},{type:"Feature",properties:{nearestId:"1ea55d480bbda4a3141f497ffe0bd1f9",originalId:"1ea55d480bbda4a3141f497ffe0bd1f9",id:"cf8bc65f5db2ec1dfe142379bbf7a3be",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[33.48071,47.366865000000004]}},oldPointsMap:[[33.36021409035169,47.41500000886587],[33.363510447176864,47.409414280693625],[33.35757937959376,47.41946456743364],[33.352610600952694,47.42788424051788],[33.35002295679438,47.43226904399681],[33.39196112069916,47.47900840494593],[33.410638144561,47.48177675871069],[33.434587110525285,47.48532653251724],[33.53632268565847,47.462487736675385],[33.54944949478403,47.44534449738987],[33.55490631504352,47.420615135433565],[33.55431,47.41787],[33.58486,47.41252],[33.68477,47.42762],[33.77712,47.43389],[33.8245,47.39812],[33.9402,47.40393],[33.96423,47.40695],[33.95908,47.46408],[33.95153,47.52323],[33.94123,47.55127],[33.92063,47.5668],[33.87016,47.55753],[33.77256,47.52784],[33.69644,47.51071],[33.62709,47.51279],[33.57868,47.53946],[33.57353,47.56193],[33.52375,47.56193],[33.48358,47.55776],[33.41483,47.53646],[33.34616,47.52626],[33.33037,47.55454],[33.27003,47.56054],[33.23673,47.53065],[33.25012,47.48798],[33.24346,47.45468],[33.20913,47.44981],[33.20844,47.42333],[33.20068,47.37766],[33.17489,47.33122],[33.06185,47.293],[33.01935,47.26052],[32.99719,47.22554],[33.00656,47.19563],[33.02529,47.17711],[33.02529,47.17711],[33.07652,47.17135],[33.08088275304262,47.16993312459597],[33.13444626700133,47.19127717397426],[33.14632,47.19232],[33.14616573636837,47.193044254677325],[33.20944497454256,47.209663733570096],[33.21120825521651,47.23675044888986],[33.205391024800676,47.25534149356629],[33.19641,47.27088],[33.20726,47.28206],[33.22942,47.29243],[33.2544,47.28567],[33.27192,47.29435],[33.27374,47.30209],[33.27172,47.30637],[33.24933,47.30687],[33.23723,47.31275],[33.23392,47.32127],[33.25129,47.33516],[33.28372,47.32109],[33.29731,47.32467],[33.29112,47.33701],[33.2847,47.34419],[33.28992,47.35768],[33.29853,47.36859],[33.31638,47.36859],[33.34007,47.36534],[33.35758,47.36952],[33.37029,47.38278],[33.36405,47.4085],[33.36021409035169,47.41500000886587]]},geometry:{type:"Polygon",coordinates:[[[33.37299,47.41846],[33.39294,47.41738],[33.39059,47.42839],[33.38345,47.43622],[33.38772,47.44246],[33.40209,47.44798],[33.42533,47.43671],[33.4517,47.43281],[33.46927,47.43648],[33.50643,47.43139],[33.53147,47.42295],[33.55431,47.41787],[33.58486,47.41252],[33.68477,47.42762],[33.77712,47.43389],[33.8245,47.39812],[33.9402,47.40393],[33.96423,47.40695],[33.95908,47.46408],[33.95153,47.52323],[33.94123,47.55127],[33.92063,47.5668],[33.87016,47.55753],[33.77256,47.52784],[33.69644,47.51071],[33.62709,47.51279],[33.57868,47.53946],[33.57353,47.56193],[33.52375,47.56193],[33.48358,47.55776],[33.41483,47.53646],[33.34616,47.52626],[33.33037,47.55454],[33.27003,47.56054],[33.23673,47.53065],[33.25012,47.48798],[33.24346,47.45468],[33.20913,47.44981],[33.20844,47.42333],[33.20068,47.37766],[33.17489,47.33122],[33.06185,47.293],[33.01935,47.26052],[32.99719,47.22554],[33.00656,47.19563],[33.02529,47.17711],[33.04079,47.16789],[33.07268,47.16693],[33.0814,47.1707],[33.13748,47.1753],[33.15707,47.18876],[33.17382,47.19577],[33.18169,47.20865],[33.18382,47.23795],[33.19692,47.25309],[33.19641,47.27088],[33.20726,47.28206],[33.22942,47.29243],[33.2544,47.28567],[33.27192,47.29435],[33.27374,47.30209],[33.27172,47.30637],[33.24933,47.30687],[33.23723,47.31275],[33.23392,47.32127],[33.25129,47.33516],[33.28372,47.32109],[33.29731,47.32467],[33.29112,47.33701],[33.2847,47.34419],[33.28992,47.35768],[33.29853,47.36859],[33.31638,47.36859],[33.34007,47.36534],[33.35758,47.36952],[33.37029,47.38278],[33.36405,47.4085],[33.37299,47.41846]]]}},{type:"Feature",properties:{nearestId:"ead4cec2e800e6e74d25924781fabb15",originalId:"ead4cec2e800e6e74d25924781fabb15",id:"e14758048d25803bf110dad1cd06ff38",fill:"#345995","fill-opacity":"0.25",stroke:"#0000FF","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[30.20451,45.254104999999996]}},oldPointsMap:[[29.90825,46.55109],[29.916619866152633,46.55198636200101],[29.930009498623676,46.55342031058939],[29.90825,46.55109],[29.90825,46.55109]]},geometry:{type:"Polygon",coordinates:[[[30.187,45.24492],[30.21378,45.24202],[30.22202,45.26619],[30.19318,45.26426],[30.187,45.24492]]]}},{type:"Feature",properties:{nearestId:"e1f760773de07be9a6099656c33d5233",originalId:"e1f760773de07be9a6099656c33d5233",id:"f616a2d410a5678dfaba2b4214549bd4",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[37.282525,47.389714999999995]}},oldPointsMap:[[37.07173,46.86831],[37.2317,46.93271],[37.26595,46.938],[37.29887,46.92024],[37.31235,46.89448],[37.31206,46.88607],[37.29225,46.87198],[37.28432,46.87506],[37.27967,46.87118],[37.28559,46.86588],[37.29494,46.86302],[37.32837,46.87621],[37.3965,46.94542],[37.46835,47.00798],[37.51692,47.05632],[37.55848,47.08237],[37.56935,47.08301],[37.57569,47.08155],[37.58727,47.07672],[37.59385,47.07612],[37.60354,47.08185],[37.61624,47.08516],[37.62273,47.08783],[37.62691,47.09294],[37.65432,47.08877],[37.68562,47.08151],[37.71023,47.07889],[37.74851,47.08474],[37.77191,47.08828],[37.78267,47.08692],[37.79325,47.084],[37.81606,47.09038],[37.8358,47.09905],[37.85168,47.10395],[37.84919,47.11027],[37.85108,47.11553],[37.8467,47.11769],[37.84567,47.12575],[37.83434,47.12639],[37.82722,47.12931],[37.82687,47.13474],[37.82121,47.13614],[37.82292,47.15085],[37.82318,47.15873],[37.81795,47.16551],[37.80147,47.17508],[37.80301,47.18154],[37.82893,47.18639],[37.84464,47.18942],[37.85228,47.19724],[37.84369,47.2012],[37.83923,47.21847],[37.82747,47.22581],[37.8273,47.23652],[37.83348,47.25541],[37.83159,47.267],[37.82249,47.27608],[37.80979,47.2836],[37.79903,47.28862],[37.80706,47.30474],[37.80759,47.30482],[37.81477,47.30643],[37.82324,47.30834],[37.82839,47.30395],[37.83159,47.29918],[37.84527,47.30896],[37.82764,47.32137],[37.8352,47.34208],[37.85316,47.34107],[37.86475,47.34739],[37.8594,47.35724],[37.84687,47.35115],[37.84195,47.35735],[37.855,47.36456],[37.84229,47.37379],[37.8511,47.38572],[37.86095,47.38913],[37.85957,47.40873],[37.86175,47.42708],[37.86861,47.43351],[37.86896,47.45069],[37.89139,47.47135],[37.88544,47.48829],[37.85088,47.51651],[37.8399,47.53552],[37.83749,47.54711],[37.83543,47.56934],[37.84402,47.58486],[37.84367,47.59667],[37.86221,47.60824],[37.8708,47.61889],[37.87183,47.63323],[37.85294,47.63185],[37.81689,47.64041],[37.77672,47.66261],[37.76539,47.66585],[37.75647,47.66446],[37.75246,47.67348],[37.72748,47.6856],[37.72185,47.68636],[37.71041,47.68995],[37.7037,47.68922],[37.69574,47.68937],[37.68186,47.68418],[37.65892,47.68545],[37.63961,47.69814],[37.63676,47.70044],[37.63225,47.70499],[37.63087,47.7109],[37.62857,47.71755],[37.62356,47.73067],[37.62441,47.75155],[37.61912,47.77081],[37.62083,47.78268],[37.62722,47.79232],[37.63578,47.80031],[37.64677,47.82168],[37.64768,47.82865],[37.64626,47.8349],[37.64114,47.85378],[37.64588,47.8644],[37.623,47.89974],[37.61069,47.90307],[37.58805,47.90912],[37.56833,47.90972],[37.54613,47.91641],[37.54217,47.85702],[37.51873,47.84972],[37.52754,47.82994],[37.506,47.80046],[37.50471,47.78258],[37.50276,47.77078],[37.49447,47.73756],[37.49051,47.72162],[37.48395,47.69789],[37.47678,47.67408],[37.43103,47.68149],[37.42601,47.6857],[37.41939,47.68939],[37.41351,47.69735],[37.40526,47.70984],[37.39816,47.71862],[37.39815,47.72874],[37.37403,47.74043],[37.33336,47.7479],[37.31042,47.73976],[37.2799,47.72605],[37.24442,47.71905],[37.24138,47.70754],[37.2347,47.69768],[37.20601,47.69676],[37.16073,47.70233],[37.11585,47.7035],[37.05801,47.69766],[37.03513,47.71657],[37.00477,47.73887],[36.98715,47.75357],[36.95172,47.76073],[36.92549,47.77849],[36.8903,47.79746],[36.85003,47.80218],[36.80793,47.80946],[36.78924,47.81294],[36.78565,47.82332],[36.77277,47.83155],[36.74459,47.82479],[36.6879,47.81894],[36.67366,47.80558],[36.67808,47.78172],[36.73002,47.7602],[36.77064,47.73991],[36.73338,47.6998],[36.71088,47.67996],[37.07198,46.86833],[37.07173,46.86831]]},geometry:{type:"Polygon",coordinates:[[[37.07173,46.86831],[37.2317,46.93271],[37.26595,46.938],[37.29887,46.92024],[37.31235,46.89448],[37.31206,46.88607],[37.29225,46.87198],[37.28432,46.87506],[37.27967,46.87118],[37.28559,46.86588],[37.29494,46.86302],[37.32837,46.87621],[37.3965,46.94542],[37.46835,47.00798],[37.51692,47.05632],[37.55848,47.08237],[37.56935,47.08301],[37.57569,47.08155],[37.58727,47.07672],[37.59385,47.07612],[37.60354,47.08185],[37.61624,47.08516],[37.62273,47.08783],[37.62691,47.09294],[37.65432,47.08877],[37.68562,47.08151],[37.71023,47.07889],[37.74851,47.08474],[37.77191,47.08828],[37.78267,47.08692],[37.79325,47.084],[37.81606,47.09038],[37.8358,47.09905],[37.85168,47.10395],[37.84919,47.11027],[37.85108,47.11553],[37.8467,47.11769],[37.84567,47.12575],[37.83434,47.12639],[37.82722,47.12931],[37.82687,47.13474],[37.82121,47.13614],[37.82292,47.15085],[37.82318,47.15873],[37.81795,47.16551],[37.80147,47.17508],[37.80301,47.18154],[37.82893,47.18639],[37.84464,47.18942],[37.85228,47.19724],[37.84369,47.2012],[37.83923,47.21847],[37.82747,47.22581],[37.8273,47.23652],[37.83348,47.25541],[37.83159,47.267],[37.82249,47.27608],[37.80979,47.2836],[37.79903,47.28862],[37.80706,47.30474],[37.80759,47.30482],[37.81477,47.30643],[37.82324,47.30834],[37.82839,47.30395],[37.83159,47.29918],[37.84527,47.30896],[37.82764,47.32137],[37.8352,47.34208],[37.85316,47.34107],[37.86475,47.34739],[37.8594,47.35724],[37.84687,47.35115],[37.84195,47.35735],[37.855,47.36456],[37.84229,47.37379],[37.8511,47.38572],[37.86095,47.38913],[37.85957,47.40873],[37.86175,47.42708],[37.86861,47.43351],[37.86896,47.45069],[37.89139,47.47135],[37.88544,47.48829],[37.85088,47.51651],[37.8399,47.53552],[37.83749,47.54711],[37.83543,47.56934],[37.84402,47.58486],[37.84367,47.59667],[37.86221,47.60824],[37.8708,47.61889],[37.87183,47.63323],[37.85294,47.63185],[37.81689,47.64041],[37.77672,47.66261],[37.76539,47.66585],[37.75647,47.66446],[37.75246,47.67348],[37.72748,47.6856],[37.72185,47.68636],[37.71041,47.68995],[37.7037,47.68922],[37.69574,47.68937],[37.68186,47.68418],[37.65892,47.68545],[37.63961,47.69814],[37.63676,47.70044],[37.63225,47.70499],[37.63087,47.7109],[37.62857,47.71755],[37.62356,47.73067],[37.62441,47.75155],[37.61912,47.77081],[37.62083,47.78268],[37.62722,47.79232],[37.63578,47.80031],[37.64677,47.82168],[37.64768,47.82865],[37.64626,47.8349],[37.64114,47.85378],[37.64588,47.8644],[37.623,47.89974],[37.61069,47.90307],[37.58805,47.90912],[37.56833,47.90972],[37.54613,47.91641],[37.54217,47.85702],[37.51873,47.84972],[37.52754,47.82994],[37.506,47.80046],[37.50471,47.78258],[37.50276,47.77078],[37.49447,47.73756],[37.49051,47.72162],[37.48395,47.69789],[37.47678,47.67408],[37.43103,47.68149],[37.42601,47.6857],[37.41939,47.68939],[37.41351,47.69735],[37.40526,47.70984],[37.39816,47.71862],[37.39815,47.72874],[37.37403,47.74043],[37.33336,47.7479],[37.31042,47.73976],[37.2799,47.72605],[37.24442,47.71905],[37.24138,47.70754],[37.2347,47.69768],[37.20601,47.69676],[37.16073,47.70233],[37.11585,47.7035],[37.05801,47.69766],[37.03513,47.71657],[37.00477,47.73887],[36.98715,47.75357],[36.95172,47.76073],[36.92549,47.77849],[36.8903,47.79746],[36.85003,47.80218],[36.80793,47.80946],[36.78924,47.81294],[36.78565,47.82332],[36.77277,47.83155],[36.74459,47.82479],[36.6879,47.81894],[36.67366,47.80558],[36.67808,47.78172],[36.73002,47.7602],[36.77064,47.73991],[36.73338,47.6998],[36.71088,47.67996],[37.07198,46.86833],[37.07173,46.86831]]]}},{type:"Feature",properties:{nearestId:"6e6bd74c0012304ddc9f57bbe9564f3a",originalId:"6e6bd74c0012304ddc9f57bbe9564f3a",id:"079f397a3ac3f712061a823c2b398f12",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[37.838145,48.247175]}},oldPointsMap:[[37.84481,48.18783],[37.86541,48.19161],[37.88343,48.19264],[37.89803,48.19974],[37.90335,48.2106],[37.90781,48.21438],[37.92429,48.2225],[37.9291,48.22982],[37.94403,48.23576],[37.93013,48.24628],[37.92807,48.25074],[37.92772,48.25517],[37.93091,48.26248],[37.94291,48.27857],[37.9375,48.29061],[37.92186,48.29453],[37.91791,48.30236],[37.90383,48.30652],[37.86677,48.28355],[37.85998,48.28693],[37.85152,48.2865],[37.85346,48.28104],[37.85552,48.27592],[37.85148,48.26484],[37.84368,48.26338],[37.83472,48.26927],[37.82411,48.26974],[37.80627,48.27931],[37.78632,48.2782],[37.7807,48.26825],[37.78176,48.25868],[37.7946,48.25865],[37.80544,48.25553],[37.81104,48.24518],[37.81157,48.23749],[37.77096,48.24239],[37.73522,48.23207],[37.73226,48.22536],[37.73578,48.21657],[37.76101,48.21761],[37.80322,48.21446],[37.80913,48.20949],[37.81806,48.20251],[37.83334,48.19531],[37.84449,48.1881],[37.84481,48.18783]]},geometry:{type:"Polygon",coordinates:[[[37.84481,48.18783],[37.86541,48.19161],[37.88343,48.19264],[37.89803,48.19974],[37.90335,48.2106],[37.90781,48.21438],[37.92429,48.2225],[37.9291,48.22982],[37.94403,48.23576],[37.93013,48.24628],[37.92807,48.25074],[37.92772,48.25517],[37.93091,48.26248],[37.94291,48.27857],[37.9375,48.29061],[37.92186,48.29453],[37.91791,48.30236],[37.90383,48.30652],[37.86677,48.28355],[37.85998,48.28693],[37.85152,48.2865],[37.85346,48.28104],[37.85552,48.27592],[37.85148,48.26484],[37.84368,48.26338],[37.83472,48.26927],[37.82411,48.26974],[37.80627,48.27931],[37.78632,48.2782],[37.7807,48.26825],[37.78176,48.25868],[37.7946,48.25865],[37.80544,48.25553],[37.81104,48.24518],[37.81157,48.23749],[37.77096,48.24239],[37.73522,48.23207],[37.73226,48.22536],[37.73578,48.21657],[37.76101,48.21761],[37.80322,48.21446],[37.80913,48.20949],[37.81806,48.20251],[37.83334,48.19531],[37.84449,48.1881],[37.84481,48.18783]]]}},{type:"Feature",properties:{nearestId:"977a886197c5dd3f78f28d8bde9f2bf8",originalId:"977a886197c5dd3f78f28d8bde9f2bf8",id:"310e69d15ee6e86522ddd2685809bfb6",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[38.27917,48.500005]}},oldPointsMap:[[38.22196,48.38759],[38.22623,48.3843],[38.23008,48.38328],[38.23145,48.37907],[38.23692,48.37607],[38.24331,48.37329],[38.25771,48.37576],[38.28551,48.38285],[38.28413,48.38818],[38.2805,48.39125],[38.2828,48.39317],[38.28886,48.39321],[38.30193,48.39972],[38.30585,48.40147],[38.31391,48.4009],[38.32164,48.39999],[38.32542,48.40284],[38.32885,48.40432],[38.3364,48.40421],[38.34275,48.40387],[38.35104,48.40687],[38.35756,48.41097],[38.36237,48.41724],[38.37078,48.42442],[38.38108,48.42464],[38.39001,48.42419],[38.39653,48.42692],[38.39996,48.42977],[38.40237,48.43592],[38.40494,48.43638],[38.41026,48.43364],[38.41833,48.43228],[38.42297,48.43228],[38.4343,48.43603],[38.43361,48.44253],[38.43481,48.45095],[38.44048,48.45357],[38.44374,48.45277],[38.45078,48.45608],[38.45163,48.47338],[38.44776,48.48235],[38.44861,48.49554],[38.45351,48.50645],[38.46712,48.51525],[38.47018,48.52659],[38.48794,48.55339],[38.49478,48.56772],[38.50503,48.58317],[38.50624,48.59245],[38.50513,48.60553],[38.47754,48.6203],[38.4613,48.62672],[38.45958,48.6242],[38.4378,48.60513],[38.42546,48.60819],[38.38843,48.58975],[38.39482,48.57295],[38.39892,48.5376],[38.38377,48.53422],[38.37342,48.52477],[38.36234,48.53085],[38.35425,48.51889],[38.34273,48.52091],[38.33016,48.51491],[38.31811,48.50858],[38.31358,48.50633],[38.31091,48.50279],[38.30334,48.50091],[38.29585,48.49875],[38.29302,48.49033],[38.28293,48.48414],[38.26967,48.47429],[38.25783,48.46342],[38.25809,48.45653],[38.25629,48.45082],[38.25157,48.44741],[38.23753,48.45001],[38.209266632118734,48.45142847561575],[38.21393243052349,48.45119430956403],[38.20824,48.45148],[38.20824,48.45148],[38.20824,48.45148],[38.20824,48.45148],[38.2037,48.44516],[38.19650264105831,48.432125687603175],[38.19132,48.42274],[38.19132,48.42274],[38.19132,48.42274],[38.19132,48.42274],[38.19132,48.42274],[38.191416724488285,48.42235025720896],[38.19142125391543,48.422332006281934],[38.191684831645006,48.42126994307747],[38.19163682923324,48.42146336456018],[38.19264038389863,48.41741962958493],[38.19336,48.41452],[38.204,48.40706],[38.21338,48.40236],[38.21579,48.39888],[38.22095,48.39514],[38.22196,48.38759]]},geometry:{type:"Polygon",coordinates:[[[38.22196,48.38759],[38.22623,48.3843],[38.23008,48.38328],[38.23145,48.37907],[38.23692,48.37607],[38.24331,48.37329],[38.25771,48.37576],[38.28551,48.38285],[38.28413,48.38818],[38.2805,48.39125],[38.2828,48.39317],[38.28886,48.39321],[38.30193,48.39972],[38.30585,48.40147],[38.31391,48.4009],[38.32164,48.39999],[38.32542,48.40284],[38.32885,48.40432],[38.3364,48.40421],[38.34275,48.40387],[38.35104,48.40687],[38.35756,48.41097],[38.36237,48.41724],[38.37078,48.42442],[38.38108,48.42464],[38.39001,48.42419],[38.39653,48.42692],[38.39996,48.42977],[38.40237,48.43592],[38.40494,48.43638],[38.41026,48.43364],[38.41833,48.43228],[38.42297,48.43228],[38.4343,48.43603],[38.43361,48.44253],[38.43481,48.45095],[38.44048,48.45357],[38.44374,48.45277],[38.45078,48.45608],[38.45163,48.47338],[38.44776,48.48235],[38.44861,48.49554],[38.45351,48.50645],[38.46712,48.51525],[38.47018,48.52659],[38.48794,48.55339],[38.49478,48.56772],[38.50503,48.58317],[38.50624,48.59245],[38.50513,48.60553],[38.47754,48.6203],[38.4613,48.62672],[38.45958,48.6242],[38.4378,48.60513],[38.42546,48.60819],[38.38843,48.58975],[38.39482,48.57295],[38.39892,48.5376],[38.38377,48.53422],[38.37342,48.52477],[38.36234,48.53085],[38.35425,48.51889],[38.34273,48.52091],[38.33016,48.51491],[38.31811,48.50858],[38.31358,48.50633],[38.31091,48.50279],[38.30334,48.50091],[38.29585,48.49875],[38.29302,48.49033],[38.28293,48.48414],[38.26967,48.47429],[38.25783,48.46342],[38.25809,48.45653],[38.25629,48.45082],[38.25157,48.44741],[38.23753,48.45001],[38.20925,48.45129],[38.21618,48.47085],[38.18955,48.47726],[38.13992,48.47713],[38.13414,48.47737],[38.10909,48.4897],[38.10887,48.46934],[38.10415,48.45462],[38.06673,48.43848],[38.05708,48.43352],[38.0521,48.41781],[38.05912,48.41179],[38.08091,48.41288],[38.09591,48.41195],[38.11073,48.41354],[38.12445,48.41394],[38.13632,48.41543],[38.16187,48.41406],[38.19336,48.41452],[38.204,48.40706],[38.21338,48.40236],[38.21579,48.39888],[38.22095,48.39514],[38.22196,48.38759]]]}},{type:"Feature",properties:{nearestId:"6e6bd74c0012304ddc9f57bbe9564f3a",originalId:"6e6bd74c0012304ddc9f57bbe9564f3a",id:"b09185af9ad4b8d9206ea143c3575e89",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[37.7057,48.059340000000006]}},oldPointsMap:[[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.84481,48.18783],[37.84481,48.18783],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.84481,48.18783],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657],[37.73578,48.21657]]},geometry:{type:"Polygon",coordinates:[[[37.62275,48.00695],[37.63697,48.00867],[37.64866,48.00973],[37.6697,48.00974],[37.67851,48.01149],[37.6933,48.01771],[37.68906,48.02035],[37.68581,48.02333],[37.68915,48.02616],[37.69316,48.02838],[37.6748,48.04131],[37.68594,48.04687],[37.68791,48.04946],[37.68723,48.0502],[37.69152,48.05301],[37.69658,48.05043],[37.70302,48.05531],[37.70551,48.05646],[37.7074,48.05703],[37.70293,48.05835],[37.69177,48.06099],[37.68765,48.0615],[37.68783,48.0642],[37.69529,48.06368],[37.69506,48.0646],[37.70096,48.06575],[37.70001,48.07097],[37.73005,48.07158],[37.73354,48.07157],[37.73783,48.07239],[37.74163,48.07407],[37.74608,48.07699],[37.74719,48.07975],[37.74921,48.08027],[37.75232,48.07948],[37.75564,48.08044],[37.75526,48.08363],[37.75676,48.08463],[37.76049,48.08486],[37.76497,48.08659],[37.76733,48.08849],[37.76874,48.09175],[37.76947,48.09476],[37.77538,48.09707],[37.78268,48.09936],[37.78866,48.10098],[37.79096,48.10359],[37.79278,48.10535],[37.79457,48.11014],[37.79387,48.11173],[37.78751,48.10958],[37.78397,48.10829],[37.78002,48.10748],[37.77726,48.10753],[37.77464,48.10781],[37.76971,48.10591],[37.76108,48.10441],[37.7534,48.10199],[37.74521,48.09708],[37.73515,48.09197],[37.72677,48.08937],[37.71363,48.08781],[37.69248,48.08609],[37.68102,48.07195],[37.67765,48.06952],[37.67545,48.06661],[37.6739,48.06327],[37.67046,48.05977],[37.66009,48.06058],[37.65217,48.06155],[37.64367,48.06165],[37.63914,48.057],[37.63072,48.04423],[37.63329,48.02908],[37.61683,48.0102],[37.62275,48.00695]]]}},{type:"Feature",properties:{nearestId:"161d3859f0b22f40a861e019d1e43c8f",originalId:"161d3859f0b22f40a861e019d1e43c8f",id:"4c1ed5d58f806d29af5d5cd8199f445d",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[33.32488,46.591285]}},oldPointsMap:[[34.30735,47.44388],[34.26302,47.4321],[34.20876,47.41621],[34.17001,47.42184],[34.04778,47.42251],[33.94121,47.40383],[33.82553,47.39762],[33.77709,47.43454],[33.6864,47.42788],[33.58569,47.41288],[33.55543,47.4175],[33.55607972620922,47.42083756005238],[33.548527218944145,47.448112922711125],[33.53606567573594,47.462643082091894],[33.434712760252,47.48571982776312],[33.411165685930634,47.482262179817454],[33.39245168044193,47.479514218786285],[33.35040800970285,47.45750513388587],[33.35022841130983,47.43309583868331],[33.35285563635816,47.42844501215545],[33.35772945795877,47.41981716399809],[33.3631,47.41031],[33.36048603390302,47.41493735496318],[33.3631,47.41031],[33.36634,47.39414],[33.36997,47.38122],[33.35768,47.3696],[33.34059,47.36444],[33.31506,47.36907],[33.29789,47.3684],[33.28963,47.35784],[33.28396,47.34466],[33.29118,47.33687],[33.2972,47.32496],[33.28315,47.32175],[33.25198,47.33535],[33.23391,47.32107],[33.23535,47.31315],[33.24909,47.307],[33.26171,47.30615],[33.27106,47.30659],[33.27386,47.30218],[33.27284,47.29529],[33.25571,47.28554],[33.22841,47.2927],[33.20932,47.28364],[33.19706,47.27079],[33.20503916880104,47.25575319893189],[33.21141371870858,47.23666072840464],[33.209805549560144,47.20945933780616],[33.14677412469319,47.19348831293855],[33.14708,47.19138],[33.135559120644054,47.1906727882721],[33.07985,47.17093],[33.07985,47.17093],[33.0257,47.17716],[33.0257,47.17716],[33.00662,47.19642],[32.99188,47.19055],[32.996,47.16997],[32.99084,47.1576],[32.99498,47.14861],[32.99866,47.13674],[32.99657,47.12647],[32.9532,47.11268],[32.86516,47.09022],[32.81855,47.10033],[32.78126,47.08584],[32.75646,47.05871],[32.75646,47.05871],[32.75646,47.05871],[32.75646,47.05871],[32.76979,46.98913],[32.76047,46.91422],[32.74286,46.85746],[32.60788,46.85299],[32.47124,46.81514],[32.45243,46.80339],[32.4316,46.79364],[32.37533,46.80068],[32.34609,46.78217],[32.31107,46.76731],[32.27861,46.74654],[32.24103345188942,46.72987875757072],[32.2296,46.71333],[32.20645134720261,46.708436576997585],[32.12129590931562,46.64459209116447],[32.13065,46.61455],[32.13065,46.61455],[32.11696,46.59625],[32.13962,46.55773],[32.18217,46.57208],[32.20744,46.57663],[32.24485,46.58973],[32.28057,46.5766],[32.28251,46.53862],[32.27851,46.50868],[32.2409,46.49171],[32.21051,46.4906],[32.16668,46.51067],[32.11662,46.51788],[32.04214,46.49227],[31.96314,46.49799],[31.90693,46.51409],[31.91573,46.52371],[31.88062,46.53546],[31.87969,46.52845],[31.8873,46.52152],[31.86452,46.5198],[31.80742,46.53065],[31.7624,46.55088],[31.66232,46.54004],[31.63739,46.54075],[31.58939,46.53987],[31.56109,46.54498],[31.5361,46.55827],[31.50097,46.58473],[31.54047,46.5415],[31.59393,46.5103],[31.63155,46.4726],[31.76912,46.37332],[31.78246,46.38307],[31.70699,46.44807],[31.71615,46.47191],[31.75319,46.48343],[31.88298,46.45636],[31.96653,46.43548],[32.00564,46.44685],[32.03274,46.42994],[32.04186,46.40349],[32.01027,46.37577],[31.9751,46.35759],[31.9293,46.34447],[31.82981,46.33782],[31.75035,46.31113],[31.78142,46.26219],[31.82034,46.2646],[31.91638,46.26867],[32.05572,46.23879],[32.13167,46.19541],[32.22029,46.17006],[32.23016,46.14218],[31.95911,46.1885],[31.81877,46.20551],[31.6709,46.23195],[31.6739,46.25223],[31.61095,46.24769],[31.54235,46.29412],[31.5282,46.37237],[31.49854,46.34594],[31.52429,46.27732],[31.58652,46.24327],[31.74762,46.21069],[31.91944,46.18497],[32.13167,46.14844],[32.41255,46.0884],[32.48497,46.07213],[32.55481,46.06302],[32.6141,46.0574],[32.67514,46.04023],[32.83401,46.0139],[32.96504,46.00267],[33.08588,46.00962],[33.14485,46.09416],[33.30767,46.06302],[33.43277,45.99949],[33.48084,45.85391],[33.49388,45.86109],[33.50865,45.86515],[33.54538,45.88666],[33.55671,45.87615],[33.5701,45.87184],[33.5804,45.87065],[33.59379,45.88786],[33.61714,45.89288],[33.65868,45.87376],[33.66348,45.86587],[33.67722,45.85702],[33.6834,45.85989],[33.67516,45.88021],[33.6731,45.91008],[33.69232,45.91486],[33.69919,45.91056],[33.72322,45.92847],[33.73524,45.93062],[33.75206,45.92972],[33.75893,45.9364],[33.75344,45.94762],[33.7246,45.95049],[33.69095,45.95287],[33.68065,45.94977],[33.66005,45.9555],[33.64803,45.94858],[33.64254,45.93974],[33.62503,45.94046],[33.61302,45.94452],[33.61988,45.95216],[33.62572,45.96003],[33.62847,45.96934],[33.62538,45.9901],[33.61817,46.00035],[33.58864,45.99463],[33.54675,45.99964],[33.59757,46.07442],[33.59207,46.08919],[33.59276,46.11228],[33.60512,46.13108],[33.63636,46.14083],[33.61439,46.22617],[33.64495,46.2302],[33.66555,46.21928],[33.68752,46.20407],[33.69919,46.20075],[33.73902,46.18411],[33.77884,46.20027],[33.8015,46.19979],[33.83034,46.20027],[33.85025,46.19979],[33.86879,46.18981],[33.90435,46.16271],[33.98468,46.13322],[34.02245,46.11133],[34.05335,46.10609],[34.0712,46.11751],[34.08837,46.11418],[34.12064,46.10609],[34.14368,46.08837],[34.17595,46.07122],[34.18145,46.06455],[34.21372,46.06121],[34.2508,46.05264],[34.29406,46.05979],[34.32839,46.05836],[34.36272,46.04549],[34.38515,46.03034],[34.40644,46.00698],[34.41445,45.98997],[34.43436,45.9704],[34.46526,45.94988],[34.49273,45.94271],[34.52088,45.95895],[34.54285,45.97947],[34.56757,45.99569],[34.60053,45.99474],[34.66233,45.97374],[34.7152,45.93507],[34.74885,45.91024],[34.79966,45.90498],[34.79897,45.80407],[34.74541,45.73462],[34.89464,45.75686],[34.95812,45.75757],[35.05051,45.76465],[35.01572,45.88172],[34.98869,46.07109],[35.077,46.0938],[35.15122,46.09579],[34.30735,47.44388]]},geometry:{type:"Polygon",coordinates:[[[34.30735,47.44388],[34.26302,47.4321],[34.20876,47.41621],[34.17001,47.42184],[34.04778,47.42251],[33.94121,47.40383],[33.82553,47.39762],[33.77709,47.43454],[33.6864,47.42788],[33.58569,47.41288],[33.55543,47.4175],[33.53175,47.42301],[33.50637,47.43161],[33.46932,47.43652],[33.45162,47.43299],[33.42564,47.43714],[33.40259,47.44795],[33.39196,47.44652],[33.38782,47.44283],[33.38335,47.43634],[33.39086,47.4284],[33.39276,47.4176],[33.37309,47.41821],[33.3631,47.41031],[33.36634,47.39414],[33.36997,47.38122],[33.35768,47.3696],[33.34059,47.36444],[33.31506,47.36907],[33.29789,47.3684],[33.28963,47.35784],[33.28396,47.34466],[33.29118,47.33687],[33.2972,47.32496],[33.28315,47.32175],[33.25198,47.33535],[33.23391,47.32107],[33.23535,47.31315],[33.24909,47.307],[33.26171,47.30615],[33.27106,47.30659],[33.27386,47.30218],[33.27284,47.29529],[33.25571,47.28554],[33.22841,47.2927],[33.20932,47.28364],[33.19706,47.27079],[33.19627,47.2534],[33.18366,47.23778],[33.18166,47.20857],[33.17404,47.19532],[33.15686,47.18877],[33.13755,47.17575],[33.07985,47.17093],[33.07228,47.16644],[33.04107,47.16734],[33.0257,47.17716],[33.00662,47.19642],[32.99188,47.19055],[32.996,47.16997],[32.99084,47.1576],[32.99498,47.14861],[32.99866,47.13674],[32.99657,47.12647],[32.9532,47.11268],[32.86516,47.09022],[32.81855,47.10033],[32.78126,47.08584],[32.72633,47.06775],[32.67427,47.0661],[32.6754,47.04276],[32.68888,47.02486],[32.76979,46.98913],[32.76047,46.91422],[32.74286,46.85746],[32.60788,46.85299],[32.47124,46.81514],[32.45243,46.80339],[32.4316,46.79364],[32.37533,46.80068],[32.34609,46.78217],[32.31107,46.76731],[32.27861,46.74654],[32.26584,46.72183],[32.24949,46.69138],[32.22537,46.66632],[32.17299,46.64375],[32.15053,46.62138],[32.13065,46.61455],[32.11696,46.59625],[32.13962,46.55773],[32.18217,46.57208],[32.20744,46.57663],[32.24485,46.58973],[32.28057,46.5766],[32.28251,46.53862],[32.27851,46.50868],[32.2409,46.49171],[32.21051,46.4906],[32.16668,46.51067],[32.11662,46.51788],[32.04214,46.49227],[31.96314,46.49799],[31.90693,46.51409],[31.91573,46.52371],[31.88062,46.53546],[31.87969,46.52845],[31.8873,46.52152],[31.86452,46.5198],[31.80742,46.53065],[31.7624,46.55088],[31.66232,46.54004],[31.63739,46.54075],[31.58939,46.53987],[31.56109,46.54498],[31.5361,46.55827],[31.50097,46.58473],[31.54047,46.5415],[31.59393,46.5103],[31.63155,46.4726],[31.76912,46.37332],[31.78246,46.38307],[31.70699,46.44807],[31.71615,46.47191],[31.75319,46.48343],[31.88298,46.45636],[31.96653,46.43548],[32.00564,46.44685],[32.03274,46.42994],[32.04186,46.40349],[32.01027,46.37577],[31.9751,46.35759],[31.9293,46.34447],[31.82981,46.33782],[31.75035,46.31113],[31.78142,46.26219],[31.82034,46.2646],[31.91638,46.26867],[32.05572,46.23879],[32.13167,46.19541],[32.22029,46.17006],[32.23016,46.14218],[31.95911,46.1885],[31.81877,46.20551],[31.6709,46.23195],[31.6739,46.25223],[31.61095,46.24769],[31.54235,46.29412],[31.5282,46.37237],[31.49854,46.34594],[31.52429,46.27732],[31.58652,46.24327],[31.74762,46.21069],[31.91944,46.18497],[32.13167,46.14844],[32.41255,46.0884],[32.48497,46.07213],[32.55481,46.06302],[32.6141,46.0574],[32.67514,46.04023],[32.83401,46.0139],[32.96504,46.00267],[33.08588,46.00962],[33.14485,46.09416],[33.30767,46.06302],[33.43277,45.99949],[33.48084,45.85391],[33.49388,45.86109],[33.50865,45.86515],[33.54538,45.88666],[33.55671,45.87615],[33.5701,45.87184],[33.5804,45.87065],[33.59379,45.88786],[33.61714,45.89288],[33.65868,45.87376],[33.66348,45.86587],[33.67722,45.85702],[33.6834,45.85989],[33.67516,45.88021],[33.6731,45.91008],[33.69232,45.91486],[33.69919,45.91056],[33.72322,45.92847],[33.73524,45.93062],[33.75206,45.92972],[33.75893,45.9364],[33.75344,45.94762],[33.7246,45.95049],[33.69095,45.95287],[33.68065,45.94977],[33.66005,45.9555],[33.64803,45.94858],[33.64254,45.93974],[33.62503,45.94046],[33.61302,45.94452],[33.61988,45.95216],[33.62572,45.96003],[33.62847,45.96934],[33.62538,45.9901],[33.61817,46.00035],[33.58864,45.99463],[33.54675,45.99964],[33.59757,46.07442],[33.59207,46.08919],[33.59276,46.11228],[33.60512,46.13108],[33.63636,46.14083],[33.61439,46.22617],[33.64495,46.2302],[33.66555,46.21928],[33.68752,46.20407],[33.69919,46.20075],[33.73902,46.18411],[33.77884,46.20027],[33.8015,46.19979],[33.83034,46.20027],[33.85025,46.19979],[33.86879,46.18981],[33.90435,46.16271],[33.98468,46.13322],[34.02245,46.11133],[34.05335,46.10609],[34.0712,46.11751],[34.08837,46.11418],[34.12064,46.10609],[34.14368,46.08837],[34.17595,46.07122],[34.18145,46.06455],[34.21372,46.06121],[34.2508,46.05264],[34.29406,46.05979],[34.32839,46.05836],[34.36272,46.04549],[34.38515,46.03034],[34.40644,46.00698],[34.41445,45.98997],[34.43436,45.9704],[34.46526,45.94988],[34.49273,45.94271],[34.52088,45.95895],[34.54285,45.97947],[34.56757,45.99569],[34.60053,45.99474],[34.66233,45.97374],[34.7152,45.93507],[34.74885,45.91024],[34.79966,45.90498],[34.79897,45.80407],[34.74541,45.73462],[34.89464,45.75686],[34.95812,45.75757],[35.05051,45.76465],[35.01572,45.88172],[34.98869,46.07109],[35.077,46.0938],[35.15122,46.09579],[34.30735,47.44388]]]}},{type:"Feature",properties:{nearestId:"32e312938381e5d4fa8b879b3a21a405",originalId:"32e312938381e5d4fa8b879b3a21a405",id:"83286182de062509b29617fa48c4fb4e",fill:"#0000FF","fill-opacity":"0.20",stroke:"#9729cb","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[-94.79377,31.597034999999998]}},oldPointsMap:[[-94.78692,31.12294],[-94.34332,31.0567],[-94.32325,31.06077],[-94.12973,31.09926],[-94.33747,31.26902],[-94.31829,31.32496],[-94.33119,31.36297],[-94.32381,31.39218],[-94.30907,31.41474],[-94.31594,31.45193],[-94.30742,31.5673],[-94.47469,31.84422],[-94.51376,31.84427],[-94.55474,31.84421],[-94.57912,31.84416],[-94.62174,31.84407],[-94.64256,31.844],[-94.68576,31.84394],[-94.72773,31.84382],[-94.75274,31.84374],[-94.82815,31.84418],[-94.85763,31.84444],[-94.88559,31.84505],[-94.96933,31.84598],[-94.98549,31.91073],[-94.98541,31.96453],[-94.98551,32.01949],[-95.04312,32.13731],[-95.08123,32.13737],[-95.1278,32.13723],[-95.20615,32.13674],[-95.27129,32.13634],[-95.29751,32.13595],[-95.37272,32.13549],[-95.40578,32.1354],[-95.43753,32.13549],[-95.45781,32.13553],[-95.423,32.04804],[-95.43499,32.03082],[-95.42843,32.01005],[-95.44603,31.99777],[-95.44613,31.96817],[-95.43224,31.93385],[-95.43187,31.91375],[-95.44455,31.85071],[-95.41975,31.83575],[-95.40171,31.81688],[-95.39763,31.79429],[-95.39802,31.77313],[-95.36066,31.74526],[-95.33313,31.73164],[-95.31212,31.70175],[-95.28325,31.67641],[-95.2781,31.65465],[-95.28746,31.63306],[-95.26179,31.61811],[-95.2732,31.59289],[-95.23009,31.57733],[-95.17408,31.58511],[-95.1252,31.53268],[-94.89667,31.26362],[-94.85364,31.18788],[-94.7935,31.12833],[-94.78692,31.12294]]},geometry:{type:"Polygon",coordinates:[[[-94.78692,31.12294],[-94.34332,31.0567],[-94.32325,31.06077],[-94.12973,31.09926],[-94.33747,31.26902],[-94.31829,31.32496],[-94.33119,31.36297],[-94.32381,31.39218],[-94.30907,31.41474],[-94.31594,31.45193],[-94.30742,31.5673],[-94.47469,31.84422],[-94.51376,31.84427],[-94.55474,31.84421],[-94.57912,31.84416],[-94.62174,31.84407],[-94.64256,31.844],[-94.68576,31.84394],[-94.72773,31.84382],[-94.75274,31.84374],[-94.82815,31.84418],[-94.85763,31.84444],[-94.88559,31.84505],[-94.96933,31.84598],[-94.98549,31.91073],[-94.98541,31.96453],[-94.98551,32.01949],[-95.04312,32.13731],[-95.08123,32.13737],[-95.1278,32.13723],[-95.20615,32.13674],[-95.27129,32.13634],[-95.29751,32.13595],[-95.37272,32.13549],[-95.40578,32.1354],[-95.43753,32.13549],[-95.45781,32.13553],[-95.423,32.04804],[-95.43499,32.03082],[-95.42843,32.01005],[-95.44603,31.99777],[-95.44613,31.96817],[-95.43224,31.93385],[-95.43187,31.91375],[-95.44455,31.85071],[-95.41975,31.83575],[-95.40171,31.81688],[-95.39763,31.79429],[-95.39802,31.77313],[-95.36066,31.74526],[-95.33313,31.73164],[-95.31212,31.70175],[-95.28325,31.67641],[-95.2781,31.65465],[-95.28746,31.63306],[-95.26179,31.61811],[-95.2732,31.59289],[-95.23009,31.57733],[-95.17408,31.58511],[-95.1252,31.53268],[-94.89667,31.26362],[-94.85364,31.18788],[-94.7935,31.12833],[-94.78692,31.12294]]]}},{type:"Feature",properties:{nearestId:"0e0b571b6cfb644b82d4e0e611451192",originalId:"0e0b571b6cfb644b82d4e0e611451192",id:"f81d2d6a2893b934a06a424cdaddbc89",fill:"#0000FF","fill-opacity":"0.20",stroke:"#9729cb","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[-78.541365,38.045525]}},oldPointsMap:[[-78.33415,38.17445],[-78.24385,38.07945],[-78.36852,37.93611],[-78.40859,37.88911],[-78.45735,37.83461],[-78.70865,37.82627],[-78.72647,37.85621],[-78.77734,37.94278],[-78.81128,38.00012],[-78.82281,38.01995],[-78.83888,38.04702],[-78.62506,38.26478],[-78.58611,38.25124],[-78.52499,38.23193],[-78.48394,38.21967],[-78.40285,38.19466],[-78.33415,38.17445]]},geometry:{type:"Polygon",coordinates:[[[-78.33415,38.17445],[-78.24385,38.07945],[-78.36852,37.93611],[-78.40859,37.88911],[-78.45735,37.83461],[-78.70865,37.82627],[-78.72647,37.85621],[-78.77734,37.94278],[-78.81128,38.00012],[-78.82281,38.01995],[-78.83888,38.04702],[-78.62506,38.26478],[-78.58611,38.25124],[-78.52499,38.23193],[-78.48394,38.21967],[-78.40285,38.19466],[-78.33415,38.17445]]]}},{type:"Feature",properties:{nearestId:"bf1cfb9fbf1efddea163c5d4a4dbef4b",originalId:"bf1cfb9fbf1efddea163c5d4a4dbef4b",id:"d85cbd45998cbd1a2c21c50fc9de5fce",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"0.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[35.68964,46.887895]}},oldPointsMap:[[35.15121,46.09577],[35.23636,46.17412],[35.35675,46.32923],[35.44693,46.41735],[35.56274,46.45836],[35.6248,46.49306],[35.69236,46.54363],[35.73725,46.5837],[35.85405,46.62284],[35.90011,46.64425],[35.99304,46.66012],[36.09822,46.65097],[36.19263,46.66043],[36.24653,46.62484],[36.24529,46.59712],[36.20573,46.55484],[36.14755,46.5443],[36.0863,46.49471],[36.10869,46.47889],[36.15494,46.49304],[36.17816,46.49378],[36.28738,46.60448],[36.37619,46.70377],[36.51152,46.74628],[36.59084,46.76158],[36.65573,46.77417],[36.69531,46.77741],[36.74051,46.77091],[36.77238,46.75805],[36.79281,46.74555],[36.81799,46.72468],[36.7379,46.64122],[36.75004,46.62367],[36.80268,46.6518],[36.8378,46.6979],[36.85638,46.74519],[36.88156,46.7764],[36.90788,46.80742],[36.95,46.82998],[37.07195,46.86841],[36.71087,47.68002],[36.58684,47.67472],[36.46637,47.65305],[36.31714,47.63237],[36.17889,47.6222],[36.09196,47.58627],[36.07069,47.5758],[36.0315,47.55518],[36.00915,47.5147],[35.97527,47.511],[35.89433,47.49611],[35.85152,47.48717],[35.80372,47.48701],[35.75504,47.5018],[35.72988,47.5178],[35.69544,47.5305],[35.61773,47.53151],[35.54388,47.53035],[35.4287,47.53171],[35.39085,47.53111],[35.33707,47.54128],[35.27298,47.50142],[35.24506,47.45827],[35.21507,47.44341],[35.16815,47.44156],[35.12466,47.45456],[35.06172,47.45053],[35.01892,47.41152],[34.96262,47.3875],[34.91753,47.39525],[34.88342,47.40656],[34.869,47.42515],[34.87289,47.44837],[34.82254,47.46168],[34.75433,47.49092],[34.68796,47.49231],[34.68201,47.51488],[34.63417,47.55042],[34.59297,47.53142],[34.56161,47.50684],[34.50989,47.5032],[34.44443,47.50318],[34.38194,47.51442],[34.33914,47.48102],[34.30733,47.44388],[35.15121,46.09577]]},geometry:{type:"Polygon",coordinates:[[[35.15121,46.09577],[35.23636,46.17412],[35.35675,46.32923],[35.44693,46.41735],[35.56274,46.45836],[35.6248,46.49306],[35.69236,46.54363],[35.73725,46.5837],[35.85405,46.62284],[35.90011,46.64425],[35.99304,46.66012],[36.09822,46.65097],[36.19263,46.66043],[36.24653,46.62484],[36.24529,46.59712],[36.20573,46.55484],[36.14755,46.5443],[36.0863,46.49471],[36.10869,46.47889],[36.15494,46.49304],[36.17816,46.49378],[36.28738,46.60448],[36.37619,46.70377],[36.51152,46.74628],[36.59084,46.76158],[36.65573,46.77417],[36.69531,46.77741],[36.74051,46.77091],[36.77238,46.75805],[36.79281,46.74555],[36.81799,46.72468],[36.7379,46.64122],[36.75004,46.62367],[36.80268,46.6518],[36.8378,46.6979],[36.85638,46.74519],[36.88156,46.7764],[36.90788,46.80742],[36.95,46.82998],[37.07195,46.86841],[36.71087,47.68002],[36.58684,47.67472],[36.46637,47.65305],[36.31714,47.63237],[36.17889,47.6222],[36.09196,47.58627],[36.07069,47.5758],[36.0315,47.55518],[36.00915,47.5147],[35.97527,47.511],[35.89433,47.49611],[35.85152,47.48717],[35.80372,47.48701],[35.75504,47.5018],[35.72988,47.5178],[35.69544,47.5305],[35.61773,47.53151],[35.54388,47.53035],[35.4287,47.53171],[35.39085,47.53111],[35.33707,47.54128],[35.27298,47.50142],[35.24506,47.45827],[35.21507,47.44341],[35.16815,47.44156],[35.12466,47.45456],[35.06172,47.45053],[35.01892,47.41152],[34.96262,47.3875],[34.91753,47.39525],[34.88342,47.40656],[34.869,47.42515],[34.87289,47.44837],[34.82254,47.46168],[34.75433,47.49092],[34.68796,47.49231],[34.68201,47.51488],[34.63417,47.55042],[34.59297,47.53142],[34.56161,47.50684],[34.50989,47.5032],[34.44443,47.50318],[34.38194,47.51442],[34.33914,47.48102],[34.30733,47.44388],[35.15121,46.09577]]]}},{type:"Feature",properties:{nearestId:"3cf086cf909f75538463751cf762d283",originalId:"3cf086cf909f75538463751cf762d283",id:"0f9010a706aeadbadcb7a2bb6b461c3b",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[38.76868,47.8995]}},oldPointsMap:[[39.79403,48.59222],[39.79707,48.59143],[39.80093,48.58995],[39.80402,48.5868],[39.80488,48.58583],[39.80776,48.58453],[39.81278,48.58373],[39.81471,48.58376],[39.81827,48.58478],[39.82282,48.58606],[39.82548,48.58615],[39.82634,48.58561],[39.82724,48.58424],[39.82724,48.58251],[39.82656,48.58141],[39.82488,48.58055],[39.82316,48.5797],[39.82231,48.57919],[39.82368,48.57811],[39.82664,48.57726],[39.83265,48.57558],[39.83939,48.5736],[39.84587,48.57178],[39.84797,48.57081],[39.85213,48.56726],[39.85484,48.56397],[39.85582,48.56258],[39.8563,48.56022],[39.85509,48.55681],[39.85381,48.55394],[39.85561,48.5496],[39.85775,48.54599],[39.85818,48.5442],[39.85754,48.54215],[39.85664,48.53911],[39.85672,48.53624],[39.85737,48.53411],[39.85909,48.53153],[39.86179,48.52729],[39.86325,48.52368],[39.86338,48.52158],[39.86539,48.51544],[39.86758,48.51069],[39.8675,48.50711],[39.8666,48.50475],[39.86432,48.5029],[39.86042,48.50171],[39.85853,48.5021],[39.85458,48.50373],[39.85282,48.50398],[39.8505,48.50316],[39.84887,48.50148],[39.84827,48.49929],[39.84879,48.49573],[39.84943,48.49161],[39.84951,48.48737],[39.84921,48.48541],[39.84818,48.48379],[39.84741,48.47557],[39.84767,48.47363],[39.85007,48.47042],[39.85295,48.46746],[39.85831,48.46393],[39.86548,48.46108],[39.87157,48.45864],[39.87827,48.45596],[39.88076,48.45468],[39.88548,48.45206],[39.8896,48.4501],[39.89346,48.4493],[39.8981,48.44796],[39.89913,48.44682],[39.89964,48.44611],[39.89908,48.4452],[39.89835,48.4446],[39.89672,48.44395],[39.89372,48.44375],[39.8917,48.44347],[39.89058,48.44298],[39.89097,48.44105],[39.8917,48.43871],[39.89462,48.43339],[39.89535,48.43233],[39.89586,48.43091],[39.89719,48.4294],[39.89852,48.42786],[39.90119,48.4265],[39.90324,48.42556],[39.90951,48.42279],[39.91217,48.42111],[39.91342,48.41952],[39.91389,48.41824],[39.91337,48.41479],[39.91277,48.41274],[39.91011,48.40992],[39.90805,48.40724],[39.90745,48.40536],[39.90788,48.40368],[39.90912,48.40263],[39.91256,48.40174],[39.91552,48.40103],[39.91865,48.39963],[39.91998,48.3979],[39.91985,48.39664],[39.91874,48.39513],[39.91745,48.39448],[39.91569,48.39393],[39.91054,48.39322],[39.90852,48.39254],[39.90792,48.39106],[39.90801,48.38992],[39.91067,48.38889],[39.91453,48.38735],[39.91612,48.38647],[39.91762,48.38359],[39.91814,48.38139],[39.91895,48.37931],[39.92011,48.37786],[39.9217,48.37632],[39.92397,48.37552],[39.92736,48.37529],[39.93187,48.37635],[39.93371,48.37843],[39.93582,48.38319],[39.93698,48.38513],[39.93917,48.38698],[39.94097,48.38744],[39.94281,48.38664],[39.94371,48.38533],[39.94401,48.38407],[39.94238,48.37966],[39.93912,48.37564],[39.93693,48.3729],[39.9362,48.37147],[39.93625,48.37033],[39.93801,48.3672],[39.93702,48.3615],[39.94496,48.35836],[39.94565,48.3577],[39.94513,48.35642],[39.94376,48.35514],[39.945,48.35448],[39.94843,48.35437],[39.94689,48.35211],[39.94565,48.34992],[39.94462,48.34915],[39.94268,48.34843],[39.94125,48.34807],[39.9393,48.34787],[39.93266,48.34828],[39.93196,48.34829],[39.92796,48.34823],[39.91941,48.34688],[39.91942,48.34093],[39.91108,48.33938],[39.90244,48.33792],[39.88525,48.33491],[39.88074,48.33384],[39.87395,48.334],[39.86735,48.33441],[39.86411,48.33431],[39.86196,48.33391],[39.85614,48.33365],[39.85005,48.33345],[39.8475,48.3322],[39.84743,48.32942],[39.84685,48.32916],[39.84228,48.32875],[39.84293,48.32598],[39.84324,48.32424],[39.84321,48.3233],[39.84304,48.31652],[39.8424,48.30979],[39.84973,48.3094],[39.85394,48.30906],[39.86073,48.3089],[39.86416,48.30881],[39.87559,48.30916],[39.88203,48.30922],[39.88509,48.30921],[39.88857,48.30911],[39.88853,48.30612],[39.88866,48.30474],[39.89037,48.2975],[39.8944,48.29713],[39.89561,48.30107],[39.89608,48.30189],[39.89775,48.30229],[39.89921,48.30221],[39.90035,48.30182],[39.90144,48.3013],[39.90196,48.30081],[39.90248,48.29433],[39.90483,48.29355],[39.90839,48.29239],[39.9096,48.29193],[39.91303,48.2901],[39.91521,48.28876],[39.91707,48.28711],[39.91027,48.28055],[39.91044,48.2768],[39.91127,48.2766],[39.91207,48.27619],[39.91301,48.27562],[39.91325,48.27516],[39.91331,48.27408],[39.91319,48.27357],[39.91221,48.27248],[39.91203,48.27197],[39.91217,48.27165],[39.91269,48.27141],[39.91389,48.27136],[39.91591,48.27206],[39.91628,48.27199],[39.91641,48.2718],[39.91604,48.27091],[39.91595,48.27064],[39.91602,48.27042],[39.91635,48.27013],[39.91685,48.27001],[39.9182,48.27036],[39.91887,48.27063],[39.92111,48.2716],[39.9221,48.27185],[39.9247,48.27165],[39.92668,48.27168],[39.92719,48.272],[39.92732,48.27246],[39.92723,48.27337],[39.92747,48.27405],[39.92783,48.27471],[39.92878,48.276],[39.9291,48.27637],[39.9298,48.27714],[39.93114,48.27792],[39.93277,48.27827],[39.93341,48.27883],[39.93375,48.27911],[39.93436,48.27934],[39.93505,48.27937],[39.93571,48.27951],[39.93597,48.27968],[39.93614,48.28007],[39.93586,48.28051],[39.93565,48.28067],[39.9347,48.28114],[39.93276,48.28175],[39.9321,48.28198],[39.93174,48.28229],[39.93156,48.28263],[39.93153,48.28306],[39.93175,48.28342],[39.93217,48.28366],[39.93392,48.2837],[39.93531,48.28372],[39.93617,48.28389],[39.93662,48.28416],[39.93712,48.28466],[39.93763,48.28545],[39.93797,48.28627],[39.93805,48.28678],[39.93808,48.28815],[39.93802,48.29018],[39.93838,48.29088],[39.93892,48.2915],[39.93957,48.29202],[39.94046,48.29237],[39.94104,48.29257],[39.94202,48.29272],[39.94301,48.29272],[39.94378,48.29246],[39.94423,48.29232],[39.94496,48.29225],[39.94561,48.29226],[39.94617,48.29254],[39.94767,48.29384],[39.94906,48.29448],[39.9493,48.29471],[39.94963,48.29613],[39.95003,48.29656],[39.95127,48.29722],[39.95137,48.29758],[39.95145,48.29798],[39.95141,48.29834],[39.95108,48.29874],[39.95091,48.29914],[39.9512,48.2994],[39.95236,48.29984],[39.95298,48.3005],[39.95307,48.30094],[39.95308,48.30244],[39.95331,48.30337],[39.95383,48.3037],[39.95436,48.30391],[39.95541,48.30401],[39.95602,48.30396],[39.95726,48.30351],[39.95777,48.3032],[39.95804,48.30284],[39.9582,48.30253],[39.95818,48.30203],[39.95741,48.30105],[39.95716,48.2997],[39.95716,48.29938],[39.95745,48.29918],[39.95804,48.29867],[39.95833,48.2985],[39.95878,48.29837],[39.95955,48.29839],[39.95995,48.29854],[39.96042,48.29896],[39.96088,48.29955],[39.9613,48.29967],[39.96214,48.29952],[39.96336,48.29927],[39.96436,48.29913],[39.96652,48.29977],[39.96704,48.2998],[39.96771,48.29968],[39.96849,48.29935],[39.96921,48.29913],[39.97025,48.29904],[39.97116,48.29898],[39.97157,48.29927],[39.97203,48.30189],[39.97189,48.30262],[39.97154,48.30291],[39.97078,48.30315],[39.9699,48.30319],[39.96915,48.30319],[39.96836,48.30312],[39.96709,48.30291],[39.96649,48.30267],[39.96598,48.30244],[39.96571,48.30219],[39.96523,48.30222],[39.96481,48.30229],[39.96446,48.30247],[39.96426,48.30268],[39.96417,48.30319],[39.96435,48.30365],[39.96588,48.30446],[39.96634,48.30494],[39.96671,48.30568],[39.96708,48.30633],[39.96742,48.30651],[39.96827,48.30685],[39.96909,48.30705],[39.97002,48.3071],[39.97079,48.30706],[39.97159,48.30718],[39.97197,48.3074],[39.97213,48.30758],[39.97221,48.3086],[39.97232,48.30895],[39.97279,48.30975],[39.97286,48.31014],[39.97288,48.31161],[39.97315,48.31203],[39.97358,48.31247],[39.97678,48.31388],[39.97786,48.3147],[39.97846,48.31505],[39.97931,48.31537],[39.98013,48.31562],[39.98147,48.31565],[39.98289,48.3156],[39.98358,48.3155],[39.9844,48.31567],[39.98518,48.31599],[39.98572,48.31632],[39.98725,48.31692],[39.98901,48.31725],[39.98984,48.31722],[39.99073,48.3171],[39.99137,48.31676],[39.99159,48.31663],[39.99181,48.31629],[39.99189,48.31609],[39.99295,48.31526],[39.9931,48.31515],[39.99338,48.31469],[39.99364,48.31402],[39.9944,48.31211],[39.9948,48.31114],[39.99481,48.30931],[39.99474,48.30773],[39.99462,48.30512],[39.99455,48.30447],[39.99438,48.30287],[39.99413,48.3008],[39.99957,48.29123],[40.00309,48.28506],[40.00888,48.27482],[40.00948,48.27372],[40.01258,48.26946],[40.01304,48.2692],[40.01403,48.26915],[40.0154,48.2695],[40.01682,48.26973],[40.01732,48.26967],[40.01788,48.26905],[40.01832,48.26818],[40.01786,48.26782],[40.01679,48.26765],[40.0145,48.26714],[40.0143,48.26687],[40.01467,48.26606],[40.01709,48.26218],[40.01975,48.25787],[40.02205,48.25421],[40.02199,48.25373],[40.00872,48.24259],[40.00848,48.24205],[40.00836,48.24145],[40.00898,48.23802],[40.01098,48.22712],[40.01107,48.22557],[40.01079,48.22517],[40.00995,48.22469],[40.0063,48.22379],[40.00342,48.22365],[40.00107,48.22399],[39.99659,48.22435],[39.9911,48.22499],[39.98532,48.22547],[39.97972,48.22606],[39.97444,48.22662],[39.96209,48.22784],[39.95731,48.22812],[39.95357,48.22835],[39.94971,48.22843],[39.94612,48.22848],[39.9417,48.22855],[39.94141,48.22475],[39.94109,48.22047],[39.94085,48.2173],[39.94058,48.21381],[39.94028,48.20849],[39.94012,48.20535],[39.94002,48.20266],[39.93968,48.19702],[39.93936,48.19249],[39.93903,48.18802],[39.93859,48.18071],[39.9311,48.18166],[39.92633,48.18221],[39.91825,48.18111],[39.91135,48.18012],[39.9104,48.17708],[39.9093,48.17339],[39.90896,48.17244],[39.90878,48.17082],[39.90831,48.16574],[39.90818,48.16503],[39.90759,48.16431],[39.9071,48.16377],[39.90674,48.16287],[39.90657,48.16176],[39.90611,48.1606],[39.90627,48.1601],[39.90557,48.15943],[39.90537,48.15912],[39.9054,48.15857],[39.90553,48.15808],[39.90576,48.15767],[39.9061,48.15705],[39.90679,48.15631],[39.90713,48.15566],[39.90811,48.15477],[39.90857,48.1544],[39.90853,48.15403],[39.90842,48.15378],[39.90815,48.15363],[39.90776,48.15367],[39.90745,48.1536],[39.90718,48.15337],[39.90713,48.15312],[39.90703,48.15296],[39.90675,48.15271],[39.90631,48.15244],[39.90591,48.15188],[39.90587,48.15136],[39.9063,48.15107],[39.90706,48.15091],[39.90709,48.15055],[39.90735,48.15],[39.90726,48.14949],[39.90676,48.14904],[39.90674,48.14856],[39.90656,48.14802],[39.90588,48.14716],[39.90567,48.14644],[39.90543,48.14572],[39.90508,48.14499],[39.90489,48.14431],[39.90444,48.14327],[39.90427,48.14307],[39.90368,48.1424],[39.90365,48.14179],[39.90362,48.14152],[39.90319,48.14092],[39.90259,48.1403],[39.90241,48.14002],[39.90236,48.13989],[39.90229,48.13967],[39.90206,48.13921],[39.90143,48.13869],[39.90035,48.1383],[39.89978,48.13789],[39.89909,48.13616],[39.89849,48.13503],[39.89746,48.13412],[39.89526,48.13335],[39.89381,48.13333],[39.89177,48.13263],[39.88991,48.13166],[39.88814,48.13034],[39.88469,48.12728],[39.88447,48.12583],[39.88297,48.12462],[39.87965,48.12155],[39.87839,48.1207],[39.87791,48.11968],[39.87634,48.11866],[39.87415,48.11786],[39.87221,48.11695],[39.87359,48.11379],[39.87573,48.10932],[39.87222,48.09505],[39.86904,48.07982],[39.83386,48.06776],[39.83765,48.06566],[39.84141,48.06382],[39.84579,48.06125],[39.86544,48.05517],[39.87053,48.05359],[39.87574,48.05213],[39.88608,48.04937],[39.88477,48.04743],[39.88416,48.04646],[39.88307,48.0457],[39.88056,48.04399],[39.87931,48.04313],[39.87835,48.04219],[39.86024,48.04111],[39.85376,48.04108],[39.82681,48.04093],[39.80219,48.04082],[39.77756,48.04045],[39.7782,48.03905],[39.78004,48.03793],[39.78023,48.03728],[39.77978,48.03663],[39.78002,48.03598],[39.78004,48.03529],[39.78075,48.03497],[39.78197,48.0347],[39.78228,48.03415],[39.78242,48.0336],[39.78378,48.03244],[39.78405,48.03074],[39.78569,48.02947],[39.78594,48.02886],[39.78593,48.02816],[39.78568,48.02752],[39.78578,48.02685],[39.78679,48.02571],[39.78634,48.02462],[39.78624,48.02353],[39.788,48.02193],[39.78868,48.0199],[39.78915,48.0194],[39.78981,48.01868],[39.78987,48.01689],[39.79114,48.01579],[39.79181,48.01522],[39.79193,48.01465],[39.79247,48.01398],[39.79265,48.01228],[39.79312,48.01194],[39.7946,48.0118],[39.7959,48.01092],[39.79833,48.00979],[39.80081,48.00879],[39.80127,48.00836],[39.80156,48.00766],[39.80178,48.00743],[39.80218,48.00734],[39.80294,48.00767],[39.8041,48.008],[39.80482,48.00772],[39.80502,48.00741],[39.80523,48.00677],[39.80533,48.00642],[39.80563,48.00607],[39.80792,48.00568],[39.80874,48.00526],[39.80968,48.00496],[39.81196,48.00487],[39.81228,48.00451],[39.81239,48.00414],[39.8119,48.00365],[39.812,48.00318],[39.81349,48.00319],[39.81428,48.00303],[39.81557,48.00242],[39.81661,48.0021],[39.81732,48.00157],[39.81787,48.00104],[39.81777,48.00008],[39.81613,47.99898],[39.81531,47.9984],[39.81475,47.9978],[39.81505,47.99721],[39.81582,47.99665],[39.81651,47.9965],[39.81742,47.99596],[39.81835,47.99568],[39.81928,47.99568],[39.81951,47.99479],[39.81926,47.99393],[39.81825,47.99338],[39.81814,47.99273],[39.81851,47.9919],[39.8187,47.99085],[39.81909,47.99081],[39.81974,47.99088],[39.82026,47.99082],[39.82028,47.99004],[39.81992,47.98975],[39.81922,47.98949],[39.81782,47.98938],[39.8175,47.98908],[39.81737,47.98821],[39.81735,47.98612],[39.81796,47.98514],[39.81806,47.98418],[39.8187,47.98378],[39.81939,47.98417],[39.82025,47.98481],[39.82257,47.98391],[39.82473,47.98325],[39.825,47.98245],[39.82514,47.98166],[39.82521,47.98099],[39.8251,47.98035],[39.82484,47.97987],[39.82445,47.97939],[39.82308,47.97883],[39.8217,47.97706],[39.82043,47.9743],[39.81891,47.97202],[39.81848,47.97108],[39.81857,47.97008],[39.81762,47.96846],[39.81805,47.9681],[39.81904,47.968],[39.8205,47.96821],[39.82077,47.96794],[39.82057,47.96768],[39.81995,47.96743],[39.81863,47.96663],[39.81894,47.96615],[39.81974,47.96568],[39.82006,47.96516],[39.81987,47.96467],[39.81934,47.96438],[39.81918,47.96383],[39.81955,47.96361],[39.81988,47.9625],[39.82019,47.96205],[39.82067,47.96165],[39.81973,47.96107],[39.81957,47.96075],[39.82038,47.9605],[39.82162,47.9605],[39.82309,47.96043],[39.82391,47.95987],[39.82442,47.95932],[39.82523,47.95883],[39.82525,47.95827],[39.82488,47.95771],[39.82434,47.95716],[39.82437,47.9565],[39.82501,47.95629],[39.82616,47.95639],[39.8266,47.95593],[39.82652,47.95537],[39.82465,47.9542],[39.82408,47.95358],[39.82377,47.95286],[39.82338,47.9523],[39.82329,47.95184],[39.82197,47.95137],[39.81851,47.95125],[39.813,47.95143],[39.80733,47.95131],[39.80799,47.94318],[39.80812,47.93504],[39.80287,47.93484],[39.8027,47.93274],[39.80255,47.93222],[39.80231,47.93091],[39.80224,47.93035],[39.8024,47.92968],[39.80257,47.92908],[39.80286,47.92847],[39.80318,47.92721],[39.80315,47.92657],[39.80298,47.92593],[39.80173,47.92505],[39.79958,47.92336],[39.79816,47.92236],[39.79664,47.92139],[39.79627,47.92071],[39.79602,47.92013],[39.79571,47.91929],[39.79545,47.91844],[39.79529,47.9176],[39.79516,47.91673],[39.79516,47.91523],[39.79531,47.91438],[39.7954,47.91379],[39.7954,47.91247],[39.79543,47.90995],[39.79537,47.9049],[39.7954,47.8951],[39.79618,47.88246],[39.79683,47.87202],[39.7967,47.87137],[39.79593,47.87007],[39.79538,47.86961],[39.79414,47.86944],[39.79163,47.86945],[39.78981,47.86979],[39.7891,47.86986],[39.78839,47.86967],[39.78705,47.86998],[39.78506,47.87011],[39.78307,47.87031],[39.78207,47.87018],[39.78107,47.86984],[39.78001,47.86972],[39.7772,47.87013],[39.77516,47.87049],[39.77402,47.87086],[39.76981,47.87139],[39.76858,47.87155],[39.76745,47.87151],[39.76546,47.87172],[39.76522,47.86576],[39.76535,47.85938],[39.76543,47.84679],[39.75877,47.84714],[39.75497,47.84319],[39.75336,47.84147],[39.75111,47.83896],[39.7487,47.83703],[39.74456,47.83246],[39.74024,47.82786],[39.7383,47.82746],[39.71865,47.82885],[39.69868,47.83022],[39.67866,47.83146],[39.65778,47.8327],[39.65208,47.83341],[39.64903,47.83529],[39.64635,47.83645],[39.6434,47.83755],[39.63557,47.83846],[39.63352,47.83862],[39.62761,47.83901],[39.62555,47.83831],[39.61909,47.83767],[39.61538,47.83706],[39.61277,47.83701],[39.6025,47.83699],[39.59225,47.83706],[39.57243,47.83716],[39.56748,47.83716],[39.56499,47.8354],[39.56255,47.83343],[39.55861,47.83168],[39.55592,47.83055],[39.55318,47.82958],[39.5508,47.82918],[39.548,47.82834],[39.54547,47.82699],[39.54255,47.82567],[39.54079,47.82699],[39.53904,47.82904],[39.53577,47.8326],[39.52893,47.82902],[39.521,47.82468],[39.51415,47.83095],[39.51132,47.83342],[39.50738,47.83647],[39.50306,47.84159],[39.50123,47.84325],[39.47956,47.8606],[39.47425,47.85971],[39.47364,47.85923],[39.47264,47.85919],[39.4718,47.85918],[39.47097,47.85938],[39.47007,47.85975],[39.46824,47.8596],[39.46715,47.85992],[39.46639,47.85991],[39.46559,47.85948],[39.4647,47.85903],[39.46347,47.85872],[39.46277,47.85808],[39.46211,47.85766],[39.4609,47.85698],[39.46007,47.85625],[39.45889,47.85587],[39.45523,47.85546],[39.45411,47.85502],[39.45316,47.85437],[39.45148,47.8531],[39.45036,47.85262],[39.44954,47.85249],[39.44838,47.8527],[39.44794,47.85317],[39.44785,47.8539],[39.44797,47.85475],[39.44782,47.85511],[39.44759,47.85553],[39.44735,47.85579],[39.44697,47.85604],[39.44618,47.85606],[39.44565,47.85602],[39.44476,47.85617],[39.44452,47.85607],[39.4443,47.85583],[39.44338,47.85538],[39.44268,47.85522],[39.44211,47.85515],[39.44179,47.85454],[39.44025,47.85245],[39.43858,47.85014],[39.43688,47.84789],[39.43619,47.84691],[39.43547,47.84599],[39.43452,47.84531],[39.43382,47.84448],[39.4333,47.84364],[39.43389,47.84223],[39.43449,47.84132],[39.43541,47.8401],[39.4354,47.83854],[39.43306,47.83786],[39.43095,47.83744],[39.429,47.83755],[39.42832,47.83741],[39.42797,47.837],[39.42748,47.83621],[39.42709,47.83577],[39.42656,47.83543],[39.4252,47.83511],[39.42428,47.83431],[39.42348,47.8335],[39.42347,47.83204],[39.42156,47.83174],[39.41778,47.83168],[39.41691,47.8315],[39.41281,47.83056],[39.41138,47.83351],[39.41051,47.83488],[39.40907,47.83724],[39.40601,47.84199],[39.40007,47.85151],[39.39157,47.86512],[39.38981,47.86771],[39.38865,47.87042],[39.38764,47.87085],[39.38475,47.87085],[39.37995,47.87104],[39.37237,47.87147],[39.35721,47.87232],[39.35502,47.87223],[39.35076,47.87128],[39.3506,47.87047],[39.3505,47.86667],[39.34379,47.86663],[39.33571,47.86683],[39.32011,47.86723],[39.31381,47.86716],[39.29905,47.86703],[39.2808,47.86681],[39.26175,47.86628],[39.25027,47.86633],[39.24803,47.86702],[39.24528,47.86737],[39.24353,47.86728],[39.2391,47.86555],[39.23653,47.86446],[39.23583,47.86386],[39.23677,47.86061],[39.23467,47.85959],[39.2346,47.85898],[39.2341,47.85587],[39.23504,47.85485],[39.23559,47.854],[39.23557,47.85345],[39.23347,47.85316],[39.23046,47.85337],[39.21702,47.8533],[39.20328,47.85333],[39.18614,47.8539],[39.18277,47.85397],[39.18066,47.85303],[39.17814,47.85202],[39.1756,47.85059],[39.17456,47.84975],[39.17361,47.8489],[39.16942,47.84657],[39.16559,47.85016],[39.16321,47.85163],[39.16139,47.85218],[39.15419,47.85118],[39.14903,47.85118],[39.14917,47.84693],[39.14924,47.8421],[39.12975,47.8421],[39.11006,47.8423],[39.11011,47.84475],[39.11005,47.84748],[39.11006,47.85144],[39.10472,47.85153],[39.09718,47.8517],[39.08354,47.85193],[39.08363,47.85594],[39.08356,47.86013],[39.0836,47.86835],[39.08359,47.86965],[39.06466,47.86988],[39.0536,47.86985],[39.04208,47.86982],[39.01923,47.8698],[39.0132,47.86971],[38.99996,47.87012],[38.987,47.8701],[38.95473,47.8695],[38.95272,47.87022],[38.94909,47.8717],[38.94592,47.8728],[38.94192,47.87345],[38.93761,47.8737],[38.93157,47.87411],[38.92523,47.87467],[38.91785,47.87525],[38.91442,47.87569],[38.91357,47.87567],[38.91284,47.87561],[38.91212,47.87534],[38.91151,47.87476],[38.90997,47.87304],[38.90824,47.87276],[38.90613,47.87273],[38.90333,47.87278],[38.90173,47.87301],[38.90054,47.87351],[38.89956,47.87431],[38.89873,47.87458],[38.89675,47.87499],[38.89576,47.87494],[38.89501,47.87461],[38.89418,47.87383],[38.89319,47.8737],[38.89237,47.87414],[38.89122,47.8745],[38.88964,47.87434],[38.88823,47.87479],[38.88685,47.87515],[38.88504,47.87545],[38.8822,47.87642],[38.88063,47.87644],[38.88022,47.87628],[38.87987,47.87588],[38.88021,47.87507],[38.88096,47.87399],[38.881,47.87277],[38.88005,47.87121],[38.87667,47.8679],[38.87003,47.86652],[38.85952,47.86563],[38.85186,47.86549],[38.84533,47.8654],[38.84538,47.8667],[38.84471,47.86699],[38.84411,47.86734],[38.84317,47.86663],[38.84197,47.86612],[38.83945,47.86526],[38.8391,47.86492],[38.83928,47.86467],[38.83971,47.86462],[38.84014,47.8643],[38.83915,47.8631],[38.83836,47.86206],[38.83825,47.86143],[38.83837,47.86033],[38.83902,47.85884],[38.83935,47.85843],[38.84015,47.85779],[38.84024,47.85732],[38.8398,47.85698],[38.83876,47.85661],[38.83819,47.85618],[38.83817,47.85478],[38.83823,47.8534],[38.83756,47.85221],[38.8364,47.8519],[38.83592,47.85157],[38.83565,47.85116],[38.83534,47.85075],[38.83463,47.85029],[38.83203,47.85012],[38.8312,47.84986],[38.83109,47.84865],[38.82996,47.84836],[38.82922,47.84796],[38.82898,47.84718],[38.82798,47.84556],[38.82781,47.84408],[38.82758,47.84267],[38.82684,47.84112],[38.8269,47.84047],[38.82768,47.83913],[38.82767,47.83706],[38.82757,47.83496],[38.82759,47.83418],[38.82821,47.83337],[38.82803,47.83282],[38.82839,47.83274],[38.82986,47.8329],[38.83003,47.8327],[38.83006,47.83247],[38.82999,47.83219],[38.83002,47.83199],[38.8301,47.83164],[38.83003,47.83137],[38.82978,47.831],[38.82967,47.83075],[38.82981,47.83048],[38.83027,47.8301],[38.83054,47.82972],[38.83053,47.8291],[38.83082,47.82894],[38.83157,47.82893],[38.83187,47.8288],[38.83198,47.82855],[38.83193,47.82829],[38.83187,47.82801],[38.83186,47.82774],[38.83208,47.82731],[38.83286,47.82746],[38.83288,47.82778],[38.83305,47.82813],[38.83319,47.82831],[38.8336,47.82834],[38.8339,47.82819],[38.83438,47.82801],[38.83526,47.82796],[38.83573,47.82791],[38.83594,47.8277],[38.83521,47.82654],[38.83407,47.82554],[38.83257,47.82462],[38.83084,47.82311],[38.83067,47.82003],[38.83058,47.81557],[38.83018,47.81511],[38.8297,47.8149],[38.82857,47.81532],[38.82757,47.81546],[38.82671,47.81549],[38.81854,47.81551],[38.80938,47.81556],[38.79171,47.81585],[38.79092,47.81546],[38.79117,47.81023],[38.79142,47.80462],[38.79137,47.80054],[38.79191,47.79913],[38.79222,47.79807],[38.79217,47.79777],[38.79186,47.79674],[38.79119,47.79561],[38.78824,47.79335],[38.78579,47.79216],[38.78555,47.79186],[38.78542,47.79122],[38.78548,47.7895],[38.78553,47.78852],[38.78573,47.78787],[38.78605,47.78722],[38.78682,47.78608],[38.78725,47.7856],[38.78776,47.78511],[38.7888,47.78495],[38.78905,47.78496],[38.78956,47.78499],[38.79003,47.78512],[38.7908,47.78515],[38.7912,47.7851],[38.79221,47.78502],[38.79387,47.78507],[38.7947,47.78489],[38.79481,47.78467],[38.79476,47.78447],[38.79473,47.78431],[38.79463,47.78413],[38.79453,47.78395],[38.79439,47.78383],[38.79381,47.78338],[38.79326,47.78292],[38.79271,47.78253],[38.79226,47.78217],[38.79199,47.78142],[38.79159,47.78077],[38.79131,47.7804],[38.79095,47.78009],[38.79066,47.77975],[38.79047,47.77942],[38.79039,47.77911],[38.79044,47.77883],[38.79097,47.7783],[38.792,47.77829],[38.79304,47.77837],[38.79386,47.77816],[38.79412,47.77741],[38.79498,47.77705],[38.79708,47.77713],[38.79728,47.77674],[38.79718,47.77626],[38.79725,47.7756],[38.79749,47.77512],[38.79807,47.77464],[38.79825,47.77414],[38.79778,47.77356],[38.79475,47.77298],[38.79464,47.77198],[38.79541,47.77016],[38.79502,47.7691],[38.79389,47.76901],[38.79074,47.76891],[38.79091,47.75536],[38.79117,47.74652],[38.79087,47.74199],[38.79109,47.73745],[38.79005,47.73703],[38.78884,47.73689],[38.78437,47.73694],[38.78056,47.73629],[38.77835,47.73562],[38.77691,47.73399],[38.77822,47.73141],[38.77782,47.73024],[38.77616,47.72909],[38.77382,47.72782],[38.77291,47.72662],[38.77279,47.72521],[38.77237,47.72407],[38.77156,47.72323],[38.77143,47.72234],[38.77198,47.7207],[38.77401,47.72025],[38.77447,47.71928],[38.77407,47.71432],[38.77397,47.70578],[38.77461,47.69714],[38.77485,47.68799],[38.77512,47.68546],[38.76715,47.68547],[38.76056,47.68557],[38.75681,47.68572],[38.75587,47.68646],[38.75527,47.68671],[38.75464,47.6867],[38.75418,47.68592],[38.75341,47.68497],[38.75243,47.68516],[38.75135,47.6856],[38.75004,47.68572],[38.74824,47.68648],[38.74783,47.68634],[38.74737,47.68594],[38.74668,47.68494],[38.74629,47.68451],[38.7462,47.68407],[38.74629,47.6831],[38.74577,47.6821],[38.7448,47.68124],[38.7436,47.68088],[38.74244,47.68075],[38.74159,47.68109],[38.7404,47.68129],[38.73936,47.68078],[38.7383,47.68038],[38.73677,47.68134],[38.73703,47.68278],[38.73742,47.68332],[38.73833,47.6837],[38.74144,47.68427],[38.74158,47.68535],[38.73936,47.68843],[38.73827,47.68819],[38.73715,47.68787],[38.73604,47.68807],[38.73481,47.68914],[38.73242,47.69006],[38.73143,47.69093],[38.73158,47.69173],[38.73169,47.69227],[38.73232,47.6927],[38.73664,47.69459],[38.73696,47.69558],[38.73677,47.69675],[38.73746,47.69781],[38.73755,47.69893],[38.73635,47.69994],[38.73474,47.70052],[38.73332,47.6997],[38.73104,47.69972],[38.72887,47.69888],[38.72713,47.69909],[38.71579,47.69899],[38.70282,47.69906],[38.69705,47.69861],[38.67999,47.69918],[38.66979,47.69945],[38.66832,47.70017],[38.66588,47.69986],[38.66093,47.69908],[38.66115,47.69838],[38.66706,47.69736],[38.66732,47.6832],[38.66802,47.66868],[38.63917,47.66929],[38.63093,47.66886],[38.63149,47.65377],[38.62775,47.65382],[38.62376,47.64937],[38.62035,47.64692],[38.6178,47.644],[38.59282,47.644],[38.56425,47.64499],[38.54485,47.64493],[38.47345,47.64443],[38.45854,47.64365],[38.45859,47.61675],[38.45023,47.61686],[38.43045,47.61754],[38.40673,47.61666],[38.4012,47.61717],[38.36715,47.61725],[38.3525,47.6164],[38.35322,47.57616],[38.31336,47.57623],[38.31406,47.55714],[38.31391,47.55401],[38.31118,47.55257],[38.3105,47.55078],[38.31026,47.54927],[38.30726,47.548],[38.30899,47.54713],[38.30737,47.54589],[38.30815,47.54441],[38.29559,47.54465],[38.28585,47.5445],[38.28584,47.5372],[38.28592,47.52856],[38.28598,47.51114],[38.28589,47.50885],[38.28674,47.50809],[38.2881,47.50738],[38.29467,47.50679],[38.2945,47.50644],[38.29411,47.50606],[38.29396,47.5055],[38.29416,47.50528],[38.29496,47.50495],[38.2957,47.50438],[38.29593,47.50365],[38.29576,47.50209],[38.29549,47.5017],[38.29346,47.50011],[38.29253,47.49826],[38.29244,47.49611],[38.29248,47.49338],[38.29313,47.49316],[38.29374,47.49246],[38.29381,47.49202],[38.2932,47.49054],[38.29182,47.49],[38.29111,47.48971],[38.29057,47.48942],[38.29029,47.48904],[38.29017,47.48865],[38.28989,47.48762],[38.2887,47.48672],[38.28846,47.48639],[38.28853,47.48628],[38.28871,47.48576],[38.28876,47.4852],[38.28867,47.48381],[38.28904,47.48352],[38.28923,47.48289],[38.2893,47.48233],[38.28983,47.48166],[38.28991,47.48012],[38.28924,47.47955],[38.28924,47.47907],[38.29028,47.47853],[38.2904,47.47794],[38.28995,47.47763],[38.28984,47.47727],[38.29046,47.47644],[38.29215,47.47649],[38.29431,47.47586],[38.29524,47.47593],[38.29582,47.47611],[38.29707,47.47622],[38.29988,47.47558],[38.30238,47.4755],[38.30437,47.47553],[38.30453,47.46659],[38.30474,47.45658],[38.30496,47.43632],[38.30458,47.41449],[38.30317,47.39521],[38.30318,47.39213],[38.29558,47.39207],[38.2874,47.3921],[38.28749,47.38852],[38.28804,47.38382],[38.28869,47.37888],[38.28903,47.37432],[38.28441,47.37411],[38.2733,47.37409],[38.25965,47.374],[38.25721,47.37223],[38.25621,47.37179],[38.25589,47.37146],[38.25569,47.37055],[38.25526,47.36994],[38.25471,47.36965],[38.25305,47.36955],[38.24985,47.36665],[38.24823,47.3655],[38.2464,47.36484],[38.24602,47.36442],[38.24594,47.36389],[38.24607,47.36336],[38.24813,47.36104],[38.2486,47.35971],[38.24941,47.35849],[38.24736,47.35315],[38.24744,47.35173],[38.24688,47.35068],[38.24443,47.34864],[38.24134,47.3471],[38.23893,47.34614],[38.23359,47.34514],[38.23227,47.34425],[38.23219,47.34217],[38.23203,47.33968],[38.23138,47.33875],[38.22801,47.33734],[38.22438,47.33453],[38.22372,47.33326],[38.22631,47.33232],[38.22813,47.3315],[38.22842,47.33051],[38.22769,47.32941],[38.22364,47.32778],[38.22237,47.327],[38.22257,47.32319],[38.22261,47.31686],[38.223,47.30609],[38.23931,47.30551],[38.24964,47.30565],[38.25414,47.30556],[38.28028,47.30569],[38.30827,47.30588],[38.33737,47.3062],[38.33645,47.3051],[38.33548,47.30378],[38.33514,47.29234],[38.33357,47.29093],[38.33216,47.28906],[38.33043,47.28753],[38.32486,47.28272],[38.32379,47.28179],[38.3237,47.28098],[38.326,47.27964],[38.32754,47.27929],[38.33019,47.27682],[38.33323,47.27564],[38.33392,47.27368],[38.33418,47.27171],[38.33406,47.26962],[38.3322,47.26815],[38.33129,47.26752],[38.33103,47.26642],[38.33234,47.26477],[38.33226,47.2639],[38.33009,47.26169],[38.32786,47.25952],[38.32476,47.25643],[38.32081,47.25624],[38.31514,47.25627],[38.3052,47.2563],[38.28989,47.25631],[38.29007,47.25373],[38.29029,47.24994],[38.29065,47.24238],[38.29054,47.23934],[38.28293,47.23944],[38.27584,47.23942],[38.263,47.23927],[38.26249,47.23866],[38.26084,47.23736],[38.25899,47.23553],[38.25823,47.23525],[38.25703,47.23511],[38.25564,47.23409],[38.25442,47.23353],[38.25225,47.23343],[38.25093,47.23326],[38.25015,47.23342],[38.24851,47.23404],[38.24773,47.23416],[38.24449,47.23312],[38.24236,47.233],[38.24097,47.23297],[38.23972,47.23262],[38.23882,47.23173],[38.23787,47.23131],[38.23628,47.23107],[38.23567,47.23076],[38.23494,47.22981],[38.23496,47.2287],[38.23531,47.22736],[38.23574,47.22674],[38.23653,47.22616],[38.23754,47.2256],[38.23907,47.22431],[38.23965,47.22364],[38.23972,47.2229],[38.23994,47.22244],[38.24095,47.22203],[38.2414,47.2215],[38.24144,47.22098],[38.2412,47.22041],[38.24104,47.21975],[38.24115,47.21911],[38.24165,47.21856],[38.24274,47.21868],[38.2432,47.21859],[38.24371,47.21854],[38.24401,47.21795],[38.24398,47.21712],[38.24235,47.21445],[38.24234,47.21353],[38.24268,47.21261],[38.2422,47.21165],[38.24227,47.2105],[38.24174,47.20959],[38.24094,47.20911],[38.23864,47.20849],[38.23826,47.20814],[38.23818,47.20665],[38.23801,47.20318],[38.23802,47.19635],[38.23812,47.18229],[38.23826,47.17126],[38.23789,47.16006],[38.23785,47.15705],[38.23798,47.15389],[38.23781,47.1477],[38.23723,47.13863],[38.23539,47.13441],[38.23399,47.12984],[38.23158,47.12747],[38.23063,47.12611],[38.23028,47.12475],[38.23036,47.12266],[38.23081,47.11945],[38.22633,47.11844],[38.22117,47.11346],[38.21119,47.10642],[38.1976,47.09973],[38.18607,47.0921],[38.16376,47.06802],[38.13766,47.04954],[38.11363,47.03995],[38.08308,47.02216],[38.08308,47.02404],[38.11711,47.04458],[38.13389,47.05445],[38.13148,47.07246],[38.11192,47.09444],[38.07999,47.10846],[38.05664,47.11126],[38.04806,47.10635],[38.03741,47.08953],[38.00308,47.09654],[37.98008,47.09958],[37.98283,47.08742],[37.96909,47.08766],[37.94987,47.0942],[37.92412,47.10448],[37.89768,47.11056],[37.88811,47.11041],[37.88077,47.10769],[37.86541,47.10676],[37.85228,47.10343],[37.85014,47.11027],[37.85151,47.11553],[37.84807,47.11667],[37.8467,47.11851],[37.84661,47.12516],[37.84309,47.1261],[37.83373,47.12674],[37.82756,47.12864],[37.82713,47.13474],[37.82129,47.13609],[37.82137,47.13927],[37.82138,47.14409],[37.82399,47.15085],[37.82358,47.15936],[37.81872,47.16467],[37.81199,47.16852],[37.80113,47.17518],[37.80269,47.18183],[37.82332,47.18531],[37.83561,47.18699],[37.84481,47.18983],[37.85228,47.19788],[37.84275,47.20103],[37.84241,47.20802],[37.83812,47.2184],[37.8273,47.22516],[37.82731,47.23508],[37.82971,47.2437],[37.83434,47.25593],[37.83108,47.26805],[37.82181,47.2776],[37.81134,47.28447],[37.80121,47.28598],[37.79915,47.28913],[37.80704,47.30473],[37.82318,47.30834],[37.83073,47.30228],[37.83245,47.29902],[37.84447,47.30903],[37.83245,47.31765],[37.8273,47.32137],[37.83554,47.34208],[37.85339,47.34092],[37.86438,47.34673],[37.85992,47.35673],[37.8479,47.34976],[37.84,47.35743],[37.85545,47.36441],[37.84241,47.37324],[37.85133,47.38487],[37.86095,47.38998],[37.85923,47.40857],[37.86129,47.4181],[37.86335,47.42704],[37.86867,47.43285],[37.86678,47.44562],[37.86987,47.45131],[37.8788,47.46001],[37.8891,47.46918],[37.89219,47.47243],[37.8867,47.48757],[37.86944,47.5012],[37.85923,47.50827],[37.85108,47.51703],[37.84395,47.52989],[37.83889,47.54374],[37.83743,47.55602],[37.83708,47.56819],[37.83991,47.57722],[37.84515,47.58463],[37.84378,47.59528],[37.86249,47.60784],[37.87056,47.61826],[37.87258,47.6315],[37.85421,47.63095],[37.84018,47.63414],[37.82773,47.63761],[37.81674,47.64044],[37.79855,47.65122],[37.77765,47.66241],[37.7658,47.66562],[37.75752,47.6625],[37.75649,47.66521],[37.75477,47.66943],[37.75237,47.67232],[37.74568,47.67562],[37.74035,47.67874],[37.73589,47.68128],[37.73091,47.68382],[37.72739,47.68567],[37.72499,47.68608],[37.7219,47.68637],[37.71795,47.68741],[37.71023,47.69006],[37.70328,47.68931],[37.69581,47.68925],[37.68208,47.68423],[37.6589,47.68538],[37.63968,47.69786],[37.63247,47.70503],[37.63109,47.71045],[37.62354,47.73066],[37.6244,47.75179],[37.61908,47.77071],[37.62062,47.78283],[37.62732,47.79228],[37.63573,47.80024],[37.63968,47.8082],[37.64671,47.82168],[37.64791,47.82929],[37.64465,47.84116],[37.64088,47.85337],[37.64603,47.86431],[37.62268,47.89977],[37.58801,47.90898],[37.56844,47.90967],[37.54578,47.91634],[37.54457,47.92068],[37.54849,47.92498],[37.55164,47.92692],[37.55143,47.93032],[37.55273,47.93202],[37.55156,47.93321],[37.549,47.93359],[37.54744,47.93334],[37.54516,47.93496],[37.54261,47.93504],[37.54094,47.93574],[37.53578,47.93687],[37.53296,47.9379],[37.52874,47.93791],[37.52732,47.93851],[37.52561,47.9394],[37.52415,47.94007],[37.52149,47.9405],[37.51797,47.94188],[37.51694,47.94251],[37.51531,47.94412],[37.51582,47.9449],[37.5175,47.94602],[37.51895,47.94711],[37.51968,47.94892],[37.51947,47.95027],[37.52213,47.95004],[37.5235,47.94995],[37.53028,47.95467],[37.53492,47.95383],[37.53724,47.95953],[37.53908,47.96249],[37.53839,47.96513],[37.53659,47.96797],[37.53814,47.96912],[37.53977,47.97108],[37.54509,47.97113],[37.54809,47.97119],[37.55204,47.97332],[37.55762,47.97539],[37.56097,47.97728],[37.56483,47.97636],[37.56801,47.97625],[37.57496,47.97642],[37.57685,47.97728],[37.57582,47.98377],[37.57487,47.98883],[37.57376,47.99159],[37.56303,47.99509],[37.5608,47.99549],[37.55788,47.99601],[37.55908,48.00175],[37.56028,48.00451],[37.56346,48.00606],[37.59109,48.01243],[37.61581,48.01083],[37.62268,48.00692],[37.63487,48.00853],[37.64929,48.00979],[37.66972,48.00991],[37.67881,48.01175],[37.69323,48.01777],[37.68931,48.0202],[37.68564,48.0232],[37.68835,48.02576],[37.69272,48.02868],[37.6856,48.03335],[37.67984,48.03772],[37.67693,48.03967],[37.67487,48.0411],[37.68585,48.04705],[37.68779,48.04957],[37.68752,48.05014],[37.68937,48.05164],[37.6916,48.05313],[37.69504,48.05114],[37.69641,48.05035],[37.70075,48.05376],[37.70328,48.05545],[37.7053,48.05648],[37.70748,48.05703],[37.70358,48.05838],[37.69881,48.05953],[37.69143,48.06102],[37.68736,48.06153],[37.68731,48.06239],[37.6877,48.06406],[37.69523,48.06363],[37.69504,48.06457],[37.70096,48.06566],[37.69993,48.07099],[37.70225,48.07114],[37.73289,48.0716],[37.73752,48.07234],[37.74087,48.07372],[37.74396,48.0755],[37.74568,48.07687],[37.74722,48.07968],[37.74911,48.08037],[37.75271,48.07951],[37.75563,48.08037],[37.75529,48.08364],[37.75675,48.08484],[37.75997,48.08482],[37.76258,48.08562],[37.76503,48.08656],[37.76696,48.0884],[37.76859,48.09136],[37.76928,48.09459],[37.77524,48.09703],[37.78316,48.09954],[37.78871,48.10099],[37.79271,48.10551],[37.79438,48.10922],[37.79454,48.11012],[37.79432,48.11093],[37.79369,48.11186],[37.79147,48.11441],[37.79655,48.1162],[37.79777,48.11696],[37.79789,48.11752],[37.79789,48.11808],[37.79759,48.11816],[37.79771,48.11865],[37.79785,48.11903],[37.79947,48.11987],[37.79894,48.12058],[37.79893,48.12097],[37.79858,48.12136],[37.79909,48.122],[37.80294,48.12285],[37.8029,48.12363],[37.80628,48.12481],[37.80668,48.12418],[37.80783,48.12317],[37.81024,48.12433],[37.81529,48.12703],[37.82095,48.13029],[37.81512,48.13453],[37.80636,48.14072],[37.80207,48.14822],[37.80654,48.14911],[37.8113,48.14823],[37.81589,48.14862],[37.82314,48.15008],[37.82301,48.15409],[37.82498,48.15662],[37.83073,48.15855],[37.8365,48.1602],[37.83742,48.16151],[37.83756,48.16299],[37.84313,48.16792],[37.84663,48.17112],[37.84695,48.17587],[37.84989,48.17885],[37.85138,48.18045],[37.84801,48.18383],[37.84464,48.18766],[37.8649,48.19144],[37.88343,48.19264],[37.89746,48.19925],[37.90309,48.21049],[37.90738,48.21443],[37.92403,48.22238],[37.92854,48.2297],[37.94403,48.23565],[37.92948,48.24608],[37.92781,48.2548],[37.93072,48.2626],[37.943,48.27862],[37.93751,48.29096],[37.92171,48.29456],[37.91708,48.30261],[37.90348,48.30625],[37.90755,48.31006],[37.91966,48.30677],[37.91957,48.31057],[37.92068,48.3162],[37.92043,48.32093],[37.91733,48.32441],[37.90622,48.32493],[37.90953,48.32955],[37.91193,48.33275],[37.91845,48.34073],[37.92995,48.34267],[37.93339,48.34667],[37.93922,48.35226],[37.94077,48.35579],[37.9418,48.36172],[37.93734,48.37108],[37.9497,48.38886],[37.96394,48.39091],[37.97716,48.38909],[37.99793,48.37894],[38.0036,48.39171],[37.99913,48.39764],[38.00762,48.3977],[38.01501,48.39491],[38.02599,48.39639],[38.04362,48.40374],[38.05833,48.41155],[38.08137,48.41252],[38.09525,48.41223],[38.11111,48.41354],[38.12337,48.41375],[38.13698,48.41542],[38.16221,48.41416],[38.19354,48.41451],[38.20401,48.40715],[38.21285,48.40282],[38.21551,48.39884],[38.22057,48.39536],[38.22144,48.39137],[38.22187,48.3875],[38.22573,48.38465],[38.22899,48.3839],[38.23139,48.3794],[38.23714,48.37575],[38.24358,48.37338],[38.25115,48.37456],[38.25675,48.37568],[38.26687,48.37829],[38.27654,48.38076],[38.28275,48.38248],[38.28543,48.38299],[38.28385,48.3885],[38.2804,48.39142],[38.28262,48.39314],[38.28862,48.39314],[38.29586,48.39634],[38.30138,48.39989],[38.30545,48.40136],[38.31011,48.40112],[38.3153,48.40048],[38.32151,48.40019],[38.32449,48.40278],[38.3283,48.40431],[38.33296,48.40412],[38.33735,48.40422],[38.34226,48.40393],[38.35018,48.40647],[38.35768,48.41077],[38.36287,48.4173],[38.36555,48.41949],[38.36874,48.42215],[38.37107,48.42481],[38.38011,48.42473],[38.38949,48.42407],[38.3958,48.4264],[38.39953,48.42929],[38.40092,48.43234],[38.4024,48.43585],[38.40337,48.43639],[38.40485,48.43648],[38.40974,48.43422],[38.41472,48.43277],[38.41867,48.43205],[38.42245,48.43225],[38.42833,48.43374],[38.43404,48.43603],[38.43419,48.43882],[38.43348,48.44343],[38.43481,48.45095],[38.43997,48.45354],[38.44376,48.45226],[38.45099,48.45562],[38.45206,48.46461],[38.45215,48.47348],[38.4482,48.48242],[38.44786,48.49601],[38.45344,48.5066],[38.46606,48.51468],[38.47016,48.52627],[38.48723,48.55229],[38.49379,48.56677],[38.50448,48.58273],[38.5058,48.59204],[38.50468,48.60567],[38.47725,48.62048],[38.46108,48.62647],[38.46483,48.64106],[38.47244,48.6461],[38.48705,48.65214],[38.50727,48.65737],[38.51833,48.66038],[38.53205,48.66333],[38.54385,48.66969],[38.54978,48.67419],[38.55403,48.67929],[38.55819,48.68437],[38.55993,48.69102],[38.56197,48.69715],[38.57128,48.69889],[38.58278,48.70104],[38.59617,48.70671],[38.61694,48.71226],[38.64201,48.71113],[38.66364,48.71045],[38.67393,48.71294],[38.68097,48.71486],[38.68097,48.71486],[38.68805,48.7175],[38.69102,48.71755],[38.69556,48.7169],[38.69853,48.71659],[38.70299,48.71438],[38.70784,48.71495],[38.71234,48.71404],[38.71655,48.71305],[38.71711,48.71048],[38.72492,48.70694],[38.78037,48.69198],[38.78809,48.69493],[38.79238,48.70133],[38.79864,48.70517],[38.80781,48.72052],[38.81286,48.72641],[38.81448,48.73275],[38.82068,48.74164],[38.82868,48.74232],[38.84268,48.74487],[38.8492,48.75087],[38.85274,48.75029],[38.85851,48.75005],[38.86034,48.75091],[38.86313,48.75179],[38.87062,48.75185],[38.87722,48.75313],[38.87956,48.75299],[38.88038,48.75226],[38.88096,48.75101],[38.89233,48.751],[38.89997,48.75122],[38.90218,48.75138],[38.90664,48.75066],[38.91111,48.74889],[38.91424,48.74613],[38.916,48.74421],[38.91767,48.74375],[38.91997,48.7443],[38.92126,48.74544],[38.92561,48.74558],[38.92984,48.74573],[38.93353,48.74681],[38.93529,48.74762],[38.93769,48.74763],[38.93943,48.7463],[38.93911,48.74447],[38.93784,48.74329],[38.9354,48.74239],[38.93435,48.74013],[38.93357,48.73754],[38.93497,48.73624],[38.93814,48.7356],[38.94149,48.73492],[38.94477,48.73487],[38.94859,48.73512],[38.95325,48.73508],[38.95531,48.7347],[38.95771,48.73525],[38.95883,48.7363],[38.95956,48.73669],[38.95999,48.73771],[38.95977,48.7408],[38.95881,48.74363],[38.95984,48.74595],[38.96095,48.74667],[38.96488,48.74678],[38.9684,48.74527],[38.97072,48.74421],[38.9729,48.74443],[38.97415,48.74494],[38.97621,48.74549],[38.98046,48.74507],[38.98267,48.74355],[38.98335,48.74217],[38.98355,48.74013],[38.98445,48.73901],[38.98623,48.7376],[38.98777,48.73726],[38.98992,48.7359],[38.99091,48.73441],[38.99243,48.73153],[38.99526,48.72898],[38.99636,48.72759],[38.99889,48.72558],[39.00011,48.72187],[39.00059,48.71915],[38.99956,48.71746],[38.99745,48.71603],[38.99471,48.71529],[38.99147,48.71495],[38.98835,48.71406],[38.98578,48.71273],[38.98576,48.71174],[38.98707,48.71111],[38.98942,48.71066],[38.99262,48.71089],[38.99511,48.71186],[38.99752,48.71233],[38.99906,48.71196],[38.99998,48.71084],[39.00001,48.70968],[38.99958,48.70756],[39.00061,48.70412],[39.00108,48.70075],[39.00288,48.69864],[39.00638,48.69699],[39.01082,48.69656],[39.01597,48.69571],[39.01696,48.69494],[39.01704,48.68891],[39.01638,48.68555],[39.01606,48.68386],[39.01642,48.68235],[39.01942,48.68035],[39.02082,48.67919],[39.02133,48.67722],[39.02161,48.67383],[39.02194,48.67202],[39.02425,48.67053],[39.0258,48.66927],[39.02711,48.66755],[39.02779,48.66542],[39.02902,48.6636],[39.02672,48.66143],[39.02374,48.66106],[39.02067,48.66172],[39.01837,48.66285],[39.01597,48.66318],[39.01301,48.66311],[39.01099,48.66228],[39.01114,48.66082],[39.01245,48.65942],[39.01492,48.65854],[39.01912,48.65768],[39.02224,48.65646],[39.02447,48.65539],[39.02874,48.65399],[39.03159,48.65358],[39.03436,48.65246],[39.03524,48.65107],[39.03605,48.64938],[39.03792,48.64808],[39.03906,48.64801],[39.04425,48.64713],[39.04665,48.64744],[39.04792,48.6476],[39.04923,48.64758],[39.05069,48.64747],[39.05217,48.64764],[39.05403,48.64757],[39.057,48.64817],[39.06075,48.64907],[39.07313,48.65121],[39.07513,48.65212],[39.07738,48.6524],[39.08067,48.65225],[39.08828,48.65145],[39.09592,48.65177],[39.09955,48.65168],[39.10206,48.65086],[39.10463,48.6512],[39.11551,48.65724],[39.12148,48.66014],[39.12467,48.66126],[39.13124,48.66129],[39.1359,48.66088],[39.13909,48.66058],[39.14079,48.66155],[39.14079,48.66318],[39.14042,48.66663],[39.14409,48.67256],[39.14939,48.67691],[39.15362,48.67706],[39.15785,48.6765],[39.1621,48.67664],[39.16755,48.67892],[39.17111,48.68019],[39.17334,48.6814],[39.17611,48.68314],[39.17967,48.68561],[39.18171,48.68935],[39.18375,48.69408],[39.18836,48.69942],[39.19199,48.70286],[39.19392,48.70446],[39.19527,48.70699],[39.19765,48.70725],[39.19903,48.70657],[39.19956,48.7047],[39.20031,48.70246],[39.20139,48.70089],[39.20308,48.69988],[39.20626,48.69933],[39.21046,48.70116],[39.21471,48.70362],[39.21926,48.70617],[39.22396,48.7075],[39.22619,48.70967],[39.23093,48.71164],[39.23469,48.71217],[39.23673,48.71175],[39.23825,48.71082],[39.24052,48.71014],[39.24325,48.71072],[39.24853,48.71318],[39.2507,48.71651],[39.2519,48.72155],[39.25316,48.72531],[39.25518,48.72535],[39.25825,48.72538],[39.26275,48.72683],[39.26464,48.72807],[39.26559,48.7281],[39.26735,48.72758],[39.2687,48.72698],[39.27057,48.72765],[39.27271,48.7311],[39.27683,48.73569],[39.27681,48.73794],[39.27621,48.7398],[39.27423,48.74306],[39.26994,48.74606],[39.27016,48.74852],[39.26947,48.75073],[39.26986,48.75285],[39.2717,48.75429],[39.27466,48.75455],[39.27668,48.7539],[39.2781,48.75231],[39.2793,48.75039],[39.2826,48.74945],[39.28638,48.7503],[39.28792,48.75189],[39.28775,48.75435],[39.28956,48.7576],[39.29071,48.76066],[39.29672,48.76304],[39.29973,48.76456],[39.30398,48.76866],[39.30681,48.77237],[39.31131,48.77514],[39.32037,48.77661],[39.32556,48.77684],[39.32844,48.77531],[39.32925,48.77327],[39.32827,48.77079],[39.32758,48.7694],[39.32869,48.76841],[39.33582,48.76677],[39.34028,48.76719],[39.34432,48.76858],[39.34916,48.76934],[39.35444,48.76821],[39.35565,48.76688],[39.35517,48.7655],[39.3526,48.76278],[39.35019,48.76145],[39.34655,48.76055],[39.34457,48.75808],[39.34672,48.7533],[39.34775,48.75118],[39.34848,48.75016],[39.34844,48.74677],[39.35011,48.74377],[39.35852,48.73839],[39.35985,48.73709],[39.36015,48.73358],[39.3562,48.73012],[39.35517,48.72741],[39.35676,48.72565],[39.36509,48.72214],[39.37303,48.72053],[39.37526,48.71897],[39.37208,48.71532],[39.36496,48.716],[39.36041,48.71475],[39.35354,48.71237],[39.34899,48.71266],[39.34865,48.71147],[39.35011,48.70897],[39.35148,48.70779],[39.35389,48.70393],[39.35706,48.69816],[39.36161,48.69629],[39.36496,48.69385],[39.37054,48.69175],[39.37663,48.68807],[39.38616,48.68586],[39.39096,48.68541],[39.39225,48.68314],[39.39071,48.68138],[39.39131,48.67963],[39.39757,48.67577],[39.40547,48.67458],[39.40959,48.67283],[39.41371,48.67005],[39.41534,48.66693],[39.41002,48.66132],[39.41002,48.65933],[39.41405,48.65758],[39.41989,48.65894],[39.42719,48.65792],[39.43302,48.65741],[39.43731,48.65622],[39.44092,48.65593],[39.44324,48.65661],[39.44736,48.65695],[39.4519,48.65588],[39.45448,48.65321],[39.45216,48.65043],[39.45092,48.64967],[39.45096,48.64655],[39.45186,48.64329],[39.45302,48.6415],[39.45615,48.63974],[39.46263,48.63969],[39.46645,48.63915],[39.46804,48.63827],[39.468,48.63628],[39.46577,48.6339],[39.46551,48.6322],[39.46568,48.62982],[39.46787,48.62868],[39.47031,48.62837],[39.47581,48.62931],[39.4816,48.62925],[39.48413,48.62911],[39.48551,48.63016],[39.48576,48.63299],[39.48791,48.63546],[39.49083,48.63305],[39.49319,48.63223],[39.50186,48.63407],[39.50774,48.63512],[39.51267,48.6354],[39.51649,48.6337],[39.51769,48.63092],[39.51808,48.62806],[39.51533,48.62451],[39.51319,48.62222],[39.5195,48.61802],[39.52447,48.61521],[39.52804,48.61271],[39.52941,48.6095],[39.52769,48.60675],[39.52529,48.60468],[39.52426,48.60335],[39.52615,48.59952],[39.52864,48.59793],[39.5322,48.5975],[39.53396,48.59648],[39.53473,48.5935],[39.53297,48.59242],[39.52945,48.59109],[39.52834,48.58952],[39.52898,48.58757],[39.53083,48.58564],[39.53791,48.58433],[39.54439,48.58478],[39.54778,48.58626],[39.54928,48.58853],[39.54898,48.5906],[39.54791,48.59319],[39.54949,48.59557],[39.55542,48.59801],[39.55949,48.59909],[39.56301,48.59883],[39.56533,48.59725],[39.56687,48.59356],[39.56881,48.59194],[39.56833,48.58893],[39.56473,48.58603],[39.56396,48.58436],[39.56645,48.58311],[39.57134,48.58217],[39.57473,48.58132],[39.57632,48.58302],[39.58117,48.58603],[39.5858,48.5889],[39.59267,48.59282],[39.59867,48.59316],[39.60237,48.59245],[39.6046,48.59057],[39.60631,48.5885],[39.60653,48.58703],[39.60567,48.58564],[39.60198,48.5849],[39.59975,48.58342],[39.59687,48.57976],[39.59593,48.57771],[39.59743,48.57587],[39.59983,48.57522],[39.60511,48.57476],[39.60897,48.57382],[39.61129,48.5738],[39.61181,48.57553],[39.61597,48.57757],[39.61975,48.58274],[39.62052,48.58635],[39.62314,48.58708],[39.6255,48.5862],[39.62953,48.58368],[39.63236,48.58194],[39.63447,48.58124],[39.64768,48.58388],[39.65614,48.58547],[39.65867,48.58666],[39.6679,48.58782],[39.67245,48.58933],[39.6773,48.58862],[39.68296,48.58671],[39.68768,48.58615],[39.69584,48.58657],[39.70013,48.58754],[39.70455,48.58748],[39.71047,48.5864],[39.71472,48.58532],[39.72197,48.5851],[39.72592,48.5862],[39.73519,48.58609],[39.74085,48.58788],[39.74497,48.59012],[39.74768,48.5906],[39.74974,48.59009],[39.75154,48.58938],[39.75253,48.58757],[39.75257,48.58581],[39.75201,48.58305],[39.75291,48.58223],[39.75411,48.58194],[39.75738,48.58319],[39.76231,48.58407],[39.76802,48.58617],[39.77119,48.58796],[39.77343,48.59066],[39.77707,48.59197],[39.78875,48.5929],[39.79214,48.5927],[39.79222,48.59268],[39.79403,48.59222]]},geometry:{type:"Polygon",coordinates:[[[39.79403,48.59222],[39.79707,48.59143],[39.80093,48.58995],[39.80402,48.5868],[39.80488,48.58583],[39.80776,48.58453],[39.81278,48.58373],[39.81471,48.58376],[39.81827,48.58478],[39.82282,48.58606],[39.82548,48.58615],[39.82634,48.58561],[39.82724,48.58424],[39.82724,48.58251],[39.82656,48.58141],[39.82488,48.58055],[39.82316,48.5797],[39.82231,48.57919],[39.82368,48.57811],[39.82664,48.57726],[39.83265,48.57558],[39.83939,48.5736],[39.84587,48.57178],[39.84797,48.57081],[39.85213,48.56726],[39.85484,48.56397],[39.85582,48.56258],[39.8563,48.56022],[39.85509,48.55681],[39.85381,48.55394],[39.85561,48.5496],[39.85775,48.54599],[39.85818,48.5442],[39.85754,48.54215],[39.85664,48.53911],[39.85672,48.53624],[39.85737,48.53411],[39.85909,48.53153],[39.86179,48.52729],[39.86325,48.52368],[39.86338,48.52158],[39.86539,48.51544],[39.86758,48.51069],[39.8675,48.50711],[39.8666,48.50475],[39.86432,48.5029],[39.86042,48.50171],[39.85853,48.5021],[39.85458,48.50373],[39.85282,48.50398],[39.8505,48.50316],[39.84887,48.50148],[39.84827,48.49929],[39.84879,48.49573],[39.84943,48.49161],[39.84951,48.48737],[39.84921,48.48541],[39.84818,48.48379],[39.84741,48.47557],[39.84767,48.47363],[39.85007,48.47042],[39.85295,48.46746],[39.85831,48.46393],[39.86548,48.46108],[39.87157,48.45864],[39.87827,48.45596],[39.88076,48.45468],[39.88548,48.45206],[39.8896,48.4501],[39.89346,48.4493],[39.8981,48.44796],[39.89913,48.44682],[39.89964,48.44611],[39.89908,48.4452],[39.89835,48.4446],[39.89672,48.44395],[39.89372,48.44375],[39.8917,48.44347],[39.89058,48.44298],[39.89097,48.44105],[39.8917,48.43871],[39.89462,48.43339],[39.89535,48.43233],[39.89586,48.43091],[39.89719,48.4294],[39.89852,48.42786],[39.90119,48.4265],[39.90324,48.42556],[39.90951,48.42279],[39.91217,48.42111],[39.91342,48.41952],[39.91389,48.41824],[39.91337,48.41479],[39.91277,48.41274],[39.91011,48.40992],[39.90805,48.40724],[39.90745,48.40536],[39.90788,48.40368],[39.90912,48.40263],[39.91256,48.40174],[39.91552,48.40103],[39.91865,48.39963],[39.91998,48.3979],[39.91985,48.39664],[39.91874,48.39513],[39.91745,48.39448],[39.91569,48.39393],[39.91054,48.39322],[39.90852,48.39254],[39.90792,48.39106],[39.90801,48.38992],[39.91067,48.38889],[39.91453,48.38735],[39.91612,48.38647],[39.91762,48.38359],[39.91814,48.38139],[39.91895,48.37931],[39.92011,48.37786],[39.9217,48.37632],[39.92397,48.37552],[39.92736,48.37529],[39.93187,48.37635],[39.93371,48.37843],[39.93582,48.38319],[39.93698,48.38513],[39.93917,48.38698],[39.94097,48.38744],[39.94281,48.38664],[39.94371,48.38533],[39.94401,48.38407],[39.94238,48.37966],[39.93912,48.37564],[39.93693,48.3729],[39.9362,48.37147],[39.93625,48.37033],[39.93801,48.3672],[39.93702,48.3615],[39.94496,48.35836],[39.94565,48.3577],[39.94513,48.35642],[39.94376,48.35514],[39.945,48.35448],[39.94843,48.35437],[39.94689,48.35211],[39.94565,48.34992],[39.94462,48.34915],[39.94268,48.34843],[39.94125,48.34807],[39.9393,48.34787],[39.93266,48.34828],[39.93196,48.34829],[39.92796,48.34823],[39.91941,48.34688],[39.91942,48.34093],[39.91108,48.33938],[39.90244,48.33792],[39.88525,48.33491],[39.88074,48.33384],[39.87395,48.334],[39.86735,48.33441],[39.86411,48.33431],[39.86196,48.33391],[39.85614,48.33365],[39.85005,48.33345],[39.8475,48.3322],[39.84743,48.32942],[39.84685,48.32916],[39.84228,48.32875],[39.84293,48.32598],[39.84324,48.32424],[39.84321,48.3233],[39.84304,48.31652],[39.8424,48.30979],[39.84973,48.3094],[39.85394,48.30906],[39.86073,48.3089],[39.86416,48.30881],[39.87559,48.30916],[39.88203,48.30922],[39.88509,48.30921],[39.88857,48.30911],[39.88853,48.30612],[39.88866,48.30474],[39.89037,48.2975],[39.8944,48.29713],[39.89561,48.30107],[39.89608,48.30189],[39.89775,48.30229],[39.89921,48.30221],[39.90035,48.30182],[39.90144,48.3013],[39.90196,48.30081],[39.90248,48.29433],[39.90483,48.29355],[39.90839,48.29239],[39.9096,48.29193],[39.91303,48.2901],[39.91521,48.28876],[39.91707,48.28711],[39.91027,48.28055],[39.91044,48.2768],[39.91127,48.2766],[39.91207,48.27619],[39.91301,48.27562],[39.91325,48.27516],[39.91331,48.27408],[39.91319,48.27357],[39.91221,48.27248],[39.91203,48.27197],[39.91217,48.27165],[39.91269,48.27141],[39.91389,48.27136],[39.91591,48.27206],[39.91628,48.27199],[39.91641,48.2718],[39.91604,48.27091],[39.91595,48.27064],[39.91602,48.27042],[39.91635,48.27013],[39.91685,48.27001],[39.9182,48.27036],[39.91887,48.27063],[39.92111,48.2716],[39.9221,48.27185],[39.9247,48.27165],[39.92668,48.27168],[39.92719,48.272],[39.92732,48.27246],[39.92723,48.27337],[39.92747,48.27405],[39.92783,48.27471],[39.92878,48.276],[39.9291,48.27637],[39.9298,48.27714],[39.93114,48.27792],[39.93277,48.27827],[39.93341,48.27883],[39.93375,48.27911],[39.93436,48.27934],[39.93505,48.27937],[39.93571,48.27951],[39.93597,48.27968],[39.93614,48.28007],[39.93586,48.28051],[39.93565,48.28067],[39.9347,48.28114],[39.93276,48.28175],[39.9321,48.28198],[39.93174,48.28229],[39.93156,48.28263],[39.93153,48.28306],[39.93175,48.28342],[39.93217,48.28366],[39.93392,48.2837],[39.93531,48.28372],[39.93617,48.28389],[39.93662,48.28416],[39.93712,48.28466],[39.93763,48.28545],[39.93797,48.28627],[39.93805,48.28678],[39.93808,48.28815],[39.93802,48.29018],[39.93838,48.29088],[39.93892,48.2915],[39.93957,48.29202],[39.94046,48.29237],[39.94104,48.29257],[39.94202,48.29272],[39.94301,48.29272],[39.94378,48.29246],[39.94423,48.29232],[39.94496,48.29225],[39.94561,48.29226],[39.94617,48.29254],[39.94767,48.29384],[39.94906,48.29448],[39.9493,48.29471],[39.94963,48.29613],[39.95003,48.29656],[39.95127,48.29722],[39.95137,48.29758],[39.95145,48.29798],[39.95141,48.29834],[39.95108,48.29874],[39.95091,48.29914],[39.9512,48.2994],[39.95236,48.29984],[39.95298,48.3005],[39.95307,48.30094],[39.95308,48.30244],[39.95331,48.30337],[39.95383,48.3037],[39.95436,48.30391],[39.95541,48.30401],[39.95602,48.30396],[39.95726,48.30351],[39.95777,48.3032],[39.95804,48.30284],[39.9582,48.30253],[39.95818,48.30203],[39.95741,48.30105],[39.95716,48.2997],[39.95716,48.29938],[39.95745,48.29918],[39.95804,48.29867],[39.95833,48.2985],[39.95878,48.29837],[39.95955,48.29839],[39.95995,48.29854],[39.96042,48.29896],[39.96088,48.29955],[39.9613,48.29967],[39.96214,48.29952],[39.96336,48.29927],[39.96436,48.29913],[39.96652,48.29977],[39.96704,48.2998],[39.96771,48.29968],[39.96849,48.29935],[39.96921,48.29913],[39.97025,48.29904],[39.97116,48.29898],[39.97157,48.29927],[39.97203,48.30189],[39.97189,48.30262],[39.97154,48.30291],[39.97078,48.30315],[39.9699,48.30319],[39.96915,48.30319],[39.96836,48.30312],[39.96709,48.30291],[39.96649,48.30267],[39.96598,48.30244],[39.96571,48.30219],[39.96523,48.30222],[39.96481,48.30229],[39.96446,48.30247],[39.96426,48.30268],[39.96417,48.30319],[39.96435,48.30365],[39.96588,48.30446],[39.96634,48.30494],[39.96671,48.30568],[39.96708,48.30633],[39.96742,48.30651],[39.96827,48.30685],[39.96909,48.30705],[39.97002,48.3071],[39.97079,48.30706],[39.97159,48.30718],[39.97197,48.3074],[39.97213,48.30758],[39.97221,48.3086],[39.97232,48.30895],[39.97279,48.30975],[39.97286,48.31014],[39.97288,48.31161],[39.97315,48.31203],[39.97358,48.31247],[39.97678,48.31388],[39.97786,48.3147],[39.97846,48.31505],[39.97931,48.31537],[39.98013,48.31562],[39.98147,48.31565],[39.98289,48.3156],[39.98358,48.3155],[39.9844,48.31567],[39.98518,48.31599],[39.98572,48.31632],[39.98725,48.31692],[39.98901,48.31725],[39.98984,48.31722],[39.99073,48.3171],[39.99137,48.31676],[39.99159,48.31663],[39.99181,48.31629],[39.99189,48.31609],[39.99295,48.31526],[39.9931,48.31515],[39.99338,48.31469],[39.99364,48.31402],[39.9944,48.31211],[39.9948,48.31114],[39.99481,48.30931],[39.99474,48.30773],[39.99462,48.30512],[39.99455,48.30447],[39.99438,48.30287],[39.99413,48.3008],[39.99957,48.29123],[40.00309,48.28506],[40.00888,48.27482],[40.00948,48.27372],[40.01258,48.26946],[40.01304,48.2692],[40.01403,48.26915],[40.0154,48.2695],[40.01682,48.26973],[40.01732,48.26967],[40.01788,48.26905],[40.01832,48.26818],[40.01786,48.26782],[40.01679,48.26765],[40.0145,48.26714],[40.0143,48.26687],[40.01467,48.26606],[40.01709,48.26218],[40.01975,48.25787],[40.02205,48.25421],[40.02199,48.25373],[40.00872,48.24259],[40.00848,48.24205],[40.00836,48.24145],[40.00898,48.23802],[40.01098,48.22712],[40.01107,48.22557],[40.01079,48.22517],[40.00995,48.22469],[40.0063,48.22379],[40.00342,48.22365],[40.00107,48.22399],[39.99659,48.22435],[39.9911,48.22499],[39.98532,48.22547],[39.97972,48.22606],[39.97444,48.22662],[39.96209,48.22784],[39.95731,48.22812],[39.95357,48.22835],[39.94971,48.22843],[39.94612,48.22848],[39.9417,48.22855],[39.94141,48.22475],[39.94109,48.22047],[39.94085,48.2173],[39.94058,48.21381],[39.94028,48.20849],[39.94012,48.20535],[39.94002,48.20266],[39.93968,48.19702],[39.93936,48.19249],[39.93903,48.18802],[39.93859,48.18071],[39.9311,48.18166],[39.92633,48.18221],[39.91825,48.18111],[39.91135,48.18012],[39.9104,48.17708],[39.9093,48.17339],[39.90896,48.17244],[39.90878,48.17082],[39.90831,48.16574],[39.90818,48.16503],[39.90759,48.16431],[39.9071,48.16377],[39.90674,48.16287],[39.90657,48.16176],[39.90611,48.1606],[39.90627,48.1601],[39.90557,48.15943],[39.90537,48.15912],[39.9054,48.15857],[39.90553,48.15808],[39.90576,48.15767],[39.9061,48.15705],[39.90679,48.15631],[39.90713,48.15566],[39.90811,48.15477],[39.90857,48.1544],[39.90853,48.15403],[39.90842,48.15378],[39.90815,48.15363],[39.90776,48.15367],[39.90745,48.1536],[39.90718,48.15337],[39.90713,48.15312],[39.90703,48.15296],[39.90675,48.15271],[39.90631,48.15244],[39.90591,48.15188],[39.90587,48.15136],[39.9063,48.15107],[39.90706,48.15091],[39.90709,48.15055],[39.90735,48.15],[39.90726,48.14949],[39.90676,48.14904],[39.90674,48.14856],[39.90656,48.14802],[39.90588,48.14716],[39.90567,48.14644],[39.90543,48.14572],[39.90508,48.14499],[39.90489,48.14431],[39.90444,48.14327],[39.90427,48.14307],[39.90368,48.1424],[39.90365,48.14179],[39.90362,48.14152],[39.90319,48.14092],[39.90259,48.1403],[39.90241,48.14002],[39.90236,48.13989],[39.90229,48.13967],[39.90206,48.13921],[39.90143,48.13869],[39.90035,48.1383],[39.89978,48.13789],[39.89909,48.13616],[39.89849,48.13503],[39.89746,48.13412],[39.89526,48.13335],[39.89381,48.13333],[39.89177,48.13263],[39.88991,48.13166],[39.88814,48.13034],[39.88469,48.12728],[39.88447,48.12583],[39.88297,48.12462],[39.87965,48.12155],[39.87839,48.1207],[39.87791,48.11968],[39.87634,48.11866],[39.87415,48.11786],[39.87221,48.11695],[39.87359,48.11379],[39.87573,48.10932],[39.87222,48.09505],[39.86904,48.07982],[39.83386,48.06776],[39.83765,48.06566],[39.84141,48.06382],[39.84579,48.06125],[39.86544,48.05517],[39.87053,48.05359],[39.87574,48.05213],[39.88608,48.04937],[39.88477,48.04743],[39.88416,48.04646],[39.88307,48.0457],[39.88056,48.04399],[39.87931,48.04313],[39.87835,48.04219],[39.86024,48.04111],[39.85376,48.04108],[39.82681,48.04093],[39.80219,48.04082],[39.77756,48.04045],[39.7782,48.03905],[39.78004,48.03793],[39.78023,48.03728],[39.77978,48.03663],[39.78002,48.03598],[39.78004,48.03529],[39.78075,48.03497],[39.78197,48.0347],[39.78228,48.03415],[39.78242,48.0336],[39.78378,48.03244],[39.78405,48.03074],[39.78569,48.02947],[39.78594,48.02886],[39.78593,48.02816],[39.78568,48.02752],[39.78578,48.02685],[39.78679,48.02571],[39.78634,48.02462],[39.78624,48.02353],[39.788,48.02193],[39.78868,48.0199],[39.78915,48.0194],[39.78981,48.01868],[39.78987,48.01689],[39.79114,48.01579],[39.79181,48.01522],[39.79193,48.01465],[39.79247,48.01398],[39.79265,48.01228],[39.79312,48.01194],[39.7946,48.0118],[39.7959,48.01092],[39.79833,48.00979],[39.80081,48.00879],[39.80127,48.00836],[39.80156,48.00766],[39.80178,48.00743],[39.80218,48.00734],[39.80294,48.00767],[39.8041,48.008],[39.80482,48.00772],[39.80502,48.00741],[39.80523,48.00677],[39.80533,48.00642],[39.80563,48.00607],[39.80792,48.00568],[39.80874,48.00526],[39.80968,48.00496],[39.81196,48.00487],[39.81228,48.00451],[39.81239,48.00414],[39.8119,48.00365],[39.812,48.00318],[39.81349,48.00319],[39.81428,48.00303],[39.81557,48.00242],[39.81661,48.0021],[39.81732,48.00157],[39.81787,48.00104],[39.81777,48.00008],[39.81613,47.99898],[39.81531,47.9984],[39.81475,47.9978],[39.81505,47.99721],[39.81582,47.99665],[39.81651,47.9965],[39.81742,47.99596],[39.81835,47.99568],[39.81928,47.99568],[39.81951,47.99479],[39.81926,47.99393],[39.81825,47.99338],[39.81814,47.99273],[39.81851,47.9919],[39.8187,47.99085],[39.81909,47.99081],[39.81974,47.99088],[39.82026,47.99082],[39.82028,47.99004],[39.81992,47.98975],[39.81922,47.98949],[39.81782,47.98938],[39.8175,47.98908],[39.81737,47.98821],[39.81735,47.98612],[39.81796,47.98514],[39.81806,47.98418],[39.8187,47.98378],[39.81939,47.98417],[39.82025,47.98481],[39.82257,47.98391],[39.82473,47.98325],[39.825,47.98245],[39.82514,47.98166],[39.82521,47.98099],[39.8251,47.98035],[39.82484,47.97987],[39.82445,47.97939],[39.82308,47.97883],[39.8217,47.97706],[39.82043,47.9743],[39.81891,47.97202],[39.81848,47.97108],[39.81857,47.97008],[39.81762,47.96846],[39.81805,47.9681],[39.81904,47.968],[39.8205,47.96821],[39.82077,47.96794],[39.82057,47.96768],[39.81995,47.96743],[39.81863,47.96663],[39.81894,47.96615],[39.81974,47.96568],[39.82006,47.96516],[39.81987,47.96467],[39.81934,47.96438],[39.81918,47.96383],[39.81955,47.96361],[39.81988,47.9625],[39.82019,47.96205],[39.82067,47.96165],[39.81973,47.96107],[39.81957,47.96075],[39.82038,47.9605],[39.82162,47.9605],[39.82309,47.96043],[39.82391,47.95987],[39.82442,47.95932],[39.82523,47.95883],[39.82525,47.95827],[39.82488,47.95771],[39.82434,47.95716],[39.82437,47.9565],[39.82501,47.95629],[39.82616,47.95639],[39.8266,47.95593],[39.82652,47.95537],[39.82465,47.9542],[39.82408,47.95358],[39.82377,47.95286],[39.82338,47.9523],[39.82329,47.95184],[39.82197,47.95137],[39.81851,47.95125],[39.813,47.95143],[39.80733,47.95131],[39.80799,47.94318],[39.80812,47.93504],[39.80287,47.93484],[39.8027,47.93274],[39.80255,47.93222],[39.80231,47.93091],[39.80224,47.93035],[39.8024,47.92968],[39.80257,47.92908],[39.80286,47.92847],[39.80318,47.92721],[39.80315,47.92657],[39.80298,47.92593],[39.80173,47.92505],[39.79958,47.92336],[39.79816,47.92236],[39.79664,47.92139],[39.79627,47.92071],[39.79602,47.92013],[39.79571,47.91929],[39.79545,47.91844],[39.79529,47.9176],[39.79516,47.91673],[39.79516,47.91523],[39.79531,47.91438],[39.7954,47.91379],[39.7954,47.91247],[39.79543,47.90995],[39.79537,47.9049],[39.7954,47.8951],[39.79618,47.88246],[39.79683,47.87202],[39.7967,47.87137],[39.79593,47.87007],[39.79538,47.86961],[39.79414,47.86944],[39.79163,47.86945],[39.78981,47.86979],[39.7891,47.86986],[39.78839,47.86967],[39.78705,47.86998],[39.78506,47.87011],[39.78307,47.87031],[39.78207,47.87018],[39.78107,47.86984],[39.78001,47.86972],[39.7772,47.87013],[39.77516,47.87049],[39.77402,47.87086],[39.76981,47.87139],[39.76858,47.87155],[39.76745,47.87151],[39.76546,47.87172],[39.76522,47.86576],[39.76535,47.85938],[39.76543,47.84679],[39.75877,47.84714],[39.75497,47.84319],[39.75336,47.84147],[39.75111,47.83896],[39.7487,47.83703],[39.74456,47.83246],[39.74024,47.82786],[39.7383,47.82746],[39.71865,47.82885],[39.69868,47.83022],[39.67866,47.83146],[39.65778,47.8327],[39.65208,47.83341],[39.64903,47.83529],[39.64635,47.83645],[39.6434,47.83755],[39.63557,47.83846],[39.63352,47.83862],[39.62761,47.83901],[39.62555,47.83831],[39.61909,47.83767],[39.61538,47.83706],[39.61277,47.83701],[39.6025,47.83699],[39.59225,47.83706],[39.57243,47.83716],[39.56748,47.83716],[39.56499,47.8354],[39.56255,47.83343],[39.55861,47.83168],[39.55592,47.83055],[39.55318,47.82958],[39.5508,47.82918],[39.548,47.82834],[39.54547,47.82699],[39.54255,47.82567],[39.54079,47.82699],[39.53904,47.82904],[39.53577,47.8326],[39.52893,47.82902],[39.521,47.82468],[39.51415,47.83095],[39.51132,47.83342],[39.50738,47.83647],[39.50306,47.84159],[39.50123,47.84325],[39.47956,47.8606],[39.47425,47.85971],[39.47364,47.85923],[39.47264,47.85919],[39.4718,47.85918],[39.47097,47.85938],[39.47007,47.85975],[39.46824,47.8596],[39.46715,47.85992],[39.46639,47.85991],[39.46559,47.85948],[39.4647,47.85903],[39.46347,47.85872],[39.46277,47.85808],[39.46211,47.85766],[39.4609,47.85698],[39.46007,47.85625],[39.45889,47.85587],[39.45523,47.85546],[39.45411,47.85502],[39.45316,47.85437],[39.45148,47.8531],[39.45036,47.85262],[39.44954,47.85249],[39.44838,47.8527],[39.44794,47.85317],[39.44785,47.8539],[39.44797,47.85475],[39.44782,47.85511],[39.44759,47.85553],[39.44735,47.85579],[39.44697,47.85604],[39.44618,47.85606],[39.44565,47.85602],[39.44476,47.85617],[39.44452,47.85607],[39.4443,47.85583],[39.44338,47.85538],[39.44268,47.85522],[39.44211,47.85515],[39.44179,47.85454],[39.44025,47.85245],[39.43858,47.85014],[39.43688,47.84789],[39.43619,47.84691],[39.43547,47.84599],[39.43452,47.84531],[39.43382,47.84448],[39.4333,47.84364],[39.43389,47.84223],[39.43449,47.84132],[39.43541,47.8401],[39.4354,47.83854],[39.43306,47.83786],[39.43095,47.83744],[39.429,47.83755],[39.42832,47.83741],[39.42797,47.837],[39.42748,47.83621],[39.42709,47.83577],[39.42656,47.83543],[39.4252,47.83511],[39.42428,47.83431],[39.42348,47.8335],[39.42347,47.83204],[39.42156,47.83174],[39.41778,47.83168],[39.41691,47.8315],[39.41281,47.83056],[39.41138,47.83351],[39.41051,47.83488],[39.40907,47.83724],[39.40601,47.84199],[39.40007,47.85151],[39.39157,47.86512],[39.38981,47.86771],[39.38865,47.87042],[39.38764,47.87085],[39.38475,47.87085],[39.37995,47.87104],[39.37237,47.87147],[39.35721,47.87232],[39.35502,47.87223],[39.35076,47.87128],[39.3506,47.87047],[39.3505,47.86667],[39.34379,47.86663],[39.33571,47.86683],[39.32011,47.86723],[39.31381,47.86716],[39.29905,47.86703],[39.2808,47.86681],[39.26175,47.86628],[39.25027,47.86633],[39.24803,47.86702],[39.24528,47.86737],[39.24353,47.86728],[39.2391,47.86555],[39.23653,47.86446],[39.23583,47.86386],[39.23677,47.86061],[39.23467,47.85959],[39.2346,47.85898],[39.2341,47.85587],[39.23504,47.85485],[39.23559,47.854],[39.23557,47.85345],[39.23347,47.85316],[39.23046,47.85337],[39.21702,47.8533],[39.20328,47.85333],[39.18614,47.8539],[39.18277,47.85397],[39.18066,47.85303],[39.17814,47.85202],[39.1756,47.85059],[39.17456,47.84975],[39.17361,47.8489],[39.16942,47.84657],[39.16559,47.85016],[39.16321,47.85163],[39.16139,47.85218],[39.15419,47.85118],[39.14903,47.85118],[39.14917,47.84693],[39.14924,47.8421],[39.12975,47.8421],[39.11006,47.8423],[39.11011,47.84475],[39.11005,47.84748],[39.11006,47.85144],[39.10472,47.85153],[39.09718,47.8517],[39.08354,47.85193],[39.08363,47.85594],[39.08356,47.86013],[39.0836,47.86835],[39.08359,47.86965],[39.06466,47.86988],[39.0536,47.86985],[39.04208,47.86982],[39.01923,47.8698],[39.0132,47.86971],[38.99996,47.87012],[38.987,47.8701],[38.95473,47.8695],[38.95272,47.87022],[38.94909,47.8717],[38.94592,47.8728],[38.94192,47.87345],[38.93761,47.8737],[38.93157,47.87411],[38.92523,47.87467],[38.91785,47.87525],[38.91442,47.87569],[38.91357,47.87567],[38.91284,47.87561],[38.91212,47.87534],[38.91151,47.87476],[38.90997,47.87304],[38.90824,47.87276],[38.90613,47.87273],[38.90333,47.87278],[38.90173,47.87301],[38.90054,47.87351],[38.89956,47.87431],[38.89873,47.87458],[38.89675,47.87499],[38.89576,47.87494],[38.89501,47.87461],[38.89418,47.87383],[38.89319,47.8737],[38.89237,47.87414],[38.89122,47.8745],[38.88964,47.87434],[38.88823,47.87479],[38.88685,47.87515],[38.88504,47.87545],[38.8822,47.87642],[38.88063,47.87644],[38.88022,47.87628],[38.87987,47.87588],[38.88021,47.87507],[38.88096,47.87399],[38.881,47.87277],[38.88005,47.87121],[38.87667,47.8679],[38.87003,47.86652],[38.85952,47.86563],[38.85186,47.86549],[38.84533,47.8654],[38.84538,47.8667],[38.84471,47.86699],[38.84411,47.86734],[38.84317,47.86663],[38.84197,47.86612],[38.83945,47.86526],[38.8391,47.86492],[38.83928,47.86467],[38.83971,47.86462],[38.84014,47.8643],[38.83915,47.8631],[38.83836,47.86206],[38.83825,47.86143],[38.83837,47.86033],[38.83902,47.85884],[38.83935,47.85843],[38.84015,47.85779],[38.84024,47.85732],[38.8398,47.85698],[38.83876,47.85661],[38.83819,47.85618],[38.83817,47.85478],[38.83823,47.8534],[38.83756,47.85221],[38.8364,47.8519],[38.83592,47.85157],[38.83565,47.85116],[38.83534,47.85075],[38.83463,47.85029],[38.83203,47.85012],[38.8312,47.84986],[38.83109,47.84865],[38.82996,47.84836],[38.82922,47.84796],[38.82898,47.84718],[38.82798,47.84556],[38.82781,47.84408],[38.82758,47.84267],[38.82684,47.84112],[38.8269,47.84047],[38.82768,47.83913],[38.82767,47.83706],[38.82757,47.83496],[38.82759,47.83418],[38.82821,47.83337],[38.82803,47.83282],[38.82839,47.83274],[38.82986,47.8329],[38.83003,47.8327],[38.83006,47.83247],[38.82999,47.83219],[38.83002,47.83199],[38.8301,47.83164],[38.83003,47.83137],[38.82978,47.831],[38.82967,47.83075],[38.82981,47.83048],[38.83027,47.8301],[38.83054,47.82972],[38.83053,47.8291],[38.83082,47.82894],[38.83157,47.82893],[38.83187,47.8288],[38.83198,47.82855],[38.83193,47.82829],[38.83187,47.82801],[38.83186,47.82774],[38.83208,47.82731],[38.83286,47.82746],[38.83288,47.82778],[38.83305,47.82813],[38.83319,47.82831],[38.8336,47.82834],[38.8339,47.82819],[38.83438,47.82801],[38.83526,47.82796],[38.83573,47.82791],[38.83594,47.8277],[38.83521,47.82654],[38.83407,47.82554],[38.83257,47.82462],[38.83084,47.82311],[38.83067,47.82003],[38.83058,47.81557],[38.83018,47.81511],[38.8297,47.8149],[38.82857,47.81532],[38.82757,47.81546],[38.82671,47.81549],[38.81854,47.81551],[38.80938,47.81556],[38.79171,47.81585],[38.79092,47.81546],[38.79117,47.81023],[38.79142,47.80462],[38.79137,47.80054],[38.79191,47.79913],[38.79222,47.79807],[38.79217,47.79777],[38.79186,47.79674],[38.79119,47.79561],[38.78824,47.79335],[38.78579,47.79216],[38.78555,47.79186],[38.78542,47.79122],[38.78548,47.7895],[38.78553,47.78852],[38.78573,47.78787],[38.78605,47.78722],[38.78682,47.78608],[38.78725,47.7856],[38.78776,47.78511],[38.7888,47.78495],[38.78905,47.78496],[38.78956,47.78499],[38.79003,47.78512],[38.7908,47.78515],[38.7912,47.7851],[38.79221,47.78502],[38.79387,47.78507],[38.7947,47.78489],[38.79481,47.78467],[38.79476,47.78447],[38.79473,47.78431],[38.79463,47.78413],[38.79453,47.78395],[38.79439,47.78383],[38.79381,47.78338],[38.79326,47.78292],[38.79271,47.78253],[38.79226,47.78217],[38.79199,47.78142],[38.79159,47.78077],[38.79131,47.7804],[38.79095,47.78009],[38.79066,47.77975],[38.79047,47.77942],[38.79039,47.77911],[38.79044,47.77883],[38.79097,47.7783],[38.792,47.77829],[38.79304,47.77837],[38.79386,47.77816],[38.79412,47.77741],[38.79498,47.77705],[38.79708,47.77713],[38.79728,47.77674],[38.79718,47.77626],[38.79725,47.7756],[38.79749,47.77512],[38.79807,47.77464],[38.79825,47.77414],[38.79778,47.77356],[38.79475,47.77298],[38.79464,47.77198],[38.79541,47.77016],[38.79502,47.7691],[38.79389,47.76901],[38.79074,47.76891],[38.79091,47.75536],[38.79117,47.74652],[38.79087,47.74199],[38.79109,47.73745],[38.79005,47.73703],[38.78884,47.73689],[38.78437,47.73694],[38.78056,47.73629],[38.77835,47.73562],[38.77691,47.73399],[38.77822,47.73141],[38.77782,47.73024],[38.77616,47.72909],[38.77382,47.72782],[38.77291,47.72662],[38.77279,47.72521],[38.77237,47.72407],[38.77156,47.72323],[38.77143,47.72234],[38.77198,47.7207],[38.77401,47.72025],[38.77447,47.71928],[38.77407,47.71432],[38.77397,47.70578],[38.77461,47.69714],[38.77485,47.68799],[38.77512,47.68546],[38.76715,47.68547],[38.76056,47.68557],[38.75681,47.68572],[38.75587,47.68646],[38.75527,47.68671],[38.75464,47.6867],[38.75418,47.68592],[38.75341,47.68497],[38.75243,47.68516],[38.75135,47.6856],[38.75004,47.68572],[38.74824,47.68648],[38.74783,47.68634],[38.74737,47.68594],[38.74668,47.68494],[38.74629,47.68451],[38.7462,47.68407],[38.74629,47.6831],[38.74577,47.6821],[38.7448,47.68124],[38.7436,47.68088],[38.74244,47.68075],[38.74159,47.68109],[38.7404,47.68129],[38.73936,47.68078],[38.7383,47.68038],[38.73677,47.68134],[38.73703,47.68278],[38.73742,47.68332],[38.73833,47.6837],[38.74144,47.68427],[38.74158,47.68535],[38.73936,47.68843],[38.73827,47.68819],[38.73715,47.68787],[38.73604,47.68807],[38.73481,47.68914],[38.73242,47.69006],[38.73143,47.69093],[38.73158,47.69173],[38.73169,47.69227],[38.73232,47.6927],[38.73664,47.69459],[38.73696,47.69558],[38.73677,47.69675],[38.73746,47.69781],[38.73755,47.69893],[38.73635,47.69994],[38.73474,47.70052],[38.73332,47.6997],[38.73104,47.69972],[38.72887,47.69888],[38.72713,47.69909],[38.71579,47.69899],[38.70282,47.69906],[38.69705,47.69861],[38.67999,47.69918],[38.66979,47.69945],[38.66832,47.70017],[38.66588,47.69986],[38.66093,47.69908],[38.66115,47.69838],[38.66706,47.69736],[38.66732,47.6832],[38.66802,47.66868],[38.63917,47.66929],[38.63093,47.66886],[38.63149,47.65377],[38.62775,47.65382],[38.62376,47.64937],[38.62035,47.64692],[38.6178,47.644],[38.59282,47.644],[38.56425,47.64499],[38.54485,47.64493],[38.47345,47.64443],[38.45854,47.64365],[38.45859,47.61675],[38.45023,47.61686],[38.43045,47.61754],[38.40673,47.61666],[38.4012,47.61717],[38.36715,47.61725],[38.3525,47.6164],[38.35322,47.57616],[38.31336,47.57623],[38.31406,47.55714],[38.31391,47.55401],[38.31118,47.55257],[38.3105,47.55078],[38.31026,47.54927],[38.30726,47.548],[38.30899,47.54713],[38.30737,47.54589],[38.30815,47.54441],[38.29559,47.54465],[38.28585,47.5445],[38.28584,47.5372],[38.28592,47.52856],[38.28598,47.51114],[38.28589,47.50885],[38.28674,47.50809],[38.2881,47.50738],[38.29467,47.50679],[38.2945,47.50644],[38.29411,47.50606],[38.29396,47.5055],[38.29416,47.50528],[38.29496,47.50495],[38.2957,47.50438],[38.29593,47.50365],[38.29576,47.50209],[38.29549,47.5017],[38.29346,47.50011],[38.29253,47.49826],[38.29244,47.49611],[38.29248,47.49338],[38.29313,47.49316],[38.29374,47.49246],[38.29381,47.49202],[38.2932,47.49054],[38.29182,47.49],[38.29111,47.48971],[38.29057,47.48942],[38.29029,47.48904],[38.29017,47.48865],[38.28989,47.48762],[38.2887,47.48672],[38.28846,47.48639],[38.28853,47.48628],[38.28871,47.48576],[38.28876,47.4852],[38.28867,47.48381],[38.28904,47.48352],[38.28923,47.48289],[38.2893,47.48233],[38.28983,47.48166],[38.28991,47.48012],[38.28924,47.47955],[38.28924,47.47907],[38.29028,47.47853],[38.2904,47.47794],[38.28995,47.47763],[38.28984,47.47727],[38.29046,47.47644],[38.29215,47.47649],[38.29431,47.47586],[38.29524,47.47593],[38.29582,47.47611],[38.29707,47.47622],[38.29988,47.47558],[38.30238,47.4755],[38.30437,47.47553],[38.30453,47.46659],[38.30474,47.45658],[38.30496,47.43632],[38.30458,47.41449],[38.30317,47.39521],[38.30318,47.39213],[38.29558,47.39207],[38.2874,47.3921],[38.28749,47.38852],[38.28804,47.38382],[38.28869,47.37888],[38.28903,47.37432],[38.28441,47.37411],[38.2733,47.37409],[38.25965,47.374],[38.25721,47.37223],[38.25621,47.37179],[38.25589,47.37146],[38.25569,47.37055],[38.25526,47.36994],[38.25471,47.36965],[38.25305,47.36955],[38.24985,47.36665],[38.24823,47.3655],[38.2464,47.36484],[38.24602,47.36442],[38.24594,47.36389],[38.24607,47.36336],[38.24813,47.36104],[38.2486,47.35971],[38.24941,47.35849],[38.24736,47.35315],[38.24744,47.35173],[38.24688,47.35068],[38.24443,47.34864],[38.24134,47.3471],[38.23893,47.34614],[38.23359,47.34514],[38.23227,47.34425],[38.23219,47.34217],[38.23203,47.33968],[38.23138,47.33875],[38.22801,47.33734],[38.22438,47.33453],[38.22372,47.33326],[38.22631,47.33232],[38.22813,47.3315],[38.22842,47.33051],[38.22769,47.32941],[38.22364,47.32778],[38.22237,47.327],[38.22257,47.32319],[38.22261,47.31686],[38.223,47.30609],[38.23931,47.30551],[38.24964,47.30565],[38.25414,47.30556],[38.28028,47.30569],[38.30827,47.30588],[38.33737,47.3062],[38.33645,47.3051],[38.33548,47.30378],[38.33514,47.29234],[38.33357,47.29093],[38.33216,47.28906],[38.33043,47.28753],[38.32486,47.28272],[38.32379,47.28179],[38.3237,47.28098],[38.326,47.27964],[38.32754,47.27929],[38.33019,47.27682],[38.33323,47.27564],[38.33392,47.27368],[38.33418,47.27171],[38.33406,47.26962],[38.3322,47.26815],[38.33129,47.26752],[38.33103,47.26642],[38.33234,47.26477],[38.33226,47.2639],[38.33009,47.26169],[38.32786,47.25952],[38.32476,47.25643],[38.32081,47.25624],[38.31514,47.25627],[38.3052,47.2563],[38.28989,47.25631],[38.29007,47.25373],[38.29029,47.24994],[38.29065,47.24238],[38.29054,47.23934],[38.28293,47.23944],[38.27584,47.23942],[38.263,47.23927],[38.26249,47.23866],[38.26084,47.23736],[38.25899,47.23553],[38.25823,47.23525],[38.25703,47.23511],[38.25564,47.23409],[38.25442,47.23353],[38.25225,47.23343],[38.25093,47.23326],[38.25015,47.23342],[38.24851,47.23404],[38.24773,47.23416],[38.24449,47.23312],[38.24236,47.233],[38.24097,47.23297],[38.23972,47.23262],[38.23882,47.23173],[38.23787,47.23131],[38.23628,47.23107],[38.23567,47.23076],[38.23494,47.22981],[38.23496,47.2287],[38.23531,47.22736],[38.23574,47.22674],[38.23653,47.22616],[38.23754,47.2256],[38.23907,47.22431],[38.23965,47.22364],[38.23972,47.2229],[38.23994,47.22244],[38.24095,47.22203],[38.2414,47.2215],[38.24144,47.22098],[38.2412,47.22041],[38.24104,47.21975],[38.24115,47.21911],[38.24165,47.21856],[38.24274,47.21868],[38.2432,47.21859],[38.24371,47.21854],[38.24401,47.21795],[38.24398,47.21712],[38.24235,47.21445],[38.24234,47.21353],[38.24268,47.21261],[38.2422,47.21165],[38.24227,47.2105],[38.24174,47.20959],[38.24094,47.20911],[38.23864,47.20849],[38.23826,47.20814],[38.23818,47.20665],[38.23801,47.20318],[38.23802,47.19635],[38.23812,47.18229],[38.23826,47.17126],[38.23789,47.16006],[38.23785,47.15705],[38.23798,47.15389],[38.23781,47.1477],[38.23723,47.13863],[38.23539,47.13441],[38.23399,47.12984],[38.23158,47.12747],[38.23063,47.12611],[38.23028,47.12475],[38.23036,47.12266],[38.23081,47.11945],[38.22633,47.11844],[38.22117,47.11346],[38.21119,47.10642],[38.1976,47.09973],[38.18607,47.0921],[38.16376,47.06802],[38.13766,47.04954],[38.11363,47.03995],[38.08308,47.02216],[38.08308,47.02404],[38.11711,47.04458],[38.13389,47.05445],[38.13148,47.07246],[38.11192,47.09444],[38.07999,47.10846],[38.05664,47.11126],[38.04806,47.10635],[38.03741,47.08953],[38.00308,47.09654],[37.98008,47.09958],[37.98283,47.08742],[37.96909,47.08766],[37.94987,47.0942],[37.92412,47.10448],[37.89768,47.11056],[37.88811,47.11041],[37.88077,47.10769],[37.86541,47.10676],[37.85228,47.10343],[37.85014,47.11027],[37.85151,47.11553],[37.84807,47.11667],[37.8467,47.11851],[37.84661,47.12516],[37.84309,47.1261],[37.83373,47.12674],[37.82756,47.12864],[37.82713,47.13474],[37.82129,47.13609],[37.82137,47.13927],[37.82138,47.14409],[37.82399,47.15085],[37.82358,47.15936],[37.81872,47.16467],[37.81199,47.16852],[37.80113,47.17518],[37.80269,47.18183],[37.82332,47.18531],[37.83561,47.18699],[37.84481,47.18983],[37.85228,47.19788],[37.84275,47.20103],[37.84241,47.20802],[37.83812,47.2184],[37.8273,47.22516],[37.82731,47.23508],[37.82971,47.2437],[37.83434,47.25593],[37.83108,47.26805],[37.82181,47.2776],[37.81134,47.28447],[37.80121,47.28598],[37.79915,47.28913],[37.80704,47.30473],[37.82318,47.30834],[37.83073,47.30228],[37.83245,47.29902],[37.84447,47.30903],[37.83245,47.31765],[37.8273,47.32137],[37.83554,47.34208],[37.85339,47.34092],[37.86438,47.34673],[37.85992,47.35673],[37.8479,47.34976],[37.84,47.35743],[37.85545,47.36441],[37.84241,47.37324],[37.85133,47.38487],[37.86095,47.38998],[37.85923,47.40857],[37.86129,47.4181],[37.86335,47.42704],[37.86867,47.43285],[37.86678,47.44562],[37.86987,47.45131],[37.8788,47.46001],[37.8891,47.46918],[37.89219,47.47243],[37.8867,47.48757],[37.86944,47.5012],[37.85923,47.50827],[37.85108,47.51703],[37.84395,47.52989],[37.83889,47.54374],[37.83743,47.55602],[37.83708,47.56819],[37.83991,47.57722],[37.84515,47.58463],[37.84378,47.59528],[37.86249,47.60784],[37.87056,47.61826],[37.87258,47.6315],[37.85421,47.63095],[37.84018,47.63414],[37.82773,47.63761],[37.81674,47.64044],[37.79855,47.65122],[37.77765,47.66241],[37.7658,47.66562],[37.75752,47.6625],[37.75649,47.66521],[37.75477,47.66943],[37.75237,47.67232],[37.74568,47.67562],[37.74035,47.67874],[37.73589,47.68128],[37.73091,47.68382],[37.72739,47.68567],[37.72499,47.68608],[37.7219,47.68637],[37.71795,47.68741],[37.71023,47.69006],[37.70328,47.68931],[37.69581,47.68925],[37.68208,47.68423],[37.6589,47.68538],[37.63968,47.69786],[37.63247,47.70503],[37.63109,47.71045],[37.62354,47.73066],[37.6244,47.75179],[37.61908,47.77071],[37.62062,47.78283],[37.62732,47.79228],[37.63573,47.80024],[37.63968,47.8082],[37.64671,47.82168],[37.64791,47.82929],[37.64465,47.84116],[37.64088,47.85337],[37.64603,47.86431],[37.62268,47.89977],[37.58801,47.90898],[37.56844,47.90967],[37.54578,47.91634],[37.54457,47.92068],[37.54849,47.92498],[37.55164,47.92692],[37.55143,47.93032],[37.55273,47.93202],[37.55156,47.93321],[37.549,47.93359],[37.54744,47.93334],[37.54516,47.93496],[37.54261,47.93504],[37.54094,47.93574],[37.53578,47.93687],[37.53296,47.9379],[37.52874,47.93791],[37.52732,47.93851],[37.52561,47.9394],[37.52415,47.94007],[37.52149,47.9405],[37.51797,47.94188],[37.51694,47.94251],[37.51531,47.94412],[37.51582,47.9449],[37.5175,47.94602],[37.51895,47.94711],[37.51968,47.94892],[37.51947,47.95027],[37.52213,47.95004],[37.5235,47.94995],[37.53028,47.95467],[37.53492,47.95383],[37.53724,47.95953],[37.53908,47.96249],[37.53839,47.96513],[37.53659,47.96797],[37.53814,47.96912],[37.53977,47.97108],[37.54509,47.97113],[37.54809,47.97119],[37.55204,47.97332],[37.55762,47.97539],[37.56097,47.97728],[37.56483,47.97636],[37.56801,47.97625],[37.57496,47.97642],[37.57685,47.97728],[37.57582,47.98377],[37.57487,47.98883],[37.57376,47.99159],[37.56303,47.99509],[37.5608,47.99549],[37.55788,47.99601],[37.55908,48.00175],[37.56028,48.00451],[37.56346,48.00606],[37.59109,48.01243],[37.61581,48.01083],[37.62268,48.00692],[37.63487,48.00853],[37.64929,48.00979],[37.66972,48.00991],[37.67881,48.01175],[37.69323,48.01777],[37.68931,48.0202],[37.68564,48.0232],[37.68835,48.02576],[37.69272,48.02868],[37.6856,48.03335],[37.67984,48.03772],[37.67693,48.03967],[37.67487,48.0411],[37.68585,48.04705],[37.68779,48.04957],[37.68752,48.05014],[37.68937,48.05164],[37.6916,48.05313],[37.69504,48.05114],[37.69641,48.05035],[37.70075,48.05376],[37.70328,48.05545],[37.7053,48.05648],[37.70748,48.05703],[37.70358,48.05838],[37.69881,48.05953],[37.69143,48.06102],[37.68736,48.06153],[37.68731,48.06239],[37.6877,48.06406],[37.69523,48.06363],[37.69504,48.06457],[37.70096,48.06566],[37.69993,48.07099],[37.70225,48.07114],[37.73289,48.0716],[37.73752,48.07234],[37.74087,48.07372],[37.74396,48.0755],[37.74568,48.07687],[37.74722,48.07968],[37.74911,48.08037],[37.75271,48.07951],[37.75563,48.08037],[37.75529,48.08364],[37.75675,48.08484],[37.75997,48.08482],[37.76258,48.08562],[37.76503,48.08656],[37.76696,48.0884],[37.76859,48.09136],[37.76928,48.09459],[37.77524,48.09703],[37.78316,48.09954],[37.78871,48.10099],[37.79271,48.10551],[37.79438,48.10922],[37.79454,48.11012],[37.79432,48.11093],[37.79369,48.11186],[37.79147,48.11441],[37.79655,48.1162],[37.79777,48.11696],[37.79789,48.11752],[37.79789,48.11808],[37.79759,48.11816],[37.79771,48.11865],[37.79785,48.11903],[37.79947,48.11987],[37.79894,48.12058],[37.79893,48.12097],[37.79858,48.12136],[37.79909,48.122],[37.80294,48.12285],[37.8029,48.12363],[37.80628,48.12481],[37.80668,48.12418],[37.80783,48.12317],[37.81024,48.12433],[37.81529,48.12703],[37.82095,48.13029],[37.81512,48.13453],[37.80636,48.14072],[37.80207,48.14822],[37.80654,48.14911],[37.8113,48.14823],[37.81589,48.14862],[37.82314,48.15008],[37.82301,48.15409],[37.82498,48.15662],[37.83073,48.15855],[37.8365,48.1602],[37.83742,48.16151],[37.83756,48.16299],[37.84313,48.16792],[37.84663,48.17112],[37.84695,48.17587],[37.84989,48.17885],[37.85138,48.18045],[37.84801,48.18383],[37.84464,48.18766],[37.8649,48.19144],[37.88343,48.19264],[37.89746,48.19925],[37.90309,48.21049],[37.90738,48.21443],[37.92403,48.22238],[37.92854,48.2297],[37.94403,48.23565],[37.92948,48.24608],[37.92781,48.2548],[37.93072,48.2626],[37.943,48.27862],[37.93751,48.29096],[37.92171,48.29456],[37.91708,48.30261],[37.90348,48.30625],[37.90755,48.31006],[37.91966,48.30677],[37.91957,48.31057],[37.92068,48.3162],[37.92043,48.32093],[37.91733,48.32441],[37.90622,48.32493],[37.90953,48.32955],[37.91193,48.33275],[37.91845,48.34073],[37.92995,48.34267],[37.93339,48.34667],[37.93922,48.35226],[37.94077,48.35579],[37.9418,48.36172],[37.93734,48.37108],[37.9497,48.38886],[37.96394,48.39091],[37.97716,48.38909],[37.99793,48.37894],[38.0036,48.39171],[37.99913,48.39764],[38.00762,48.3977],[38.01501,48.39491],[38.02599,48.39639],[38.04362,48.40374],[38.05833,48.41155],[38.08137,48.41252],[38.09525,48.41223],[38.11111,48.41354],[38.12337,48.41375],[38.13698,48.41542],[38.16221,48.41416],[38.19354,48.41451],[38.20401,48.40715],[38.21285,48.40282],[38.21551,48.39884],[38.22057,48.39536],[38.22144,48.39137],[38.22187,48.3875],[38.22573,48.38465],[38.22899,48.3839],[38.23139,48.3794],[38.23714,48.37575],[38.24358,48.37338],[38.25115,48.37456],[38.25675,48.37568],[38.26687,48.37829],[38.27654,48.38076],[38.28275,48.38248],[38.28543,48.38299],[38.28385,48.3885],[38.2804,48.39142],[38.28262,48.39314],[38.28862,48.39314],[38.29586,48.39634],[38.30138,48.39989],[38.30545,48.40136],[38.31011,48.40112],[38.3153,48.40048],[38.32151,48.40019],[38.32449,48.40278],[38.3283,48.40431],[38.33296,48.40412],[38.33735,48.40422],[38.34226,48.40393],[38.35018,48.40647],[38.35768,48.41077],[38.36287,48.4173],[38.36555,48.41949],[38.36874,48.42215],[38.37107,48.42481],[38.38011,48.42473],[38.38949,48.42407],[38.3958,48.4264],[38.39953,48.42929],[38.40092,48.43234],[38.4024,48.43585],[38.40337,48.43639],[38.40485,48.43648],[38.40974,48.43422],[38.41472,48.43277],[38.41867,48.43205],[38.42245,48.43225],[38.42833,48.43374],[38.43404,48.43603],[38.43419,48.43882],[38.43348,48.44343],[38.43481,48.45095],[38.43997,48.45354],[38.44376,48.45226],[38.45099,48.45562],[38.45206,48.46461],[38.45215,48.47348],[38.4482,48.48242],[38.44786,48.49601],[38.45344,48.5066],[38.46606,48.51468],[38.47016,48.52627],[38.48723,48.55229],[38.49379,48.56677],[38.50448,48.58273],[38.5058,48.59204],[38.50468,48.60567],[38.47725,48.62048],[38.46108,48.62647],[38.46483,48.64106],[38.47244,48.6461],[38.48705,48.65214],[38.50727,48.65737],[38.51833,48.66038],[38.53205,48.66333],[38.54385,48.66969],[38.54978,48.67419],[38.55403,48.67929],[38.55819,48.68437],[38.55993,48.69102],[38.56197,48.69715],[38.57128,48.69889],[38.58278,48.70104],[38.59617,48.70671],[38.61694,48.71226],[38.64201,48.71113],[38.66364,48.71045],[38.67393,48.71294],[38.68097,48.71486],[38.68097,48.71486],[38.68805,48.7175],[38.69102,48.71755],[38.69556,48.7169],[38.69853,48.71659],[38.70299,48.71438],[38.70784,48.71495],[38.71234,48.71404],[38.71655,48.71305],[38.71711,48.71048],[38.72492,48.70694],[38.78037,48.69198],[38.78809,48.69493],[38.79238,48.70133],[38.79864,48.70517],[38.80781,48.72052],[38.81286,48.72641],[38.81448,48.73275],[38.82068,48.74164],[38.82868,48.74232],[38.84268,48.74487],[38.8492,48.75087],[38.85274,48.75029],[38.85851,48.75005],[38.86034,48.75091],[38.86313,48.75179],[38.87062,48.75185],[38.87722,48.75313],[38.87956,48.75299],[38.88038,48.75226],[38.88096,48.75101],[38.89233,48.751],[38.89997,48.75122],[38.90218,48.75138],[38.90664,48.75066],[38.91111,48.74889],[38.91424,48.74613],[38.916,48.74421],[38.91767,48.74375],[38.91997,48.7443],[38.92126,48.74544],[38.92561,48.74558],[38.92984,48.74573],[38.93353,48.74681],[38.93529,48.74762],[38.93769,48.74763],[38.93943,48.7463],[38.93911,48.74447],[38.93784,48.74329],[38.9354,48.74239],[38.93435,48.74013],[38.93357,48.73754],[38.93497,48.73624],[38.93814,48.7356],[38.94149,48.73492],[38.94477,48.73487],[38.94859,48.73512],[38.95325,48.73508],[38.95531,48.7347],[38.95771,48.73525],[38.95883,48.7363],[38.95956,48.73669],[38.95999,48.73771],[38.95977,48.7408],[38.95881,48.74363],[38.95984,48.74595],[38.96095,48.74667],[38.96488,48.74678],[38.9684,48.74527],[38.97072,48.74421],[38.9729,48.74443],[38.97415,48.74494],[38.97621,48.74549],[38.98046,48.74507],[38.98267,48.74355],[38.98335,48.74217],[38.98355,48.74013],[38.98445,48.73901],[38.98623,48.7376],[38.98777,48.73726],[38.98992,48.7359],[38.99091,48.73441],[38.99243,48.73153],[38.99526,48.72898],[38.99636,48.72759],[38.99889,48.72558],[39.00011,48.72187],[39.00059,48.71915],[38.99956,48.71746],[38.99745,48.71603],[38.99471,48.71529],[38.99147,48.71495],[38.98835,48.71406],[38.98578,48.71273],[38.98576,48.71174],[38.98707,48.71111],[38.98942,48.71066],[38.99262,48.71089],[38.99511,48.71186],[38.99752,48.71233],[38.99906,48.71196],[38.99998,48.71084],[39.00001,48.70968],[38.99958,48.70756],[39.00061,48.70412],[39.00108,48.70075],[39.00288,48.69864],[39.00638,48.69699],[39.01082,48.69656],[39.01597,48.69571],[39.01696,48.69494],[39.01704,48.68891],[39.01638,48.68555],[39.01606,48.68386],[39.01642,48.68235],[39.01942,48.68035],[39.02082,48.67919],[39.02133,48.67722],[39.02161,48.67383],[39.02194,48.67202],[39.02425,48.67053],[39.0258,48.66927],[39.02711,48.66755],[39.02779,48.66542],[39.02902,48.6636],[39.02672,48.66143],[39.02374,48.66106],[39.02067,48.66172],[39.01837,48.66285],[39.01597,48.66318],[39.01301,48.66311],[39.01099,48.66228],[39.01114,48.66082],[39.01245,48.65942],[39.01492,48.65854],[39.01912,48.65768],[39.02224,48.65646],[39.02447,48.65539],[39.02874,48.65399],[39.03159,48.65358],[39.03436,48.65246],[39.03524,48.65107],[39.03605,48.64938],[39.03792,48.64808],[39.03906,48.64801],[39.04425,48.64713],[39.04665,48.64744],[39.04792,48.6476],[39.04923,48.64758],[39.05069,48.64747],[39.05217,48.64764],[39.05403,48.64757],[39.057,48.64817],[39.06075,48.64907],[39.07313,48.65121],[39.07513,48.65212],[39.07738,48.6524],[39.08067,48.65225],[39.08828,48.65145],[39.09592,48.65177],[39.09955,48.65168],[39.10206,48.65086],[39.10463,48.6512],[39.11551,48.65724],[39.12148,48.66014],[39.12467,48.66126],[39.13124,48.66129],[39.1359,48.66088],[39.13909,48.66058],[39.14079,48.66155],[39.14079,48.66318],[39.14042,48.66663],[39.14409,48.67256],[39.14939,48.67691],[39.15362,48.67706],[39.15785,48.6765],[39.1621,48.67664],[39.16755,48.67892],[39.17111,48.68019],[39.17334,48.6814],[39.17611,48.68314],[39.17967,48.68561],[39.18171,48.68935],[39.18375,48.69408],[39.18836,48.69942],[39.19199,48.70286],[39.19392,48.70446],[39.19527,48.70699],[39.19765,48.70725],[39.19903,48.70657],[39.19956,48.7047],[39.20031,48.70246],[39.20139,48.70089],[39.20308,48.69988],[39.20626,48.69933],[39.21046,48.70116],[39.21471,48.70362],[39.21926,48.70617],[39.22396,48.7075],[39.22619,48.70967],[39.23093,48.71164],[39.23469,48.71217],[39.23673,48.71175],[39.23825,48.71082],[39.24052,48.71014],[39.24325,48.71072],[39.24853,48.71318],[39.2507,48.71651],[39.2519,48.72155],[39.25316,48.72531],[39.25518,48.72535],[39.25825,48.72538],[39.26275,48.72683],[39.26464,48.72807],[39.26559,48.7281],[39.26735,48.72758],[39.2687,48.72698],[39.27057,48.72765],[39.27271,48.7311],[39.27683,48.73569],[39.27681,48.73794],[39.27621,48.7398],[39.27423,48.74306],[39.26994,48.74606],[39.27016,48.74852],[39.26947,48.75073],[39.26986,48.75285],[39.2717,48.75429],[39.27466,48.75455],[39.27668,48.7539],[39.2781,48.75231],[39.2793,48.75039],[39.2826,48.74945],[39.28638,48.7503],[39.28792,48.75189],[39.28775,48.75435],[39.28956,48.7576],[39.29071,48.76066],[39.29672,48.76304],[39.29973,48.76456],[39.30398,48.76866],[39.30681,48.77237],[39.31131,48.77514],[39.32037,48.77661],[39.32556,48.77684],[39.32844,48.77531],[39.32925,48.77327],[39.32827,48.77079],[39.32758,48.7694],[39.32869,48.76841],[39.33582,48.76677],[39.34028,48.76719],[39.34432,48.76858],[39.34916,48.76934],[39.35444,48.76821],[39.35565,48.76688],[39.35517,48.7655],[39.3526,48.76278],[39.35019,48.76145],[39.34655,48.76055],[39.34457,48.75808],[39.34672,48.7533],[39.34775,48.75118],[39.34848,48.75016],[39.34844,48.74677],[39.35011,48.74377],[39.35852,48.73839],[39.35985,48.73709],[39.36015,48.73358],[39.3562,48.73012],[39.35517,48.72741],[39.35676,48.72565],[39.36509,48.72214],[39.37303,48.72053],[39.37526,48.71897],[39.37208,48.71532],[39.36496,48.716],[39.36041,48.71475],[39.35354,48.71237],[39.34899,48.71266],[39.34865,48.71147],[39.35011,48.70897],[39.35148,48.70779],[39.35389,48.70393],[39.35706,48.69816],[39.36161,48.69629],[39.36496,48.69385],[39.37054,48.69175],[39.37663,48.68807],[39.38616,48.68586],[39.39096,48.68541],[39.39225,48.68314],[39.39071,48.68138],[39.39131,48.67963],[39.39757,48.67577],[39.40547,48.67458],[39.40959,48.67283],[39.41371,48.67005],[39.41534,48.66693],[39.41002,48.66132],[39.41002,48.65933],[39.41405,48.65758],[39.41989,48.65894],[39.42719,48.65792],[39.43302,48.65741],[39.43731,48.65622],[39.44092,48.65593],[39.44324,48.65661],[39.44736,48.65695],[39.4519,48.65588],[39.45448,48.65321],[39.45216,48.65043],[39.45092,48.64967],[39.45096,48.64655],[39.45186,48.64329],[39.45302,48.6415],[39.45615,48.63974],[39.46263,48.63969],[39.46645,48.63915],[39.46804,48.63827],[39.468,48.63628],[39.46577,48.6339],[39.46551,48.6322],[39.46568,48.62982],[39.46787,48.62868],[39.47031,48.62837],[39.47581,48.62931],[39.4816,48.62925],[39.48413,48.62911],[39.48551,48.63016],[39.48576,48.63299],[39.48791,48.63546],[39.49083,48.63305],[39.49319,48.63223],[39.50186,48.63407],[39.50774,48.63512],[39.51267,48.6354],[39.51649,48.6337],[39.51769,48.63092],[39.51808,48.62806],[39.51533,48.62451],[39.51319,48.62222],[39.5195,48.61802],[39.52447,48.61521],[39.52804,48.61271],[39.52941,48.6095],[39.52769,48.60675],[39.52529,48.60468],[39.52426,48.60335],[39.52615,48.59952],[39.52864,48.59793],[39.5322,48.5975],[39.53396,48.59648],[39.53473,48.5935],[39.53297,48.59242],[39.52945,48.59109],[39.52834,48.58952],[39.52898,48.58757],[39.53083,48.58564],[39.53791,48.58433],[39.54439,48.58478],[39.54778,48.58626],[39.54928,48.58853],[39.54898,48.5906],[39.54791,48.59319],[39.54949,48.59557],[39.55542,48.59801],[39.55949,48.59909],[39.56301,48.59883],[39.56533,48.59725],[39.56687,48.59356],[39.56881,48.59194],[39.56833,48.58893],[39.56473,48.58603],[39.56396,48.58436],[39.56645,48.58311],[39.57134,48.58217],[39.57473,48.58132],[39.57632,48.58302],[39.58117,48.58603],[39.5858,48.5889],[39.59267,48.59282],[39.59867,48.59316],[39.60237,48.59245],[39.6046,48.59057],[39.60631,48.5885],[39.60653,48.58703],[39.60567,48.58564],[39.60198,48.5849],[39.59975,48.58342],[39.59687,48.57976],[39.59593,48.57771],[39.59743,48.57587],[39.59983,48.57522],[39.60511,48.57476],[39.60897,48.57382],[39.61129,48.5738],[39.61181,48.57553],[39.61597,48.57757],[39.61975,48.58274],[39.62052,48.58635],[39.62314,48.58708],[39.6255,48.5862],[39.62953,48.58368],[39.63236,48.58194],[39.63447,48.58124],[39.64768,48.58388],[39.65614,48.58547],[39.65867,48.58666],[39.6679,48.58782],[39.67245,48.58933],[39.6773,48.58862],[39.68296,48.58671],[39.68768,48.58615],[39.69584,48.58657],[39.70013,48.58754],[39.70455,48.58748],[39.71047,48.5864],[39.71472,48.58532],[39.72197,48.5851],[39.72592,48.5862],[39.73519,48.58609],[39.74085,48.58788],[39.74497,48.59012],[39.74768,48.5906],[39.74974,48.59009],[39.75154,48.58938],[39.75253,48.58757],[39.75257,48.58581],[39.75201,48.58305],[39.75291,48.58223],[39.75411,48.58194],[39.75738,48.58319],[39.76231,48.58407],[39.76802,48.58617],[39.77119,48.58796],[39.77343,48.59066],[39.77707,48.59197],[39.78875,48.5929],[39.79214,48.5927],[39.79222,48.59268],[39.79403,48.59222]]]}},{type:"Feature",properties:{nearestId:"23867ac4008d7c78d5d777fc56cf6475",originalId:"23867ac4008d7c78d5d777fc56cf6475",id:"c3b027d303b9eb2bf2596df0492fb2d3",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[44.101565,42.382875]}},oldPointsMap:[[43.79961,42.74186],[43.79142,42.72302],[43.78767,42.71284],[43.78185,42.70876],[43.77912,42.70417],[43.7694,42.69932],[43.76347,42.69371],[43.74439,42.68324],[43.72789,42.68306],[43.71104,42.68514],[43.71072,42.67751],[43.71864,42.67139],[43.70614,42.65858],[43.7005,42.64148],[43.69458,42.64747],[43.67961,42.64137],[43.66577,42.64476],[43.65502,42.64183],[43.6436,42.63585],[43.63665,42.62735],[43.63142,42.61669],[43.61829,42.6121],[43.59651,42.59445],[43.58304,42.58468],[43.57748,42.57642],[43.58918,42.57258],[43.59058,42.56773],[43.59791,42.57053],[43.60763,42.56903],[43.59845,42.56701],[43.59521,42.56335],[43.59334,42.55728],[43.59324,42.55239],[43.59485,42.54913],[43.60587,42.5447],[43.61004,42.54279],[43.61216,42.54365],[43.61655,42.53919],[43.61068,42.53259],[43.60344,42.52674],[43.60437,42.52198],[43.60736,42.51798],[43.60675,42.51145],[43.60245,42.50768],[43.60296,42.50391],[43.60225,42.4988],[43.60275,42.49395],[43.60479,42.48941],[43.60216,42.48562],[43.60366,42.48146],[43.59373,42.47379],[43.58519,42.46985],[43.58979,42.45553],[43.58918,42.44621],[43.592,42.44096],[43.59567,42.43253],[43.59454,42.42385],[43.59502,42.40662],[43.60144,42.40047],[43.60786,42.39534],[43.61566,42.39084],[43.62465,42.38615],[43.61475,42.36937],[43.59693,42.35984],[43.59284,42.35538],[43.59848,42.3515],[43.60548,42.35117],[43.61351,42.3445],[43.61693,42.34091],[43.62138,42.33834],[43.64204,42.33511],[43.66288,42.33416],[43.67004,42.32947],[43.67307,42.32249],[43.67284,42.31369],[43.66934,42.30641],[43.65566,42.30266],[43.64968,42.29933],[43.64611,42.29549],[43.63925,42.2888],[43.63721,42.28312],[43.62898,42.28405],[43.61715,42.27863],[43.6138,42.26468],[43.60736,42.25366],[43.61114,42.24607],[43.60805,42.24215],[43.61251,42.23632],[43.60782,42.23178],[43.60485,42.22343],[43.59907,42.21015],[43.61079,42.21193],[43.63143,42.20034],[43.63573,42.1912],[43.63762,42.18682],[43.63402,42.18167],[43.64396,42.17578],[43.65022,42.17302],[43.65475,42.16873],[43.66885,42.16486],[43.6826,42.1657],[43.6914,42.15787],[43.69882,42.14901],[43.71362,42.13933],[43.73048,42.13244],[43.74757,42.1287],[43.77193,42.13097],[43.79664,42.12891],[43.79753,42.12353],[43.80777,42.12339],[43.80859,42.11956],[43.81662,42.11599],[43.83428,42.11182],[43.8383,42.10795],[43.84919,42.1107],[43.85397,42.12206],[43.85771,42.13342],[43.86721,42.13118],[43.87361,42.13251],[43.86847,42.1365],[43.87295,42.14508],[43.86473,42.15307],[43.87316,42.15176],[43.86707,42.16129],[43.87095,42.17159],[43.88069,42.16208],[43.88905,42.15944],[43.91204,42.15901],[43.92549,42.17908],[43.92775,42.1942],[43.92864,42.19966],[43.90493,42.21808],[43.91094,42.2229],[43.92459,42.21374],[43.94167,42.21093],[43.97308,42.20084],[43.98935,42.20905],[43.98757,42.21514],[44.01569,42.21608],[44.03317,42.21423],[44.04423,42.21854],[44.04478,42.22946],[44.06113,42.23556],[44.06025,42.23922],[44.07888,42.23807],[44.08343,42.23272],[44.08765,42.23394],[44.09153,42.22602],[44.09609,42.22471],[44.09079,42.20861],[44.08764,42.2037],[44.0869,42.20032],[44.09555,42.197],[44.10764,42.19776],[44.1136,42.18503],[44.10594,42.18058],[44.1091,42.176],[44.11553,42.17665],[44.12368,42.1712],[44.13072,42.17327],[44.13261,42.1696],[44.12866,42.16109],[44.13561,42.15562],[44.14427,42.15345],[44.14263,42.14034],[44.13687,42.13385],[44.13417,42.12696],[44.1367,42.12144],[44.13476,42.11388],[44.14218,42.11031],[44.15431,42.13258],[44.16827,42.14041],[44.17228,42.14824],[44.18092,42.14482],[44.18824,42.14884],[44.19281,42.14573],[44.19122,42.15558],[44.19684,42.16542],[44.20084,42.16408],[44.19906,42.15527],[44.19917,42.14874],[44.2084,42.14651],[44.21437,42.15229],[44.22052,42.15219],[44.22068,42.14375],[44.22831,42.13965],[44.22795,42.13516],[44.22037,42.1327],[44.22341,42.12677],[44.23386,42.11892],[44.24311,42.12099],[44.24962,42.12003],[44.25373,42.10914],[44.26275,42.10966],[44.26627,42.11349],[44.27915,42.11198],[44.2797,42.0985],[44.27476,42.08909],[44.27875,42.087],[44.26781,42.07204],[44.26086,42.06031],[44.24536,42.05509],[44.23605,42.04579],[44.23619,42.02891],[44.26808,42.02708],[44.28722,42.02633],[44.28302,42.03679],[44.28396,42.05171],[44.29315,42.06893],[44.30518,42.07611],[44.30493,42.06804],[44.31182,42.06588],[44.30876,42.05658],[44.31345,42.04232],[44.30215,42.03665],[44.30218,42.02767],[44.30991,42.02343],[44.32158,42.02174],[44.32771,42.03831],[44.33429,42.03818],[44.33535,42.0427],[44.34465,42.04289],[44.35912,42.04304],[44.36489,42.04822],[44.36655,42.05467],[44.38715,42.05241],[44.40122,42.0551],[44.41976,42.05155],[44.42864,42.05492],[44.43531,42.04666],[44.46491,42.04693],[44.4816,42.04361],[44.49073,42.04489],[44.48616,42.05678],[44.48296,42.06828],[44.48794,42.06879],[44.4925,42.05987],[44.53206,42.04177],[44.53794,42.04299],[44.5421,42.04803],[44.54229,42.05176],[44.54935,42.05549],[44.55798,42.06244],[44.54802,42.07391],[44.53639,42.06816],[44.5323,42.06885],[44.5258,42.06699],[44.52211,42.07477],[44.52223,42.08274],[44.51996,42.09122],[44.5266,42.09814],[44.53907,42.10301],[44.54772,42.1162],[44.56171,42.11562],[44.56746,42.11708],[44.56594,42.12563],[44.56132,42.13368],[44.57486,42.14612],[44.57347,42.15664],[44.58074,42.15601],[44.57485,42.16517],[44.572,42.16809],[44.56504,42.17],[44.56621,42.17458],[44.57669,42.17471],[44.58922,42.18399],[44.60434,42.19252],[44.61208,42.18985],[44.62093,42.1936],[44.62565,42.19964],[44.62402,42.20471],[44.61792,42.20799],[44.62049,42.21736],[44.6155,42.22443],[44.6148,42.23113],[44.62319,42.24554],[44.6163,42.25246],[44.61911,42.2611],[44.61691,42.26516],[44.61952,42.27354],[44.61088,42.28258],[44.60928,42.29568],[44.60247,42.30111],[44.59737,42.30197],[44.59645,42.31409],[44.57812,42.32844],[44.58188,42.33612],[44.59132,42.33996],[44.5932,42.34557],[44.60298,42.35363],[44.61036,42.36359],[44.60571,42.37429],[44.59762,42.37788],[44.59084,42.37677],[44.57409,42.38352],[44.5637,42.38139],[44.55142,42.38802],[44.54699,42.39001],[44.54958,42.39354],[44.54599,42.40062],[44.53864,42.40439],[44.52923,42.4079],[44.51781,42.40792],[44.5105,42.40667],[44.50165,42.41112],[44.48439,42.41202],[44.47892,42.42261],[44.46452,42.43346],[44.44705,42.45871],[44.4381,42.4613],[44.42762,42.45918],[44.42057,42.46338],[44.40089,42.46319],[44.38636,42.45893],[44.38358,42.46485],[44.37427,42.47177],[44.36467,42.47118],[44.35679,42.46957],[44.34091,42.48169],[44.33966,42.48875],[44.3336,42.49228],[44.34278,42.49909],[44.35504,42.50362],[44.36482,42.50461],[44.37667,42.50382],[44.38036,42.51],[44.37098,42.51439],[44.36194,42.52485],[44.35368,42.52336],[44.34679,42.52642],[44.34702,42.53571],[44.34519,42.54577],[44.32643,42.55133],[44.31109,42.55916],[44.30829,42.56881],[44.30755,42.57846],[44.30234,42.57831],[44.30077,42.58443],[44.28855,42.59459],[44.27236,42.60018],[44.26681,42.6045],[44.25497,42.5979],[44.24965,42.59104],[44.24324,42.59654],[44.2406,42.6023],[44.2347,42.60692],[44.2257,42.60926],[44.23071,42.61909],[44.23091,42.62791],[44.22835,42.62999],[44.22031,42.63031],[44.20684,42.6304],[44.19372,42.63504],[44.18721,42.62942],[44.17843,42.61779],[44.16381,42.60817],[44.15633,42.60714],[44.14491,42.60699],[44.13238,42.61385],[44.11608,42.61766],[44.10071,42.61273],[44.09131,42.60938],[44.08981,42.60577],[44.06654,42.60085],[44.05463,42.60433],[44.04683,42.60326],[44.01708,42.5948],[44.0048,42.58554],[43.99252,42.57172],[43.97488,42.56004],[43.97378,42.55218],[43.96582,42.54811],[43.96225,42.54715],[43.95593,42.55175],[43.94639,42.55135],[43.94401,42.56283],[43.91123,42.57138],[43.87294,42.58035],[43.86642,42.58994],[43.83706,42.59745],[43.81816,42.59291],[43.80823,42.59757],[43.78957,42.59481],[43.77765,42.58802],[43.75053,42.59879],[43.75302,42.61533],[43.72834,42.62765],[43.71429,42.63476],[43.73846,42.64942],[43.75798,42.65456],[43.77805,42.67914],[43.78932,42.70076],[43.80149,42.71247],[43.80655,42.72589],[43.80904,42.73677],[43.80329,42.7416],[43.79978,42.74401],[43.79961,42.74186]]},geometry:{type:"Polygon",coordinates:[[[43.79961,42.74186],[43.79142,42.72302],[43.78767,42.71284],[43.78185,42.70876],[43.77912,42.70417],[43.7694,42.69932],[43.76347,42.69371],[43.74439,42.68324],[43.72789,42.68306],[43.71104,42.68514],[43.71072,42.67751],[43.71864,42.67139],[43.70614,42.65858],[43.7005,42.64148],[43.69458,42.64747],[43.67961,42.64137],[43.66577,42.64476],[43.65502,42.64183],[43.6436,42.63585],[43.63665,42.62735],[43.63142,42.61669],[43.61829,42.6121],[43.59651,42.59445],[43.58304,42.58468],[43.57748,42.57642],[43.58918,42.57258],[43.59058,42.56773],[43.59791,42.57053],[43.60763,42.56903],[43.59845,42.56701],[43.59521,42.56335],[43.59334,42.55728],[43.59324,42.55239],[43.59485,42.54913],[43.60587,42.5447],[43.61004,42.54279],[43.61216,42.54365],[43.61655,42.53919],[43.61068,42.53259],[43.60344,42.52674],[43.60437,42.52198],[43.60736,42.51798],[43.60675,42.51145],[43.60245,42.50768],[43.60296,42.50391],[43.60225,42.4988],[43.60275,42.49395],[43.60479,42.48941],[43.60216,42.48562],[43.60366,42.48146],[43.59373,42.47379],[43.58519,42.46985],[43.58979,42.45553],[43.58918,42.44621],[43.592,42.44096],[43.59567,42.43253],[43.59454,42.42385],[43.59502,42.40662],[43.60144,42.40047],[43.60786,42.39534],[43.61566,42.39084],[43.62465,42.38615],[43.61475,42.36937],[43.59693,42.35984],[43.59284,42.35538],[43.59848,42.3515],[43.60548,42.35117],[43.61351,42.3445],[43.61693,42.34091],[43.62138,42.33834],[43.64204,42.33511],[43.66288,42.33416],[43.67004,42.32947],[43.67307,42.32249],[43.67284,42.31369],[43.66934,42.30641],[43.65566,42.30266],[43.64968,42.29933],[43.64611,42.29549],[43.63925,42.2888],[43.63721,42.28312],[43.62898,42.28405],[43.61715,42.27863],[43.6138,42.26468],[43.60736,42.25366],[43.61114,42.24607],[43.60805,42.24215],[43.61251,42.23632],[43.60782,42.23178],[43.60485,42.22343],[43.59907,42.21015],[43.61079,42.21193],[43.63143,42.20034],[43.63573,42.1912],[43.63762,42.18682],[43.63402,42.18167],[43.64396,42.17578],[43.65022,42.17302],[43.65475,42.16873],[43.66885,42.16486],[43.6826,42.1657],[43.6914,42.15787],[43.69882,42.14901],[43.71362,42.13933],[43.73048,42.13244],[43.74757,42.1287],[43.77193,42.13097],[43.79664,42.12891],[43.79753,42.12353],[43.80777,42.12339],[43.80859,42.11956],[43.81662,42.11599],[43.83428,42.11182],[43.8383,42.10795],[43.84919,42.1107],[43.85397,42.12206],[43.85771,42.13342],[43.86721,42.13118],[43.87361,42.13251],[43.86847,42.1365],[43.87295,42.14508],[43.86473,42.15307],[43.87316,42.15176],[43.86707,42.16129],[43.87095,42.17159],[43.88069,42.16208],[43.88905,42.15944],[43.91204,42.15901],[43.92549,42.17908],[43.92775,42.1942],[43.92864,42.19966],[43.90493,42.21808],[43.91094,42.2229],[43.92459,42.21374],[43.94167,42.21093],[43.97308,42.20084],[43.98935,42.20905],[43.98757,42.21514],[44.01569,42.21608],[44.03317,42.21423],[44.04423,42.21854],[44.04478,42.22946],[44.06113,42.23556],[44.06025,42.23922],[44.07888,42.23807],[44.08343,42.23272],[44.08765,42.23394],[44.09153,42.22602],[44.09609,42.22471],[44.09079,42.20861],[44.08764,42.2037],[44.0869,42.20032],[44.09555,42.197],[44.10764,42.19776],[44.1136,42.18503],[44.10594,42.18058],[44.1091,42.176],[44.11553,42.17665],[44.12368,42.1712],[44.13072,42.17327],[44.13261,42.1696],[44.12866,42.16109],[44.13561,42.15562],[44.14427,42.15345],[44.14263,42.14034],[44.13687,42.13385],[44.13417,42.12696],[44.1367,42.12144],[44.13476,42.11388],[44.14218,42.11031],[44.15431,42.13258],[44.16827,42.14041],[44.17228,42.14824],[44.18092,42.14482],[44.18824,42.14884],[44.19281,42.14573],[44.19122,42.15558],[44.19684,42.16542],[44.20084,42.16408],[44.19906,42.15527],[44.19917,42.14874],[44.2084,42.14651],[44.21437,42.15229],[44.22052,42.15219],[44.22068,42.14375],[44.22831,42.13965],[44.22795,42.13516],[44.22037,42.1327],[44.22341,42.12677],[44.23386,42.11892],[44.24311,42.12099],[44.24962,42.12003],[44.25373,42.10914],[44.26275,42.10966],[44.26627,42.11349],[44.27915,42.11198],[44.2797,42.0985],[44.27476,42.08909],[44.27875,42.087],[44.26781,42.07204],[44.26086,42.06031],[44.24536,42.05509],[44.23605,42.04579],[44.23619,42.02891],[44.26808,42.02708],[44.28722,42.02633],[44.28302,42.03679],[44.28396,42.05171],[44.29315,42.06893],[44.30518,42.07611],[44.30493,42.06804],[44.31182,42.06588],[44.30876,42.05658],[44.31345,42.04232],[44.30215,42.03665],[44.30218,42.02767],[44.30991,42.02343],[44.32158,42.02174],[44.32771,42.03831],[44.33429,42.03818],[44.33535,42.0427],[44.34465,42.04289],[44.35912,42.04304],[44.36489,42.04822],[44.36655,42.05467],[44.38715,42.05241],[44.40122,42.0551],[44.41976,42.05155],[44.42864,42.05492],[44.43531,42.04666],[44.46491,42.04693],[44.4816,42.04361],[44.49073,42.04489],[44.48616,42.05678],[44.48296,42.06828],[44.48794,42.06879],[44.4925,42.05987],[44.53206,42.04177],[44.53794,42.04299],[44.5421,42.04803],[44.54229,42.05176],[44.54935,42.05549],[44.55798,42.06244],[44.54802,42.07391],[44.53639,42.06816],[44.5323,42.06885],[44.5258,42.06699],[44.52211,42.07477],[44.52223,42.08274],[44.51996,42.09122],[44.5266,42.09814],[44.53907,42.10301],[44.54772,42.1162],[44.56171,42.11562],[44.56746,42.11708],[44.56594,42.12563],[44.56132,42.13368],[44.57486,42.14612],[44.57347,42.15664],[44.58074,42.15601],[44.57485,42.16517],[44.572,42.16809],[44.56504,42.17],[44.56621,42.17458],[44.57669,42.17471],[44.58922,42.18399],[44.60434,42.19252],[44.61208,42.18985],[44.62093,42.1936],[44.62565,42.19964],[44.62402,42.20471],[44.61792,42.20799],[44.62049,42.21736],[44.6155,42.22443],[44.6148,42.23113],[44.62319,42.24554],[44.6163,42.25246],[44.61911,42.2611],[44.61691,42.26516],[44.61952,42.27354],[44.61088,42.28258],[44.60928,42.29568],[44.60247,42.30111],[44.59737,42.30197],[44.59645,42.31409],[44.57812,42.32844],[44.58188,42.33612],[44.59132,42.33996],[44.5932,42.34557],[44.60298,42.35363],[44.61036,42.36359],[44.60571,42.37429],[44.59762,42.37788],[44.59084,42.37677],[44.57409,42.38352],[44.5637,42.38139],[44.55142,42.38802],[44.54699,42.39001],[44.54958,42.39354],[44.54599,42.40062],[44.53864,42.40439],[44.52923,42.4079],[44.51781,42.40792],[44.5105,42.40667],[44.50165,42.41112],[44.48439,42.41202],[44.47892,42.42261],[44.46452,42.43346],[44.44705,42.45871],[44.4381,42.4613],[44.42762,42.45918],[44.42057,42.46338],[44.40089,42.46319],[44.38636,42.45893],[44.38358,42.46485],[44.37427,42.47177],[44.36467,42.47118],[44.35679,42.46957],[44.34091,42.48169],[44.33966,42.48875],[44.3336,42.49228],[44.34278,42.49909],[44.35504,42.50362],[44.36482,42.50461],[44.37667,42.50382],[44.38036,42.51],[44.37098,42.51439],[44.36194,42.52485],[44.35368,42.52336],[44.34679,42.52642],[44.34702,42.53571],[44.34519,42.54577],[44.32643,42.55133],[44.31109,42.55916],[44.30829,42.56881],[44.30755,42.57846],[44.30234,42.57831],[44.30077,42.58443],[44.28855,42.59459],[44.27236,42.60018],[44.26681,42.6045],[44.25497,42.5979],[44.24965,42.59104],[44.24324,42.59654],[44.2406,42.6023],[44.2347,42.60692],[44.2257,42.60926],[44.23071,42.61909],[44.23091,42.62791],[44.22835,42.62999],[44.22031,42.63031],[44.20684,42.6304],[44.19372,42.63504],[44.18721,42.62942],[44.17843,42.61779],[44.16381,42.60817],[44.15633,42.60714],[44.14491,42.60699],[44.13238,42.61385],[44.11608,42.61766],[44.10071,42.61273],[44.09131,42.60938],[44.08981,42.60577],[44.06654,42.60085],[44.05463,42.60433],[44.04683,42.60326],[44.01708,42.5948],[44.0048,42.58554],[43.99252,42.57172],[43.97488,42.56004],[43.97378,42.55218],[43.96582,42.54811],[43.96225,42.54715],[43.95593,42.55175],[43.94639,42.55135],[43.94401,42.56283],[43.91123,42.57138],[43.87294,42.58035],[43.86642,42.58994],[43.83706,42.59745],[43.81816,42.59291],[43.80823,42.59757],[43.78957,42.59481],[43.77765,42.58802],[43.75053,42.59879],[43.75302,42.61533],[43.72834,42.62765],[43.71429,42.63476],[43.73846,42.64942],[43.75798,42.65456],[43.77805,42.67914],[43.78932,42.70076],[43.80149,42.71247],[43.80655,42.72589],[43.80904,42.73677],[43.80329,42.7416],[43.79978,42.74401],[43.79961,42.74186]]]}},{type:"Feature",properties:{nearestId:"23d669784e2ddd01c6a2325155c3f35d",originalId:"23d669784e2ddd01c6a2325155c3f35d",id:"e6fc69bec2d73f5acbdbaadf1977aa0c",fill:"#aa0000","fill-opacity":"0.25",stroke:"#aa1111","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[34.56482,45.30729]}},oldPointsMap:[[34.9768,45.69307],[35.03643,45.63134],[35.07126,45.59168],[35.12167,45.48274],[35.04027,45.44029],[35.07762,45.38872],[35.12453,45.35257],[35.27519,45.33792],[35.45325,45.31228],[35.52263,45.28581],[35.60602,45.31972],[35.69601,45.33473],[35.71683,45.33632],[35.72371,45.34263],[35.72509,45.35351],[35.74486,45.36009],[35.75822,45.37025],[35.76158,45.38127],[35.74572,45.38786],[35.75022,45.39746],[35.76537,45.40513],[35.77511,45.40903],[35.78859,45.41684],[35.81286,45.42928],[35.82737,45.44211],[35.82562,45.44732],[35.81769,45.44759],[35.81621,45.45606],[35.82092,45.46405],[35.83857,45.47426],[35.86831,45.47363],[35.87753,45.46074],[35.86435,45.45413],[35.84774,45.44849],[35.85128,45.4405],[35.86152,45.4307],[35.87649,45.41942],[35.89513,45.40279],[35.922,45.38867],[35.95023,45.37744],[35.96914,45.37316],[35.98737,45.37154],[36.00475,45.37241],[36.02111,45.37546],[36.04175,45.38413],[36.06154,45.39749],[36.07096,45.41064],[36.06974,45.41981],[36.07135,45.42526],[36.06593,45.4424],[36.08251,45.45025],[36.10458,45.45761],[36.13114,45.46612],[36.16818,45.47107],[36.20765,45.47387],[36.24523,45.47641],[36.27177,45.48022],[36.28519,45.4827],[36.29862,45.48324],[36.31129,45.47598],[36.32986,45.47355],[36.34037,45.47755],[36.33725,45.48297],[36.34473,45.48544],[36.35395,45.47686],[36.36229,45.47241],[36.37215,45.47132],[36.39737,45.45337],[36.41624,45.44778],[36.43979,45.45461],[36.44669,45.46082],[36.45859,45.45817],[36.46911,45.45937],[36.49696,45.451],[36.51604,45.43769],[36.53691,45.42806],[36.55511,45.42531],[36.56294,45.43],[36.5694,45.44095],[36.58171,45.44279],[36.59724,45.44024],[36.61559,45.42333],[36.61509,45.41775],[36.61185,45.41241],[36.6237,45.39955],[36.63864,45.39369],[36.6517,45.38577],[36.64913,45.37834],[36.6336,45.37312],[36.63233,45.36344],[36.61305,45.35537],[36.60494,45.3461],[36.59263,45.34418],[36.56919,45.34502],[36.5546,45.34463],[36.54259,45.344],[36.52791,45.34877],[36.51901,45.35087],[36.51491,45.35634],[36.5085,45.35874],[36.49641,45.36053],[36.48253,45.35531],[36.48418,45.35099],[36.47673,45.3474],[36.47437,45.33672],[36.48163,45.32434],[36.49826,45.31978],[36.49388,45.31502],[36.48434,45.31087],[36.48683,45.30548],[36.45929,45.29987],[36.43358,45.2935],[36.42595,45.2877],[36.42636,45.27927],[36.43644,45.27737],[36.4412,45.26889],[36.43791,45.25852],[36.43083,45.2502],[36.41745,45.23064],[36.40588,45.21382],[36.40942,45.17111],[36.42189,45.16267],[36.42801,45.13029],[36.43564,45.1184],[36.45184,45.11184],[36.45684,45.10173],[36.45532,45.09161],[36.43843,45.08193],[36.40816,45.06999],[36.37212,45.05374],[36.32186,45.05665],[36.27573,45.05299],[36.25005,45.04622],[36.24614,45.03664],[36.23674,45.03147],[36.22245,45.02494],[36.20189,45.03207],[36.16796,45.03505],[36.11968,45.04132],[36.0791,45.04636],[36.06125,45.04864],[36.04785,45.04877],[36.02409,45.04714],[35.99913,45.03751],[35.98425,45.02005],[35.95032,45.01],[35.92732,45.01851],[35.91049,45.01815],[35.88061,45.00916],[35.86292,45.00157],[35.83769,44.99714],[35.8235,45.00661],[35.83258,45.01032],[35.80922,45.02239],[35.81299,45.03162],[35.80462,45.04468],[35.7832,45.0575],[35.77149,45.06961],[35.70759,45.1],[35.67091,45.11201],[35.63352,45.12111],[35.60518,45.12708],[35.57616,45.12941],[35.52865,45.12417],[35.49899,45.11519],[35.46133,45.10344],[35.43449,45.08903],[35.41177,45.07317],[35.39569,45.05944],[35.38869,45.04793],[35.38494,45.0346],[35.38907,45.03055],[35.39914,45.03171],[35.40063,45.02523],[35.41336,45.02445],[35.42647,45.0146],[35.42475,45.00992],[35.40787,45.00443],[35.38992,44.9978],[35.36596,44.99277],[35.3582,44.98521],[35.35511,44.97599],[35.3606,44.97357],[35.37041,44.96149],[35.37601,44.95599],[35.39242,44.95815],[35.3899,44.94973],[35.38378,44.94484],[35.35259,44.95635],[35.3521,44.9621],[35.33812,44.96594],[35.32723,44.96299],[35.32203,44.96791],[35.3103,44.96846],[35.29944,44.9654],[35.29596,44.95928],[35.28852,44.96483],[35.27216,44.96698],[35.25722,44.96113],[35.24983,44.95321],[35.25581,44.93745],[35.24454,44.92008],[35.23145,44.91224],[35.19638,44.90865],[35.18558,44.90578],[35.17823,44.90072],[35.16643,44.89793],[35.15842,44.89173],[35.14974,44.87834],[35.14089,44.86117],[35.13356,44.83964],[35.1326,44.82273],[35.1175,44.81665],[35.11168,44.80715],[35.0947,44.80192],[35.08133,44.79084],[35.06341,44.79761],[35.04464,44.79986],[35.04932,44.8156],[35.03323,44.82487],[35.0192,44.83097],[35.00227,44.83152],[34.98668,44.82834],[34.98453,44.83514],[34.97018,44.83913],[34.95094,44.83544],[34.9417,44.83212],[34.9288,44.82967],[34.91986,44.82795],[34.9222,44.82191],[34.90512,44.8183],[34.89802,44.81539],[34.88921,44.81516],[34.87989,44.82102],[34.86501,44.82035],[34.85924,44.81859],[34.84502,44.81415],[34.82634,44.81767],[34.81054,44.81887],[34.7896,44.8169],[34.77729,44.81789],[34.75913,44.81499],[34.74909,44.80966],[34.73536,44.81099],[34.72438,44.80963],[34.69093,44.79614],[34.67456,44.78793],[34.64514,44.78411],[34.62342,44.77472],[34.60445,44.7719],[34.58702,44.75851],[34.55358,44.75186],[34.53595,44.73839],[34.50635,44.73103],[34.49114,44.72579],[34.47903,44.71933],[34.46132,44.71125],[34.45114,44.70308],[34.4369,44.68854],[34.42604,44.67914],[34.41722,44.6734],[34.41262,44.66127],[34.40483,44.65136],[34.40133,44.63975],[34.3877,44.62759],[34.38296,44.61772],[34.37765,44.61281],[34.37749,44.60741],[34.37374,44.60348],[34.37272,44.5899],[34.36242,44.5906],[34.35384,44.58617],[34.34904,44.57257],[34.34905,44.55786],[34.34876,44.54738],[34.33908,44.54612],[34.33027,44.54792],[34.3187,44.55135],[34.30919,44.55306],[34.30131,44.54896],[34.29755,44.54535],[34.29064,44.5439],[34.28682,44.54195],[34.27982,44.5403],[34.27728,44.53718],[34.27443,44.52822],[34.27023,44.52027],[34.26406,44.51483],[34.2553,44.50841],[34.24979,44.50554],[34.23108,44.50316],[34.21163,44.50135],[34.20683,44.49756],[34.20048,44.49653],[34.18959,44.49907],[34.17594,44.49561],[34.1706,44.49083],[34.16321,44.488],[34.159,44.47832],[34.15307,44.4706],[34.15018,44.46239],[34.143,44.4532],[34.13579,44.44232],[34.12809,44.4282],[34.11737,44.42641],[34.10927,44.42772],[34.1022,44.4256],[34.09503,44.42778],[34.08442,44.42408],[34.07338,44.42111],[34.06322,44.42037],[34.04499,44.41349],[34.03985,44.40838],[34.03145,44.40426],[34.01817,44.40676],[34.00309,44.40011],[33.98355,44.39837],[33.98031,44.39394],[33.97227,44.39146],[33.95226,44.3903],[33.93136,44.39322],[33.91251,44.39834],[33.87678,44.40338],[33.84759,44.4037],[33.84033,44.40367],[33.83514,44.4002],[33.82687,44.39931],[33.82049,44.39498],[33.81242,44.39617],[33.80504,44.39245],[33.80043,44.39386],[33.79342,44.38913],[33.77613,44.38533],[33.75852,44.38975],[33.73781,44.38656],[33.72525,44.39281],[33.71829,44.40603],[33.71035,44.41282],[33.70481,44.42047],[33.68346,44.41579],[33.66533,44.41811],[33.64711,44.42673],[33.64126,44.44158],[33.64038,44.45533],[33.63351,44.47141],[33.62635,44.48024],[33.61375,44.48717],[33.60493,44.49017],[33.59568,44.49293],[33.58438,44.4892],[33.56984,44.48979],[33.55211,44.48668],[33.53639,44.4929],[33.52307,44.49838],[33.49951,44.50079],[33.48835,44.49599],[33.4762,44.5105],[33.46197,44.52255],[33.4486,44.53167],[33.43489,44.53908],[33.40778,44.55278],[33.39921,44.55962],[33.38754,44.5743],[33.38055,44.58015],[33.37689,44.58429],[33.39081,44.58896],[33.40354,44.59412],[33.40644,44.57902],[33.41137,44.57968],[33.4147,44.5931],[33.4234,44.59797],[33.43588,44.60529],[33.4412,44.60597],[33.44257,44.59945],[33.44782,44.60017],[33.44586,44.60883],[33.4688,44.61335],[33.46891,44.60683],[33.47211,44.60653],[33.47305,44.61279],[33.48312,44.61112],[33.49663,44.61579],[33.49842,44.61059],[33.5015,44.61264],[33.50081,44.61737],[33.50731,44.62146],[33.50929,44.61891],[33.5298,44.61855],[33.55263,44.61857],[33.57065,44.61558],[33.58627,44.6148],[33.57622,44.61877],[33.56343,44.62054],[33.54996,44.62353],[33.53545,44.6231],[33.51573,44.62745],[33.50871,44.62398],[33.50901,44.63142],[33.51566,44.63885],[33.52702,44.64007],[33.54043,44.65673],[33.54543,44.6712],[33.54608,44.6828],[33.54714,44.69855],[33.54586,44.71234],[33.54707,44.72302],[33.54416,44.73346],[33.5397,44.7455],[33.5409,44.75985],[33.53596,44.77886],[33.53343,44.79216],[33.53893,44.80266],[33.54501,44.80789],[33.54903,44.81653],[33.54828,44.83603],[33.55133,44.84072],[33.56204,44.84288],[33.56846,44.83858],[33.58149,44.84299],[33.58766,44.84726],[33.59246,44.84581],[33.59998,44.8573],[33.60733,44.87292],[33.60868,44.89226],[33.61249,44.91276],[33.60933,44.93352],[33.59774,44.97568],[33.60254,44.97973],[33.60339,44.98803],[33.60278,44.99338],[33.59413,45.02001],[33.5878,45.03305],[33.57974,45.05356],[33.56821,45.07326],[33.55134,45.0926],[33.53041,45.11604],[33.49941,45.1426],[33.46737,45.16394],[33.43868,45.1804],[33.41068,45.1931],[33.38292,45.19653],[33.37744,45.19143],[33.38157,45.1844],[33.36439,45.18066],[33.35064,45.17304],[33.3314,45.17183],[33.31402,45.17427],[33.30181,45.17006],[33.29338,45.15447],[33.28353,45.14692],[33.26591,45.14471],[33.25343,45.1488],[33.23683,45.16365],[33.22395,45.17491],[33.20426,45.18151],[33.1848,45.18264],[33.17422,45.18913],[33.16397,45.19321],[33.15559,45.19901],[33.14376,45.20434],[33.13748,45.21711],[33.10853,45.23169],[33.0935,45.24811],[33.08193,45.25786],[33.07055,45.26865],[33.05989,45.27703],[33.05176,45.28162],[33.0154,45.30345],[32.99788,45.31769],[32.97725,45.33048],[32.94058,45.3472],[32.92053,45.35578],[32.8984,45.36121],[32.85842,45.36647],[32.82256,45.36568],[32.77503,45.36476],[32.75015,45.36334],[32.73384,45.35345],[32.70467,45.33867],[32.68571,45.33269],[32.68066,45.32526],[32.67324,45.32071],[32.65279,45.31373],[32.62213,45.31875],[32.60997,45.32487],[32.59404,45.32713],[32.57737,45.32842],[32.56411,45.3337],[32.54501,45.33488],[32.52876,45.33952],[32.50887,45.34112],[32.49139,45.34634],[32.50588,45.35854],[32.51351,45.37194],[32.50637,45.38234],[32.49113,45.38319],[32.47794,45.38959],[32.47857,45.39966],[32.48214,45.40535],[32.48761,45.40924],[32.50166,45.42545],[32.51272,45.43145],[32.52207,45.43865],[32.537,45.45014],[32.53888,45.4556],[32.56211,45.4699],[32.58775,45.48275],[32.63264,45.50077],[32.67377,45.51794],[32.69553,45.52509],[32.6995,45.51714],[32.70504,45.51575],[32.71092,45.51749],[32.70672,45.52698],[32.72355,45.53311],[32.73033,45.53913],[32.74827,45.54814],[32.79301,45.56465],[32.80618,45.55459],[32.81396,45.55905],[32.82075,45.55975],[32.82754,45.55613],[32.83808,45.56232],[32.84382,45.5738],[32.84015,45.58193],[32.81885,45.58313],[32.82258,45.58872],[32.82871,45.59336],[32.84239,45.60161],[32.86744,45.6159],[32.91314,45.64255],[32.94312,45.65588],[32.9986,45.68126],[33.03875,45.69491],[33.07857,45.71071],[33.09524,45.71702],[33.11433,45.7135],[33.14299,45.72591],[33.15311,45.74214],[33.15971,45.75231],[33.162,45.76322],[33.16064,45.77878],[33.16955,45.79583],[33.16816,45.81001],[33.18847,45.81164],[33.17733,45.79283],[33.17856,45.78024],[33.19173,45.76678],[33.23048,45.75403],[33.25273,45.75463],[33.2695,45.76097],[33.30827,45.77018],[33.34397,45.78298],[33.37633,45.79962],[33.39921,45.81692],[33.41,45.8266],[33.43114,45.83978],[33.46695,45.85007],[33.48218,45.85446],[33.49431,45.86072],[33.50836,45.8644],[33.5444,45.88671],[33.55695,45.87507],[33.56857,45.87151],[33.58009,45.87076],[33.59417,45.88766],[33.61604,45.89269],[33.63017,45.88611],[33.64857,45.87833],[33.6598,45.87293],[33.66344,45.86489],[33.67806,45.85685],[33.68341,45.85976],[33.67629,45.8797],[33.67528,45.90983],[33.69351,45.91449],[33.69919,45.91092],[33.7138,45.92263],[33.72443,45.92852],[33.73643,45.93155],[33.75263,45.92987],[33.75615,45.93584],[33.75349,45.9399],[33.75118,45.94696],[33.72414,45.9514],[33.69301,45.95313],[33.68143,45.94984],[33.65963,45.95428],[33.64825,45.94687],[33.64107,45.93945],[33.62657,45.94037],[33.61551,45.94392],[33.61919,45.95218],[33.6271,45.95964],[33.62931,45.97064],[33.62536,45.99065],[33.61862,45.99973],[33.58965,45.99421],[33.54611,45.99879],[33.57015,46.03609],[33.59703,46.07543],[33.59145,46.0895],[33.59316,46.11312],[33.60476,46.13062],[33.6204,46.13631],[33.63688,46.14107],[33.61404,46.22617],[33.64632,46.22925],[33.66486,46.22094],[33.68717,46.2055],[33.70056,46.20288],[33.73936,46.18435],[33.75618,46.191],[33.77832,46.20003],[33.80287,46.20288],[33.83068,46.20312],[33.84991,46.19884],[33.87119,46.18981],[33.89231,46.17448],[33.91273,46.16057],[33.98827,46.13298],[34.02706,46.11133],[34.05384,46.10871],[34.07204,46.11799],[34.09126,46.11585],[34.12594,46.10466],[34.14516,46.08657],[34.15976,46.07752],[34.17503,46.07133],[34.18414,46.06621],[34.211,46.06341],[34.23061,46.05653],[34.24885,46.05298],[34.29726,46.06001],[34.33056,46.06084],[34.36386,46.0475],[34.38583,46.03284],[34.39905,46.01955],[34.40884,46.00579],[34.41313,45.98933],[34.42514,45.97573],[34.44197,45.96249],[34.46634,45.94638],[34.48196,45.94262],[34.49553,45.9422],[34.5096,45.94673],[34.52299,45.95533],[34.5472,45.97907],[34.55286,45.98766],[34.55681,45.99159],[34.56333,45.99398],[34.57449,45.99571],[34.58771,45.99553],[34.60367,45.9941],[34.63371,45.98468],[34.65345,45.97633],[34.67422,45.96535],[34.68899,45.95461],[34.72572,45.92835],[34.75199,45.91044],[34.80125,45.90231],[34.79937,45.80451],[34.74237,45.73614],[34.89429,45.7571],[34.8852,45.71865],[34.92005,45.68658],[34.9645,45.69095],[34.9768,45.69307]]},geometry:{type:"Polygon",coordinates:[[[34.9768,45.69307],[35.03643,45.63134],[35.07126,45.59168],[35.12167,45.48274],[35.04027,45.44029],[35.07762,45.38872],[35.12453,45.35257],[35.27519,45.33792],[35.45325,45.31228],[35.52263,45.28581],[35.60602,45.31972],[35.69601,45.33473],[35.71683,45.33632],[35.72371,45.34263],[35.72509,45.35351],[35.74486,45.36009],[35.75822,45.37025],[35.76158,45.38127],[35.74572,45.38786],[35.75022,45.39746],[35.76537,45.40513],[35.77511,45.40903],[35.78859,45.41684],[35.81286,45.42928],[35.82737,45.44211],[35.82562,45.44732],[35.81769,45.44759],[35.81621,45.45606],[35.82092,45.46405],[35.83857,45.47426],[35.86831,45.47363],[35.87753,45.46074],[35.86435,45.45413],[35.84774,45.44849],[35.85128,45.4405],[35.86152,45.4307],[35.87649,45.41942],[35.89513,45.40279],[35.922,45.38867],[35.95023,45.37744],[35.96914,45.37316],[35.98737,45.37154],[36.00475,45.37241],[36.02111,45.37546],[36.04175,45.38413],[36.06154,45.39749],[36.07096,45.41064],[36.06974,45.41981],[36.07135,45.42526],[36.06593,45.4424],[36.08251,45.45025],[36.10458,45.45761],[36.13114,45.46612],[36.16818,45.47107],[36.20765,45.47387],[36.24523,45.47641],[36.27177,45.48022],[36.28519,45.4827],[36.29862,45.48324],[36.31129,45.47598],[36.32986,45.47355],[36.34037,45.47755],[36.33725,45.48297],[36.34473,45.48544],[36.35395,45.47686],[36.36229,45.47241],[36.37215,45.47132],[36.39737,45.45337],[36.41624,45.44778],[36.43979,45.45461],[36.44669,45.46082],[36.45859,45.45817],[36.46911,45.45937],[36.49696,45.451],[36.51604,45.43769],[36.53691,45.42806],[36.55511,45.42531],[36.56294,45.43],[36.5694,45.44095],[36.58171,45.44279],[36.59724,45.44024],[36.61559,45.42333],[36.61509,45.41775],[36.61185,45.41241],[36.6237,45.39955],[36.63864,45.39369],[36.6517,45.38577],[36.64913,45.37834],[36.6336,45.37312],[36.63233,45.36344],[36.61305,45.35537],[36.60494,45.3461],[36.59263,45.34418],[36.56919,45.34502],[36.5546,45.34463],[36.54259,45.344],[36.52791,45.34877],[36.51901,45.35087],[36.51491,45.35634],[36.5085,45.35874],[36.49641,45.36053],[36.48253,45.35531],[36.48418,45.35099],[36.47673,45.3474],[36.47437,45.33672],[36.48163,45.32434],[36.49826,45.31978],[36.49388,45.31502],[36.48434,45.31087],[36.48683,45.30548],[36.45929,45.29987],[36.43358,45.2935],[36.42595,45.2877],[36.42636,45.27927],[36.43644,45.27737],[36.4412,45.26889],[36.43791,45.25852],[36.43083,45.2502],[36.41745,45.23064],[36.40588,45.21382],[36.40942,45.17111],[36.42189,45.16267],[36.42801,45.13029],[36.43564,45.1184],[36.45184,45.11184],[36.45684,45.10173],[36.45532,45.09161],[36.43843,45.08193],[36.40816,45.06999],[36.37212,45.05374],[36.32186,45.05665],[36.27573,45.05299],[36.25005,45.04622],[36.24614,45.03664],[36.23674,45.03147],[36.22245,45.02494],[36.20189,45.03207],[36.16796,45.03505],[36.11968,45.04132],[36.0791,45.04636],[36.06125,45.04864],[36.04785,45.04877],[36.02409,45.04714],[35.99913,45.03751],[35.98425,45.02005],[35.95032,45.01],[35.92732,45.01851],[35.91049,45.01815],[35.88061,45.00916],[35.86292,45.00157],[35.83769,44.99714],[35.8235,45.00661],[35.83258,45.01032],[35.80922,45.02239],[35.81299,45.03162],[35.80462,45.04468],[35.7832,45.0575],[35.77149,45.06961],[35.70759,45.1],[35.67091,45.11201],[35.63352,45.12111],[35.60518,45.12708],[35.57616,45.12941],[35.52865,45.12417],[35.49899,45.11519],[35.46133,45.10344],[35.43449,45.08903],[35.41177,45.07317],[35.39569,45.05944],[35.38869,45.04793],[35.38494,45.0346],[35.38907,45.03055],[35.39914,45.03171],[35.40063,45.02523],[35.41336,45.02445],[35.42647,45.0146],[35.42475,45.00992],[35.40787,45.00443],[35.38992,44.9978],[35.36596,44.99277],[35.3582,44.98521],[35.35511,44.97599],[35.3606,44.97357],[35.37041,44.96149],[35.37601,44.95599],[35.39242,44.95815],[35.3899,44.94973],[35.38378,44.94484],[35.35259,44.95635],[35.3521,44.9621],[35.33812,44.96594],[35.32723,44.96299],[35.32203,44.96791],[35.3103,44.96846],[35.29944,44.9654],[35.29596,44.95928],[35.28852,44.96483],[35.27216,44.96698],[35.25722,44.96113],[35.24983,44.95321],[35.25581,44.93745],[35.24454,44.92008],[35.23145,44.91224],[35.19638,44.90865],[35.18558,44.90578],[35.17823,44.90072],[35.16643,44.89793],[35.15842,44.89173],[35.14974,44.87834],[35.14089,44.86117],[35.13356,44.83964],[35.1326,44.82273],[35.1175,44.81665],[35.11168,44.80715],[35.0947,44.80192],[35.08133,44.79084],[35.06341,44.79761],[35.04464,44.79986],[35.04932,44.8156],[35.03323,44.82487],[35.0192,44.83097],[35.00227,44.83152],[34.98668,44.82834],[34.98453,44.83514],[34.97018,44.83913],[34.95094,44.83544],[34.9417,44.83212],[34.9288,44.82967],[34.91986,44.82795],[34.9222,44.82191],[34.90512,44.8183],[34.89802,44.81539],[34.88921,44.81516],[34.87989,44.82102],[34.86501,44.82035],[34.85924,44.81859],[34.84502,44.81415],[34.82634,44.81767],[34.81054,44.81887],[34.7896,44.8169],[34.77729,44.81789],[34.75913,44.81499],[34.74909,44.80966],[34.73536,44.81099],[34.72438,44.80963],[34.69093,44.79614],[34.67456,44.78793],[34.64514,44.78411],[34.62342,44.77472],[34.60445,44.7719],[34.58702,44.75851],[34.55358,44.75186],[34.53595,44.73839],[34.50635,44.73103],[34.49114,44.72579],[34.47903,44.71933],[34.46132,44.71125],[34.45114,44.70308],[34.4369,44.68854],[34.42604,44.67914],[34.41722,44.6734],[34.41262,44.66127],[34.40483,44.65136],[34.40133,44.63975],[34.3877,44.62759],[34.38296,44.61772],[34.37765,44.61281],[34.37749,44.60741],[34.37374,44.60348],[34.37272,44.5899],[34.36242,44.5906],[34.35384,44.58617],[34.34904,44.57257],[34.34905,44.55786],[34.34876,44.54738],[34.33908,44.54612],[34.33027,44.54792],[34.3187,44.55135],[34.30919,44.55306],[34.30131,44.54896],[34.29755,44.54535],[34.29064,44.5439],[34.28682,44.54195],[34.27982,44.5403],[34.27728,44.53718],[34.27443,44.52822],[34.27023,44.52027],[34.26406,44.51483],[34.2553,44.50841],[34.24979,44.50554],[34.23108,44.50316],[34.21163,44.50135],[34.20683,44.49756],[34.20048,44.49653],[34.18959,44.49907],[34.17594,44.49561],[34.1706,44.49083],[34.16321,44.488],[34.159,44.47832],[34.15307,44.4706],[34.15018,44.46239],[34.143,44.4532],[34.13579,44.44232],[34.12809,44.4282],[34.11737,44.42641],[34.10927,44.42772],[34.1022,44.4256],[34.09503,44.42778],[34.08442,44.42408],[34.07338,44.42111],[34.06322,44.42037],[34.04499,44.41349],[34.03985,44.40838],[34.03145,44.40426],[34.01817,44.40676],[34.00309,44.40011],[33.98355,44.39837],[33.98031,44.39394],[33.97227,44.39146],[33.95226,44.3903],[33.93136,44.39322],[33.91251,44.39834],[33.87678,44.40338],[33.84759,44.4037],[33.84033,44.40367],[33.83514,44.4002],[33.82687,44.39931],[33.82049,44.39498],[33.81242,44.39617],[33.80504,44.39245],[33.80043,44.39386],[33.79342,44.38913],[33.77613,44.38533],[33.75852,44.38975],[33.73781,44.38656],[33.72525,44.39281],[33.71829,44.40603],[33.71035,44.41282],[33.70481,44.42047],[33.68346,44.41579],[33.66533,44.41811],[33.64711,44.42673],[33.64126,44.44158],[33.64038,44.45533],[33.63351,44.47141],[33.62635,44.48024],[33.61375,44.48717],[33.60493,44.49017],[33.59568,44.49293],[33.58438,44.4892],[33.56984,44.48979],[33.55211,44.48668],[33.53639,44.4929],[33.52307,44.49838],[33.49951,44.50079],[33.48835,44.49599],[33.4762,44.5105],[33.46197,44.52255],[33.4486,44.53167],[33.43489,44.53908],[33.40778,44.55278],[33.39921,44.55962],[33.38754,44.5743],[33.38055,44.58015],[33.37689,44.58429],[33.39081,44.58896],[33.40354,44.59412],[33.40644,44.57902],[33.41137,44.57968],[33.4147,44.5931],[33.4234,44.59797],[33.43588,44.60529],[33.4412,44.60597],[33.44257,44.59945],[33.44782,44.60017],[33.44586,44.60883],[33.4688,44.61335],[33.46891,44.60683],[33.47211,44.60653],[33.47305,44.61279],[33.48312,44.61112],[33.49663,44.61579],[33.49842,44.61059],[33.5015,44.61264],[33.50081,44.61737],[33.50731,44.62146],[33.50929,44.61891],[33.5298,44.61855],[33.55263,44.61857],[33.57065,44.61558],[33.58627,44.6148],[33.57622,44.61877],[33.56343,44.62054],[33.54996,44.62353],[33.53545,44.6231],[33.51573,44.62745],[33.50871,44.62398],[33.50901,44.63142],[33.51566,44.63885],[33.52702,44.64007],[33.54043,44.65673],[33.54543,44.6712],[33.54608,44.6828],[33.54714,44.69855],[33.54586,44.71234],[33.54707,44.72302],[33.54416,44.73346],[33.5397,44.7455],[33.5409,44.75985],[33.53596,44.77886],[33.53343,44.79216],[33.53893,44.80266],[33.54501,44.80789],[33.54903,44.81653],[33.54828,44.83603],[33.55133,44.84072],[33.56204,44.84288],[33.56846,44.83858],[33.58149,44.84299],[33.58766,44.84726],[33.59246,44.84581],[33.59998,44.8573],[33.60733,44.87292],[33.60868,44.89226],[33.61249,44.91276],[33.60933,44.93352],[33.59774,44.97568],[33.60254,44.97973],[33.60339,44.98803],[33.60278,44.99338],[33.59413,45.02001],[33.5878,45.03305],[33.57974,45.05356],[33.56821,45.07326],[33.55134,45.0926],[33.53041,45.11604],[33.49941,45.1426],[33.46737,45.16394],[33.43868,45.1804],[33.41068,45.1931],[33.38292,45.19653],[33.37744,45.19143],[33.38157,45.1844],[33.36439,45.18066],[33.35064,45.17304],[33.3314,45.17183],[33.31402,45.17427],[33.30181,45.17006],[33.29338,45.15447],[33.28353,45.14692],[33.26591,45.14471],[33.25343,45.1488],[33.23683,45.16365],[33.22395,45.17491],[33.20426,45.18151],[33.1848,45.18264],[33.17422,45.18913],[33.16397,45.19321],[33.15559,45.19901],[33.14376,45.20434],[33.13748,45.21711],[33.10853,45.23169],[33.0935,45.24811],[33.08193,45.25786],[33.07055,45.26865],[33.05989,45.27703],[33.05176,45.28162],[33.0154,45.30345],[32.99788,45.31769],[32.97725,45.33048],[32.94058,45.3472],[32.92053,45.35578],[32.8984,45.36121],[32.85842,45.36647],[32.82256,45.36568],[32.77503,45.36476],[32.75015,45.36334],[32.73384,45.35345],[32.70467,45.33867],[32.68571,45.33269],[32.68066,45.32526],[32.67324,45.32071],[32.65279,45.31373],[32.62213,45.31875],[32.60997,45.32487],[32.59404,45.32713],[32.57737,45.32842],[32.56411,45.3337],[32.54501,45.33488],[32.52876,45.33952],[32.50887,45.34112],[32.49139,45.34634],[32.50588,45.35854],[32.51351,45.37194],[32.50637,45.38234],[32.49113,45.38319],[32.47794,45.38959],[32.47857,45.39966],[32.48214,45.40535],[32.48761,45.40924],[32.50166,45.42545],[32.51272,45.43145],[32.52207,45.43865],[32.537,45.45014],[32.53888,45.4556],[32.56211,45.4699],[32.58775,45.48275],[32.63264,45.50077],[32.67377,45.51794],[32.69553,45.52509],[32.6995,45.51714],[32.70504,45.51575],[32.71092,45.51749],[32.70672,45.52698],[32.72355,45.53311],[32.73033,45.53913],[32.74827,45.54814],[32.79301,45.56465],[32.80618,45.55459],[32.81396,45.55905],[32.82075,45.55975],[32.82754,45.55613],[32.83808,45.56232],[32.84382,45.5738],[32.84015,45.58193],[32.81885,45.58313],[32.82258,45.58872],[32.82871,45.59336],[32.84239,45.60161],[32.86744,45.6159],[32.91314,45.64255],[32.94312,45.65588],[32.9986,45.68126],[33.03875,45.69491],[33.07857,45.71071],[33.09524,45.71702],[33.11433,45.7135],[33.14299,45.72591],[33.15311,45.74214],[33.15971,45.75231],[33.162,45.76322],[33.16064,45.77878],[33.16955,45.79583],[33.16816,45.81001],[33.18847,45.81164],[33.17733,45.79283],[33.17856,45.78024],[33.19173,45.76678],[33.23048,45.75403],[33.25273,45.75463],[33.2695,45.76097],[33.30827,45.77018],[33.34397,45.78298],[33.37633,45.79962],[33.39921,45.81692],[33.41,45.8266],[33.43114,45.83978],[33.46695,45.85007],[33.48218,45.85446],[33.49431,45.86072],[33.50836,45.8644],[33.5444,45.88671],[33.55695,45.87507],[33.56857,45.87151],[33.58009,45.87076],[33.59417,45.88766],[33.61604,45.89269],[33.63017,45.88611],[33.64857,45.87833],[33.6598,45.87293],[33.66344,45.86489],[33.67806,45.85685],[33.68341,45.85976],[33.67629,45.8797],[33.67528,45.90983],[33.69351,45.91449],[33.69919,45.91092],[33.7138,45.92263],[33.72443,45.92852],[33.73643,45.93155],[33.75263,45.92987],[33.75615,45.93584],[33.75349,45.9399],[33.75118,45.94696],[33.72414,45.9514],[33.69301,45.95313],[33.68143,45.94984],[33.65963,45.95428],[33.64825,45.94687],[33.64107,45.93945],[33.62657,45.94037],[33.61551,45.94392],[33.61919,45.95218],[33.6271,45.95964],[33.62931,45.97064],[33.62536,45.99065],[33.61862,45.99973],[33.58965,45.99421],[33.54611,45.99879],[33.57015,46.03609],[33.59703,46.07543],[33.59145,46.0895],[33.59316,46.11312],[33.60476,46.13062],[33.6204,46.13631],[33.63688,46.14107],[33.61404,46.22617],[33.64632,46.22925],[33.66486,46.22094],[33.68717,46.2055],[33.70056,46.20288],[33.73936,46.18435],[33.75618,46.191],[33.77832,46.20003],[33.80287,46.20288],[33.83068,46.20312],[33.84991,46.19884],[33.87119,46.18981],[33.89231,46.17448],[33.91273,46.16057],[33.98827,46.13298],[34.02706,46.11133],[34.05384,46.10871],[34.07204,46.11799],[34.09126,46.11585],[34.12594,46.10466],[34.14516,46.08657],[34.15976,46.07752],[34.17503,46.07133],[34.18414,46.06621],[34.211,46.06341],[34.23061,46.05653],[34.24885,46.05298],[34.29726,46.06001],[34.33056,46.06084],[34.36386,46.0475],[34.38583,46.03284],[34.39905,46.01955],[34.40884,46.00579],[34.41313,45.98933],[34.42514,45.97573],[34.44197,45.96249],[34.46634,45.94638],[34.48196,45.94262],[34.49553,45.9422],[34.5096,45.94673],[34.52299,45.95533],[34.5472,45.97907],[34.55286,45.98766],[34.55681,45.99159],[34.56333,45.99398],[34.57449,45.99571],[34.58771,45.99553],[34.60367,45.9941],[34.63371,45.98468],[34.65345,45.97633],[34.67422,45.96535],[34.68899,45.95461],[34.72572,45.92835],[34.75199,45.91044],[34.80125,45.90231],[34.79937,45.80451],[34.74237,45.73614],[34.89429,45.7571],[34.8852,45.71865],[34.92005,45.68658],[34.9645,45.69095],[34.9768,45.69307]]]}},{type:"Feature",properties:{nearestId:"dfa172d67035506bb381d7fdb58fec92",originalId:"dfa172d67035506bb381d7fdb58fec92",id:"df88a14321b32c667ee47c2fee9eefe4",fill:"#aa0000","fill-opacity":"0.25",stroke:"#aa1111","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[36.547995,45.27029]}},oldPointsMap:[[36.57477,45.24975],[36.57014,45.25114],[36.56774,45.25296],[36.56344,45.25398],[36.55701,45.25725],[36.54971,45.2616],[36.54817,45.26685],[36.54053,45.27259],[36.53718,45.27561],[36.53495,45.28032],[36.52611,45.28491],[36.51907,45.2895],[36.51684,45.29155],[36.52276,45.29125],[36.52628,45.28902],[36.53057,45.28564],[36.53993,45.28207],[36.54799,45.27543],[36.55563,45.26854],[36.56344,45.26196],[36.57915,45.24903],[36.5758,45.24909],[36.57477,45.24975]]},geometry:{type:"Polygon",coordinates:[[[36.57477,45.24975],[36.57014,45.25114],[36.56774,45.25296],[36.56344,45.25398],[36.55701,45.25725],[36.54971,45.2616],[36.54817,45.26685],[36.54053,45.27259],[36.53718,45.27561],[36.53495,45.28032],[36.52611,45.28491],[36.51907,45.2895],[36.51684,45.29155],[36.52276,45.29125],[36.52628,45.28902],[36.53057,45.28564],[36.53993,45.28207],[36.54799,45.27543],[36.55563,45.26854],[36.56344,45.26196],[36.57915,45.24903],[36.5758,45.24909],[36.57477,45.24975]]]}},{type:"Feature",properties:{nearestId:"ead4cec2e800e6e74d25924781fabb15",originalId:"ead4cec2e800e6e74d25924781fabb15",id:"38f935dacd231521a39a2d552261a995",fill:"#aa0000","fill-opacity":"0.10",stroke:"#aa1111","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[29.24043,47.364065]}},oldPointsMap:[[29.94476,46.555],[29.93361,46.58273],[29.94041,46.58927],[29.94789,46.58945],[29.95744,46.60295],[29.95909,46.61787],[29.94811,46.65207],[29.97373,46.69466],[29.96835,46.71996],[29.97447,46.75361],[29.96637,46.75764],[29.9641,46.77542],[29.94311,46.79449],[29.93482,46.80651],[29.96229,46.81884],[29.97826,46.81595],[29.96891,46.83107],[29.94925,46.84196],[29.92549,46.83369],[29.93078,46.82814],[29.90534,46.82013],[29.88407,46.85021],[29.89223,46.85304],[29.8846,46.88616],[29.84722,46.88158],[29.84897,46.87482],[29.7503,46.8603],[29.73189,46.91964],[29.72234,46.91859],[29.7193,46.93173],[29.71011,46.92785],[29.71153,46.92369],[29.70167,46.92317],[29.70142,46.925],[29.64806,46.91975],[29.63948,46.95474],[29.57205,46.94074],[29.5563,46.95821],[29.59599,46.96438],[29.60197,47.0417],[29.62832,47.04497],[29.61204,47.10006],[29.54822,47.09331],[29.54996,47.07566],[29.53042,47.07532],[29.5153,47.11223],[29.50018,47.10925],[29.49432,47.13127],[29.50145,47.12796],[29.5812,47.13549],[29.55106,47.25159],[29.59804,47.25671],[29.57778,47.35985],[29.575,47.36008],[29.57291,47.37054],[29.53167,47.36472],[29.5047,47.36216],[29.487,47.35412],[29.48656,47.34897],[29.49333,47.34778],[29.48774,47.33972],[29.49696,47.33593],[29.49299,47.33298],[29.48318,47.33213],[29.48401,47.31706],[29.48502,47.30525],[29.44482,47.2993],[29.44593,47.29455],[29.42782,47.29212],[29.42395,47.30501],[29.39776,47.30043],[29.38347,47.34418],[29.39727,47.35304],[29.39011,47.37968],[29.36101,47.37473],[29.36139,47.37306],[29.33655,47.36989],[29.31774,47.44838],[29.28721,47.43582],[29.28311,47.43779],[29.27008,47.43417],[29.2545,47.42381],[29.25161,47.41521],[29.24339,47.41462],[29.24205,47.4614],[29.18991,47.42381],[29.1819,47.43783],[29.18659,47.4414],[29.18087,47.45016],[29.19438,47.45985],[29.18843,47.46226],[29.19072,47.46838],[29.16304,47.45305],[29.15784,47.45909],[29.18699,47.47487],[29.18326,47.47851],[29.19188,47.48772],[29.1842,47.49252],[29.18269,47.49663],[29.18393,47.51082],[29.19033,47.51319],[29.18423,47.51838],[29.16965,47.51343],[29.15129,47.50499],[29.11493,47.55434],[29.16475,47.57087],[29.17162,47.5676],[29.18415,47.57153],[29.18716,47.58542],[29.19357,47.59024],[29.19895,47.59112],[29.20261,47.59478],[29.2049,47.60469],[29.21853,47.61239],[29.20866,47.62854],[29.21479,47.62579],[29.22232,47.63194],[29.23362,47.64248],[29.20904,47.64071],[29.20843,47.6581],[29.21948,47.65837],[29.21975,47.68258],[29.23067,47.68414],[29.22235,47.69679],[29.20263,47.71979],[29.21415,47.73978],[29.2499,47.75179],[29.27631,47.80389],[29.24809,47.81059],[29.23258,47.79653],[29.21938,47.79723],[29.19793,47.81822],[29.22716,47.85637],[29.2791,47.8853],[29.27686,47.89051],[29.22833,47.88745],[29.21549,47.89681],[29.21261,47.88591],[29.20081,47.88468],[29.18999,47.93903],[29.18574,47.96492],[29.17943,47.96413],[29.17572,47.99338],[29.12535,47.99345],[29.13141,47.98337],[29.0929,47.9843],[29.08529,47.97696],[29.09794,47.9727],[29.09308,47.96568],[29.0848,47.97154],[29.07577,47.97175],[29.0852,47.94644],[29.05549,47.94181],[29.03917,47.94845],[29.03047,47.94336],[29.01238,47.95622],[29.00047,47.96357],[28.99261,47.96112],[28.98147,47.97139],[28.96278,47.97936],[28.92601,47.96018],[28.87814,48.00058],[28.88819,48.00446],[28.88313,48.01065],[28.83813,48.03491],[28.85282,48.06055],[28.8454,48.06489],[28.85096,48.06936],[28.83967,48.07618],[28.85153,48.07913],[28.85677,48.10881],[28.83455,48.12841],[28.81388,48.12376],[28.80557,48.13468],[28.7918,48.12651],[28.7698,48.12522],[28.75325,48.13728],[28.72152,48.12704],[28.70765,48.12917],[28.68863,48.125],[28.67877,48.14124],[28.68265,48.14649],[28.64707,48.14362],[28.64789,48.1522],[28.62275,48.15652],[28.61202,48.15718],[28.59257,48.17353],[28.58033,48.16722],[28.56944,48.17704],[28.54614,48.16982],[28.52711,48.15418],[28.5026,48.15091],[28.52099,48.13769],[28.53738,48.1249],[28.56956,48.10751],[28.60156,48.0961],[28.62464,48.09317],[28.63723,48.07844],[28.63254,48.06901],[28.62133,48.0644],[28.60379,48.078],[28.59288,48.06178],[28.58609,48.0451],[28.5491,48.03898],[28.53581,48.01976],[28.5297,48.00542],[28.5438,47.99641],[28.5634,47.99291],[28.57931,48.00874],[28.58767,48.02641],[28.59465,48.03604],[28.61331,48.03374],[28.64364,48.02506],[28.69936,48.02601],[28.70549,48.01906],[28.70188,48.00744],[28.7065,47.99859],[28.73516,47.97847],[28.75831,47.97742],[28.7784,47.98665],[28.79232,47.98416],[28.80413,47.95675],[28.8379,47.93945],[28.81846,47.91376],[28.82402,47.90256],[28.83743,47.89781],[28.90781,47.88613],[28.96102,47.87997],[29.00357,47.86872],[29.02154,47.85512],[29.02439,47.83992],[29.01,47.82007],[28.99149,47.79746],[28.9818,47.75913],[28.9773,47.74042],[28.96594,47.72033],[28.99678,47.64996],[28.98866,47.63321],[28.98339,47.62426],[28.98294,47.6153],[29.02475,47.57644],[29.02715,47.55938],[29.01822,47.53536],[29.02459,47.51867],[29.05051,47.50244],[29.08758,47.4876],[29.11707,47.46858],[29.11691,47.45341],[29.09004,47.43723],[29.07658,47.41664],[29.08316,47.4061],[29.13141,47.38061],[29.16382,47.34952],[29.16314,47.33453],[29.12614,47.32604],[29.08981,47.3557],[29.07003,47.35453],[29.09023,47.30308],[29.1384,47.26241],[29.14838,47.2458],[29.1616,47.23237],[29.17001,47.2152],[29.19072,47.21778],[29.21412,47.24168],[29.23926,47.26138],[29.29155,47.26032],[29.30994,47.26599],[29.34345,47.29076],[29.36276,47.28346],[29.33034,47.25653],[29.31435,47.23978],[29.2963,47.23887],[29.28151,47.21235],[29.28505,47.20324],[29.26044,47.19459],[29.25266,47.20018],[29.24487,47.20016],[29.25265,47.18706],[29.24024,47.172],[29.24087,47.16627],[29.29528,47.1388],[29.29061,47.1153],[29.29893,47.10584],[29.31406,47.10207],[29.34017,47.10718],[29.3546,47.09499],[29.3697,47.0669],[29.39255,47.05952],[29.37993,47.04905],[29.38998,47.02781],[29.37266,47.02464],[29.35465,47.03879],[29.37667,47.00553],[29.3781,46.99392],[29.33834,46.99168],[29.30167,47.00043],[29.29247,46.99373],[29.29237,46.98358],[29.31355,46.96172],[29.33266,46.94641],[29.36069,46.93368],[29.37663,46.93311],[29.38982,46.93629],[29.42447,46.96256],[29.4458,46.96282],[29.45614,46.95276],[29.47031,46.94969],[29.47568,46.93995],[29.47555,46.93021],[29.46784,46.90931],[29.46595,46.89663],[29.48192,46.89193],[29.48501,46.88054],[29.48622,46.87109],[29.44897,46.86704],[29.43611,46.87525],[29.42935,46.87372],[29.43764,46.86192],[29.40882,46.85908],[29.39716,46.86306],[29.39442,46.8458],[29.4054,46.83834],[29.40505,46.82381],[29.43003,46.82023],[29.43779,46.80937],[29.44376,46.79961],[29.45376,46.79394],[29.4641,46.79239],[29.47689,46.78211],[29.49625,46.78382],[29.51218,46.78882],[29.5181,46.7832],[29.53809,46.77688],[29.54944,46.7876],[29.58758,46.79878],[29.58174,46.82336],[29.61162,46.83337],[29.59692,46.81896],[29.64794,46.80247],[29.64495,46.81667],[29.66736,46.80572],[29.65035,46.79366],[29.67134,46.7776],[29.66829,46.74978],[29.67449,46.73364],[29.68961,46.72972],[29.69169,46.70684],[29.67127,46.69061],[29.6646,46.67579],[29.69738,46.67461],[29.71984,46.6574],[29.72549,46.66869],[29.7641,46.66772],[29.76373,46.64674],[29.75512,46.63094],[29.74893,46.61302],[29.7242,46.59887],[29.78914,46.57718],[29.79929,46.59581],[29.81012,46.6017],[29.83647,46.58655],[29.86007,46.57988],[29.85825,46.57216],[29.86282,46.56806],[29.90825,46.55109],[29.94476,46.555]]},geometry:{type:"Polygon",coordinates:[[[29.94476,46.555],[29.93361,46.58273],[29.94041,46.58927],[29.94789,46.58945],[29.95744,46.60295],[29.95909,46.61787],[29.94811,46.65207],[29.97373,46.69466],[29.96835,46.71996],[29.97447,46.75361],[29.96637,46.75764],[29.9641,46.77542],[29.94311,46.79449],[29.93482,46.80651],[29.96229,46.81884],[29.97826,46.81595],[29.96891,46.83107],[29.94925,46.84196],[29.92549,46.83369],[29.93078,46.82814],[29.90534,46.82013],[29.88407,46.85021],[29.89223,46.85304],[29.8846,46.88616],[29.84722,46.88158],[29.84897,46.87482],[29.7503,46.8603],[29.73189,46.91964],[29.72234,46.91859],[29.7193,46.93173],[29.71011,46.92785],[29.71153,46.92369],[29.70167,46.92317],[29.70142,46.925],[29.64806,46.91975],[29.63948,46.95474],[29.57205,46.94074],[29.5563,46.95821],[29.59599,46.96438],[29.60197,47.0417],[29.62832,47.04497],[29.61204,47.10006],[29.54822,47.09331],[29.54996,47.07566],[29.53042,47.07532],[29.5153,47.11223],[29.50018,47.10925],[29.49432,47.13127],[29.50145,47.12796],[29.5812,47.13549],[29.55106,47.25159],[29.59804,47.25671],[29.57778,47.35985],[29.575,47.36008],[29.57291,47.37054],[29.53167,47.36472],[29.5047,47.36216],[29.487,47.35412],[29.48656,47.34897],[29.49333,47.34778],[29.48774,47.33972],[29.49696,47.33593],[29.49299,47.33298],[29.48318,47.33213],[29.48401,47.31706],[29.48502,47.30525],[29.44482,47.2993],[29.44593,47.29455],[29.42782,47.29212],[29.42395,47.30501],[29.39776,47.30043],[29.38347,47.34418],[29.39727,47.35304],[29.39011,47.37968],[29.36101,47.37473],[29.36139,47.37306],[29.33655,47.36989],[29.31774,47.44838],[29.28721,47.43582],[29.28311,47.43779],[29.27008,47.43417],[29.2545,47.42381],[29.25161,47.41521],[29.24339,47.41462],[29.24205,47.4614],[29.18991,47.42381],[29.1819,47.43783],[29.18659,47.4414],[29.18087,47.45016],[29.19438,47.45985],[29.18843,47.46226],[29.19072,47.46838],[29.16304,47.45305],[29.15784,47.45909],[29.18699,47.47487],[29.18326,47.47851],[29.19188,47.48772],[29.1842,47.49252],[29.18269,47.49663],[29.18393,47.51082],[29.19033,47.51319],[29.18423,47.51838],[29.16965,47.51343],[29.15129,47.50499],[29.11493,47.55434],[29.16475,47.57087],[29.17162,47.5676],[29.18415,47.57153],[29.18716,47.58542],[29.19357,47.59024],[29.19895,47.59112],[29.20261,47.59478],[29.2049,47.60469],[29.21853,47.61239],[29.20866,47.62854],[29.21479,47.62579],[29.22232,47.63194],[29.23362,47.64248],[29.20904,47.64071],[29.20843,47.6581],[29.21948,47.65837],[29.21975,47.68258],[29.23067,47.68414],[29.22235,47.69679],[29.20263,47.71979],[29.21415,47.73978],[29.2499,47.75179],[29.27631,47.80389],[29.24809,47.81059],[29.23258,47.79653],[29.21938,47.79723],[29.19793,47.81822],[29.22716,47.85637],[29.2791,47.8853],[29.27686,47.89051],[29.22833,47.88745],[29.21549,47.89681],[29.21261,47.88591],[29.20081,47.88468],[29.18999,47.93903],[29.18574,47.96492],[29.17943,47.96413],[29.17572,47.99338],[29.12535,47.99345],[29.13141,47.98337],[29.0929,47.9843],[29.08529,47.97696],[29.09794,47.9727],[29.09308,47.96568],[29.0848,47.97154],[29.07577,47.97175],[29.0852,47.94644],[29.05549,47.94181],[29.03917,47.94845],[29.03047,47.94336],[29.01238,47.95622],[29.00047,47.96357],[28.99261,47.96112],[28.98147,47.97139],[28.96278,47.97936],[28.92601,47.96018],[28.87814,48.00058],[28.88819,48.00446],[28.88313,48.01065],[28.83813,48.03491],[28.85282,48.06055],[28.8454,48.06489],[28.85096,48.06936],[28.83967,48.07618],[28.85153,48.07913],[28.85677,48.10881],[28.83455,48.12841],[28.81388,48.12376],[28.80557,48.13468],[28.7918,48.12651],[28.7698,48.12522],[28.75325,48.13728],[28.72152,48.12704],[28.70765,48.12917],[28.68863,48.125],[28.67877,48.14124],[28.68265,48.14649],[28.64707,48.14362],[28.64789,48.1522],[28.62275,48.15652],[28.61202,48.15718],[28.59257,48.17353],[28.58033,48.16722],[28.56944,48.17704],[28.54614,48.16982],[28.52711,48.15418],[28.5026,48.15091],[28.52099,48.13769],[28.53738,48.1249],[28.56956,48.10751],[28.60156,48.0961],[28.62464,48.09317],[28.63723,48.07844],[28.63254,48.06901],[28.62133,48.0644],[28.60379,48.078],[28.59288,48.06178],[28.58609,48.0451],[28.5491,48.03898],[28.53581,48.01976],[28.5297,48.00542],[28.5438,47.99641],[28.5634,47.99291],[28.57931,48.00874],[28.58767,48.02641],[28.59465,48.03604],[28.61331,48.03374],[28.64364,48.02506],[28.69936,48.02601],[28.70549,48.01906],[28.70188,48.00744],[28.7065,47.99859],[28.73516,47.97847],[28.75831,47.97742],[28.7784,47.98665],[28.79232,47.98416],[28.80413,47.95675],[28.8379,47.93945],[28.81846,47.91376],[28.82402,47.90256],[28.83743,47.89781],[28.90781,47.88613],[28.96102,47.87997],[29.00357,47.86872],[29.02154,47.85512],[29.02439,47.83992],[29.01,47.82007],[28.99149,47.79746],[28.9818,47.75913],[28.9773,47.74042],[28.96594,47.72033],[28.99678,47.64996],[28.98866,47.63321],[28.98339,47.62426],[28.98294,47.6153],[29.02475,47.57644],[29.02715,47.55938],[29.01822,47.53536],[29.02459,47.51867],[29.05051,47.50244],[29.08758,47.4876],[29.11707,47.46858],[29.11691,47.45341],[29.09004,47.43723],[29.07658,47.41664],[29.08316,47.4061],[29.13141,47.38061],[29.16382,47.34952],[29.16314,47.33453],[29.12614,47.32604],[29.08981,47.3557],[29.07003,47.35453],[29.09023,47.30308],[29.1384,47.26241],[29.14838,47.2458],[29.1616,47.23237],[29.17001,47.2152],[29.19072,47.21778],[29.21412,47.24168],[29.23926,47.26138],[29.29155,47.26032],[29.30994,47.26599],[29.34345,47.29076],[29.36276,47.28346],[29.33034,47.25653],[29.31435,47.23978],[29.2963,47.23887],[29.28151,47.21235],[29.28505,47.20324],[29.26044,47.19459],[29.25266,47.20018],[29.24487,47.20016],[29.25265,47.18706],[29.24024,47.172],[29.24087,47.16627],[29.29528,47.1388],[29.29061,47.1153],[29.29893,47.10584],[29.31406,47.10207],[29.34017,47.10718],[29.3546,47.09499],[29.3697,47.0669],[29.39255,47.05952],[29.37993,47.04905],[29.38998,47.02781],[29.37266,47.02464],[29.35465,47.03879],[29.37667,47.00553],[29.3781,46.99392],[29.33834,46.99168],[29.30167,47.00043],[29.29247,46.99373],[29.29237,46.98358],[29.31355,46.96172],[29.33266,46.94641],[29.36069,46.93368],[29.37663,46.93311],[29.38982,46.93629],[29.42447,46.96256],[29.4458,46.96282],[29.45614,46.95276],[29.47031,46.94969],[29.47568,46.93995],[29.47555,46.93021],[29.46784,46.90931],[29.46595,46.89663],[29.48192,46.89193],[29.48501,46.88054],[29.48622,46.87109],[29.44897,46.86704],[29.43611,46.87525],[29.42935,46.87372],[29.43764,46.86192],[29.40882,46.85908],[29.39716,46.86306],[29.39442,46.8458],[29.4054,46.83834],[29.40505,46.82381],[29.43003,46.82023],[29.43779,46.80937],[29.44376,46.79961],[29.45376,46.79394],[29.4641,46.79239],[29.47689,46.78211],[29.49625,46.78382],[29.51218,46.78882],[29.5181,46.7832],[29.53809,46.77688],[29.54944,46.7876],[29.58758,46.79878],[29.58174,46.82336],[29.61162,46.83337],[29.59692,46.81896],[29.64794,46.80247],[29.64495,46.81667],[29.66736,46.80572],[29.65035,46.79366],[29.67134,46.7776],[29.66829,46.74978],[29.67449,46.73364],[29.68961,46.72972],[29.69169,46.70684],[29.67127,46.69061],[29.6646,46.67579],[29.69738,46.67461],[29.71984,46.6574],[29.72549,46.66869],[29.7641,46.66772],[29.76373,46.64674],[29.75512,46.63094],[29.74893,46.61302],[29.7242,46.59887],[29.78914,46.57718],[29.79929,46.59581],[29.81012,46.6017],[29.83647,46.58655],[29.86007,46.57988],[29.85825,46.57216],[29.86282,46.56806],[29.90825,46.55109],[29.94476,46.555]]]}},{type:"Feature",properties:{nearestId:"df50ae2f627f2948055313beeb82235f",originalId:"df50ae2f627f2948055313beeb82235f",id:"ca1d5a686faf17db50980f7710c90c95",fill:"#FF0000","fill-opacity":"0.25",stroke:"#FF0000","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[41.078225,42.998585]}},oldPointsMap:[[42.07145,43.19767],[42.04262,43.18665],[42.03164,43.20217],[42.01378,43.21769],[41.98494,43.21469],[41.95747,43.20367],[41.94271,43.22545],[41.92091,43.22482],[41.90048,43.2312],[41.88606,43.2527],[41.86684,43.2432],[41.84898,43.21318],[41.82975,43.21518],[41.80573,43.20118],[41.78444,43.22069],[41.77517,43.21719],[41.72744,43.2437],[41.70684,43.22319],[41.68488,43.21769],[41.65879,43.23996],[41.6375,43.22132],[41.61759,43.22068],[41.60437,43.22932],[41.58704,43.23494],[41.57707,43.2522],[41.56162,43.25021],[41.54548,43.27121],[41.49778,43.28271],[41.45984,43.3097],[41.44523,43.3037],[41.41708,43.31718],[41.41022,43.35514],[41.38412,43.36712],[41.36696,43.37112],[41.34808,43.35464],[41.32645,43.34316],[41.28799,43.33666],[41.27838,43.35838],[41.25778,43.36313],[41.24354,43.35814],[41.23478,43.37012],[41.21178,43.3801],[41.185,43.38584],[41.1692,43.38459],[41.15513,43.38883],[41.15342,43.40306],[41.12595,43.39932],[41.10398,43.40256],[41.09779,43.38559],[41.06072,43.39258],[41.03292,43.4073],[41.00647,43.43298],[40.98793,43.42899],[40.95738,43.42151],[40.93506,43.426],[40.92613,43.43497],[40.92957,43.44494],[40.89386,43.45791],[40.89936,43.47236],[40.89249,43.4888],[40.85404,43.48631],[40.8149,43.49278],[40.76308,43.51171],[40.74059,43.52565],[40.69405,43.53511],[40.69096,43.54631],[40.66246,43.56199],[40.64409,43.55241],[40.61885,43.54781],[40.60349,43.54202],[40.59499,43.53126],[40.56564,43.51818],[40.52308,43.52142],[40.49905,43.53001],[40.4805,43.54855],[40.4654,43.54606],[40.4345,43.5575],[40.41459,43.55279],[40.37958,43.55802],[40.32739,43.56797],[40.31502,43.57791],[40.29459,43.57232],[40.26043,43.58562],[40.23657,43.58425],[40.21545,43.57492],[40.17288,43.57667],[40.13202,43.56635],[40.09804,43.56497],[40.09237,43.54892],[40.09494,43.52988],[40.06027,43.50076],[40.04722,43.48033],[40.04173,43.4594],[40.01598,43.42974],[40.01049,43.42463],[40.01581,43.42082],[40.00903,43.40408],[40.0074,43.38634],[40.04053,43.37911],[40.07675,43.37511],[40.12413,43.35589],[40.14576,43.34228],[40.21444,43.324],[40.2431,43.31107],[40.25882,43.27637],[40.27279,43.1869],[40.29837,43.16725],[40.32325,43.15009],[40.34489,43.14183],[40.37613,43.16713],[40.42728,43.15335],[40.46798,43.13771],[40.51689,43.13757],[40.54505,43.11828],[40.57594,43.0867],[40.62709,43.09296],[40.64306,43.09847],[40.66418,43.08945],[40.69525,43.08293],[40.75653,43.08469],[40.79172,43.0798],[40.83653,43.07641],[40.86726,43.07039],[40.88287,43.05283],[40.93335,43.00691],[40.94914,42.99146],[40.97385,42.97753],[40.99943,42.99247],[41.01634,42.99316],[41.03325,42.99636],[41.05179,42.98154],[41.0772,42.94385],[41.08887,42.9054],[41.1002,42.84274],[41.14483,42.8017],[41.15685,42.79339],[41.17366,42.78709],[41.21658,42.79968],[41.28353,42.78356],[41.33728,42.76304],[41.37479,42.76158],[41.40782,42.74323],[41.44336,42.72444],[41.46275,42.69505],[41.48987,42.64002],[41.49708,42.61197],[41.50943,42.58114],[41.52455,42.51134],[41.54755,42.41155],[41.5714,42.4208],[41.5932,42.43588],[41.65604,42.43207],[41.6526,42.45208],[41.65638,42.46335],[41.64093,42.47665],[41.65226,42.48286],[41.68282,42.48704],[41.74462,42.51817],[41.81051,42.54626],[41.83937,42.56825],[41.87987,42.60591],[41.90667,42.62335],[41.92434,42.62992],[41.94065,42.6284],[41.95404,42.64154],[41.93894,42.66527],[41.94031,42.68698],[41.93585,42.69468],[41.92315,42.69733],[41.90323,42.73542],[41.95198,42.7455],[41.95679,42.76239],[41.94786,42.77826],[41.90529,42.77222],[41.90084,42.79891],[41.87645,42.84526],[41.8912,42.86766],[41.92536,42.87709],[41.94854,42.88753],[41.93481,42.89684],[41.9046,42.90615],[41.89225,42.94738],[41.90529,42.96195],[41.8974,42.97074],[41.87164,42.98255],[41.86753,42.9936],[41.88986,43.02312],[41.93756,43.02524],[41.99112,43.04681],[42.04193,43.05584],[42.0584,43.08493],[42.08863,43.109],[42.11472,43.14158],[42.12364,43.15936],[42.14768,43.17314],[42.14905,43.18865],[42.13875,43.21569],[42.12639,43.21018],[42.10854,43.20856],[42.0948,43.21193],[42.07867,43.20443],[42.07145,43.19767]]},geometry:{type:"Polygon",coordinates:[[[42.07145,43.19767],[42.04262,43.18665],[42.03164,43.20217],[42.01378,43.21769],[41.98494,43.21469],[41.95747,43.20367],[41.94271,43.22545],[41.92091,43.22482],[41.90048,43.2312],[41.88606,43.2527],[41.86684,43.2432],[41.84898,43.21318],[41.82975,43.21518],[41.80573,43.20118],[41.78444,43.22069],[41.77517,43.21719],[41.72744,43.2437],[41.70684,43.22319],[41.68488,43.21769],[41.65879,43.23996],[41.6375,43.22132],[41.61759,43.22068],[41.60437,43.22932],[41.58704,43.23494],[41.57707,43.2522],[41.56162,43.25021],[41.54548,43.27121],[41.49778,43.28271],[41.45984,43.3097],[41.44523,43.3037],[41.41708,43.31718],[41.41022,43.35514],[41.38412,43.36712],[41.36696,43.37112],[41.34808,43.35464],[41.32645,43.34316],[41.28799,43.33666],[41.27838,43.35838],[41.25778,43.36313],[41.24354,43.35814],[41.23478,43.37012],[41.21178,43.3801],[41.185,43.38584],[41.1692,43.38459],[41.15513,43.38883],[41.15342,43.40306],[41.12595,43.39932],[41.10398,43.40256],[41.09779,43.38559],[41.06072,43.39258],[41.03292,43.4073],[41.00647,43.43298],[40.98793,43.42899],[40.95738,43.42151],[40.93506,43.426],[40.92613,43.43497],[40.92957,43.44494],[40.89386,43.45791],[40.89936,43.47236],[40.89249,43.4888],[40.85404,43.48631],[40.8149,43.49278],[40.76308,43.51171],[40.74059,43.52565],[40.69405,43.53511],[40.69096,43.54631],[40.66246,43.56199],[40.64409,43.55241],[40.61885,43.54781],[40.60349,43.54202],[40.59499,43.53126],[40.56564,43.51818],[40.52308,43.52142],[40.49905,43.53001],[40.4805,43.54855],[40.4654,43.54606],[40.4345,43.5575],[40.41459,43.55279],[40.37958,43.55802],[40.32739,43.56797],[40.31502,43.57791],[40.29459,43.57232],[40.26043,43.58562],[40.23657,43.58425],[40.21545,43.57492],[40.17288,43.57667],[40.13202,43.56635],[40.09804,43.56497],[40.09237,43.54892],[40.09494,43.52988],[40.06027,43.50076],[40.04722,43.48033],[40.04173,43.4594],[40.01598,43.42974],[40.01049,43.42463],[40.01581,43.42082],[40.00903,43.40408],[40.0074,43.38634],[40.04053,43.37911],[40.07675,43.37511],[40.12413,43.35589],[40.14576,43.34228],[40.21444,43.324],[40.2431,43.31107],[40.25882,43.27637],[40.27279,43.1869],[40.29837,43.16725],[40.32325,43.15009],[40.34489,43.14183],[40.37613,43.16713],[40.42728,43.15335],[40.46798,43.13771],[40.51689,43.13757],[40.54505,43.11828],[40.57594,43.0867],[40.62709,43.09296],[40.64306,43.09847],[40.66418,43.08945],[40.69525,43.08293],[40.75653,43.08469],[40.79172,43.0798],[40.83653,43.07641],[40.86726,43.07039],[40.88287,43.05283],[40.93335,43.00691],[40.94914,42.99146],[40.97385,42.97753],[40.99943,42.99247],[41.01634,42.99316],[41.03325,42.99636],[41.05179,42.98154],[41.0772,42.94385],[41.08887,42.9054],[41.1002,42.84274],[41.14483,42.8017],[41.15685,42.79339],[41.17366,42.78709],[41.21658,42.79968],[41.28353,42.78356],[41.33728,42.76304],[41.37479,42.76158],[41.40782,42.74323],[41.44336,42.72444],[41.46275,42.69505],[41.48987,42.64002],[41.49708,42.61197],[41.50943,42.58114],[41.52455,42.51134],[41.54755,42.41155],[41.5714,42.4208],[41.5932,42.43588],[41.65604,42.43207],[41.6526,42.45208],[41.65638,42.46335],[41.64093,42.47665],[41.65226,42.48286],[41.68282,42.48704],[41.74462,42.51817],[41.81051,42.54626],[41.83937,42.56825],[41.87987,42.60591],[41.90667,42.62335],[41.92434,42.62992],[41.94065,42.6284],[41.95404,42.64154],[41.93894,42.66527],[41.94031,42.68698],[41.93585,42.69468],[41.92315,42.69733],[41.90323,42.73542],[41.95198,42.7455],[41.95679,42.76239],[41.94786,42.77826],[41.90529,42.77222],[41.90084,42.79891],[41.87645,42.84526],[41.8912,42.86766],[41.92536,42.87709],[41.94854,42.88753],[41.93481,42.89684],[41.9046,42.90615],[41.89225,42.94738],[41.90529,42.96195],[41.8974,42.97074],[41.87164,42.98255],[41.86753,42.9936],[41.88986,43.02312],[41.93756,43.02524],[41.99112,43.04681],[42.04193,43.05584],[42.0584,43.08493],[42.08863,43.109],[42.11472,43.14158],[42.12364,43.15936],[42.14768,43.17314],[42.14905,43.18865],[42.13875,43.21569],[42.12639,43.21018],[42.10854,43.20856],[42.0948,43.21193],[42.07867,43.20443],[42.07145,43.19767]]]}},{type:"Feature",properties:{nearestId:"0da10edf6ef2f0e9e0086cc722e040b0",originalId:"0da10edf6ef2f0e9e0086cc722e040b0",id:"9ff00285716a233cab5512a0aef82ff5",fill:"#aa0000","fill-opacity":"0.00",stroke:"#aa1111","stroke-width":"2.00",center:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[21.23537,54.805035]}},oldPointsMap:[[19.58313,54.46365],[20.35217,54.39815],[20.75592,54.36776],[21.27228,54.32934],[21.44676,54.31531],[21.89575,54.33254],[22.71423,54.35816],[22.78976,54.36456],[22.74651,54.42173],[22.73691,54.44267],[22.70327,54.45282],[22.69845,54.48333],[22.69227,54.51444],[22.68407,54.51939],[22.68205,54.52712],[22.68055,54.53536],[22.68728,54.5404],[22.69981,54.55401],[22.71355,54.5641],[22.70247,54.56912],[22.7017,54.57653],[22.6841,54.58146],[22.68711,54.59115],[22.70332,54.6014],[22.71955,54.60608],[22.72556,54.62139],[22.74479,54.62715],[22.74204,54.64443],[22.75715,54.65218],[22.72968,54.66867],[22.73985,54.67015],[22.73724,54.67975],[22.73051,54.68022],[22.72941,54.69347],[22.74769,54.70676],[22.73851,54.726],[22.76568,54.7377],[22.77569,54.75138],[22.80569,54.74852],[22.81451,54.7657],[22.83509,54.77013],[22.85912,54.77693],[22.84915,54.78503],[22.87919,54.79008],[22.8749,54.80303],[22.88761,54.81233],[22.87834,54.82953],[22.85998,54.83913],[22.87002,54.85301],[22.86358,54.85742],[22.83972,54.86464],[22.855,54.88964],[22.82841,54.90662],[22.82236,54.912],[22.80876,54.91027],[22.80031,54.90322],[22.78911,54.90879],[22.79008,54.92088],[22.77903,54.92546],[22.7594,54.91762],[22.74937,54.92438],[22.76421,54.9376],[22.74307,54.94036],[22.70945,54.97338],[22.6715,54.98939],[22.64385,54.96993],[22.62672,55.00221],[22.59513,55.03174],[22.59098,55.07109],[22.47131,55.04488],[22.40112,55.05242],[22.28783,55.06347],[22.19513,55.05714],[22.13433,55.04663],[22.09829,55.02352],[22.04132,55.03707],[22.04063,55.08269],[21.98759,55.0883],[21.96613,55.07504],[21.91772,55.08151],[21.85046,55.09979],[21.80649,55.12119],[21.76872,55.12355],[21.71826,55.13532],[21.71448,55.1518],[21.65405,55.17259],[21.58266,55.20318],[21.55998,55.19964],[21.49338,55.19337],[21.44605,55.2249],[21.43334,55.24985],[21.4105,55.27544],[21.38145,55.29476],[21.33211,55.27463],[21.29381,55.25135],[21.20705,55.24958],[20.93075,55.28488],[20.72573,55.10753],[20.46478,54.98628],[20.36658,54.95322],[20.25467,54.9784],[20.03357,54.9516],[20.00336,54.97446],[19.91269,54.91521],[19.93343,54.80814],[19.91296,54.70899],[19.62158,54.49397],[19.58313,54.46365]]},geometry:{type:"Polygon",coordinates:[[[19.58313,54.46365],[20.35217,54.39815],[20.75592,54.36776],[21.27228,54.32934],[21.44676,54.31531],[21.89575,54.33254],[22.71423,54.35816],[22.78976,54.36456],[22.74651,54.42173],[22.73691,54.44267],[22.70327,54.45282],[22.69845,54.48333],[22.69227,54.51444],[22.68407,54.51939],[22.68205,54.52712],[22.68055,54.53536],[22.68728,54.5404],[22.69981,54.55401],[22.71355,54.5641],[22.70247,54.56912],[22.7017,54.57653],[22.6841,54.58146],[22.68711,54.59115],[22.70332,54.6014],[22.71955,54.60608],[22.72556,54.62139],[22.74479,54.62715],[22.74204,54.64443],[22.75715,54.65218],[22.72968,54.66867],[22.73985,54.67015],[22.73724,54.67975],[22.73051,54.68022],[22.72941,54.69347],[22.74769,54.70676],[22.73851,54.726],[22.76568,54.7377],[22.77569,54.75138],[22.80569,54.74852],[22.81451,54.7657],[22.83509,54.77013],[22.85912,54.77693],[22.84915,54.78503],[22.87919,54.79008],[22.8749,54.80303],[22.88761,54.81233],[22.87834,54.82953],[22.85998,54.83913],[22.87002,54.85301],[22.86358,54.85742],[22.83972,54.86464],[22.855,54.88964],[22.82841,54.90662],[22.82236,54.912],[22.80876,54.91027],[22.80031,54.90322],[22.78911,54.90879],[22.79008,54.92088],[22.77903,54.92546],[22.7594,54.91762],[22.74937,54.92438],[22.76421,54.9376],[22.74307,54.94036],[22.70945,54.97338],[22.6715,54.98939],[22.64385,54.96993],[22.62672,55.00221],[22.59513,55.03174],[22.59098,55.07109],[22.47131,55.04488],[22.40112,55.05242],[22.28783,55.06347],[22.19513,55.05714],[22.13433,55.04663],[22.09829,55.02352],[22.04132,55.03707],[22.04063,55.08269],[21.98759,55.0883],[21.96613,55.07504],[21.91772,55.08151],[21.85046,55.09979],[21.80649,55.12119],[21.76872,55.12355],[21.71826,55.13532],[21.71448,55.1518],[21.65405,55.17259],[21.58266,55.20318],[21.55998,55.19964],[21.49338,55.19337],[21.44605,55.2249],[21.43334,55.24985],[21.4105,55.27544],[21.38145,55.29476],[21.33211,55.27463],[21.29381,55.25135],[21.20705,55.24958],[20.93075,55.28488],[20.72573,55.10753],[20.46478,54.98628],[20.36658,54.95322],[20.25467,54.9784],[20.03357,54.9516],[20.00336,54.97446],[19.91269,54.91521],[19.93343,54.80814],[19.91296,54.70899],[19.62158,54.49397],[19.58313,54.46365]]]}}]};x((function(t,e){!function(t){function e(t){return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&ne.indexOf(t)>=0}function i(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function r(t){return t>=48&&t<=57}function n(t){return t>=48&&t<=57||43===t||45===t||46===t}function o(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function s(t){for(;t.index<t.max&&e(t.path.charCodeAt(t.index));)t.index++}function a(t){var e,i=t.index,n=i,o=t.max,s=!1,a=!1,l=!1,c=!1;if(n>=o)t.err="SvgPath: missed param (at pos "+n+")";else if(43!==(e=t.path.charCodeAt(n))&&45!==e||(e=++n<o?t.path.charCodeAt(n):0),r(e)||46===e){if(46!==e){if(s=48===e,e=++n<o?t.path.charCodeAt(n):0,s&&n<o&&e&&r(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+i+")");for(;n<o&&r(t.path.charCodeAt(n));)n++,a=!0;e=n<o?t.path.charCodeAt(n):0}if(46===e){for(c=!0,n++;r(t.path.charCodeAt(n));)n++,l=!0;e=n<o?t.path.charCodeAt(n):0}if(101===e||69===e){if(c&&!a&&!l)return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(e=++n<o?t.path.charCodeAt(n):0)&&45!==e||n++,!(n<o&&r(t.path.charCodeAt(n))))return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<o&&r(t.path.charCodeAt(n));)n++}t.index=n,t.param=parseFloat(t.path.slice(i,n))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function l(t){var e,i;i=(e=t.path[t.segmentStart]).toLowerCase();var r=t.data;if("m"===i&&r.length>2&&(t.result.push([e,r[0],r[1]]),r=r.slice(2),i="l",e="m"===e?"l":"L"),"r"===i)t.result.push([e].concat(r));else for(;r.length>=re[i]&&(t.result.push([e].concat(r.splice(0,re[i]))),re[i]););}function c(t){var e,r,o,c=t.max;if(t.segmentStart=t.index,i(t.path.charCodeAt(t.index)))if(r=re[t.path[t.index].toLowerCase()],t.index++,s(t),t.data=[],r){for(e=!1;;){for(o=r;o>0;o--){if(a(t),t.err.length)return;t.data.push(t.param),s(t),e=!1,t.index<c&&44===t.path.charCodeAt(t.index)&&(t.index++,s(t),e=!0)}if(!e){if(t.index>=t.max)break;if(!n(t.path.charCodeAt(t.index)))break}}l(t)}else l(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}function u(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}function h(){if(!(this instanceof h))return new h;this.queue=[],this.cache=null}function p(t,e,i,r){var n=t*r-e*i<0?-1:1,o=(t*i+e*r)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return o>1&&(o=1),o<-1&&(o=-1),n*Math.acos(o)}function d(t,e,i,r,n,o,s,a,l,c){var u=c*(t-i)/2+l*(e-r)/2,h=-l*(t-i)/2+c*(e-r)/2,d=s*s,f=a*a,m=u*u,g=h*h,y=d*f-d*g-f*m;y<0&&(y=0),y/=d*g+f*m;var _=(y=Math.sqrt(y)*(n===o?-1:1))*s/a*h,x=y*-a/s*u,v=c*_-l*x+(t+i)/2,b=l*_+c*x+(e+r)/2,w=(u-_)/s,S=(h-x)/a,I=(-u-_)/s,T=(-h-x)/a,E=p(1,0,w,S),A=p(w,S,I,T);return 0===o&&A>0&&(A-=he),1===o&&A<0&&(A+=he),[v,b,E,A]}function f(t,e){var i=4/3*Math.tan(e/4),r=Math.cos(t),n=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[r,n,r-n*i,n+r*i,o+s*i,s-o*i,o,s]}function m(t,e,i){if(!(this instanceof m))return new m(t,e,i);this.rx=t,this.ry=e,this.ax=i}function g(t){if(!(this instanceof g))return new g(t);var e=oe(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}function y(t){var e=t.match(xe);return e?e.map(Number):[]}function _(t,e,i,r,n,o,s,a){this.a={x:t,y:e},this.b={x:i,y:r},this.c={x:n,y:o},this.d={x:s,y:a},null!=s&&null!=a?(this.getArcLength=M,this.getPoint=S,this.getDerivative=v):(this.getArcLength=I,this.getPoint=w,this.getDerivative=x),this.init()}function x(t,e,i){return{x:2*(1-i)*(t[1]-t[0])+2*i*(t[2]-t[1]),y:2*(1-i)*(e[1]-e[0])+2*i*(e[2]-e[1])}}function v(t,e,i){return w([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],i)}function b(t,e,i,r,n){for(var o=1,s=t/e,a=(t-i(r,n,s))/e;o>.001;){var l=i(r,n,s+a),c=i(r,n,s-a),u=Math.abs(t-l)/e,h=Math.abs(t-c)/e;u<o?(o=u,s+=a):h<o?(o=h,s-=a):a/=2}return s}function w(t,e,i){return{x:(1-i)*(1-i)*t[0]+2*(1-i)*i*t[1]+i*i*t[2],y:(1-i)*(1-i)*e[0]+2*(1-i)*i*e[1]+i*i*e[2]}}function S(t,e,i){return{x:(1-i)*(1-i)*(1-i)*t[0]+3*(1-i)*(1-i)*i*t[1]+3*(1-i)*i*i*t[2]+i*i*i*t[3],y:(1-i)*(1-i)*(1-i)*e[0]+3*(1-i)*(1-i)*i*e[1]+3*(1-i)*i*i*e[2]+i*i*i*e[3]}}function I(t,e,i){void 0===i&&(i=1);var r=t[0]-2*t[1]+t[2],n=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(r*r+n*n),l=4*(r*o+n*s),c=o*o+s*s;if(0===a)return i*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var u=l/(2*a),h=i+u,p=c/a-u*u;return Math.sqrt(a)/2*(h*Math.sqrt(h*h+p)-u*Math.sqrt(u*u+p)+p*Math.log(Math.abs((h+Math.sqrt(h*h+p))/(u+Math.sqrt(u*u+p)))))}function T(t,e){return Se[t][e]}function E(t,e,i){var r,n,o,s=i.length-1;if(0===s)return 0;if(0===t){for(n=0,o=0;o<=s;o++)n+=T(s,o)*Math.pow(1-e,s-o)*Math.pow(e,o)*i[o];return n}for(r=new Array(s),o=0;o<s;o++)r[o]=s*(i[o+1]-i[o]);return E(t-1,e,r)}function A(t,e,i){var r=E(1,i,t),n=E(1,i,e),o=r*r+n*n;return Math.sqrt(o)}function M(t,e,i){var r,n,o,s;for(void 0===i&&(i=1),r=i/2,n=0,o=0;o<20;o++)s=r*be[20][o]+r,n+=we[20][o]*A(t,e,s);return r*n}function P(t,e,i,r){var n=t*i+e*r;return n>1&&(n=1),n<-1&&(n=-1),(t*r-e*i<0?-1:1)*Math.acos(n)}function z(t,e,i,r,n,o,s,a,l,c){var u=c*(t-i)/2+l*(e-r)/2,h=-l*(t-i)/2+c*(e-r)/2,p=s*s,d=a*a,f=u*u,m=h*h,g=p*d-p*m-d*f;g<0&&(g=0),g/=p*m+d*f;var y=(g=Math.sqrt(g)*(n===o?-1:1))*s/a*h,_=g*-a/s*u,x=c*y-l*_+(t+i)/2,v=l*y+c*_+(e+r)/2,b=(u-y)/s,w=(h-_)/a,S=(-u-y)/s,I=(-h-_)/a,T=P(1,0,b,w),E=P(b,w,S,I);return 0===o&&E>0&&(E-=Ie),1===o&&E<0&&(E+=Ie),[x,v,T,E]}function k(t,e){var i=4/3*Math.tan(e/4),r=Math.cos(t),n=Math.sin(t),o=Math.cos(t+e),s=Math.sin(t+e);return[r,n,r-n*i,n+r*i,o+s*i,s-o*i,o,s]}function C(t,e,i,r,n,o,s,a,l){var c=0,u=[],h=[];Te(t,e,i,r,n,o,s,a,l).forEach((function(t){var e=new ve(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),i=e.getTotalLength();c+=i,u.push(i),h.push(e)})),this.length=c,this.partialLengths=u,this.curves=h}function L(t,e,i,r){this.x0=t,this.x1=e,this.y0=i,this.y1=r}function D(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function B(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function F(t,e){return D(t,e)<1e-9}function R(t,e,i){var r=t.map((function(t,i){return O(t,e[i])}));return function(t){var e=r.map((function(e){return e(t)}));return i?G(e):e}}function O(t,e){return function(i){return t.map((function(t,r){return t+i*(e[r]-t)}))}}function U(t){return"number"==typeof t&&isFinite(t)}function V(t){return N(t)?ee(t):[(t[0][0]+t[t.length-1][0])/2,(t[0][1]+t[t.length-1][1])/2]}function N(t){for(var e=0;e<t.length-2;e++){var i=t[e],r=t[e+1],n=t[e+2];if(i[0]*(r[1]-n[1])+r[0]*(n[1]-i[1])+n[0]*(i[1]-r[1]))return!0}return!1}function $(t){return new me(t).abs()}function q(t){return t.toString().split("M").map((function(t,e){return t=t.trim(),e&&t?"M"+t:t})).filter((function(t){return t}))}function G(t){return"M"+t.join("L")+"Z"}function Z(t){return q($(t))}function j(t,e){var i=$(t);return X(i)||W(i,e)}function X(t){var e=t.segments||[],i=[];if(!e.length||"M"!==e[0][0])return!1;for(var r=0;r<e.length;r++){var n=e[r],o=n[0],s=n[1],a=n[2];if("M"===o&&r||"Z"===o)break;if("M"===o||"L"===o)i.push([s,a]);else if("H"===o)i.push([s,i[i.length-1][1]]);else{if("V"!==o)return!1;i.push([i[i.length-1][0],s])}}return!!i.length&&{ring:i}}function W(t,e){var i,r,n=q(t)[0],o=[],s=3;if(!n)throw new TypeError(Pe);i=(r=H(n)).getTotalLength(),e&&U(e)&&e>0&&(s=Math.max(s,Math.ceil(i/e)));for(var a=0;a<s;a++){var l=r.getPointAtLength(i*a/s);o.push([l.x,l.y])}return{ring:o,skipBisect:!0}}function H(t){if("undefined"!=typeof window&&window&&window.document)try{var e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return Me(t)}function Y(t,e){for(var i=t.length+e,r=ie(t)/e,n=0,o=0,s=r/2;t.length<i;){var a=t[n],l=t[(n+1)%t.length],c=D(a,l);s<=o+c?(t.splice(n+1,0,c?B(a,l,(s-o)/c):a.slice(0)),s+=r):(o+=c,n++)}}function K(t,e){void 0===e&&(e=1/0);for(var i=0;i<t.length;i++)for(var r=t[i],n=i===t.length-1?t[0]:t[i+1];D(r,n)>e;)n=B(r,n,.5),t.splice(i+1,0,n)}function J(t,e){var i,r;if("string"==typeof t){var n=j(t,e);t=n.ring,r=n.skipBisect}else if(!Array.isArray(t))throw new TypeError(Pe);if(!Q(i=t.slice(0)))throw new TypeError(Pe);return i.length>1&&F(i[0],i[i.length-1])&&i.pop(),te(i)>0&&i.reverse(),!r&&e&&U(e)&&e>0&&K(i,e),i}function Q(t){return t.every((function(t){return Array.isArray(t)&&t.length>=2&&U(t[0])&&U(t[1])}))}function tt(t,e,i){var r;return Y(t,(r=t.length-e.length)<0?-1*r:0),Y(e,r>0?r:0),ke(t,e),R(t,e,i)}function et(t,e,i){i=i||2;var r,n,o,s,a,l,c,u=e&&e.length,h=u?e[0]*i:t.length,p=it(t,0,h,i,!0),d=[];if(!p)return d;if(u&&(p=ct(t,e,p,i)),t.length>80*i){r=o=t[0],n=s=t[1];for(var f=i;f<h;f+=i)(a=t[f])<r&&(r=a),(l=t[f+1])<n&&(n=l),a>o&&(o=a),l>s&&(s=l);c=Math.max(o-r,s-n)}return nt(p,d,i,r,n,c),d}function it(t,e,i,r,n){var o,s;if(n===Pt(t,e,i,r)>0)for(o=e;o<i;o+=r)s=Et(o,t[o],t[o+1],s);else for(o=i-r;o>=e;o-=r)s=Et(o,t[o],t[o+1],s);return s&&vt(s,s.next)&&(At(s),s=s.next),s}function rt(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!vt(r,r.next)&&0!==xt(r.prev,r,r.next))r=r.next;else{if(At(r),(r=e=r.prev)===r.next)return null;i=!0}}while(i||r!==e);return e}function nt(t,e,i,r,n,o,s){if(t){!s&&o&&dt(t,r,n,o);for(var a,l,c=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?st(t,r,n,o):ot(t))e.push(a.i/i),e.push(t.i/i),e.push(l.i/i),At(t),t=l.next,c=l.next;else if((t=l)===c){s?1===s?nt(t=at(t,e,i),e,i,r,n,o,2):2===s&&lt(t,e,i,r,n,o):nt(rt(t),e,i,r,n,o,1);break}}}function ot(t){var e=t.prev,i=t,r=t.next;if(xt(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(yt(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&xt(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function st(t,e,i,r){var n=t.prev,o=t,s=t.next;if(xt(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,l=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,c=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,u=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,h=mt(a,l,e,i,r),p=mt(c,u,e,i,r),d=t.nextZ;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&yt(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&xt(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&yt(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&xt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function at(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!vt(n,o)&&bt(n,r,r.next,o)&&St(n,o)&&St(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),At(r),At(r.next),r=t=o),r=r.next}while(r!==t);return r}function lt(t,e,i,r,n,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&_t(s,a)){var l=Tt(s,a);return s=rt(s,s.next),l=rt(l,l.next),nt(s,e,i,r,n,o),void nt(l,e,i,r,n,o)}a=a.next}s=s.next}while(s!==t)}function ct(t,e,i,r){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=it(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(gt(s));for(a.sort(ut),n=0;n<a.length;n++)ht(a[n],i),i=rt(i,i.next);return i}function ut(t,e){return t.x-e.x}function ht(t,e){if(e=pt(t,e)){var i=Tt(e,t);rt(i,i.next)}}function pt(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i.prev;var l,c=i,u=i.x,h=i.y,p=1/0;for(r=i.next;r!==c;)n>=r.x&&r.x>=u&&yt(o<h?n:s,o,u,h,o<h?s:n,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(n-r.x))<p||l===p&&r.x>i.x)&&St(r,t)&&(i=r,p=l),r=r.next;return i}function dt(t,e,i,r){var n=t;do{null===n.z&&(n.z=mt(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,ft(n)}function ft(t){var e,i,r,n,o,s,a,l,c=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0===a?(n=r,r=r.nextZ,l--):0!==l&&r?i.z<=r.z?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,l--):(n=i,i=i.nextZ,a--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,c*=2}while(s>1);return t}function mt(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function gt(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function yt(t,e,i,r,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function _t(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!wt(t,e)&&St(t,e)&&St(e,t)&&It(t,e)}function xt(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function vt(t,e){return t.x===e.x&&t.y===e.y}function bt(t,e,i,r){return!!(vt(t,e)&&vt(i,r)||vt(t,r)&&vt(i,e))||xt(t,e,i)>0!=xt(t,e,r)>0&&xt(i,r,t)>0!=xt(i,r,e)>0}function wt(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&bt(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function St(t,e){return xt(t.prev,t,t.next)<0?xt(t,e,t.next)>=0&&xt(t,t.prev,e)>=0:xt(t,e,t.prev)<0||xt(t,t.next,e)<0}function It(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}function Tt(t,e){var i=new Mt(t.i,t.x,t.y),r=new Mt(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Et(t,e,i,r){var n=new Mt(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function At(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Mt(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pt(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}function zt(t,e){var i=e.id,r=e.bbox,n=null==e.properties?{}:e.properties,o=kt(t,e);return null==i&&null==r?{type:"Feature",properties:n,geometry:o}:null==r?{type:"Feature",id:i,properties:n,geometry:o}:{type:"Feature",id:i,bbox:r,properties:n,geometry:o}}function kt(t,e){function i(t,e){e.length&&e.pop();for(var i=c[t<0?~t:t],r=0,n=i.length;r<n;++r)e.push(l(i[r],r));t<0&&Fe(e,n)}function r(t){return l(t)}function n(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=n(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}function a(t){var e,i=t.type;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(a)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=n(t.arcs);break;case"MultiLineString":e=t.arcs.map(n);break;case"Polygon":e=s(t.arcs);break;case"MultiPolygon":e=t.arcs.map(s);break;default:return null}return{type:i,coordinates:e}}var l=Be(t.transform),c=t.arcs;return a(e)}function Ct(t){for(var e,i=-1,r=t.length,n=t[r-1],o=0;++i<r;)e=n,n=t[i],o+=e[0]*n[1]-e[1]*n[0];return Math.abs(o)}function Lt(t,e){function i(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(i);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach((function(e){e.forEach((function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)}))})),s.push(t)}function n(e){return Ct(kt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},s=[],a=[];return e.forEach(i),s.forEach((function(t){if(!t._){var e=[],i=[t];for(t._=1,a.push(e);t=i.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].forEach((function(t){t._||(t._=1,i.push(t))}))}))}))}})),s.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:a.map((function(e){var i,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].length<2&&r.push(t)}))}))})),(i=(r=Oe(t,r)).length)>1)for(var s,a,l=1,c=n(r[0]);l<i;++l)(s=n(r[l]))>c&&(a=r[0],r[0]=r[l],r[l]=a,c=s);return r}))}}function Dt(t){return function(e,i){return Ne(t(e),i)}}function Bt(t,e){var i={},r={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return t.forEach((function(t){var n=[];t.forEach((function(t,o){var s=t[0]<t[1]?t.join(","):t[1]+","+t[0],a=t.map((function(t){return e[t]}));s in i?n.push(~i[s]):(n.push(i[s]=r.arcs.length),r.arcs.push(a))})),r.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(te(t.map((function(t){return e[t[0]]})))),arcs:[n]})})),r.objects.triangles.geometries.sort((function(t,e){return t.area-e.area})),r}function Ft(t,e){for(var i=t.objects.triangles.geometries,r=$e((function(t){return t.area})).left;i.length>e;)!function(){var e=i[0],n=Ve(i)[0][0],o=i[n],s=Lt(t,[e,o]);s.area=e.area+o.area,s.type="Polygon",s.arcs=s.arcs[0],i.splice(n,1),i.shift(),i.splice(r(i,s.area),0,s)}();if(e>i.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");return Re(t,t.objects.triangles).features.map((function(t){return t.geometry.coordinates[0].pop(),t.geometry.coordinates[0]}))}function Rt(t){for(var e=Le(t.reduce((function(t,e){return t.concat([e[0]],[e[1]])}),[])),i=[],r=0,n=e.length;r<n;r+=3)i.push([[e[r],e[r+1]],[e[r+1],e[r+2]],[e[r+2],e[r]]]);return i}function Ot(t,e,i){function r(t,e,s){void 0===e&&(e=[]),void 0===s&&(s=0);for(var a=0;a<t.length;a++){var l=t.splice(a,1),c=i[l[0]][e.length];s+c<n&&(t.length?r(t.slice(),e.concat(l),s+c):(n=s+c,o=e.concat(l))),t.length&&t.splice(a,0,l[0])}}var n=1/0,o=t.map((function(t,e){return e}));return r(o),o}function Ut(t,e){var i=D(V(t),V(e));return i*i}function Vt(t,e,i){void 0===i&&(i={});var r=i.maxSegmentLength;void 0===r&&(r=10);var n=i.string;void 0===n&&(n=!0);var o=i.single;void 0===o&&(o=!1);var s=J(t,r);s.length<e.length+2&&Y(s,e.length+2-s.length);var a,l=qe(s,e.length),c=e.map((function(t){return J(t,r)})),u="string"==typeof t&&t;return o&&!e.every((function(t){return"string"==typeof t}))||(a=e.slice(0)),qt(l,c,{match:!0,string:n,single:o,t0:u,t1:a})}function Nt(t,e,i){void 0===i&&(i={});var r=i.maxSegmentLength;void 0===r&&(r=10);var n=i.string;void 0===n&&(n=!0);var o=i.single;void 0===o&&(o=!1);var s=Vt(e,t,{maxSegmentLength:r,string:n,single:o});return o?function(t){return s(1-t)}:s.map((function(t){return function(e){return t(1-e)}}))}function $t(t,e,i){void 0===i&&(i={});var r=i.maxSegmentLength;void 0===r&&(r=10);var n=i.string;void 0===n&&(n=!0);var o=i.single;if(void 0===o&&(o=!1),!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length||!t.length)throw new TypeError(ze);var s,a,l=function(t){return J(t,r)},c=t.map(l),u=e.map(l);return o?(t.every((function(t){return"string"==typeof t}))&&(s=t.slice(0)),e.every((function(t){return"string"==typeof t}))&&(a=e.slice(0))):(s=t.slice(0),a=e.slice(0)),qt(c,u,{string:n,single:o,t0:s,t1:a,match:!1})}function qt(t,e,i){void 0===i&&(i={});var r=i.string,n=i.single,o=i.t0,s=i.t1,a=i.match,l=a?Ge(t,e):t.map((function(t,e){return e})),c=l.map((function(i,n){return tt(t[i],e[n],r)}));if(a&&Array.isArray(o)&&(o=l.map((function(t){return o[t]}))),n&&r&&(Array.isArray(o)&&(o=o.join(" ")),Array.isArray(s)&&(s=s.join(" "))),n){var u=r?function(t){return c.map((function(e){return e(t)})).join(" ")}:function(t){return c.map((function(e){return e(t)}))};return r&&(o||s)?function(t){return t<1e-4&&o||1-t<1e-4&&s||u(t)}:u}return r?(o=Array.isArray(o)?o.map((function(t){return"string"==typeof t&&t})):[],s=Array.isArray(s)?s.map((function(t){return"string"==typeof t&&t})):[],c.map((function(t,e){return o[e]||s[e]?function(i){return i<1e-4&&o[e]||1-i<1e-4&&s[e]||t(i)}:t}))):c}function Gt(t,e,i,r,n){return Wt(Ht(t,e,i),r,Jt(t,e,i),2*Math.PI*i,n)}function Zt(t,e,i,r,n){var o=Gt(e,i,r,t,n);return function(t){return o(1-t)}}function jt(t,e,i,r,n,o){return Wt(Yt(t,e,i,r),n,Qt(t,e,i,r),2*i+2*r,o)}function Xt(t,e,i,r,n,o){var s=jt(e,i,r,n,t,o);return function(t){return s(1-t)}}function Wt(t,e,i,r,n){void 0===n&&(n={});var o=n.maxSegmentLength;void 0===o&&(o=10);var s=n.string;void 0===s&&(s=!0);var a,l,c=J(e,o);return U(r)&&c.length<r/o&&Y(c,Math.ceil(r/o-c.length)),a=t(c),l=R(a,c,s),s?function(t){return t<1e-4?i:l(t)}:l}function Ht(t,e,i){return function(r){var n=V(r),o=ie(r.concat([r[0]])),s=Math.atan2(r[0][1]-n[1],r[0][0]-n[0]),a=0;return r.map((function(n,l){var c;return l&&(a+=D(n,r[l-1])),c=s+2*Math.PI*(o?a/o:l/r.length),[Math.cos(c)*i+t,Math.sin(c)*i+e]}))}}function Yt(t,e,i,r){return function(n){var o=V(n),s=ie(n.concat([n[0]])),a=Math.atan2(n[0][1]-o[1],n[0][0]-o[0]),l=0;a<0&&(a=2*Math.PI+a);var c=a/(2*Math.PI);return n.map((function(o,a){a&&(l+=D(o,n[a-1]));var u=Kt((c+(s?l/s:a/n.length))%1);return[t+u[0]*i,e+u[1]*r]}))}}function Kt(t){return t<=1/8?[1,.5+4*t]:t<=3/8?[1.5-4*t,1]:t<=5/8?[0,2.5-4*t]:t<=7/8?[4*t-2.5,0]:[1,4*t-3.5]}function Jt(t,e,i){var r=t-i+","+e,n="A"+i+","+i+",0,1,1,";return"M"+r+n+(t+i)+","+e+n+r+"Z"}function Qt(t,e,i,r){var n=t+i,o=e+r;return"M"+t+","+e+"L"+n+","+e+"L"+n+","+o+"L"+t+","+o+"Z"}var te=function(t){for(var e,i=-1,r=t.length,n=t[r-1],o=0;++i<r;)e=n,n=t[i],o+=e[1]*n[0]-e[0]*n[1];return o/2},ee=function(t){for(var e,i,r=-1,n=t.length,o=0,s=0,a=t[n-1],l=0;++r<n;)e=a,a=t[r],l+=i=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*i,s+=(e[1]+a[1])*i;return[o/(l*=3),s/l]},ie=function(t){for(var e,i,r=-1,n=t.length,o=t[n-1],s=o[0],a=o[1],l=0;++r<n;)e=s,i=a,e-=s=(o=t[r])[0],i-=a=o[1],l+=Math.sqrt(e*e+i*i);return l},re={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},ne=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],oe=function(t){var e=new o(t),i=e.max;for(s(e);e.index<i&&!e.err.length;)c(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}};h.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},h.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},h.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},h.prototype.rotate=function(t,e,i){var r,n,o;return 0!==t&&(this.translate(e,i),r=t*Math.PI/180,n=Math.cos(r),o=Math.sin(r),this.queue.push([n,o,-o,n,0,0]),this.cache=null,this.translate(-e,-i)),this},h.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},h.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},h.prototype.toArray=function(){var t=this;if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var e=1;e<this.queue.length;e++)t.cache=u(t.cache,t.queue[e]);return this.cache},h.prototype.calc=function(t,e,i){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(r=this.cache)[0]+e*r[2]+(i?0:r[4]),t*r[1]+e*r[3]+(i?0:r[5])]):[t,e]};var se=h,ae={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},le=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,ce=/[\s,]+/,ue=function(t){var e,i,r=new se;return t.split(le).forEach((function(t){if(t.length){if(void 0!==ae[t])return void(e=t);switch(i=t.split(ce).map((function(t){return+t||0})),e){case"matrix":return void(6===i.length&&r.matrix(i));case"scale":return void(1===i.length?r.scale(i[0],i[0]):2===i.length&&r.scale(i[0],i[1]));case"rotate":return void(1===i.length?r.rotate(i[0],0,0):3===i.length&&r.rotate(i[0],i[1],i[2]));case"translate":return void(1===i.length?r.translate(i[0],0):2===i.length&&r.translate(i[0],i[1]));case"skewX":return void(1===i.length&&r.skewX(i[0]));case"skewY":return void(1===i.length&&r.skewY(i[0]))}}})),r},he=2*Math.PI,pe=function(t,e,i,r,n,o,s,a,l){var c=Math.sin(l*he/360),u=Math.cos(l*he/360),h=u*(t-i)/2+c*(e-r)/2,p=-c*(t-i)/2+u*(e-r)/2;if(0===h&&0===p)return[];if(0===s||0===a)return[];s=Math.abs(s),a=Math.abs(a);var m=h*h/(s*s)+p*p/(a*a);m>1&&(s*=Math.sqrt(m),a*=Math.sqrt(m));var g=d(t,e,i,r,n,o,s,a,c,u),y=[],_=g[2],x=g[3],v=Math.max(Math.ceil(Math.abs(x)/(he/4)),1);x/=v;for(var b=0;b<v;b++)y.push(f(_,x)),_+=x;return y.map((function(t){for(var e=0;e<t.length;e+=2){var i=t[e+0],r=t[e+1],n=u*(i*=s)-c*(r*=a),o=c*i+u*r;t[e+0]=n+g[0],t[e+1]=o+g[1]}return t}))},de=Math.PI/180;m.prototype.transform=function(t){var e=Math.cos(this.ax*de),i=Math.sin(this.ax*de),r=[this.rx*(t[0]*e+t[2]*i),this.rx*(t[1]*e+t[3]*i),this.ry*(-t[0]*i+t[2]*e),this.ry*(-t[1]*i+t[3]*e)],n=r[0]*r[0]+r[2]*r[2],o=r[1]*r[1]+r[3]*r[3],s=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),a=(n+o)/2;if(s<1e-10*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var l=r[0]*r[1]+r[2]*r[3],c=a+(s=Math.sqrt(s))/2,u=a-s/2;return this.ax=Math.abs(l)<1e-10&&Math.abs(c-o)<1e-10?90:180*Math.atan(Math.abs(l)>Math.abs(c-o)?(c-n)/l:l/(c-o))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)),this},m.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx};var fe=m;g.prototype.__matrix=function(t){var e,i=this;t.queue.length&&this.iterate((function(r,n,o,s){var a,l,c,u;switch(r[0]){case"v":l=0===(a=t.calc(0,r[1],!0))[0]?["v",a[1]]:["l",a[0],a[1]];break;case"V":l=(a=t.calc(o,r[1],!1))[0]===t.calc(o,s,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":l=0===(a=t.calc(r[1],0,!0))[1]?["h",a[0]]:["l",a[0],a[1]];break;case"H":l=(a=t.calc(r[1],s,!1))[1]===t.calc(o,s,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var h=t.toArray(),p=fe(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),a=t.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===o&&r[7]===s||"a"===r[0]&&0===r[6]&&0===r[7]){l=["a"===r[0]?"l":"L",a[0],a[1]];break}l=p.isDegenerate()?["a"===r[0]?"l":"L",a[0],a[1]]:[r[0],p.rx,p.ry,p.ax,r[4],r[5],a[0],a[1]];break;case"m":u=n>0,l=["m",(a=t.calc(r[1],r[2],u))[0],a[1]];break;default:for(l=[c=r[0]],u=c.toLowerCase()===c,e=1;e<r.length;e+=2)a=t.calc(r[e],r[e+1],u),l.push(a[0],a[1])}i.segments[n]=l}),!0)},g.prototype.__evaluateStack=function(){var t,e,i=this;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=se(),e=this.__stack.length;--e>=0;)t.matrix(i.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},g.prototype.toString=function(){var t,e,i=this,r=[];this.__evaluateStack();for(var n=0;n<this.segments.length;n++)e=i.segments[n][0],t=n>0&&"m"!==e&&"M"!==e&&e===i.segments[n-1][0],r=r.concat(t?i.segments[n].slice(1):i.segments[n]);return r.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},g.prototype.translate=function(t,e){return this.__stack.push(se().translate(t,e||0)),this},g.prototype.scale=function(t,e){return this.__stack.push(se().scale(t,e||0===e?e:t)),this},g.prototype.rotate=function(t,e,i){return this.__stack.push(se().rotate(t,e||0,i||0)),this},g.prototype.skewX=function(t){return this.__stack.push(se().skewX(t)),this},g.prototype.skewY=function(t){return this.__stack.push(se().skewY(t)),this},g.prototype.matrix=function(t){return this.__stack.push(se().matrix(t)),this},g.prototype.transform=function(t){return t.trim()?(this.__stack.push(ue(t)),this):this},g.prototype.round=function(t){var e,i=0,r=0,n=0,o=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":return a&&(s[1]+=n),n=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"V":case"v":return a&&(s[1]+=o),o=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"Z":case"z":return n=i,void(o=r);case"M":case"m":return a&&(s[1]+=n,s[2]+=o),n=s[1]-s[1].toFixed(t),o=s[2]-s[2].toFixed(t),i=n,r=o,s[1]=+s[1].toFixed(t),void(s[2]=+s[2].toFixed(t));case"A":case"a":return a&&(s[6]+=n,s[7]+=o),n=s[6]-s[6].toFixed(t),o=s[7]-s[7].toFixed(t),s[1]=+s[1].toFixed(t),s[2]=+s[2].toFixed(t),s[3]=+s[3].toFixed(t+2),s[6]=+s[6].toFixed(t),void(s[7]=+s[7].toFixed(t));default:return e=s.length,a&&(s[e-2]+=n,s[e-1]+=o),n=s[e-2]-s[e-2].toFixed(t),o=s[e-1]-s[e-1].toFixed(t),void s.forEach((function(e,i){i&&(s[i]=+s[i].toFixed(t))}))}})),this},g.prototype.iterate=function(t,e){var i,r,n,o=this.segments,s={},a=!1,l=0,c=0,u=0,h=0;if(e||this.__evaluateStack(),o.forEach((function(e,i){var r=t(e,i,l,c);Array.isArray(r)&&(s[i]=r,a=!0);var n=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return l=e[1]+(n?l:0),c=e[2]+(n?c:0),u=l,void(h=c);case"h":case"H":return void(l=e[1]+(n?l:0));case"v":case"V":return void(c=e[1]+(n?c:0));case"z":case"Z":return l=u,void(c=h);default:l=e[e.length-2]+(n?l:0),c=e[e.length-1]+(n?c:0)}})),!a)return this;for(n=[],i=0;i<o.length;i++)if(void 0!==s[i])for(r=0;r<s[i].length;r++)n.push(s[i][r]);else n.push(o[i]);return this.segments=n,this},g.prototype.abs=function(){return this.iterate((function(t,e,i,r){var n,o=t[0],s=o.toUpperCase();if(o!==s)switch(t[0]=s,o){case"v":return void(t[1]+=r);case"a":return t[6]+=i,void(t[7]+=r);default:for(n=1;n<t.length;n++)t[n]+=n%2?i:r}}),!0),this},g.prototype.rel=function(){return this.iterate((function(t,e,i,r){var n,o=t[0],s=o.toLowerCase();if(o!==s&&(0!==e||"M"!==o))switch(t[0]=s,o){case"V":return void(t[1]-=r);case"A":return t[6]-=i,void(t[7]-=r);default:for(n=1;n<t.length;n++)t[n]-=n%2?i:r}}),!0),this},g.prototype.unarc=function(){return this.iterate((function(t,e,i,r){var n,o,s,a=[],l=t[0];return"A"!==l&&"a"!==l?null:("a"===l?(o=i+t[6],s=r+t[7]):(o=t[6],s=t[7]),0===(n=pe(i,r,o,s,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(n.forEach((function(t){a.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),a))})),this},g.prototype.unshort=function(){var t,e,i,r,n,o=this.segments;return this.iterate((function(s,a,l,c){var u,h=s[0],p=h.toUpperCase();a&&("T"===p?(u="t"===h,"Q"===(i=o[a-1])[0]?(t=i[1]-l,e=i[2]-c):"q"===i[0]?(t=i[1]-i[3],e=i[2]-i[4]):(t=0,e=0),r=-t,n=-e,u||(r+=l,n+=c),o[a]=[u?"q":"Q",r,n,s[1],s[2]]):"S"===p&&(u="s"===h,"C"===(i=o[a-1])[0]?(t=i[3]-l,e=i[4]-c):"c"===i[0]?(t=i[3]-i[5],e=i[4]-i[6]):(t=0,e=0),r=-t,n=-e,u||(r+=l,n+=c),o[a]=[u?"c":"C",r,n,s[1],s[2],s[3],s[4]]))})),this};var me=g,ge={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ye=/([astvzqmhlc])([^astvzqmhlc]*)/gi,_e=function(t){var e=[];return t.replace(ye,(function(t,i,r){var n=i.toLowerCase();for(r=y(r),"m"===n&&r.length>2&&(e.push([i].concat(r.splice(0,2))),n="l",i="m"===i?"l":"L");r.length>=0;){if(r.length===ge[n])return r.unshift(i),e.push(r);if(r.length<ge[n])throw new Error("malformed path data");e.push([i].concat(r.splice(0,ge[n])))}})),e},xe=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,ve=function(t,e,i,r,n,o,s,a){return new _(t,e,i,r,n,o,s,a)};_.prototype={constructor:_,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=b(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=b(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),i=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),r=Math.sqrt(i.x*i.x+i.y*i.y);return r>0?{x:i.x/r,y:i.y/r}:{x:0,y:0}},getPropertiesAtLength:function(t){var e,i=b(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i),n=Math.sqrt(r.x*r.x+r.y*r.y);e=n>0?{x:r.x/n,y:r.y/n}:{x:0,y:0};var o=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i);return{x:o.x,y:o.y,tangentX:e.x,tangentY:e.y}}};var be=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],we=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Se=[[1],[1,1],[1,2,1],[1,3,3,1]],Ie=2*Math.PI,Te=function(t,e,i,r,n,o,s,a,l){var c=Math.sin(n*Ie/360),u=Math.cos(n*Ie/360),h=u*(t-a)/2+c*(e-l)/2,p=-c*(t-a)/2+u*(e-l)/2;if(0===h&&0===p)return[];if(0===i||0===r)return[];i=Math.abs(i),r=Math.abs(r);var d=h*h/(i*i)+p*p/(r*r);d>1&&(i*=Math.sqrt(d),r*=Math.sqrt(d));var f=z(t,e,a,l,o,s,i,r,c,u),m=[],g=f[2],y=f[3],_=Math.max(Math.ceil(Math.abs(y)/(Ie/4)),1);y/=_;for(var x=0;x<_;x++)m.push(k(g,y)),g+=y;return m.map((function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],o=t[e+1],s=u*(n*=i)-c*(o*=r),a=c*n+u*o;t[e+0]=s+f[0],t[e+1]=a+f[1]}return t}))},Ee=function(t,e,i,r,n,o,s,a,l){return new C(t,e,i,r,n,o,s,a,l)};C.prototype={constructor:C,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=this;t<0?t=0:t>this.length&&(t=this.length);for(var i=this.partialLengths.length-1;this.partialLengths[i]>=t&&this.partialLengths[i]>0;)i--;i<this.partialLengths.length-1&&i++;for(var r=0,n=0;n<i;n++)r+=e.partialLengths[n];return this.curves[i].getPointAtLength(t-r)},getTangentAtLength:function(t){var e=this;t<0?t=0:t>this.length&&(t=this.length);for(var i=this.partialLengths.length-1;this.partialLengths[i]>=t&&this.partialLengths[i]>0;)i--;i<this.partialLengths.length-1&&i++;for(var r=0,n=0;n<i;n++)r+=e.partialLengths[n];return this.curves[i].getTangentAtLength(t-r)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),i=this.getPointAtLength(t);return{x:i.x,y:i.y,tangentX:e.x,tangentY:e.y}}};var Ae=function(t,e,i,r){return new L(t,e,i,r)};L.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},L.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),i=(this.x1-this.x0)*e,r=(this.y1-this.y0)*e;return{x:this.x0+i,y:this.y0+r}},L.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},L.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),i=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:i.x,tangentY:i.y}};var Me=function(t){function e(t){if(!t)return null;for(var o,s=_e(t),a=[0,0],l=[0,0],c=0;c<s.length;c++)"M"===s[c][0]?(a=[s[c][1],s[c][2]],n.push(null)):"m"===s[c][0]?(a=[s[c][1]+a[0],s[c][2]+a[1]],n.push(null)):"L"===s[c][0]?(i+=Math.sqrt(Math.pow(a[0]-s[c][1],2)+Math.pow(a[1]-s[c][2],2)),n.push(new Ae(a[0],s[c][1],a[1],s[c][2])),a=[s[c][1],s[c][2]]):"l"===s[c][0]?(i+=Math.sqrt(Math.pow(s[c][1],2)+Math.pow(s[c][2],2)),n.push(new Ae(a[0],s[c][1]+a[0],a[1],s[c][2]+a[1])),a=[s[c][1]+a[0],s[c][2]+a[1]]):"H"===s[c][0]?(i+=Math.abs(a[0]-s[c][1]),n.push(new Ae(a[0],s[c][1],a[1],a[1])),a[0]=s[c][1]):"h"===s[c][0]?(i+=Math.abs(s[c][1]),n.push(new Ae(a[0],a[0]+s[c][1],a[1],a[1])),a[0]=s[c][1]+a[0]):"V"===s[c][0]?(i+=Math.abs(a[1]-s[c][1]),n.push(new Ae(a[0],a[0],a[1],s[c][1])),a[1]=s[c][1]):"v"===s[c][0]?(i+=Math.abs(s[c][1]),n.push(new Ae(a[0],a[0],a[1],a[1]+s[c][1])),a[1]=s[c][1]+a[1]):"z"===s[c][0]||"Z"===s[c][0]?(i+=Math.sqrt(Math.pow(s[0][1]-a[0],2)+Math.pow(s[0][2]-a[1],2)),n.push(new Ae(a[0],s[0][1],a[1],s[0][2])),a=[s[0][1],s[0][2]]):"C"===s[c][0]?(o=new ve(a[0],a[1],s[c][1],s[c][2],s[c][3],s[c][4],s[c][5],s[c][6]),i+=o.getTotalLength(),a=[s[c][5],s[c][6]],n.push(o)):"c"===s[c][0]?(o=new ve(a[0],a[1],a[0]+s[c][1],a[1]+s[c][2],a[0]+s[c][3],a[1]+s[c][4],a[0]+s[c][5],a[1]+s[c][6]),i+=o.getTotalLength(),a=[s[c][5]+a[0],s[c][6]+a[1]],n.push(o)):"S"===s[c][0]?(o=c>0&&["C","c","S","s"].indexOf(s[c-1][0])>-1?new ve(a[0],a[1],2*a[0]-s[c-1][s[c-1].length-4],2*a[1]-s[c-1][s[c-1].length-3],s[c][1],s[c][2],s[c][3],s[c][4]):new ve(a[0],a[1],a[0],a[1],s[c][1],s[c][2],s[c][3],s[c][4]),i+=o.getTotalLength(),a=[s[c][3],s[c][4]],n.push(o)):"s"===s[c][0]?(o=c>0&&["C","c","S","s"].indexOf(s[c-1][0])>-1?new ve(a[0],a[1],a[0]+o.d.x-o.c.x,a[1]+o.d.y-o.c.y,a[0]+s[c][1],a[1]+s[c][2],a[0]+s[c][3],a[1]+s[c][4]):new ve(a[0],a[1],a[0],a[1],a[0]+s[c][1],a[1]+s[c][2],a[0]+s[c][3],a[1]+s[c][4]),i+=o.getTotalLength(),a=[s[c][3]+a[0],s[c][4]+a[1]],n.push(o)):"Q"===s[c][0]?(o=new ve(a[0],a[1],s[c][1],s[c][2],s[c][3],s[c][4]),i+=o.getTotalLength(),n.push(o),a=[s[c][3],s[c][4]],l=[s[c][1],s[c][2]]):"q"===s[c][0]?(o=new ve(a[0],a[1],a[0]+s[c][1],a[1]+s[c][2],a[0]+s[c][3],a[1]+s[c][4]),i+=o.getTotalLength(),l=[a[0]+s[c][1],a[1]+s[c][2]],a=[s[c][3]+a[0],s[c][4]+a[1]],n.push(o)):"T"===s[c][0]?(o=c>0&&["Q","q","T","t"].indexOf(s[c-1][0])>-1?new ve(a[0],a[1],2*a[0]-l[0],2*a[1]-l[1],s[c][1],s[c][2]):new Ae(a[0],s[c][1],a[1],s[c][2]),n.push(o),i+=o.getTotalLength(),l=[2*a[0]-l[0],2*a[1]-l[1]],a=[s[c][1],s[c][2]]):"t"===s[c][0]?(o=c>0&&["Q","q","T","t"].indexOf(s[c-1][0])>-1?new ve(a[0],a[1],2*a[0]-l[0],2*a[1]-l[1],a[0]+s[c][1],a[1]+s[c][2]):new Ae(a[0],a[0]+s[c][1],a[1],a[1]+s[c][2]),i+=o.getTotalLength(),l=[2*a[0]-l[0],2*a[1]-l[1]],a=[s[c][1]+a[0],s[c][2]+a[0]],n.push(o)):"A"===s[c][0]?(o=new Ee(a[0],a[1],s[c][1],s[c][2],s[c][3],s[c][4],s[c][5],s[c][6],s[c][7]),i+=o.getTotalLength(),a=[s[c][6],s[c][7]],n.push(o)):"a"===s[c][0]&&(o=new Ee(a[0],a[1],s[c][1],s[c][2],s[c][3],s[c][4],s[c][5],a[0]+s[c][6],a[1]+s[c][7]),i+=o.getTotalLength(),a=[a[0]+s[c][6],a[1]+s[c][7]],n.push(o)),r.push(i);return e}var i=0,r=[],n=[];e.getTotalLength=function(){return i},e.getPointAtLength=function(t){var e=o(t);return n[e.i].getPointAtLength(e.fraction)},e.getTangentAtLength=function(t){var e=o(t);return n[e.i].getTangentAtLength(e.fraction)},e.getPropertiesAtLength=function(t){var e=o(t);return n[e.i].getPropertiesAtLength(e.fraction)};var o=function(t){t<0?t=0:t>i&&(t=i);for(var e=r.length-1;r[e]>=t&&r[e]>0;)e--;return e++,{fraction:t-r[e-1],i:e}};return e(t)},Pe='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',ze="flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).",ke=function(t,e){for(var i,r,n,o=t.length,s=1/0,a=0;a<o;a++)!function(n){r=0,e.forEach((function(e,i){var s=D(t[(n+i)%o],e);r+=s*s})),r<s&&(s=r,i=n)}(a);i&&(n=t.splice(0,i),t.splice.apply(t,[t.length,0].concat(n)))},Ce=function(t,e,i){void 0===i&&(i={});var r=i.maxSegmentLength;void 0===r&&(r=10);var n=i.string;void 0===n&&(n=!0);var o=tt(J(t,r),J(e,r),n);return!n||"string"!=typeof t&&"string"!=typeof e?o:function(i){return i<1e-4&&"string"==typeof t?t:1-i<1e-4&&"string"==typeof e?e:o(i)}},Le=et;et.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,s=Math.abs(Pt(t,0,o,i));if(n)for(var a=0,l=e.length;a<l;a++){var c=e[a]*i,u=a<l-1?e[a+1]*i:t.length;s-=Math.abs(Pt(t,c,u,i))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*i,d=r[a+1]*i,f=r[a+2]*i;h+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},et.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i};var De=function(t){return t},Be=function(t){if(null==t)return De;var e,i,r=t.scale[0],n=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=i=0);var l=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*r+o,u[1]=(i+=t[1])*n+s;l<c;)u[l]=t[l],++l;return u}},Fe=function(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i},Re=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return zt(t,e)}))}:zt(t,e)},Oe=function(t,e){function i(e){var i,r=t.arcs[e<0?~e:e],n=r[0];return t.transform?(i=[0,0],r.forEach((function(t){i[0]+=t[0],i[1]+=t[1]}))):i=r[r.length-1],e<0?[i,n]:[n,i]}function r(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),a.push(r)}}var n={},o={},s={},a=[],l=-1;return e.forEach((function(i,r){var n,o=t.arcs[i<0?~i:i];o.length<3&&!o[1][0]&&!o[1][1]&&(n=e[++l],e[l]=i,e[r]=n)})),e.forEach((function(t){var e,r,n=i(t),a=n[0],l=n[1];if(e=s[a])if(delete s[e.end],e.push(t),e.end=l,r=o[l]){delete o[r.start];var c=r===e?e:e.concat(r);o[c.start=e.start]=s[c.end=r.end]=c}else o[e.start]=s[e.end]=e;else if(e=o[l])if(delete o[e.start],e.unshift(t),e.start=a,r=s[a]){delete s[r.end];var u=r===e?e:r.concat(e);o[u.start=r.start]=s[u.end=e.end]=u}else o[e.start]=s[e.end]=e;else o[(e=[t]).start=a]=s[e.end=l]=e})),r(s,o),r(o,s),e.forEach((function(t){n[t<0?~t:t]||a.push([t])})),a},Ue=function(t,e){for(var i=0,r=t.length;i<r;){var n=i+r>>>1;t[n]<e?i=n+1:r=n}return i},Ve=function(t){function e(t,e){t.forEach((function(t){t<0&&(t=~t);var i=n[t];i?i.push(e):n[t]=[e]}))}function i(t,i){t.forEach((function(t){e(t,i)}))}function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach((function(t){r(t,e)})):t.type in s&&s[t.type](t.arcs,e)}var n={},o=t.map((function(){return[]})),s={LineString:e,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach((function(t){i(t,e)}))}};for(var a in t.forEach(r),n)for(var l=n[a],c=l.length,u=0;u<c;++u)for(var h=u+1;h<c;++h){var p,d=l[u],f=l[h];(p=o[d])[a=Ue(p,f)]!==f&&p.splice(a,0,f),(p=o[f])[a=Ue(p,d)]!==d&&p.splice(a,0,d)}return o},Ne=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},$e=function(t){return 1===t.length&&(t=Dt(t)),{left:function(e,i,r,n){for(null==r&&(r=0),null==n&&(n=e.length);r<n;){var o=r+n>>>1;t(e[o],i)<0?r=o+1:n=o}return r},right:function(e,i,r,n){for(null==r&&(r=0),null==n&&(n=e.length);r<n;){var o=r+n>>>1;t(e[o],i)>0?n=o:r=o+1}return r}}};$e(Ne);var qe=function(t,e){return Ft(Bt(Rt(t),t),e)},Ge=function(t,e){if(t.length>8)return t.map((function(t,e){return e}));var i=t.map((function(t){return e.map((function(e){return Ut(t,e)}))}));return Ot(t,e,i)};t.interpolate=Ce,t.separate=Vt,t.combine=Nt,t.interpolateAll=$t,t.splitPathString=Z,t.toPathString=G,t.fromCircle=Gt,t.toCircle=Zt,t.fromRect=jt,t.toRect=Xt,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));var P=function(t,e,i){return t*(1-i)+e*i},z=x((function(t,e){t.exports=function(){var t=1e3,e=6e4,i=36e5,r="millisecond",n="second",o="minute",s="hour",a="day",l="week",c="month",u="quarter",h="year",p="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(t,e,i){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(i)+t},_={s:y,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),r=Math.floor(i/60),n=i%60;return(e<=0?"+":"-")+y(r,2,"0")+":"+y(n,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var r=12*(i.year()-e.year())+(i.month()-e.month()),n=e.clone().add(r,c),o=i-n<0,s=e.clone().add(r+(o?-1:1),c);return+(-(r+(i-n)/(o?n-s:s-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:l,d:a,D:p,h:s,m:o,s:n,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},x="en",v={};v[x]=g;var b=function(t){return t instanceof T},w=function t(e,i,r){var n;if(!e)return x;if("string"==typeof e){var o=e.toLowerCase();v[o]&&(n=o),i&&(v[o]=i,n=o);var s=e.split("-");if(!n&&s.length>1)return t(s[0])}else{var a=e.name;v[a]=e,n=a}return!r&&n&&(x=n),n||!r&&x},S=function(t,e){if(b(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new T(i)},I=_;I.l=w,I.i=b,I.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var T=function(){function g(t){this.$L=w(t.locale,null,!0),this.parse(t)}var y=g.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(I.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(f);if(r){var n=r[2]-1||0,o=(r[7]||"0").substring(0,3);return i?new Date(Date.UTC(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return I},y.isValid=function(){return!(this.$d.toString()===d)},y.isSame=function(t,e){var i=S(t);return this.startOf(e)<=i&&i<=this.endOf(e)},y.isAfter=function(t,e){return S(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<S(t)},y.$g=function(t,e,i){return I.u(t)?this[e]:this.set(i,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var i=this,r=!!I.u(e)||e,u=I.p(t),d=function(t,e){var n=I.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return r?n:n.endOf(a)},f=function(t,e){return I.w(i.toDate()[t].apply(i.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),i)},m=this.$W,g=this.$M,y=this.$D,_="set"+(this.$u?"UTC":"");switch(u){case h:return r?d(1,0):d(31,11);case c:return r?d(1,g):d(0,g+1);case l:var x=this.$locale().weekStart||0,v=(m<x?m+7:m)-x;return d(r?y-v:y+(6-v),g);case a:case p:return f(_+"Hours",0);case s:return f(_+"Minutes",1);case o:return f(_+"Seconds",2);case n:return f(_+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var i,l=I.p(t),u="set"+(this.$u?"UTC":""),d=(i={},i[a]=u+"Date",i[p]=u+"Date",i[c]=u+"Month",i[h]=u+"FullYear",i[s]=u+"Hours",i[o]=u+"Minutes",i[n]=u+"Seconds",i[r]=u+"Milliseconds",i)[l],f=l===a?this.$D+(e-this.$W):e;if(l===c||l===h){var m=this.clone().set(p,1);m.$d[d](f),m.init(),this.$d=m.set(p,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[I.p(t)]()},y.add=function(r,u){var p,d=this;r=Number(r);var f=I.p(u),m=function(t){var e=S(d);return I.w(e.date(e.date()+Math.round(t*r)),d)};if(f===c)return this.set(c,this.$M+r);if(f===h)return this.set(h,this.$y+r);if(f===a)return m(1);if(f===l)return m(7);var g=(p={},p[o]=e,p[s]=i,p[n]=t,p)[f]||1,y=this.$d.getTime()+r*g;return I.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||d;var r=t||"YYYY-MM-DDTHH:mm:ssZ",n=I.z(this),o=this.$H,s=this.$m,a=this.$M,l=i.weekdays,c=i.months,u=function(t,i,n,o){return t&&(t[i]||t(e,r))||n[i].slice(0,o)},h=function(t){return I.s(o%12||12,t,"0")},p=i.meridiem||function(t,e,i){var r=t<12?"AM":"PM";return i?r.toLowerCase():r},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:I.s(a+1,2,"0"),MMM:u(i.monthsShort,a,c,3),MMMM:u(c,a),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:u(i.weekdaysMin,this.$W,l,2),ddd:u(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:I.s(o,2,"0"),h:h(1),hh:h(2),a:p(o,s,!0),A:p(o,s,!1),m:String(s),mm:I.s(s,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:n};return r.replace(m,(function(t,e){return e||f[t]||n.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,p,d){var f,m=I.p(p),g=S(r),y=(g.utcOffset()-this.utcOffset())*e,_=this-g,x=I.m(this,g);return x=(f={},f[h]=x/12,f[c]=x,f[u]=x/3,f[l]=(_-y)/6048e5,f[a]=(_-y)/864e5,f[s]=_/i,f[o]=_/e,f[n]=_/t,f)[m]||_,d?x:I.a(x)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return v[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),r=w(t,e,!0);return r&&(i.$L=r),i},y.clone=function(){return I.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),E=T.prototype;return S.prototype=E,[["$ms",r],["$s",n],["$m",o],["$H",s],["$W",a],["$M",c],["$y",h],["$D",p]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,T,S),t.$i=!0),S},S.locale=w,S.isDayjs=b,S.unix=function(t){return S(1e3*t)},S.en=v[x],S.Ls=v,S.p={},S}()}));function k(t){let e,i,g,y,_,x,v,b,w,S=t[1].format("YYYY-MM-DD")+"";return{c(){e=r("div"),i=r("h3"),g=n(S),y=o(),_=r("a"),x=r("img"),b=o(),w=r("div"),this.h()},l(t){e=s(t,"DIV",{class:!0});var r=a(e);i=s(r,"H3",{});var n=a(i);g=l(n,S),n.forEach(c),y=u(r),_=s(r,"A",{href:!0,class:!0});var o=a(_);x=s(o,"IMG",{src:!0,alt:!0}),o.forEach(c),b=u(r),w=s(r,"DIV",{class:!0,id:!0}),a(w).forEach(c),r.forEach(c),this.h()},h(){x.src!==(v="https://api.maptiler.com/resources/logo.svg")&&h(x,"src","https://api.maptiler.com/resources/logo.svg"),h(x,"alt","MapTiler logo"),h(_,"href","https://www.maptiler.com"),h(_,"class","watermark svelte-17ht0rd"),h(w,"class","map svelte-17ht0rd"),h(w,"id","map"),h(e,"class","map-wrap svelte-17ht0rd")},m(r,n){p(r,e,n),d(e,i),d(i,g),d(e,y),d(e,_),d(_,x),d(e,b),d(e,w),t[2](w)},p(t,[e]){2&e&&S!==(S=t[1].format("YYYY-MM-DD")+"")&&f(g,S)},i:m,o:m,d(i){i&&c(e),t[2](null)}}}function C(t,e,i){let r,n,o=z("2022-02-24"),s=null,a=null,l=0,c=Date.now();async function u(t){if(l+=(Date.now()-c)/1e3,c=Date.now(),console.log(l,t),a&&l<=1){const t=(e=l,a.features.map((t=>{const i=t.geometry.coordinates[0].map(((i,r)=>[P(t.properties.oldPointsMap[r][0],i[0],e),P(t.properties.oldPointsMap[r][1],i[1],e)]));return{...t,geometry:{...t.geometry,coordinates:[i]}}})));r.getSource("kherson_russia").setData(T({type:"FeatureCollection",features:t},{iterations:2}))}var e;l>2&&(a=s,(async()=>{i(1,o=o.add(1,"day")),s=await fetch(`/geojson/ukraine/${o.format("YYYY-MM-DD")}.json`).then((t=>t.json()))})().catch((t=>console.error(t))),l=0),requestAnimationFrame(u)}return g((()=>{const t=46.65581,e=32.6178,i=14;r=new v.Map({container:n,style:{version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"&copy; OpenStreetMap Contributors",maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[e,t],zoom:i,pitch:70,maxPitch:70}),r.setMaxPitch(75),r.setPitch(75),r.on("load",(function(){for(var t,e=r.getStyle().layers,i=(e=r.getStyle().layers,0);i<e.length;i++)"symbol"===e[i].type&&e[i].layout["text-field"]&&!["place_city","place_region","place_town","place_village"].includes(e[i].id)&&r.removeLayer(e[i].id);console.log(r.getStyle().layers);for(i=0;i<r.getStyle().layers.length;i++)if("building"===r.getStyle().layers[i].id){t=r.getStyle().layers[i].id;break}r.setLayoutProperty("label_country","text-field",["format",["get","name_en"],{"font-scale":1.2},"\n",{},["get","name"],{"font-scale":.8,"text-font":["literal",["libre Franklin"]]}]),r.addSource("kherson_russia",{type:"geojson",data:M}),r.addLayer({id:"kherson_russia",type:"fill",source:"kherson_russia",layout:{},paint:{"fill-color":["get","fill"],"fill-opacity":.5}},t),u(0)}))})),y((()=>{r?.remove()})),[n,o,function(t){_[t?"unshift":"push"]((()=>{n=t,i(0,n)}))}]}export default class extends t{constructor(t){super(),e(this,t,C,k,i,{})}}
